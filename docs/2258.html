<html>
<head>
<title>Deploy Your Personal Project to Cloud with Heroku and GitLab CI/CD</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Heroku和GitLab CI/CD将您的个人项目部署到云</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/deploy-your-personal-project-to-cloud-for-free-with-heroku-and-gitlab-ci-cd-a2f676e02d3?source=collection_archive---------2-----------------------#2022-07-21">https://medium.com/javarevisited/deploy-your-personal-project-to-cloud-for-free-with-heroku-and-gitlab-ci-cd-a2f676e02d3?source=collection_archive---------2-----------------------#2022-07-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><a href="https://www.java67.com/2022/06/cloud-computing-interview-questions.html"><div class="er es if"><img src="../Images/c34350d2284936b726c390d552efd5a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vQ1DjRhtUemx1B57"/></div></a><p class="im in et er es io ip bd b be z dx translated">使用Heroku将您的项目部署到云中。(照片由<a class="ae iq" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae iq" href="https://unsplash.com/@enginakyurt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> engin akyurt </a>拍摄)</p></figure><p id="464b" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">如果你有那个<em class="jp">一百万美元的想法</em>，并且你现在正在寻找一种方法来部署你的个人电脑应用程序，这篇文章可能会派上用场！</p><p id="5903" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">另一方面，如果你是一名初级开发人员，试图通过一些个人项目来丰富你的简历，并在此过程中提高你的开发技能，这也是适合你的地方:)</p><p id="7eac" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">在本文中，<strong class="it hj">我们将学习如何使用Heroku </strong>的免费托管解决方案将应用程序部署到云中。</p><p id="86e7" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">之后，<strong class="it hj">我们将创建一个小的</strong> <a class="ae iq" rel="noopener" href="/javarevisited/7-best-courses-to-learn-jenkins-and-ci-cd-for-devops-engineers-and-software-developers-df2de8fe38f3"> <strong class="it hj"> CI/CD管道</strong> </a> <strong class="it hj"> </strong>并配置部署阶段。</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h2 id="b7f8" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jc ki kj kk jg kl km kn jk ko kp kq kr bi translated">1.概观</h2><p id="6234" class="pw-post-body-paragraph ir is hi it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hb bi translated">对于下面的步骤，我们将配置一个<a class="ae iq" rel="noopener" href="/javarevisited/10-best-java-microservices-courses-with-spring-boot-and-spring-cloud-6d04556bdfed"> Spring Boot </a>应用程序的部署。为此，我们将使用Heroku Maven插件，并在GitLab中创建一个小管道。</p><p id="2200" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">不过，你可以通读这篇文章，并根据你的技术栈调整大部分步骤。</p><p id="fa93" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">让我们直接开始吧！</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h2 id="ffd6" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jc ki kj kk jg kl km kn jk ko kp kq kr bi translated">2.创建Heroku项目</h2><p id="95ab" class="pw-post-body-paragraph ir is hi it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hb bi translated">首先，我们需要一个Heroku项目。要创建它，只需注册或登录<a class="ae iq" href="https://dashboard.heroku.com/apps" rel="noopener ugc nofollow" target="_blank"> Heroku </a>并转到<em class="jp"> New &gt; Create new app。</em></p><figure class="ky kz la lb fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2020/05/top-20-spring-boot-interview-questions-answers.html"><div class="er es kx"><img src="../Images/90d34cd1667bc06e86bfc0bf579b8490.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bam4awjTzfzqnVVyw7jZtA.png"/></div></a><p class="im in et er es io ip bd b be z dx translated">前往新建&gt;创建新应用程序</p></figure><p id="8335" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">之后，输入你的应用程序的名称，并选择一个地区。然后，点击<em class="jp">创建应用程序。</em></p><figure class="ky kz la lb fd ij er es paragraph-image"><a href="https://www.java67.com/2012/08/spring-interview-questions-answers.html"><div class="er es lc"><img src="../Images/62178648ef225655db8c108858115910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pCRa3sGcBAPaEFO5JrR3BQ.png"/></div></a></figure><p id="7b82" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">就这样，你的Heroku项目创建完成了！</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h2 id="1f4e" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jc ki kj kk jg kl km kn jk ko kp kq kr bi translated">3.设置Heroku Maven插件</h2><p id="e32f" class="pw-post-body-paragraph ir is hi it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hb bi translated">如果我们转到Heroku的<em class="jp">部署</em>选项卡，我们已经可以看到三个简单且记录良好的应用部署选项。</p><figure class="ky kz la lb fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2019/03/top-5-course-to-learn-apache-maven-for.html"><div class="er es ld"><img src="../Images/f84d186c3b33a6b1198829b79f5d41e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H81nkuZBtL1-WP0MrNIQGA.png"/></div></a></figure><p id="d355" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">尽管如此，我们还是使用Heroku  <a class="ae iq" href="https://javarevisited.blogspot.com/2016/08/top-10-maven-plugins-every-java-developer-know.html" rel="noopener ugc nofollow" target="_blank"> <strong class="it hj"> Maven插件</strong> </a> <strong class="it hj">来代替。这将允许我们从CI/CD管道触发部署。</strong></p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h2 id="8647" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jc ki kj kk jg kl km kn jk ko kp kq kr bi translated">3.1 pom.xml</h2><p id="d35e" class="pw-post-body-paragraph ir is hi it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hb bi translated">首先，让我们将插件添加到我们的<em class="jp"> pom.xml </em>文件中:</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h2 id="5f64" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jc ki kj kk jg kl km kn jk ko kp kq kr bi translated">3.2系统属性</h2><p id="9b1d" class="pw-post-body-paragraph ir is hi it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hb bi translated">正如你所注意到的，我们正试图在这个项目中使用java 17。默认情况下，Heroku会尝试使用<a class="ae iq" href="https://www.java67.com/2018/08/top-10-free-java-courses-for-beginners-experienced-developers.html" rel="noopener ugc nofollow" target="_blank"> java 8 </a>。</p><p id="9b16" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">因此，如果你想使用较新版本的java，你需要添加一个具有以下属性的<strong class="it hj"><em class="jp">system . properties</em></strong>文件:</p><pre class="ky kz la lb fd lg lh li lj aw lk bi"><span id="70fa" class="jx jy hi lh b fi ll lm l ln lo">java.runtime.version=17.0.3</span></pre><p id="f565" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">你可以阅读Heroku的文档来查看你的配置到底支持哪些java版本。</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h2 id="753b" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jc ki kj kk jg kl km kn jk ko kp kq kr bi translated">3.3 Procfile</h2><p id="0cff" class="pw-post-body-paragraph ir is hi it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hb bi translated">此外，Heroku将需要另一个配置文件来了解如何启动应用程序。</p><p id="26fc" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">我们必须添加一个名为<strong class="it hj">Procfile</strong>T12】的文件(没有扩展名)。在里面，我们可以根据需要添加<a class="ae iq" href="https://www.java67.com/2016/08/10-jvm-options-for-java-production-application.html" rel="noopener ugc nofollow" target="_blank"> JVM参数</a>。例如，我使用的<em class="jp"> Procfile </em>有以下内容:</p><pre class="ky kz la lb fd lg lh li lj aw lk bi"><span id="d34d" class="jx jy hi lh b fi ll lm l ln lo">web: java $JAVA_OPTS -Dserver.port=$PORT -jar target/*.jar</span></pre><p id="b47d" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">要阅读更多关于<em class="jp"> Procfile </em>的内容，请查阅<a class="ae iq" href="https://devcenter.heroku.com/articles/procfile" rel="noopener ugc nofollow" target="_blank"> Heroku的官方指南</a>。</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h2 id="e512" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jc ki kj kk jg kl km kn jk ko kp kq kr bi translated">4.从本地机器部署到Heroku</h2><p id="f239" class="pw-post-body-paragraph ir is hi it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hb bi translated">首先，你需要找到你的Heroku API密匙。为此，在Heroku平台上进入<a class="ae iq" href="https://dashboard.heroku.com/account" rel="noopener ugc nofollow" target="_blank">你的个人资料</a>，然后向下滚动到<em class="jp"> API键:</em></p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lp"><img src="../Images/18c964a53d8c753a8def6115df25d629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VMg15gdf7HeNLYE3fkP5CQ.png"/></div></div></figure><p id="62d3" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">现在我们都准备好了。要从本地机器部署应用程序，我们需要运行:</p><pre class="ky kz la lb fd lg lh li lj aw lk bi"><span id="6fe3" class="jx jy hi lh b fi ll lm l ln lo">$ HEROKU_API_KEY="xxx-xxx-xxxx" mvn heroku:deploy</span></pre><p id="737b" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">恭喜你！您刚刚第一次部署了您的应用。</p><p id="f174" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">您可以在终端中看到部署日志。此外，您可以访问Heroku仪表盘，查看最新活动，您会发现更多日志:</p><figure class="ky kz la lb fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2021/03/best-courses-to-learn-gitlab-cicd-for-devops.html"><div class="er es lu"><img src="../Images/6bca78cf735fcdb277ed7df7a5fc8666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*45WnjYumEYYJLN7V3EKMOA.png"/></div></a></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h2 id="b975" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jc ki kj kk jg kl km kn jk ko kp kq kr bi translated">5.创建GitLab CI/CD管道</h2><p id="1d06" class="pw-post-body-paragraph ir is hi it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hb bi translated">让我们从在<a class="ae iq" rel="noopener" href="/javarevisited/7-best-courses-to-learn-gitlab-for-developers-and-devops-engineers-10d4de4ae206"> GitLab </a>中添加<em class="jp"> Heroku API键</em>作为CI/CD管道的变量开始。</p><p id="ee28" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">要做到这一点，从你的库开始，进入<em class="jp">设置&gt; CI/CD &gt;变量，</em>点击<em class="jp">添加变量</em>按钮，将你的API密匙粘贴到表单中。</p><figure class="ky kz la lb fd ij er es paragraph-image"><a href="https://medium.com/javarevisited/top-10-free-courses-to-learn-jenkins-docker-and-kubernetes-for-devops-in-2020-best-of-lot-62a0541ffeb3"><div class="er es lv"><img src="../Images/3e98c099f05d8b917695b668f58f2133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-MmBdD7ioTmndaGLKCbeLA.png"/></div></a></figure><p id="af8a" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">最后，让我们为部署创建管道阶段。</p><p id="e31e" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">因为我们使用的是GitLab，所以这将通过<strong class="it hj">来完成。gitlab-cy.yml </strong>文件:</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="1abc" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">之后，转到<em class="jp"> CI/CD &gt; Pipelines </em>并点击最新创建的管道。您应该已经看到了yml文件中指定的<em class="jp">测试</em>和<em class="jp">部署</em>阶段。如果测试通过，您现在就可以从GitLab手动触发部署了。</p><figure class="ky kz la lb fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2020/06/top-5-courses-to-learn-kubernetes-for-devops-and-certification.html"><div class="er es lw"><img src="../Images/d4f3469fde491c27b56263684f0a6086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*agjhWRVJOruoA6vPRqNqJw.png"/></div></a></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h2 id="2761" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jc ki kj kk jg kl km kn jk ko kp kq kr bi translated">6.结论</h2><p id="e03d" class="pw-post-body-paragraph ir is hi it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hb bi translated">在本文中，我们学习了如何使用Heroku和Heroku maven插件将Maven应用程序部署到云中。</p><p id="45ce" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">因为我们使用maven进行部署，所以将流程转移到GitLab CI/CD管道非常容易。</p><p id="11ba" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">这种设置非常适合小型个人项目和概念验证应用。</p><p id="1abf" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">此外，这个实践练习可以成为初级开发人员习惯使用GitLab的CI/CD管道的一个很好的切入点。</p></div></div>    
</body>
</html>