<html>
<head>
<title>Dockerizing a Spring Boot Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Spring Boot的申请归档</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/dockerizing-a-spring-boot-application-47842f7142b1?source=collection_archive---------0-----------------------#2020-05-08">https://medium.com/javarevisited/dockerizing-a-spring-boot-application-47842f7142b1?source=collection_archive---------0-----------------------#2020-05-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0912" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">久别之后的问候😄，我终于有时间解释如何对Spring Boot的申请进行归档。</p><p id="5575" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如你所知，我先写了这篇文章:<a class="ae jd" rel="noopener" href="/quick-code/a-brief-information-about-docker-3b34446590cd"> <strong class="ih hj"> <em class="je">《码头工人简介》</em> </strong> </a>。最好先阅读这篇文章，因为它包含了每个开发人员都应该知道的简要信息💻。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/ad98fc59537e3d56e10f011960c6eb6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DKdQxaK4PIsbMDbN"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">帕特里克·布林克斯马在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="cb6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你读了前一篇文章，你就准备好学习使用Docker和Spring Boot。</p><p id="f3c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从现在开始，我将假设您已经在自己的计算机上安装了Docker。</p><p id="77c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我将告诉你如何使用<a class="ae jd" rel="noopener" href="/javarevisited/top-15-online-courses-to-learn-docker-kubernetes-and-aws-for-fullstack-developers-and-devops-d8cc4f16e773"> Docker </a>和<a class="ae jd" rel="noopener" href="/javarevisited/10-advanced-spring-boot-courses-for-experienced-java-developers-5e57606816bd?source=collection_home---4------0-----------------------"> Spring Boot </a>，并给出一个使用Spring Boot和Docker的例子。</p><ul class=""><li id="1b91" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">这里使用了用于开发REST APIs的Spring Boot和Spring数据项目。</li><li id="e949" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">Maven用于自动化构建过程。</li><li id="d387" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">使用典型的领域驱动开发方法，分离模型、存储库、服务和控制器类。</li></ul><p id="3dc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以从这个<a class="ae jd" href="https://github.com/ragcrix/LibraryInformationSystem" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> GitHub链接</strong> </a> <strong class="ih hj">下载项目源代码。</strong></p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="5997" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">技术和工具</h1><p id="5f91" class="pw-post-body-paragraph if ig hi ih b ii lo ik il im lp io ip iq lq is it iu lr iw ix iy ls ja jb jc hb bi translated"><strong class="ih hj">在<a class="ae jd" rel="noopener" href="/javarevisited/how-to-use-project-lombok-with-spring-boot-ac84bd6047d1">本教程</a> <strong class="ih hj"> </strong>中开发的图书馆信息系统</strong>在本帖中有详细说明。关于这个项目的更多细节，你可以点击<a class="ae jd" rel="noopener" href="/javarevisited/how-to-use-project-lombok-with-spring-boot-ac84bd6047d1">这个链接</a>。</p><p id="9276" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里的教程使用了<a class="ae jd" href="https://www.jetbrains.com/idea/" rel="noopener ugc nofollow" target="_blank"> IntelliJ IDEA </a>、<a class="ae jd" href="https://maven.apache.org/" rel="noopener ugc nofollow" target="_blank"> Maven </a>和<a class="ae jd" rel="noopener" href="/javarevisited/top-5-free-courses-to-learn-docker-for-beginners-best-of-lot-b2b1ad2b98ad"> Docker </a>。我正在使用PowerShell运行Windows 10。</p><p id="985a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所有软件都是用Java写的，用的是Spring 5.2和Spring Boot 2.2.2，内存H2数据库用于持久化。</p><p id="7a5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从这里开始，我假设你已经安装了JDK 13.0、<a class="ae jd" href="https://itnext.io/top-5-intellijidea-and-android-studio-courses-for-java-and-android-programmers-afcc27309b60" rel="noopener ugc nofollow" target="_blank"> IntelliJ </a>、<a class="ae jd" rel="noopener" href="/javarevisited/top-10-free-courses-to-learn-maven-jenkins-and-docker-for-java-developers-51fa7a1e66f6?source=collection_home---4------3-----------------------"> Maven </a>和<a class="ae jd" rel="noopener" href="/@javinpaul/10-free-courses-to-learn-docker-and-devops-for-frontend-developers-691ac7652cee"> Docker </a>。</p><p id="d6e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在这里的目标是展示如何在不打乱业务逻辑的情况下以简单的方式使用Docker。</p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><p id="76e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi lt translated">一个Spring Boot应用程序可以用两种最常用的方法来分类。</p><ul class=""><li id="90e0" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated"><strong class="ih hj"> Dockerfile: </strong>它包含构建映像的本地Docker命令。</li><li id="e582" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">它有一个插件来构建图像。</li></ul><h1 id="b2a1" class="kq kr hi bd ks kt mc kv kw kx md kz la lb me ld le lf mf lh li lj mg ll lm ln bi translated">使用Dockerfile归档</h1><p id="0296" class="pw-post-body-paragraph if ig hi ih b ii lo ik il im lp io ip iq lq is it iu lr iw ix iy ls ja jb jc hb bi translated">“一个<code class="du mh mi mj mk b">Dockerfile</code>是一个文本文档，它包含用户可以在命令行上调用的所有命令来组合一个图像”。用户可以编写命令在Dockerfile上构建映像。</p><p id="ea44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的示例<code class="du mh mi mj mk b">Dockerfile</code>如下所示。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="ml mm l"/></div><p class="jr js et er es jt ju bd b be z dx translated">Dockerfile文件</p></figure><p id="cc96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的<code class="du mh mi mj mk b">Dockerfile</code>有四个命令。4️⃣</p><ul class=""><li id="0bf7" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated"><code class="du mh mi mj mk b">FROM</code>命令用于设置基础图像。在我们的<code class="du mh mi mj mk b">Dockerfile</code>，是<code class="du mh mi mj mk b">openjdk:13-jdk-alpine</code>。</li><li id="6ed9" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><code class="du mh mi mj mk b">ARG</code>命令用于在构建时将已定义的变量传递给构建器。这种情况下，就是我们的<code class="du mh mi mj mk b">.jar</code>文件。</li><li id="ed3b" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><code class="du mh mi mj mk b">COPY</code>命令将指定文件复制到图像中。这种情况下。我们创建的<code class="du mh mi mj mk b">.jar</code>文件将被复制到基础映像。</li><li id="3588" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><code class="du mh mi mj mk b">ENTRYPOINT</code>用于如何执行容器内部的应用程序。</li></ul><p id="6789" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">准备好<code class="du mh mi mj mk b">Dockerfile</code>之后，应该运行<code class="du mh mi mj mk b">maven package</code>命令来创建<code class="du mh mi mj mk b">.jar</code>文件。因为<code class="du mh mi mj mk b">Dockerfile</code>运行时需要这个<code class="du mh mi mj mk b">.jar</code>文件。💻</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mn"><img src="../Images/89794bafbcfa94a44d65ac2cc2cc499d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZbXhkxwY8lprk_EZwzkw4g.jpeg"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">构建结果</p></figure><p id="a05e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成所有工作后，您可以使用IntelliJ中的<code class="du mh mi mj mk b">Dockerfile</code>运行或调试应用程序。我使用了IntelliJ，但是如果你愿意，你可以手动完成这些步骤。为此，应使用<code class="du mh mi mj mk b">docker build</code>和<code class="du mh mi mj mk b">docker run</code>命令。您可以点击<a class="ae jd" href="https://docs.docker.com/engine/reference/builder/" rel="noopener ugc nofollow" target="_blank">此链接</a>了解更多信息。</p><p id="38be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以看到我们的应用程序的运行映像和容器。😃</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mo"><img src="../Images/851f29baad4c4d186f15632004977216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PcS4Q1Uuy6ZxS0Yn7V9Urw.jpeg"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">Docker图像</p></figure><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mp"><img src="../Images/a56a8e84849d34e50c67d3e1ae6b3c32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o4qWHOw0VEfInI4FdhHOWA.jpeg"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">码头集装箱</p></figure><h1 id="ac77" class="kq kr hi bd ks kt mc kv kw kx md kz la lb me ld le lf mf lh li lj mg ll lm ln bi translated">与Maven对接</h1><p id="7e0a" class="pw-post-body-paragraph if ig hi ih b ii lo ik il im lp io ip iq lq is it iu lr iw ix iy ls ja jb jc hb bi translated">Spring Boot应用程序也可以使用Maven进行dockerized。有几个插件用于将应用程序归档。</p><p id="e701" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中之一就是<strong class="ih hj"> Spotify </strong>插件。🎵在这篇文章中，使用了这个插件。你可以在下面看到我们Maven插件的配置。这个插件应该加在<code class="du mh mi mj mk b">&lt;build&gt; &lt;/build&gt;</code>标签之间。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="ml mm l"/></div><p class="jr js et er es jt ju bd b be z dx translated">pom.xml</p></figure><p id="e9e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如你所见，使用了<code class="du mh mi mj mk b">&lt;baseImage&gt;</code>和<code class="du mh mi mj mk b">&lt;entryPoint&gt;</code>标签。这些标签分别具有与Dockerfile的<code class="du mh mi mj mk b">FROM</code>和<code class="du mh mi mj mk b">ENTRYPOINT</code>命令相同的用途。</p><p id="2cc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">配置完成后，我们可以运行下面的命令来创建应用程序的映像。</p><pre class="jg jh ji jj fd mq mk mr ms aw mt bi"><span id="5dd4" class="mu kr hi mk b fi mv mw l mx my">mvn clean package docker:build</span></pre><p id="914d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，创建的docker图像可以用下面的命令显示。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mo"><img src="../Images/851f29baad4c4d186f15632004977216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PcS4Q1Uuy6ZxS0Yn7V9Urw.jpeg"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">Docker图像</p></figure><p id="aa57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，您应该使用<code class="du mh mi mj mk b">docker run ...</code>命令来运行该映像。🏃</p><p id="5085" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此应用程序创建的容器如下所示。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mp"><img src="../Images/a56a8e84849d34e50c67d3e1ae6b3c32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o4qWHOw0VEfInI4FdhHOWA.jpeg"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">码头集装箱</p></figure></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="7ded" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">邮递员测试</h1><p id="85d4" class="pw-post-body-paragraph if ig hi ih b ii lo ik il im lp io ip iq lq is it iu lr iw ix iy ls ja jb jc hb bi translated">你可以很容易地运行这个项目来测试<a class="ae jd" rel="noopener" href="/javarevisited/why-spring-is-the-best-framework-for-developing-rest-apis-in-java-784590e484a4"> REST服务</a>。</p><p id="b798" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当然，您应该运行创建的docker映像来测试REST服务。😃</p><p id="6e66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想把这本书添加到图书馆信息系统中，你可以使用项目根目录下的<em class="je"> data.json </em>。</p><p id="c239" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行项目后，您可以测试REST服务。为此，打开<a class="ae jd" href="https://javarevisited.blogspot.com/2020/02/top-5-postman-tutorials-and-courses-for-web-developers.html" rel="noopener ugc nofollow" target="_blank"> Postman </a>，输入URL，选择<strong class="ih hj"> GET </strong>方法，如下图。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mz"><img src="../Images/2c5b7227ed1ca44c04c1212fd25ae286.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FI7zg1bG-WLu_bpnYKmERQ.png"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">书单</p></figure><p id="f0da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，在数据库中输入带有图书名称的链接。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mz"><img src="../Images/047b436a38f2eaf05ea7e5b3e059ab29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*382LsWAiuzVvfiJ5syNGzQ.png"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">弗兰肯斯坦</p></figure><p id="bf9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在Postman中用<strong class="ih hj"> POST </strong>方法给系统添加一本书。首先要输入<strong class="ih hj"><em class="je">Content-Type:application/JSON</em></strong>header键值对。其次，在body选项卡中，您必须输入想要以JSON格式保存数据库的图书信息。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mz"><img src="../Images/f1dbd9db2b38c49ba0d81405ac91d464.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J2f6ntMc01EekS7gcfRvFA.png"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">添加图书</p></figure><p id="aa14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果要删除一本书，要在Postman中选择<strong class="ih hj"> DELETE </strong>方法，在链接末尾添加一个想要删除的书名。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mz"><img src="../Images/af80a6989464f8f5f8cc2df981ca0f24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OMMrt3OY3dbGUwhJoz64aw.png"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">删除图书</p></figure></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="5b23" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">资源</h1><ul class=""><li id="b1d1" class="jv jw hi ih b ii lo im lp iq na iu nb iy nc jc ka kb kc kd bi translated"><a class="ae jd" href="https://spring.io/" rel="noopener ugc nofollow" target="_blank">https://spring.io/</a></li><li id="e58b" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><a class="ae jd" href="https://docs.docker.com/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/</a></li><li id="d8be" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><a class="ae jd" rel="noopener" href="/javarevisited/10-free-spring-boot-tutorials-and-courses-for-java-developers-53dfe084587e">面向初学者的免费Spring Boot课程</a></li><li id="58e1" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><a class="ae jd" rel="noopener" href="/javarevisited/top-5-free-courses-to-learn-docker-for-beginners-best-of-lot-b2b1ad2b98ad">面向初学者的免费Docker课程</a></li></ul></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><p id="5a82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>本教程主要讲述如何以一种简单的方式对Spring Boot应用程序进行dockerize。</p></div></div>    
</body>
</html>