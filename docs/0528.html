<html>
<head>
<title>Data processing -Execute functions in parallel threads — java8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据处理—在并行线程中执行功能— java8</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/data-processing-execute-functions-in-parallel-threads-java8-14cef4390853?source=collection_archive---------7-----------------------#2020-06-18">https://medium.com/javarevisited/data-processing-execute-functions-in-parallel-threads-java8-14cef4390853?source=collection_archive---------7-----------------------#2020-06-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="326a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">减少数据处理时间并更快地获得结果，成为开发人员一生的座右铭。🤦‍♂️🤷‍♂ ️In是一个微服务架构，我们经常需要将一个POJO对象转换成另一个。因此性能在软件开发生命周期中起着至关重要的作用。</p><p id="b82f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇博客中，我们将介绍parallelStream()的java8的一个特性。在此之前，我们先了解一下parallelStream的概念以及Stream()和parallelStream()的区别。</p><p id="8970" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">🔊大多数现代操作系统将单线程应用程序划分到多个内核上(同一线程的某些部分可能会在几个内核上运行，但当然不会同时运行)。<a class="ae jk" rel="noopener" href="/javarevisited/7-best-java-tutorials-and-books-to-learn-lambda-expression-and-stream-api-and-other-features-3083e6038e14">并行流</a>利用计算机的多个内核，将提供的任务分成多个，在不同的线程中运行。</p><p id="5074" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">另一方面，顺序流的工作方式就像使用单核的for-loop。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><a href="https://medium.com/javarevisited/top-5-courses-to-learn-new-features-of-java-8-to-java-13-107eb51d2a13"><div class="er es jl"><img src="../Images/b3722498fca7636dea4010de5d271470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mt8ejw6IyuLAm42_zGf6Dw.png"/></div></a></figure><p id="7587" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，我们有OrderVo.class，它也包含关于支付的信息，我们需要准备<code class="du jt ju jv jw b">PaymentVo.class</code>来传递支付微服务，但是如果当时我们在<code class="du jt ju jv jw b">List&lt;OrderVo&gt;? </code>中有数百万个订单对象，为了有效地利用内存，我们可以使用parallelStream()和fork-join池来获得更快的输出。</p><p id="241f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们看看下面的代码片段，它有两个输入(主要)，一个是输入数据的集合，第二个是将输入转换为输出格式的函数名。</p><pre class="jm jn jo jp fd jx jw jy jz aw ka bi"><span id="68eb" class="kb kc hi jw b fi kd ke l kf kg"><strong class="jw hj">public static </strong>&lt;T, E&gt; List&lt;E&gt; executeFunctionsInParallelThreads(Collection&lt;T&gt; collectionInput, Function&lt;T, E&gt; functionOfClass, <strong class="jw hj">int </strong>parallelThreads){<br/>   List&lt;E&gt; responseList = <strong class="jw hj">null</strong>;<br/>   <strong class="jw hj">if</strong>(collectionInput == <strong class="jw hj">null </strong>|| collectionInput.isEmpty()){<br/>      <strong class="jw hj">return </strong>responseList;<br/>   }<br/>   Stream&lt;E&gt; stream = collectionInput.parallelStream().map(functionOfClass);<br/>   Callable&lt;List&lt;E&gt;&gt; task = () -&gt; stream.collect(Collectors.<em class="kh">toList</em>());<br/>   ForkJoinPool forkJoinPool = <strong class="jw hj">new </strong>ForkJoinPool(parallelThreads);<br/>   <strong class="jw hj">try </strong>{<br/>      responseList = forkJoinPool.submit(task).get();<br/>   } <strong class="jw hj">catch </strong>(Exception e) {<br/>      e.printStackTrace();<br/>   }<br/>   <strong class="jw hj">return </strong>responseList;<br/>}</span></pre><p id="0ac6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下面是根据我们的示例调用上述函数的调用部分。✔</p><pre class="jm jn jo jp fd jx jw jy jz aw ka bi"><span id="1c27" class="kb kc hi jw b fi kd ke l kf kg"><em class="kh">// fetchOrderList() which provides list of Order data<br/></em><strong class="jw hj">List&lt;OrderVo&gt; orderVoList = fetchOrderList();</strong><br/><em class="kh">// convertOrderToPayment() which has logic to convert orderVo to PaymentVo, here 5 is number of parallel threads to be executed<br/></em><strong class="jw hj">List&lt;PaymentVo&gt; paymentList = <em class="kh">executeFunctionsInParallelThreads</em>(orderVoList, convertOrderToPayment, 5);</strong><br/><em class="kh">// second example where convertOrderToPayment() method from PaymentVoConverter class</em><strong class="jw hj"><em class="kh"><br/></em>List&lt;PaymentVo&gt; paymentList = <em class="kh">executeFunctionsInParallelThreads</em>(orderVoList, PaymentVoConverter::convertOrderToPayment, 5);</strong></span></pre><p id="2bcc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">要了解更多关于parallelStream()和ForkJoinPool的信息，您可以点击下面的链接。</p><p id="d3db" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">感谢阅读。享受…！！！😊😊</p><div class="ki kj ez fb kk kl"><a href="https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html" rel="noopener  ugc nofollow" target="_blank"><div class="km ab dw"><div class="kn ab ko cl cj kp"><h2 class="bd hj fi z dy kq ea eb kr ed ef hh bi translated">平行</h2><div class="ks l"><h3 class="bd b fi z dy kq ea eb kr ed ef dx translated">并行计算包括将一个问题分成子问题，同时解决这些问题(并行地…</h3></div><div class="kt l"><p class="bd b fp z dy kq ea eb kr ed ef dx translated">docs.oracle.com</p></div></div></div></a></div><div class="ki kj ez fb kk kl"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html" rel="noopener  ugc nofollow" target="_blank"><div class="km ab dw"><div class="kn ab ko cl cj kp"><h2 class="bd hj fi z dy kq ea eb kr ed ef hh bi translated">ForkJoinPool (Java平台SE 8)</h2><div class="ks l"><h3 class="bd b fi z dy kq ea eb kr ed ef dx translated">ForkJoinPool不同于其他类型的ExecutorService，主要是因为它使用了工作窃取:所有线程在…</h3></div><div class="kt l"><p class="bd b fp z dy kq ea eb kr ed ef dx translated">docs.oracle.com</p></div></div></div></a></div><div class="ki kj ez fb kk kl"><a rel="noopener follow" target="_blank" href="/hackernoon/top-5-java-8-courses-to-learn-online-2db57d9dfb8d"><div class="km ab dw"><div class="kn ab ko cl cj kp"><h2 class="bd hj fi z dy kq ea eb kr ed ef hh bi translated">在线学习的5大Java 8课程</h2><div class="ks l"><h3 class="bd b fi z dy kq ea eb kr ed ef dx translated">Java 8推出已经四年多了，你们中的许多人已经把Java 8当成了遗产…</h3></div><div class="kt l"><p class="bd b fp z dy kq ea eb kr ed ef dx translated">medium.com</p></div></div><div class="ku l"><div class="kv l kw kx ky ku kz jr kl"/></div></div></a></div></div></div>    
</body>
</html>