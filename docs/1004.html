<html>
<head>
<title>Java Annotations 101</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java注释101</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/java-annotations-101-cd4d01e1470a?source=collection_archive---------1-----------------------#2021-02-14">https://medium.com/javarevisited/java-annotations-101-cd4d01e1470a?source=collection_archive---------1-----------------------#2021-02-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9616" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解主要的Java注释以及如何使用它们</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/cf2914ebc3f5b6a8faba1ca07aeff96c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*si8rjrJFWXtEV6KU.png"/></div></div></figure><p id="d727" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">🍎如果你曾经看过Java代码库，你很有可能在方法或类之前看到类似于<code class="du jp jq jr js b">@Override</code>或类似的标签。这些标签被称为<strong class="ih hj">注释</strong>。批注是元数据标记，有助于为类、接口、方法或字段定义附加信息。注释不会给功能代码增加额外的实现，但是有助于提供额外的信息，如:</p><ul class=""><li id="c711" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated"><strong class="ih hj">编译器信息</strong> —编译器可以使用注释来捕捉错误或抑制警告。</li><li id="1634" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><strong class="ih hj">给开发人员的信息</strong> —当有人查看代码时，注释有助于使代码可读性更强，更容易理解。</li><li id="80d8" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><strong class="ih hj">编译和部署时间处理</strong> —软件工具可以处理注释以生成代码、XML文件等。</li><li id="752b" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><strong class="ih hj">运行时处理</strong> —可以在运行时检查注释以运行测试。</li></ul><p id="f775" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">☕️ Java有一个完整的预定义注释列表，甚至允许你定义自己的注释。这里列出了最广泛使用和最重要的注释。</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="310a" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated"><strong class="ak">预定义注释</strong></h1><h2 id="930f" class="lm kp hi bd kq ln lo lp ku lq lr ls ky iq lt lu lc iu lv lw lg iy lx ly lk lz bi translated"><a class="ae ma" href="https://javarevisited.blogspot.com/2012/11/why-use-override-annotation-in-java.html#axzz5WKm9BB8F" rel="noopener ugc nofollow" target="_blank">@覆盖</a></h2><p id="0211" class="pw-post-body-paragraph if ig hi ih b ii mb ik il im mc io ip iq md is it iu me iw ix iy mf ja jb jc hb bi translated">🏎<code class="du jp jq jr js b">@Override</code>注释通知编译器子类元素正在覆盖父类或超类元素。虽然在<a class="ae ma" href="https://www.java67.com/2019/04/difference-between-overloading-overriding-hiding-shadowing-and-obscuring-in-java-oop.html" rel="noopener ugc nofollow" target="_blank">覆盖方法</a>时不要求使用这个注释，但它有助于防止错误。如果用override标记的方法无法正确地重写超类方法，编译器将生成一个错误。</p><pre class="je jf jg jh fd mg js mh mi aw mj bi"><span id="d7d7" class="lm kp hi js b fi mk ml l mm mn">class Avatar {</span><span id="6e03" class="lm kp hi js b fi mo ml l mm mn">    public void destroyEvil() { ... }          // overridden method<br/>}</span><span id="ece5" class="lm kp hi js b fi mo ml l mm mn"><br/>class Aang extends Avatar {<!-- --> </span><span id="2064" class="lm kp hi js b fi mo ml l mm mn">    @Override                                   // overriding method<br/>    public void destroyEvil() { ... }<br/>}</span></pre><h2 id="7bda" class="lm kp hi bd kq ln lo lp ku lq lr ls ky iq lt lu lc iu lv lw lg iy lx ly lk lz bi translated">@ SuppressWarnings</h2><p id="d313" class="pw-post-body-paragraph if ig hi ih b ii mb ik il im mc io ip iq md is it iu me iw ix iy mf ja jb jc hb bi translated">如果你阅读⚠️编译器警告，会有所帮助，但是它们经常在终端中制造噪音。<code class="du jp jq jr js b"><a class="ae ma" href="https://javarevisited.blogspot.com/2015/09/what-is-suppresswarnings-annotation-in-java-unchecked-raw-serial.html" rel="noopener ugc nofollow" target="_blank">@SuppressWarnings</a></code>会压制那些警告。Java编译器可以抛出大量警告，但是使用<code class="du jp jq jr js b">@SuppressWarnings,</code>可以隐藏所有警告或者选择想要隐藏的警告。</p><p id="047e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jp jq jr js b">@SuppressWarnings({“unchecked”, “deprecated”})</code>将抑制<em class="mp">未选中的</em>和<em class="mp">已弃用的</em>警告。</p><pre class="je jf jg jh fd mg js mh mi aw mj bi"><span id="cd47" class="lm kp hi js b fi mk ml l mm mn">@SuppressWarnings("unchecked")<br/>void<!-- --> <!-- -->uncheckedWarning() {</span><span id="3922" class="lm kp hi js b fi mo ml l mm mn">    List words = new<!-- --> <!-- -->ArrayList();<br/>    words.add("hello");                //throws an unchecked warning<br/>}</span></pre><h2 id="32a4" class="lm kp hi bd kq ln lo lp ku lq lr ls ky iq lt lu lc iu lv lw lg iy lx ly lk lz bi translated">@已弃用</h2><p id="74b9" class="pw-post-body-paragraph if ig hi ih b ii mb ik il im mc io ip iq md is it iu me iw ix iy mf ja jb jc hb bi translated">☠️这个<code class="du jp jq jr js b">@deprecated</code>注释也很常见。这意味着带注释的方法已被弃用，不再受到开发人员的支持。<a class="ae ma" href="https://www.java67.com/2013/03/helloworld-in-java-how-to-write-compile-example-tutorial.html" rel="noopener ugc nofollow" target="_blank">编译器</a>不会将已弃用的方法与常规方法区别对待。因此，即使该方法是可调用的，它也可能不会返回理想的响应。它是开发人员的文档。</p><pre class="je jf jg jh fd mg js mh mi aw mj bi"><span id="f1b8" class="lm kp hi js b fi mk ml l mm mn">@depricated<br/>public String prepareForY2K() { ... }</span></pre><h2 id="df95" class="lm kp hi bd kq ln lo lp ku lq lr ls ky iq lt lu lc iu lv lw lg iy lx ly lk lz bi translated">@作者</h2><p id="f0ad" class="pw-post-body-paragraph if ig hi ih b ii mb ik il im mc io ip iq md is it iu me iw ix iy mf ja jb jc hb bi translated">📝<code class="du jp jq jr js b">@author</code>标记是一个简单的注释，记录了方法或文件的作者。它通常会与一些更多的信息配对，比如版本、发行号等。</p><p id="f647" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">⭕️ Oracle建议您按照以下顺序编写标签:</p><ul class=""><li id="b712" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated"><code class="du jp jq jr js b">@author</code>——记载该法典的作者</li><li id="60ec" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><code class="du jp jq jr js b">@version</code>-确保一次只更新一个(避免锁定)</li><li id="6da4" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><code class="du jp jq jr js b">@param</code>-记录参数的名称和描述</li><li id="055f" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><code class="du jp jq jr js b">@return</code> —记录返回值；如果无效则省略</li><li id="79bb" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><code class="du jp jq jr js b">@throws</code>-记录检查的异常(在抛出条款中声明)</li><li id="d64f" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><code class="du jp jq jr js b">@see</code>-指向参考的链接或文本</li><li id="b2cd" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><code class="du jp jq jr js b">@since</code>-记录添加功能时的产品版本</li><li id="2544" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><code class="du jp jq jr js b">@deprecated</code>-如果不再支持该代码，则记录</li></ul></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="13f1" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">测试注释</h1><p id="c307" class="pw-post-body-paragraph if ig hi ih b ii mb ik il im mc io ip iq md is it iu me iw ix iy mf ja jb jc hb bi translated">🧑🏽‍🏫️写测试是开发周期的一个重要方面，和写基础代码本身一样重要(如果不是更重要的话)。有各种为测试显式构建的注释。</p><h2 id="d2a6" class="lm kp hi bd kq ln lo lp ku lq lr ls ky iq lt lu lc iu lv lw lg iy lx ly lk lz bi translated"><a class="ae ma" href="https://javarevisited.blogspot.com/2012/06/junit4-annotations-test-examples-and.html" rel="noopener ugc nofollow" target="_blank">@测试</a></h2><p id="221a" class="pw-post-body-paragraph if ig hi ih b ii mb ik il im mc io ip iq md is it iu me iw ix iy mf ja jb jc hb bi translated">🖋 <code class="du jp jq jr js b">@Test</code>告诉JUnit，带注释的方法应该作为测试来执行。为了运行该方法，<a class="ae ma" rel="noopener" href="/javarevisited/5-courses-to-learn-junit-and-mockito-in-2019-best-of-lot-f217d8b93688"> JUnit </a>构建类的新实例，然后调用测试方法。</p><p id="de17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以证明注释的两个可选参数:</p><p id="d03f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">🕒<code class="du jp jq jr js b"><strong class="ih hj">@Timeout</strong></code> <strong class="ih hj"> </strong>如果执行时间比时钟上指定的时间长(以毫秒为单位)，则会导致测试方法失败。</p><p id="ae1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，以下操作失败(0.1秒后):</p><pre class="je jf jg jh fd mg js mh mi aw mj bi"><span id="a695" class="lm kp hi js b fi mk ml l mm mn">@Test(timeout=100)<br/>public void toInfinityAndBeyond() {</span><span id="e3f2" class="lm kp hi js b fi mo ml l mm mn">    while(true);<br/>}</span></pre><p id="05f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">📣<code class="du jp jq jr js b"><strong class="ih hj">@Expected</strong></code> <strong class="ih hj"> </strong>声明<a class="ae ma" href="https://javarevisited.blogspot.com/2013/04/JUnit-tutorial-example-test-exception-thrown-by-java-method.html" rel="noopener ugc nofollow" target="_blank">测试方法必须抛出特定异常</a>，否则测试失败。</p><p id="3e55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，以下内容会失败:</p><pre class="je jf jg jh fd mg js mh mi aw mj bi"><span id="3dbb" class="lm kp hi js b fi mk ml l mm mn">@Test(expected=NullPointerException.class)<br/>public void outOfBounds(){</span><span id="375f" class="lm kp hi js b fi mo ml l mm mn">     new ArrayList&lt;Object&gt;().get(1);<br/>}</span></pre><h2 id="6af6" class="lm kp hi bd kq ln lo lp ku lq lr ls ky iq lt lu lc iu lv lw lg iy lx ly lk lz bi translated">@忽略</h2><p id="f7ae" class="pw-post-body-paragraph if ig hi ih b ii mb ik il im mc io ip iq md is it iu me iw ix iy mf ja jb jc hb bi translated">🤷🏽‍♀️<code class="du jp jq jr js b">@Ignore</code>测试注释<a class="ae ma" href="http://javarevisited.blogspot.sg/2015/02/how-to-disable-junit-test-ignore.html#axzz569M76Trp" rel="noopener ugc nofollow" target="_blank">忽略一个测试或一组测试</a>以避免潜在的执行失败。</p><p id="bc3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在两种可能的场景中进行<code class="du jp jq jr js b">@Ignore</code>测试:</p><ol class=""><li id="1a28" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc mq jz ka kb bi translated">用<code class="du jp jq jr js b">@Test</code>忽略测试方法</li><li id="9dc3" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc mq jz ka kb bi translated">忽略类级别的所有测试。</li></ol><pre class="je jf jg jh fd mg js mh mi aw mj bi"><span id="4bc0" class="lm kp hi js b fi mk ml l mm mn">@Ignore<br/>@Test(expected=NullPointerException.class)   //obviously wrong test<br/>public void outOfBounds(){ <br/>                 <br/>    new ArrayList&lt;Object&gt;().get(1); <br/>}</span></pre><h2 id="378a" class="lm kp hi bd kq ln lo lp ku lq lr ls ky iq lt lu lc iu lv lw lg iy lx ly lk lz bi translated">@以前</h2><p id="2547" class="pw-post-body-paragraph if ig hi ih b ii mb ik il im mc io ip iq md is it iu me iw ix iy mf ja jb jc hb bi translated">⏪用<code class="du jp jq jr js b">@Before</code>标注的方法在每次测试前执行。当您想要在运行测试之前执行一些代码时，比如设置测试环境，这是很有用的。<code class="du jp jq jr js b">@Before</code>改名为<code class="du jp jq jr js b">@BeforeEach</code>，也管用。</p><p id="ad00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">⏮兄弟注释<code class="du jp jq jr js b">@BeforeAll</code>或<code class="du jp jq jr js b">@BeforeClass</code>用于需要在一系列测试之前执行昂贵操作的情况，比如启动服务器或更改数据库。</p><h2 id="127a" class="lm kp hi bd kq ln lo lp ku lq lr ls ky iq lt lu lc iu lv lw lg iy lx ly lk lz bi translated">@之后</h2><p id="3baf" class="pw-post-body-paragraph if ig hi ih b ii mb ik il im mc io ip iq md is it iu me iw ix iy mf ja jb jc hb bi translated">⏩<code class="du jp jq jr js b">@After</code>是前面标签的反义词。所有标注了<code class="du jp jq jr js b">@After</code>的方法都将在测试后运行。</p><p id="f0b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">⏭<code class="du jp jq jr js b">@AfterAll</code>或<code class="du jp jq jr js b">@AfterClass</code>方法在类的所有测试都运行后执行。</p><blockquote class="mr ms mt"><p id="edee" class="if ig mp ih b ii ij ik il im in io ip mu ir is it mv iv iw ix mw iz ja jb jc hb bi translated">所有的<code class="du jp jq jr js b">@beforeAll</code>和<code class="du jp jq jr js b">@afterall</code>带注释的方法必须是静态的，所以它们在运行类的测试之前被执行。<br/>但是，<code class="du jp jq jr js b">@before</code>和<code class="du jp jq jr js b">@after</code>方法不应该是<a class="ae ma" href="https://javarevisited.blogspot.com/2011/11/static-keyword-method-variable-java.html" rel="noopener ugc nofollow" target="_blank">静态</a>，否则编译器会抛出错误。</p></blockquote><pre class="je jf jg jh fd mg js mh mi aw mj bi"><span id="96ea" class="lm kp hi js b fi mk ml l mm mn">public class OutputFileTest{</span><span id="8acd" class="lm kp hi js b fi mo ml l mm mn">    @BeforeAll<br/>    public static void startServer() { ... }</span><span id="0db8" class="lm kp hi js b fi mo ml l mm mn">    @Before	<br/>    public void createTestLogFile() { ... }<br/>  <br/>    @After<br/>    public void deleteTestLogFile() { ... }<br/>     <br/>    @Test <br/>    public void test1() { ... }</span><span id="4f91" class="lm kp hi js b fi mo ml l mm mn">    @Test <br/>    public void test2() { ... }</span><span id="6aa5" class="lm kp hi js b fi mo ml l mm mn">    @AfterAll<br/>    public static void stopServer() { ... }</span><span id="582a" class="lm kp hi js b fi mo ml l mm mn">}</span></pre><p id="6cd3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述代码将按以下顺序执行:</p><p id="eb0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">🟢0️⃣<code class="du jp jq jr js b">startServer()</code>1️⃣<code class="du jp jq jr js b">createTestLogFile()</code>2️⃣<code class="du jp jq jr js b">test1()</code>3️⃣<code class="du jp jq jr js b">deleteTestLogFile()</code>4️⃣<code class="du jp jq jr js b">createTestLogFile()</code>5️⃣<code class="du jp jq jr js b">test2()</code>6️⃣<code class="du jp jq jr js b">deleteTestLogFile()</code>7️⃣<code class="du jp jq jr js b">stopServer()</code>🔴</p><p id="0722" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">🍏这个列表并不全面，但它涵盖了最基本的。使用上面的例子来获得Java 中的<a class="ae ma" href="https://javarevisited.blogspot.com/2018/07/top-5-websites-to-learn-coding-in-java.html" rel="noopener ugc nofollow" target="_blank">编码的最佳实践。</a></p></div></div>    
</body>
</html>