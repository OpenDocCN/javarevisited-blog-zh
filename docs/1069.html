<html>
<head>
<title>Documenting your API with Swagger</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Swagger记录您的API</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/documenting-your-api-with-swagger-c27a94104135?source=collection_archive---------2-----------------------#2021-03-15">https://medium.com/javarevisited/documenting-your-api-with-swagger-c27a94104135?source=collection_archive---------2-----------------------#2021-03-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="04a9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在绝地档案馆中搜寻</h2></div></div><div class="ab cl ix iy gp iz" role="separator"><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc"/></div><div class="hb hc hd he hf"><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/cfd3d4c7dfc0c4cf5ac8234412ed21d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g9tMh-Nn0gocNGwgDvJxhA.png"/></div></div><p class="jq jr et er es js jt bd b be z dx translated">绝地档案馆</p></figure><p id="4777" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">所以在<a class="ae kq" rel="noopener" href="/javarevisited/building-a-simple-rest-api-with-springboot-3f2e4b123ebb">构建了我们的API </a>并且<a class="ae kq" rel="noopener" href="/javarevisited/securing-your-rest-api-with-springsecurity-8ba440fe7b58">保护了它</a>之后，我们现在将对它进行文档化，以允许其他人更容易地使用它。为此，我们将实施<a class="ae kq" href="https://swagger.io/" rel="noopener ugc nofollow" target="_blank">霸气</a>。</p></div><div class="ab cl ix iy gp iz" role="separator"><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc"/></div><div class="hb hc hd he hf"><h1 id="350c" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">你需要什么</h1><p id="1973" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">为了遵循本教程，您将需要一个REST API，因此您可以:</p><ul class=""><li id="bed4" class="lo lp hi jw b jx jy ka kb kd lq kh lr kl ls kp lt lu lv lw bi translated">按照<a class="ae kq" rel="noopener" href="/javarevisited/building-a-simple-rest-api-with-springboot-3f2e4b123ebb">教程来构建你的API </a></li><li id="f707" class="lo lp hi jw b jx lx ka ly kd lz kh ma kl mb kp lt lu lv lw bi translated">克隆这个库的<a class="ae kq" href="https://github.com/ErwanLT/HumanCloningFacilities" rel="noopener ugc nofollow" target="_blank">主分支</a></li><li id="b1ba" class="lo lp hi jw b jx lx ka ly kd lz kh ma kl mb kp lt lu lv lw bi translated">准备好自己的API</li></ul><h1 id="48d8" class="kr ks hi bd kt ku mc kw kx ky md la lb io me ip ld ir mf is lf iu mg iv lh li bi translated">它会是什么样子</h1><figure class="jf jg jh ji fd jj er es paragraph-image"><a href="https://www.java67.com/2015/09/top-10-restful-web-service-interview-questions-answers.html"><div class="er es mh"><img src="../Images/883f8a61916936a18ea5b039e96f7434.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-4H-EHMutQSg21bb1g0O-w.png"/></div></a><p class="jq jr et er es js jt bd b be z dx translated">UML表示</p></figure></div><div class="ab cl ix iy gp iz" role="separator"><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc"/></div><div class="hb hc hd he hf"><h1 id="9723" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">我记录，你记录，我们记录</h1><h2 id="cbed" class="mi ks hi bd kt mj mk ml kx mm mn mo lb kd mp mq ld kh mr ms lf kl mt mu lh mv bi translated">第一个依赖</h2><p id="757c" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">因此，如果我们想将swagger用于我们的API，我们首先需要添加一个maven依赖项</p><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="f247" class="mi ks hi mx b fi nb nc l nd ne">&lt;dependency&gt;<br/>    &lt;groupId&gt;io.springfox&lt;/groupId&gt;<br/>    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;<br/>    &lt;version&gt;2.9.2&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><h2 id="2208" class="mi ks hi bd kt mj mk ml kx mm mn mo lb kd mp mq ld kh mr ms lf kl mt mu lh mv bi translated">java配置</h2><p id="ebc6" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">要启用Swagger，我们需要配置它，所以让我们创建一个配置类。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="nf ng l"/></div></figure><p id="e1a5" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如您所见，在apiInfo方法中，我描述了我的API的一般信息:</p><ul class=""><li id="5d06" class="lo lp hi jw b jx jy ka kb kd lq kh lr kl ls kp lt lu lv lw bi translated">标题</li><li id="51bb" class="lo lp hi jw b jx lx ka ly kd lz kh ma kl mb kp lt lu lv lw bi translated">描述</li><li id="bcb4" class="lo lp hi jw b jx lx ka ly kd lz kh ma kl mb kp lt lu lv lw bi translated">版本</li><li id="c136" class="lo lp hi jw b jx lx ka ly kd lz kh ma kl mb kp lt lu lv lw bi translated">服务条款(url)</li><li id="a490" class="lo lp hi jw b jx lx ka ly kd lz kh ma kl mb kp lt lu lv lw bi translated">加入API所有者的联系人</li><li id="8971" class="lo lp hi jw b jx lx ka ly kd lz kh ma kl mb kp lt lu lv lw bi translated">许可证</li><li id="8712" class="lo lp hi jw b jx lx ka ly kd lz kh ma kl mb kp lt lu lv lw bi translated">许可证url</li><li id="6a5e" class="lo lp hi jw b jx lx ka ly kd lz kh ma kl mb kp lt lu lv lw bi translated">API供应商的扩展</li></ul><p id="8445" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">所有这些信息将在后面显示。</p><h2 id="ef72" class="mi ks hi bd kt mj mk ml kx mm mn mo lb kd mp mq ld kh mr ms lf kl mt mu lh mv bi translated">JSON生成的</h2><p id="bffd" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">因此，如果我启动我的应用程序并转到<a class="ae kq" href="http://localhost:8080/v2/api-docs" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/v2/API-docs</a>，我将看到我的文档的JSON表示</p><figure class="jf jg jh ji fd jj er es paragraph-image"><a href="https://javarevisited.blogspot.com/2017/02/how-to-consume-json-from-restful-web-services-Spring-RESTTemplate-Example.html"><div class="er es nh"><img src="../Images/9d6e69f9c7f7fd3260d2e2e9fa0d4a9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r4emRSBTD8z_VhAaAxWVfw.png"/></div></a></figure><p id="9b17" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如你所见，我找到了我在配置课上填写的所有信息。<br/>但是说实话，json文件不错，但是IHM会更好。<br/>那么让我们来实现这个IHM。</p><h2 id="cce9" class="mi ks hi bd kt mj mk ml kx mm mn mo lb kd mp mq ld kh mr ms lf kl mt mu lh mv bi translated">大摇大摆的IHM</h2><p id="811f" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">要启用IHM，我们不需要做这么多工作，只需添加一个maven依赖项就足够了</p><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="17b8" class="mi ks hi mx b fi nb nc l nd ne">&lt;dependency&gt;<br/>    &lt;groupId&gt;io.springfox&lt;/groupId&gt;<br/>    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;<br/>    &lt;version&gt;2.9.2&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="9cd3" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">然后，如果我重新启动我的应用程序并转到<a class="ae kq" href="http://localhost:8080/swagger-ui.html" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/swagger-ui . html</a>，我可以看到一个漂亮的(完全相对的)IHM，它显示了我的API信息。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><a href="https://javarevisited.blogspot.com/2016/04/what-is-purpose-of-http-request-types-in-RESTful-web-service.html#axzz6pAutpw4L"><div class="er es ni"><img src="../Images/1c2cbb9e17b3b737e73a44b37b514393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6K4tTvp5TZwM0DrwCJj-gg.png"/></div></a></figure><p id="d5ff" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">所以现在我们有了我们的狂妄的IHM，但是没有关于它的真正的文档，我们有了我们的终点，如果我们扩展它，我们有一些信息，但是没有什么很好的文档。<br/>现在让我们添加我们的文档。</p><h2 id="8f8a" class="mi ks hi bd kt mj mk ml kx mm mn mo lb kd mp mq ld kh mr ms lf kl mt mu lh mv bi translated">记录我们的控制器</h2><p id="2d33" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">完成前面的步骤后，如果我扩展POST端点，应该会看到类似这样的内容</p><figure class="jf jg jh ji fd jj er es paragraph-image"><a href="https://www.java67.com/2017/10/how-to-test-restful-web-services-using.html"><div class="er es nj"><img src="../Images/8f6eaa9a50874962170abaedd09fa1ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ehI0qfCMAsLhmcN7TC7o3w.png"/></div></a></figure><p id="6fc8" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">所以让我们在我的<a class="ae kq" href="https://javarevisited.blogspot.com/2017/08/difference-between-restcontroller-and-controller-annotations-spring-mvc-rest.html#ixzz6OYNB9oii" rel="noopener ugc nofollow" target="_blank">控制器</a>上添加一些文档。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="nf ng l"/></div></figure><p id="8a39" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">随着</p><ul class=""><li id="079b" class="lo lp hi jw b jx jy ka kb kd lq kh lr kl ls kp lt lu lv lw bi translated"><strong class="jw hj"> @ApiOperation </strong>:我可以添加我的端点(值)的更详细的描述，并指定它消费和生产什么。</li><li id="ef80" class="lo lp hi jw b jx lx ka ly kd lz kh ma kl mb kp lt lu lv lw bi translated"><strong class="jw hj"> @ApiResponses </strong>:我描述了我的API的返回代码，这里是200和500。</li></ul><p id="c48a" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">因此，如果我(再次)重启应用程序，我应该能够看到变化</p><figure class="jf jg jh ji fd jj er es paragraph-image"><a href="https://javarevisited.blogspot.com/2018/02/top-20-spring-rest-interview-questions-answers-java.html"><div class="er es nj"><img src="../Images/6fb53ae51af3b6b494a27b0bcc996412.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*joOGe0LzCYY_a6_cAxwCsw.png"/></div></a></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><a href="https://javarevisited.blogspot.com/2017/04/how-to-convert-map-to-json-to-hashmap-in-java.html?fbclid=IwAR1R88ss_YXYcwn4CGDTMeJdSV30YUv60e6CrGRjqA0m_QVMwWn6606JlV4#ixzz61TA9Eun9"><div class="er es nj"><img src="../Images/d548ae1676d031f66ae2a75bac5da4ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKyScMqmRi5X9NoghiRFYQ.png"/></div></a></figure><p id="419d" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">那更好。<br/>我们已经看到，在我的API文档中，记录了我的端点，但我也有一个关于我的模型的部分(我的API生产或消费什么)，这些模型也可以被记录。<br/>因此，让我们添加一些文档。</p><p id="d951" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated"><strong class="jw hj">记录我们的模型</strong></p><p id="6c4c" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">所以我有我的克隆类作为我的模型，在这里我有一些没有记录的属性，它在我的大摇大摆中表现出来，就像这样</p><figure class="jf jg jh ji fd jj er es paragraph-image"><a href="https://javarevisited.blogspot.com/2018/02/top-5-restful-web-services-with-spring-courses-for-experienced-java-programmers.html"><div class="er es nk"><img src="../Images/17a08f4fa95445c11827761fb1b2596c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N--NazNwxdIBKSpWxAYUrQ.png"/></div></a></figure><p id="c3b3" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">除了我的财产类型，我没有太多的信息。<br/>为了添加它，我们将在类上使用<strong class="jw hj"> @ApiModel </strong>注释，在属性上使用<strong class="jw hj"> @ApiModelProperty </strong>注释，这将允许我们添加定义，如描述(值)、名称、数据类型、示例值和允许值。</p><p id="3127" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">所以现在我的克隆类将是这样的:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="nf ng l"/></div></figure><p id="a376" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在我的Swagger-ui中，现在模型将是这样的:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><a href="https://www.java67.com/2018/02/3-books-and-courses-to-learn-restful-web-services-with-spring.html"><div class="er es nl"><img src="../Images/767c182301807435514c1b17b181d7a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8Te-bmUlMFRvZ59sveHcg.png"/></div></a></figure><p id="1954" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如您所见，我描述的必填字段有一个<strong class="jw hj"> *。</strong></p></div><div class="ab cl ix iy gp iz" role="separator"><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc"/></div><div class="hb hc hd he hf"><h1 id="63fb" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">用Swagger测试我们的API</h1><p id="1f0c" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">那么现在我们有了我们的昂首阔步的奔跑和良好的记录，我们能用它做什么呢？我们可以测试我们的端点！<br/>滚动swagger-ui页面，您应该已经注意到我们每个端点中的这个按钮。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es nm"><img src="../Images/fc14968210e5eaa75c9d3d41c302eb0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*dGt-aUiJCsP3yQWe6bK2PA.png"/></div></figure><p id="ab00" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如果您单击它，它会稍微改变您的页面，以便您可以编写请求的正文，或者编辑一些参数。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es nn"><img src="../Images/689d63273c7db8d957e74959aca20ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*B8xlnkzOxrHYyYmpAQEvLQ.png"/></div></figure><p id="0d18" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">然后，您可以对本地主机执行查询，并查看下面的结果。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es no"><img src="../Images/03ecd69acc1e12b1e6cb249df9f14573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OcgVtYiEqBe7nfEcC2qkVA.png"/></div></div></figure></div><div class="ab cl ix iy gp iz" role="separator"><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc"/></div><div class="hb hc hd he hf"><p id="db12" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">感谢您的阅读时间，如前所述，本教程中使用的代码可在Github知识库分支swagger中找到。</p></div></div>    
</body>
</html>