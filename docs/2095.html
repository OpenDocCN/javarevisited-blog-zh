<html>
<head>
<title>Sales Tax or GST Problem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">销售税或GST问题</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/sales-tax-or-gst-problem-2ad9d245edb1?source=collection_archive---------0-----------------------#2022-05-07">https://medium.com/javarevisited/sales-tax-or-gst-problem-2ad9d245edb1?source=collection_archive---------0-----------------------#2022-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/68259292b1a8ecba5ca47dbd035154bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eDLDMC4Wz82duAvJsseJUw.png"/></div></div></figure><div class=""/><h1 id="7eba" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="5ccc" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">基本销售税或GST适用于所有商品，税率为10%,不包括免税的书籍、食品和医疗产品。进口税是适用于所有进口商品的附加销售税或GST，税率为5%,没有免税。</p><p id="9fae" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">当我购买物品时，我会收到一张收据，上面列有所有物品的名称及其价格(含税)，最后是物品的总成本以及支付的销售税或商品及服务税的总额。销售税的取整规则是，对于税率<strong class="jq hu"> n% </strong>，货架价格<strong class="jq hu"> p </strong>包含(<strong class="jq hu"> np/100取整到最近的0.05 </strong>)的销售税金额。</p><figure class="ks kt ku kv fd hk er es paragraph-image"><a href="https://javarevisited.blogspot.com/2018/02/composite-design-pattern-in-java-real.html"><div class="er es kr"><img src="../Images/27741bf63ed095aa084d023a509e8491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*rG2LSGqUqSWEyTZ-cK8ZeQ.png"/></div></a><p class="kw kx et er es ky kz bd b be z dx translated">图1:项目</p></figure><p id="22b0" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">假设用户购买了一些产品，如苹果、书籍或冰箱。因此，这里的设计不应该以这样一种方式来完成，即cooler或apple会告诉用户要支付多少税。政府政策负责告诉用户他或她将为这些项目支付的税收百分比。一个对象应该对它所关心的事情负责，而不是对其他任何人负责。冷气机关心的是吹冷气，而不是收税。如果税法或税率改变，用户不改变冷却器机器，用户需要改变策略对象。</p><h1 id="615f" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">从问题陈述中识别名词</h1><p id="d7ea" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在应用程序设计之前，确定问题陈述中使用的所有名词以及它们之间的关系是一项重要的任务。以下是几个确定的要点:</p><ol class=""><li id="726f" class="la lb ht jq b jr km jv kn jz lc kd ld kh le kl lf lg lh li bi translated">销售税或GST是一种税。</li><li id="4425" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">进口税也是一种税。</li><li id="1df1" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">销售税或GST的税率是小数</li><li id="0537" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">书是一种物品。</li><li id="1e56" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">食物是一种物品</li><li id="c669" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">药品是一种物品。</li><li id="efb7" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">可以导入项目</li><li id="4782" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">销售税或商品及服务税将有一些政策，将确定销售税或商品及服务税是否适用于给定的项目。</li><li id="4a14" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">一个项目有一个小数形式的销售价格。</li><li id="22a7" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">包含物品清单、价格和税金的收据。</li><li id="fc84" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">总价。</li><li id="b12f" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">总税收。</li></ol><h1 id="7ef1" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">所有名词之间的关系</h1><p id="7330" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">所有名词之间的关系可以分为两类:</p><ul class=""><li id="2199" class="la lb ht jq b jr km jv kn jz lc kd ld kh le kl lo lg lh li bi translated">Item →它将是一个抽象类，产品将从它继承。</li><li id="e8cf" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lo lg lh li bi translated">SalesTax →它将是一个抽象类，BasicSalesTax <strong class="jq hu"> </strong>类将从它继承。</li></ul><p id="fe5e" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">项目/产品之间的关系:</p><figure class="ks kt ku kv fd hk er es paragraph-image"><a href="https://javarevisited.blogspot.com/2021/07/state-design-pattern-example-java-vending-machine.html#axzz7CANam4JD"><div class="er es lp"><img src="../Images/47baec1e9315d37a8ccd4f1f5f850f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wyRkIe3FksY7FVR97M1Emw.png"/></div></a><p class="kw kx et er es ky kz bd b be z dx translated">图2:项目或产品的类图中的关系</p></figure><p id="246e" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">增值税之间的关系:</p><figure class="ks kt ku kv fd hk er es paragraph-image"><a href="https://javarevisited.blogspot.com/2022/03/how-to-design-trade-position-calculator.html"><div class="er es lq"><img src="../Images/ce11bc8e663af4f04d94c6c520ded7e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ukU8aXmMSeO-Upi6hOJgZA.png"/></div></a><p class="kw kx et er es ky kz bd b be z dx translated">图3:销售税类图中的关系</p></figure><h1 id="3947" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">实施方法</h1><p id="921d" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于这类问题，可以应用两种不同类型的设计模式。下面是两种不同的模式:</p><ul class=""><li id="dfb8" class="la lb ht jq b jr km jv kn jz lc kd ld kh le kl lo lg lh li bi translated"><a class="ae lr" href="http://javarevisited.blogspot.sg/2013/01/difference-between-factory-and-abstract-factory-design-pattern-java.html" rel="noopener ugc nofollow" target="_blank">抽象工厂</a></li><li id="6a1c" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lo lg lh li bi translated"><a class="ae lr" href="https://javarevisited.blogspot.com/2014/11/strategy-design-pattern-in-java-using-Enum-Example.html#axzz6RfpBqjsf" rel="noopener ugc nofollow" target="_blank">策略</a></li></ul><h2 id="d6cd" class="ls ir ht bd is lt lu lv iw lw lx ly ja jz lz ma je kd mb mc ji kh md me jm mf bi translated">抽象工厂模式</h2><p id="a8b2" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">该产品是一个抽象的超类和不同种类的项目/产品，如书籍冷却器，药品，食品等。将从Product类继承。这将为将来扩展新产品类型提供便利。</p><p id="bce1" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这里，将每个产品类型的类分开的主要原因是，将来可以通过扩展产品类来添加其他属性。</p><p id="fd39" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">下面是可以实现的类:</p><ol class=""><li id="9d8c" class="la lb ht jq b jr km jv kn jz lc kd ld kh le kl lf lg lh li bi translated">抽象工厂→产品工厂</li><li id="9ec2" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">混凝土工厂→书籍生产工厂、食品生产工厂、药品生产工厂</li><li id="d91f" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">抽象产品→产品</li><li id="2bdc" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">具体产品→书籍产品、食品产品、药品产品</li><li id="3719" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">客户→货架</li></ol><p id="3871" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">优势:</p><ol class=""><li id="3148" class="la lb ht jq b jr km jv kn jz lc kd ld kh le kl lf lg lh li bi translated">如果要添加新产品，就不需要修改现有的客户端代码。</li></ol><h2 id="dfd8" class="ls ir ht bd is lt lu lv iw lw lx ly ja jz lz ma je kd mb mc ji kh md me jm mf bi translated">战略模式</h2><p id="0e72" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">计税将使用<a class="ae lr" href="https://javarevisited.blogspot.com/2014/04/difference-between-state-and-strategy-design-pattern-java.html" rel="noopener ugc nofollow" target="_blank">策略模式</a>进行设计。</p><p id="ebf8" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">以下是将涉及的课程:</p><ol class=""><li id="1231" class="la lb ht jq b jr km jv kn jz lc kd ld kh le kl lf lg lh li bi translated">策略→ ITaxCalculator</li><li id="5f37" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">具体策略→ LocalTaxCalculator，或任何税收策略，如进口税、关税等。</li><li id="46de" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">上下文→开票人</li></ol><p id="f7f1" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">优势:</p><ol class=""><li id="b326" class="la lb ht jq b jr km jv kn jz lc kd ld kh le kl lf lg lh li bi translated">我们可以轻松地在特性中添加一个新的计税算法，并且可以在运行时选择。每种产品都有不同的税率和规则。所以，策略对每个类别都是有用的。</li><li id="c601" class="la lb ht jq b jr lj jv lk jz ll kd lm kh ln kl lf lg lh li bi translated">TaxCalculator的实际创建将委托给工厂方法。</li></ol><p id="bc6f" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">销售税/商品及服务税问题序列图:</p><figure class="ks kt ku kv fd hk er es paragraph-image"><a href="https://javarevisited.blogspot.com/2017/07/top-5-books-to-learn-uml-unified-modelling-language-java.html"><div class="er es mg"><img src="../Images/8b31d6491659cefa0ea5ae416b88fbc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*q02pXETPnJcEyQ8P.png"/></div></a><p class="kw kx et er es ky kz bd b be z dx translated">图4:销售税或GST问题的序列图</p></figure><p id="a489" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">类图:</p><figure class="ks kt ku kv fd hk er es paragraph-image"><a href="https://www.java67.com/2021/11/top-5-courses-to-learn-uml-for-software.html"><div class="er es mh"><img src="../Images/f7e792d34f7e9b9d8d405fd9dde303f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wbp6_tjQaiXjtK7Y8ERbIg.png"/></div></a><p class="kw kx et er es ky kz bd b be z dx translated">图5:销售税或GST问题的类图</p></figure><h1 id="2255" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">履行</h1><p id="b57e" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">以下是抽象工厂模式的实现:</p><p id="5fa5" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">产品类别:</p><pre class="ks kt ku kv fd mi mj mk ml aw mm bi"><span id="3419" class="ls ir ht mj b fi mn mo l mp mq">using SalesTax.ProductFactories;<br/>using System;<br/>using System.Collections.Generic;<br/>using System.Linq;<br/>using System.Text;<br/>using System.Threading.Tasks;</span><span id="73ad" class="ls ir ht mj b fi mr mo l mp mq">namespace SalesTax.Products<br/>{<br/>    public abstract class Product<br/>    {<br/>        protected string Name { get; set; }</span><span id="3aa6" class="ls ir ht mj b fi mr mo l mp mq">private double _price;<br/>        public double Price<br/>        {<br/>            set { _price = value; }<br/>            get { return _price * Quantity; }<br/>        }</span><span id="838d" class="ls ir ht mj b fi mr mo l mp mq">public bool Imported { get; set; }</span><span id="41b9" class="ls ir ht mj b fi mr mo l mp mq">public int Quantity { get; set; }</span><span id="2252" class="ls ir ht mj b fi mr mo l mp mq">public double TaxedCost { get; set; }</span><span id="91aa" class="ls ir ht mj b fi mr mo l mp mq">public Product()<br/>        {<br/>            this.Name = string.Empty;<br/>            this.Price = 0.0;<br/>            this.Imported = false;<br/>            this.Quantity = 0;<br/>            this.TaxedCost = 0.0;<br/>        }</span><span id="6f21" class="ls ir ht mj b fi mr mo l mp mq">public Product(String name, double price, bool imported, int quantity)<br/>        {<br/>            this.Name = name;<br/>            this.Price = price;<br/>            this.Imported = imported;<br/>            this.Quantity = quantity;<br/>        }</span><span id="541a" class="ls ir ht mj b fi mr mo l mp mq">public override string ToString()<br/>        {<br/>            return (Quantity + " " + ImportedToString(Imported) + " " + Name + " : " + TaxedCost);<br/>        }</span><span id="f400" class="ls ir ht mj b fi mr mo l mp mq">public String ImportedToString(bool imported)<br/>        {<br/>            if (!imported)<br/>                return string.Empty;<br/>            else<br/>                return "imported";<br/>        }</span><span id="865a" class="ls ir ht mj b fi mr mo l mp mq">public abstract ProductFactory GetFactory();</span><span id="6109" class="ls ir ht mj b fi mr mo l mp mq">public abstract double GetTaxValue(String country);<br/>    }<br/>}</span></pre><p id="6d5c" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">图书产品类别:</p><pre class="ks kt ku kv fd mi mj mk ml aw mm bi"><span id="8b27" class="ls ir ht mj b fi mn mo l mp mq">using SalesTax.ProductFactories;<br/>using SalesTax.TaxCalculations;<br/>using System;<br/>using System.Collections.Generic;<br/>using System.Linq;<br/>using System.Text;<br/>using System.Threading.Tasks;</span><span id="92df" class="ls ir ht mj b fi mr mo l mp mq">namespace SalesTax.Products<br/>{<br/>    public class BookProduct : Product<br/>    {</span><span id="e4d1" class="ls ir ht mj b fi mr mo l mp mq">public BookProduct()<br/>            : base()<br/>        {<br/>        }</span><span id="4442" class="ls ir ht mj b fi mr mo l mp mq">public BookProduct(String name, double price, bool imported, int quantity)<br/>            : base(name, price, imported, quantity)<br/>        {</span><span id="d0fb" class="ls ir ht mj b fi mr mo l mp mq">}</span><span id="a1b1" class="ls ir ht mj b fi mr mo l mp mq">public override ProductFactory GetFactory()<br/>        {<br/>            return new BookProductFactory();<br/>        }</span><span id="1f97" class="ls ir ht mj b fi mr mo l mp mq">public override double GetTaxValue(string country)<br/>        {<br/>            if (country == "Local")<br/>                return LocalTaxValues.BOOK_TAX;<br/>            else<br/>                return 0;<br/>        }<br/>    }<br/>}</span></pre><p id="efca" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">ProductFactory类:</p><pre class="ks kt ku kv fd mi mj mk ml aw mm bi"><span id="9571" class="ls ir ht mj b fi mn mo l mp mq">using SalesTax.Products;<br/>using System;<br/>using System.Collections.Generic;<br/>using System.Linq;<br/>using System.Text;<br/>using System.Threading.Tasks;</span><span id="0dad" class="ls ir ht mj b fi mr mo l mp mq">namespace SalesTax.ProductFactories<br/>{<br/>    public abstract class ProductFactory<br/>    {<br/>        public abstract Product CeateProduct(String name, double price, bool imported, int quantity);<br/>    }<br/>}</span></pre><p id="081f" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">BookProductFactory类:</p><pre class="ks kt ku kv fd mi mj mk ml aw mm bi"><span id="804c" class="ls ir ht mj b fi mn mo l mp mq">using System;<br/>using System.Collections.Generic;<br/>using System.Linq;<br/>using System.Text;<br/>using System.Threading.Tasks;</span><span id="50ef" class="ls ir ht mj b fi mr mo l mp mq">namespace SalesTax.ProductFactories<br/>{<br/>    public class BookProductFactory : ProductFactory<br/>    {<br/>        public override Products.Product CeateProduct(string name, double price, bool imported, int quantity)<br/>        {<br/>            return new Products.BookProduct(name, price, imported, quantity);<br/>        }<br/>    }<br/>}</span></pre><p id="660e" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">以下是使用策略模式的实现:</p><p id="ceff" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">ITaxCalculator接口:</p><pre class="ks kt ku kv fd mi mj mk ml aw mm bi"><span id="0a5b" class="ls ir ht mj b fi mn mo l mp mq">using System;<br/>using System.Collections.Generic;<br/>using System.Linq;<br/>using System.Text;<br/>using System.Threading.Tasks;</span><span id="816f" class="ls ir ht mj b fi mr mo l mp mq">namespace SalesTax.TaxCalculations<br/>{<br/>    /// &lt;summary&gt;<br/>    /// It Computes Total Tax Cost of a Product.<br/>    /// &lt;/summary&gt;<br/>    public interface ITaxCalculator<br/>    {</span><span id="4350" class="ls ir ht mj b fi mr mo l mp mq">/// &lt;summary&gt;<br/>        /// Calculates Tax for a Product where Tax Cost is the Sum of Sales <br/>        /// Tax and Imported Duty of a Product.<br/>        /// &lt;/summary&gt;<br/>        /// &lt;param name="price"&gt;The Price of the Product.&lt;/param&gt;<br/>        /// &lt;param name="tax"&gt;The Tax Rate of the Product.&lt;/param&gt;<br/>        /// &lt;param name="imported"&gt;Product is whether Imported or not.&lt;/param&gt;<br/>        /// &lt;returns&gt;&lt;/returns&gt;<br/>        double CalculateTax(double price, double tax, bool imported);<br/>    }<br/>}</span></pre><p id="ca05" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">LocalTaxCalculator类:</p><pre class="ks kt ku kv fd mi mj mk ml aw mm bi"><span id="5f98" class="ls ir ht mj b fi mn mo l mp mq">using SalesTax.utils;<br/>using System;<br/>using System.Collections.Generic;<br/>using System.Linq;<br/>using System.Text;<br/>using System.Threading.Tasks;</span><span id="7fe4" class="ls ir ht mj b fi mr mo l mp mq">namespace SalesTax.TaxCalculations<br/>{<br/>    /// &lt;summary&gt;<br/>    /// It Calculates Total Tax Cost According to Local Region Specification.<br/>    /// &lt;/summary&gt;<br/>    public class LocalTaxCalculator : ITaxCalculator<br/>    {<br/>        public double CalculateTax(double price, double localTax, bool imported)<br/>        {<br/>            double tax = price * localTax;</span><span id="3953" class="ls ir ht mj b fi mr mo l mp mq">if (imported)<br/>                tax += (price * 0.5);</span><span id="c9a5" class="ls ir ht mj b fi mr mo l mp mq">//rounds off to nearest 0.05;<br/>            tax = TaxUtil.RoundOff(tax);</span><span id="fa5e" class="ls ir ht mj b fi mr mo l mp mq">return tax;<br/>        }<br/>    }<br/>}</span></pre><p id="e9ef" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">TaxCalculatorFactory类:</p><pre class="ks kt ku kv fd mi mj mk ml aw mm bi"><span id="8af5" class="ls ir ht mj b fi mn mo l mp mq">using System;<br/>using System.Collections.Generic;<br/>using System.Linq;<br/>using System.Text;<br/>using System.Threading.Tasks;<br/>using System.Collections;</span><span id="c9e3" class="ls ir ht mj b fi mr mo l mp mq">namespace SalesTax.TaxCalculations<br/>{<br/>    public class TaxCalculatorFactory<br/>    {<br/>        private Dictionary&lt;String, ITaxCalculator&gt; taxCalculators;</span><span id="a55d" class="ls ir ht mj b fi mr mo l mp mq">public TaxCalculatorFactory()<br/>        {<br/>            taxCalculators = new Dictionary&lt;String, ITaxCalculator&gt;();<br/>            RegisterInFactory("Local", new LocalTaxCalculator());<br/>        }</span><span id="e4e3" class="ls ir ht mj b fi mr mo l mp mq">public void RegisterInFactory(string strategy, ITaxCalculator taxCalc)<br/>        {<br/>            taxCalculators.Add(strategy, taxCalc);<br/>        }</span><span id="aa60" class="ls ir ht mj b fi mr mo l mp mq">public ITaxCalculator GetTaxCalculator(String strategy)<br/>        {<br/>            ITaxCalculator taxCalc = (ITaxCalculator)taxCalculators[strategy];<br/>            return taxCalc;<br/>        }</span><span id="e6d1" class="ls ir ht mj b fi mr mo l mp mq">public int GetFactorySize()<br/>        {<br/>            return taxCalculators.Count;<br/>        }<br/>    }<br/>}</span></pre><p id="a893" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">每种产品的计税策略:</p><pre class="ks kt ku kv fd mi mj mk ml aw mm bi"><span id="7b62" class="ls ir ht mj b fi mn mo l mp mq">using SalesTax.Products;<br/>using SalesTax.TaxCalculations;<br/>using SalesTax.utils;<br/>using System;<br/>using System.Collections.Generic;<br/>using System.Linq;<br/>using System.Text;<br/>using System.Threading.Tasks;</span><span id="e091" class="ls ir ht mj b fi mr mo l mp mq">namespace SalesTax.Billing<br/>{<br/>    public class Biller<br/>    {<br/>        ITaxCalculator taxCalculator;</span><span id="5ef5" class="ls ir ht mj b fi mr mo l mp mq">public Biller(ITaxCalculator taxCalc)<br/>        {<br/>            taxCalculator = taxCalc;<br/>        }</span><span id="6667" class="ls ir ht mj b fi mr mo l mp mq">public double CalculateTax(double price, double tax, bool imported)<br/>        {</span><span id="b0cf" class="ls ir ht mj b fi mr mo l mp mq">double totalProductTax = taxCalculator.CalculateTax(price, tax, imported);<br/>            return totalProductTax;<br/>        }</span><span id="8064" class="ls ir ht mj b fi mr mo l mp mq">public double CalcTotalProductCost(double price, double tax)<br/>        {<br/>            return TaxUtil.Truncate(price + tax);<br/>        }</span><span id="6d01" class="ls ir ht mj b fi mr mo l mp mq">public double CalcTotalTax(List&lt;Product&gt; prodList)<br/>        {<br/>            double totalTax = 0.0;</span><span id="dcb1" class="ls ir ht mj b fi mr mo l mp mq">foreach (Product p in prodList)<br/>            {<br/>                totalTax += (p.TaxedCost - p.Price);<br/>            }</span><span id="207d" class="ls ir ht mj b fi mr mo l mp mq">return TaxUtil.Truncate(totalTax);<br/>        }</span><span id="7553" class="ls ir ht mj b fi mr mo l mp mq">public double CalcTotalAmount(List&lt;Product&gt; prodList)<br/>        {<br/>            double totalAmount = 0.0;</span><span id="b630" class="ls ir ht mj b fi mr mo l mp mq">foreach (Product p in prodList)<br/>            {<br/>                totalAmount += p.TaxedCost;<br/>            }</span><span id="0d2d" class="ls ir ht mj b fi mr mo l mp mq">return TaxUtil.Truncate(totalAmount);<br/>        }</span><span id="9e60" class="ls ir ht mj b fi mr mo l mp mq">public Receipt CreateNewReceipt(List&lt;Product&gt; productList, double totalTax, double totalAmount)<br/>        {<br/>            return new Receipt(productList, totalTax, totalAmount);<br/>        }</span><span id="3b23" class="ls ir ht mj b fi mr mo l mp mq">public void GenerateReceipt(Receipt r)<br/>        {<br/>            String receipt = r.ToString();<br/>            Console.WriteLine(receipt);<br/>        }</span><span id="3c77" class="ls ir ht mj b fi mr mo l mp mq">}<br/>}</span></pre><h1 id="f7c8" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">结论</h1><p id="4428" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">这个销售税的实施问题非常大，所以我不能在这里包括它。完整的实现可以在我的GitHub资源库中找到→ <a class="ae lr" href="https://github.com/gmershad/Sales-Tax" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hu">销售税问题</strong> </a> <strong class="jq hu">。</strong></p><p id="fab7" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">销售税问题熟悉并推动我们思考设计方法。所以，这里使用了抽象工厂和<a class="ae lr" href="https://javarevisited.blogspot.com/2015/07/strategy-design-pattern-and-open-closed-principle-java-example.html" rel="noopener ugc nofollow" target="_blank">策略设计模式</a> s。思考和应用设计模式是一个非常令人愉快的问题陈述。</p><p id="c1e8" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hu">延伸阅读</strong></p><div class="hh hi ez fb hj ms"><a rel="noopener follow" target="_blank" href="/javarevisited/10-oop-design-principles-you-can-learn-in-2020-f7370cccdd31"><div class="mt ab dw"><div class="mu ab mv cl cj mw"><h2 class="bd hu fi z dy mx ea eb my ed ef hs bi translated">2022年你能学到的10个最佳OOP设计原则</h2><div class="mz l"><h3 class="bd b fi z dy mx ea eb my ed ef dx translated">想要写出更好、更可靠的代码，能够经受住生产中时间的考验吗？这些设计原则会有所帮助。</h3></div><div class="na l"><p class="bd b fp z dy mx ea eb my ed ef dx translated">medium.com</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng hp ms"/></div></div></a></div></div></div>    
</body>
</html>