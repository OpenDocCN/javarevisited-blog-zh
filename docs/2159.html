<html>
<head>
<title>Cucumber &amp; Testcontainer: a BDD perfect match</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">cucumber &amp; test container:BDD的完美匹配</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/cucumber-testcontainer-a-bdd-perfect-match-956cf62cdf47?source=collection_archive---------1-----------------------#2022-06-03">https://medium.com/javarevisited/cucumber-testcontainer-a-bdd-perfect-match-956cf62cdf47?source=collection_archive---------1-----------------------#2022-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a9d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在一些项目中，对自动化和强大的测试层的需求被认为对项目的良好结果并不真正有用…</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/94b09eda721b82cafdc21eeb331251fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/0*Cg_3CmTx8Zi-NI82.jpeg"/></div></figure><p id="4b5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">幸运的是，在许多项目中，测试阶段是非常重要的，并对源代码的总体质量产生了积极的影响。我们有如此多的框架、库和方法可以使用。在本文中，我们将看到两个工具的使用，即<strong class="ih hj"> Cucumber </strong>和<strong class="ih hj"> Testcontainer </strong>，如何帮助我们为测试创建一个完美的环境。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="b151" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">行为驱动设计</h1><p id="9315" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">不同类型的测试可以在我们的软件上执行，显然，每一种都可以用不同的技术和工具来实现</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/ea6fb06a444334576a79807801d1db57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/0*EE_f6HgQZMl_7GMY.png"/></div></figure><p id="3584" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个著名的方法是<strong class="ih hj"> TDD </strong>(测试驱动设计)，它可以通过为我们的软件定义一个测试用例，然后实现满足它的软件来总结(非常简单)。测试流程如下</p><ul class=""><li id="cb1d" class="kw kx hi ih b ii ij im in iq ky iu kz iy la jc lb lc ld le bi translated">测试定义</li><li id="4b14" class="kw kx hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">测试实现</li><li id="9ca4" class="kw kx hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">测试执行:第一次执行会失败，因为我们的软件不能满足它</li><li id="faeb" class="kw kx hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">软件实现</li><li id="3a5a" class="kw kx hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">测试执行没有问题</li></ul><p id="9a61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">测试开发的另一个好方法是<strong class="ih hj"> BDD </strong>(行为驱动设计)。在这种情况下，我们必须使用一种简单的领域特定语言来定义我们软件的期望行为。</p><p id="9c99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了定义一个测试场景，我们可以使用一个简单的基于关键字<strong class="ih hj">的语言</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lk"><img src="../Images/a05765276c47db0c3a7d5ed20adceef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FMTTpGA21RYlhNPOvu7oGw.png"/></div></div></figure><p id="2310" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是一个简单的场景</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="41c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种语言语法(<a class="ae lr" href="https://cucumber.io/docs/gherkin/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Gherkin </strong> </a>)帮助我们定义可以描述我们系统行为的场景。测试框架，如<strong class="ih hj"> Cucumber </strong>，阅读这个特性的描述并尝试执行它。</p><h1 id="5757" class="js jt hi bd ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp bi translated">黄瓜:设置</h1><p id="9a7d" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">黄瓜是一个测试框架，可用于最重要的编程语言。使用它，我们可以将用Gherkin编写的特性描述映射到一些测试代码实现。</p><p id="832c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文将在一个以<strong class="ih hj"> JUnit 5 </strong>为主要测试引擎的<strong class="ih hj"> Spring Boot </strong>项目中使用<strong class="ih hj"> Cucumber-JVM </strong>。我们首先看到的是要添加到pom.xml中的依赖项</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="2f60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">示例项目将提供简单的<strong class="ih hj"> REST </strong>端点来管理与博客引擎相关的两个资源:作者和文章。让我们使用小黄瓜语言定义一些我们的API将满足的场景。</p><p id="87a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一特征文件中关于作者资源的一些场景</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="2c51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有一些与员额资源有关</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="678f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们必须开始告诉我们的项目它必须使用Cucumber，场景定义将在<strong class="ih hj"> src/test/resources/bdd </strong>文件夹下提供</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="ce72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> @IncludeEngines </strong>注释是为我们的测试指定cumber引擎，必须使用<strong class="ih hj"> @SelectClasspathResource </strong>来添加我们的特征文件。</p><p id="3993" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在其他设置中，使用<strong class="ih hj"> @ConfigurationParameter，</strong>我们要求Cucumber生成一个HTML测试执行报告。</p><p id="64bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们现在开始构建，没有任何源代码定义，我们应该会收到这样的错误</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="30ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以从实现测试用例开始，但是在做之前，我们先来看看<a class="ae lr" href="https://rest-assured.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">放心</strong> </a>，一个强大的库，可以成为我们测试用例实现的瑞士军刀。</p><h1 id="2b89" class="js jt hi bd ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp bi translated">放心</h1><p id="2fa5" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">如果你必须使用一些Java库来开发所有的测试用例，比如<strong class="ih hj">Spring rest template</strong>/<strong class="ih hj">WebClient</strong>或者其他什么，你可能会创建很多样板代码。<a class="ae lr" href="https://rest-assured.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">放心</strong> </a>提供了流畅的语法来开发强大而简单的测试代码实现。</p><p id="eea4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要添加库，您必须导入这些依赖项</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="23d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设您有一个“colors”REST端点，提供一个颜色列表，如下所示</p><pre class="je jf jg jh fd lx ly lz ma aw mb bi"><span id="8fe4" class="mc jt hi ly b fi md me l mf mg">["red", "green", "blue"]</span></pre><p id="84ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用放心，您可以编写一个简单的测试用例，如下所示</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="c82a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者如果你想提交一些东西，在一个类似于我们的测试项目的场景中，你可以写这个测试用例</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="8c67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它的fluent API可以用来开发类似这样的快速测试用例，或者像在我们的项目中一样，将这些方法绑定到我们的测试场景。</p><h1 id="7794" class="js jt hi bd ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp bi translated">Cucumber:测试实现</h1><p id="0b77" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我们可以从一些常见的步骤开始我们的测试用例实现</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="d46c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个类在包中，Cucumber将扫描它来查找步骤实现，就像之前在我们的设置中定义的那样。正如你所看到的，<strong class="ih hj"> @Then </strong>注释被绑定到一些场景中描述的<strong class="ih hj"> Then </strong>关键字。</p><p id="b2b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除此之外，我们创建了一个实用程序类，<strong class="ih hj"> CucumberContextHolder </strong>，它可以用来保存一些测试上下文信息。现在我们用它来保持来自放心电话的响应。</p><p id="ebd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这些步骤中，我们只是检查HTTP状态代码。现在，我们进一步讨论该场景中定义的其他操作</p><pre class="je jf jg jh fd lx ly lz ma aw mb bi"><span id="98f1" class="mc jt hi ly b fi md me l mf mg">Scenario: 001 - Save author OK</span><span id="3299" class="mc jt hi ly b fi mh me l mf mg">   Given a username 'federico'<br/>   And an email 'federico.paparoni@xyz.mail'<br/>   And a bio 'Federico Paparoni wants to write something about Cucumber &amp; Testcontainer'<br/>   When I submit this information to save a new user<br/>   Then I receive a correct response</span></pre><p id="2202" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是实现</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="aade" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这些步骤中，我们创建一个作者(给定步骤)，然后使用REST Assured (When step)将其发送到REST端点。</p><p id="4715" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用同样的方法，我们可以实现所有的步骤，还可以尝试构建我们系统中没有的东西。例如这一步</p><pre class="je jf jg jh fd lx ly lz ma aw mb bi"><span id="198e" class="mc jt hi ly b fi md me l mf mg">Given a system without the author with username 'goofy'</span></pre><p id="6b7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需要一个已经保存在我们博客引擎中的作者。所以我们可以假设我们的数据库已经有了这个作者，或者我们可以在给定步骤的设置过程中保存它。我更喜欢后一种选择，所以我用那种方式实现了这个条件</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="0bad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Gherkin语法提供了很多特性，比如在场景中插入值列表的选项(<a class="ae lr" href="https://github.com/cucumber/cucumber-jvm/tree/main/datatable" rel="noopener ugc nofollow" target="_blank">数据表</a>)。如果你重复这些步骤</p><pre class="je jf jg jh fd lx ly lz ma aw mb bi"><span id="6874" class="mc jt hi ly b fi md me l mf mg">Feature: My feature</span><span id="9421" class="mc jt hi ly b fi mh me l mf mg">   Scenario: 001<br/>      Given a username 'federico'<br/>      And an email 'federico.paparoni@xyz.mail'<br/>      And a bio 'Federico Paparoni wants to write something about Cucumber &amp; Testcontainer'</span><span id="bff3" class="mc jt hi ly b fi mh me l mf mg">...<br/>...</span><span id="ff36" class="mc jt hi ly b fi mh me l mf mg">   Scenario: 002<br/>      Given a username 'federico'<br/>      And an email 'federico.paparoni@xyz.mail'<br/>      And a bio 'Federico Paparoni wants to write something about Cucumber &amp; Testcontainer'</span><span id="148d" class="mc jt hi ly b fi mh me l mf mg">...<br/>...</span><span id="c0b5" class="mc jt hi ly b fi mh me l mf mg">   Scenario: 003<br/>      Given a username 'federico'<br/>      And an email 'federico.paparoni@xyz.mail'<br/>      And a bio 'Federico Paparoni wants to write something about Cucumber &amp; Testcontainer'</span><span id="54f3" class="mc jt hi ly b fi mh me l mf mg">...<br/>...</span></pre><p id="4fed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以使用<strong class="ih hj">背景</strong>关键字</p><pre class="je jf jg jh fd lx ly lz ma aw mb bi"><span id="2820" class="mc jt hi ly b fi md me l mf mg">Feature: Posts</span><span id="3986" class="mc jt hi ly b fi mh me l mf mg">Background: Author already saved<br/>   Given an author with username 'federico' already saved<br/>   And a post by author with username 'federico' already saved</span><span id="b035" class="mc jt hi ly b fi mh me l mf mg">...<br/>...</span></pre><p id="762f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如前所述，这些步骤将映射到Java方法，但是Cucumber将为单个特性的每个场景重复这些步骤</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h1 id="2e83" class="js jt hi bd ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp bi translated">测试容器</h1><p id="f14d" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">一旦你用Cucumber创建了测试，你就可以使用像<strong class="ih hj"> H2 </strong>这样的数据库，但是你不会意识到比Hello World更复杂的东西。在一个实际的项目中，您可能会使用一些特定的数据库特性(关系型或非关系型)，所以您的测试用例在现实环境中不会工作。</p><p id="2f1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae lr" href="https://www.testcontainers.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Testcontainer </strong> </a>为我们提供了一种在测试中使用容器的简单方法，因此我们可以与数据库、浏览器、队列消息系统或任何可以放在容器中的东西集成。</p><p id="8f0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将使用Testcontainer启动一个由这个<strong class="ih hj"> Dockerfile </strong>定义的<strong class="ih hj"> PostgreSQL </strong>数据库</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="d0f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还编写了一些脚本来为我们的博客引擎软件创建一些表格。要开始构建，您可以启动以下命令</p><pre class="je jf jg jh fd lx ly lz ma aw mb bi"><span id="f3e6" class="mc jt hi ly b fi md me l mf mg">docker build -t bddfun-database .</span></pre><p id="8eac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以将Testcontainer添加到我们的项目中</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="0034" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要启动Testcontainer，我们可以使用三种不同的方法。最简单的方法是使用一个特定的<strong class="ih hj"> JDBC URL </strong>，这将在JDBC <strong class="ih hj">驱动管理器</strong>中触发一种魔法，不需要太多的努力，我们将有一个PostgreSQL的运行实例</p><pre class="je jf jg jh fd lx ly lz ma aw mb bi"><span id="95c9" class="mc jt hi ly b fi md me l mf mg">spring.datasource:<br/>  url: jdbc:tc:postgresql:14.3:////&lt;DatabaseName&gt;<br/>  driver-class-name: org.testcontainers.jdbc.ContainerDatabaseDriver</span></pre><p id="1c46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个实例将是一个普通的实例，所以我们必须在我们的代码库中管理脚本并启动它们。另一种方法是<strong class="ih hj"> @Testcontainers </strong>和<strong class="ih hj"> @Container </strong>注释</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="81c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> @DynamicPropertySource </strong>将在我们的上下文中动态保存数据库属性，我们将有一个不同的PostgreSQL，它将从我们的<strong class="ih hj"> bddfun-database </strong>容器开始，为每个测试运行。</p><p id="046b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于每一个测试来说，拥有一个全新的数据库是很有帮助的，但是对于一个有很多测试用例的项目来说，这会大大延长构建时间。</p><p id="b838" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文选择的最后一个选项将为我们的测试提供一个完整的容器启动/停止控制</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="3c33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用这种方法，我们还将<strong class="ih hj">@ Cucumber context configuration</strong>应用于该类，因此Cucumber知道这将是我们测试使用的上下文。我们的项目使用Spring Boot，所以我们也添加了<strong class="ih hj"> @SpringBootTest </strong>注释。</p><p id="bda3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个配置为我们提供了自定义数据库的一个实例，由带有<strong class="ih hj"> @BeforeAll </strong>和<strong class="ih hj"> @AfterAll </strong> Cucumber注释的方法管理(类似于JUnit)。</p><p id="a6e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在运行构建，如果我们还记得开发我们博客软件的REST端点(！！！)，我们应该有下面的报告(<strong class="ih hj">cucumber-reports.html</strong>)生成在<strong class="ih hj">目标</strong>文件夹下</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mi"><img src="../Images/e454eabac722eacec92de9997ef9c0e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*evk5OF_qCAgP578h.png"/></div></div></figure><h1 id="ca51" class="js jt hi bd ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp bi translated">奖励曲目:莫奇托</h1><p id="c636" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我们的系统可能会比使用数据库的简单Spring Boot应用程序更复杂，所以我们必须假设我们的测试用例应该提供一种简单的方法来模拟外部系统。</p><p id="efa9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们有一个外部系统的容器，我们可以使用Testcontainer，但是有时这种方法会导致在我们的构建中运行很多容器(很多容器，很多内存，巨大的构建时间..).</p><p id="b33a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae lr" href="https://site.mockito.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Mockito </strong> </a>是一个测试框架，可以集成到黄瓜和Spring Boot的测试场景中。如果我们想要模仿一个服务，我们可以使用@MockBean注释</p><pre class="je jf jg jh fd lx ly lz ma aw mb bi"><span id="8c80" class="mc jt hi ly b fi md me l mf mg">@MockBean<br/>private<!-- --> <!-- -->MyRemoteService myRemoteService;</span></pre><p id="1ab8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个mock必须放在我们放置@CucumberContextConfiguration的同一个类中，这样Cucumber就会知道我们在为这个服务使用一个mock。</p><p id="17ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在稍后的测试中，我们可以模拟服务</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h1 id="8c44" class="js jt hi bd ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp bi translated">示例项目</h1><p id="ad82" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">本文的源代码可以在这个<a class="ae lr" href="https://github.com/fpaparoni/bddfun" rel="noopener ugc nofollow" target="_blank"> Github资源库</a>中找到</p><div class="mj mk ez fb ml mm"><a href="https://github.com/fpaparoni/bddfun" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab dw"><div class="mo ab mp cl cj mq"><h2 class="bd hj fi z dy mr ea eb ms ed ef hh bi translated">GitHub - fpaparoni/bddfun</h2><div class="mt l"><h3 class="bd b fi z dy mr ea eb ms ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mu l"><p class="bd b fp z dy mr ea eb ms ed ef dx translated">github.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na jj mm"/></div></div></a></div></div></div>    
</body>
</html>