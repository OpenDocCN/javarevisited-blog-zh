<html>
<head>
<title>Spring Boot Project using Kafka and R2DBC (Part I)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用卡夫卡和R2DBC的Spring Boot项目(上)</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/spring-boot-project-using-kafka-and-r2bc-part-i-a460627d308c?source=collection_archive---------6-----------------------#2021-04-23">https://medium.com/javarevisited/spring-boot-project-using-kafka-and-r2bc-part-i-a460627d308c?source=collection_archive---------6-----------------------#2021-04-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0179" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本教程是关于使用Spring Boot和Spring Kafka以及R2DBC创建一个简单的应用程序。</p><p id="8841" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要:</p><ul class=""><li id="2180" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">JDK 11</li><li id="0e24" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" rel="noopener" href="/javarevisited/5-best-gradle-courses-and-books-to-learn-in-2021-93f49ce8ff8e">格拉德</a></li><li id="dc8e" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" href="https://javarevisited.blogspot.com/2021/08/how-to-use-lombok-library-in-java.html" rel="noopener ugc nofollow" target="_blank">龙目岛</a></li><li id="a6ab" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" rel="noopener" href="/javarevisited/7-best-webflux-and-reactive-spring-boot-courses-for-java-programmers-33b7c6fa8995">春联</a></li><li id="4a09" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" rel="noopener" href="/javarevisited/top-10-apache-kafka-online-training-courses-and-certifications-621f3c13b38c">春天的卡夫卡</a></li><li id="b9f7" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">春天R2DBC</li><li id="8f4a" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" rel="noopener" href="/javarevisited/7-best-free-postgresql-courses-for-beginners-to-learn-in-2021-3bf369d73794"> PostgreSQL驱动程序</a></li><li id="52ac" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" rel="noopener" href="/javarevisited/5-best-docker-courses-for-java-and-spring-boot-developers-bbf01c5e6542">码头工人</a></li></ul><p id="ccf5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想象一下下面的场景:</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/65ab685033438ae13fb0ab181dee542d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HD9-pUw47Y3iZWkwOLAaZw.png"/></div></div></figure><p id="32a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有人想使用健康监测器(如心率传感器等)存储测量值。).收集数据并通过MQTT发送给代理(例如HiveMQ)。</p><p id="8470" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，测量服务订阅主题并将读取的测量值发送到健康服务，健康服务将分析信号是正常、高还是低。</p><p id="bf22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，如果某些迹象看起来很严重，通知服务可以向该人或医生发送SMS(或其他类型的通知)。</p><p id="2534" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在本教程中，我们将只开发健康服务，该服务将接收测量结果并发布分析数据的事件。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es ke"><img src="../Images/ae6137c4da44d6d136cd93d5034b41a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2dn2UKw7kmyCVg9wwEXFlQ.png"/></div></div></figure><p id="bf95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本教程将分为4个部分:</p><ol class=""><li id="32b4" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc kf jj jk jl bi translated"><a class="ae jr" href="https://gasmartins.medium.com/spring-boot-project-using-kafka-and-r2bc-part-i-a460627d308c" rel="noopener">设置项目</a></li><li id="9b90" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kf jj jk jl bi translated"><a class="ae jr" href="https://gasmartins.medium.com/spring-boot-project-using-kafka-and-r2bc-part-ii-967810ac4fb0" rel="noopener">建模领域类</a></li><li id="48f0" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kf jj jk jl bi translated"><a class="ae jr" href="https://gasmartins.medium.com/spring-boot-project-using-kafka-and-r2bc-part-iii-in-construction-b3a11422899" rel="noopener">建模持久性类</a></li><li id="3e1f" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kf jj jk jl bi translated"><a class="ae jr" href="https://gasmartins.medium.com/spring-boot-project-using-kafka-and-r2bc-part-iii-f19fccb409a8" rel="noopener">建模Web类</a></li><li id="bb56" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kf jj jk jl bi translated"><a class="ae jr" href="https://gasmartins.medium.com/spring-boot-project-using-kafka-and-r2bc-part-v-3bff5053a7a9" rel="noopener">建模事件类</a></li><li id="b624" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kf jj jk jl bi translated"><a class="ae jr" href="https://gasmartins.medium.com/spring-boot-project-using-kafka-and-r2bc-part-vi-426477276072" rel="noopener">使用docker运行应用和服务</a></li></ol><p id="877f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们设置我们的项目！！！</p></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="2653" class="kn ko hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">设置项目</h1><p id="78b9" class="pw-post-body-paragraph if ig hi ih b ii ll ik il im lm io ip iq ln is it iu lo iw ix iy lp ja jb jc hb bi translated">转到Spring initial Zr(<a class="ae jr" href="https://start.spring.io/" rel="noopener ugc nofollow" target="_blank">https://start.spring.io/</a>)并选择以下依赖项:</p><ul class=""><li id="2041" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">龙目岛</li><li id="b75a" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">阿帕奇卡夫卡的春天</li><li id="796c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">Spring Boot执行器(可选)</li><li id="cf16" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">侦察(可选)</li><li id="84e1" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">春季数据R2DBC</li><li id="1fa1" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" href="https://javarevisited.blogspot.com/2021/04/best-reactive-spring-and-webflux-courses-for-java-developers.html" rel="noopener ugc nofollow" target="_blank">弹簧反应网</a></li></ul><figure class="jt ju jv jw fd jx er es paragraph-image"><a href="https://javarevisited.blogspot.com/2020/05/top-20-spring-boot-interview-questions-answers.html"><div class="er es lq"><img src="../Images/85afef89d22f273e50e05eb0efcf9510.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7tfiNnoZtczQkluhR2nldw.png"/></div></a><p class="lr ls et er es lt lu bd b be z dx translated">创作实例</p></figure><p id="ffe4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>不要使用<strong class="ih hj"> spring-boot-devtools </strong>，你可能会遇到avro反序列化的问题。参见<a class="ae jr" href="https://github.com/spring-projects/spring-kafka/issues/1665" rel="noopener ugc nofollow" target="_blank">https://github.com/spring-projects/spring-kafka/issues/1665</a></p><p id="7bfc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> build.gradle </strong>文件将类似于:</p><figure class="jt ju jv jw fd jx"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="fa8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">而<strong class="ih hj"> settings.gradle </strong>应该是这样的:</p><figure class="jt ju jv jw fd jx"><div class="bz dy l di"><div class="lv lw l"/></div></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="4427" class="kn ko hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated"><strong class="ak">应用架构</strong></h1><p id="80f8" class="pw-post-body-paragraph if ig hi ih b ii ll ik il im lm io ip iq ln is it iu lo iw ix iy lp ja jb jc hb bi translated">我们可以使用基于多模块的方法，但是我们将使用一个基本的包组织。</p><p id="4a3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这个应用程序，我相信六边形架构看起来是一个不错的选择。</p><p id="bf44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图显示了这是如何工作的:</p><figure class="jt ju jv jw fd jx er es paragraph-image"><a href="https://medium.com/javarevisited/25-software-design-interview-questions-to-crack-any-programming-and-technical-interviews-4b8237942db0"><div class="er es lx"><img src="../Images/5113ce28f9d50cb50c9b01fadacfee97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Y3iu4iLrdYHV_GioQm20Q.png"/></div></a><p class="lr ls et er es lt lu bd b be z dx translated">六边形结构的例子</p></figure><p id="9c28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">相关链接</strong></p><p id="5ca1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一个教程:<a class="ae jr" href="https://gasmartins.medium.com/spring-boot-project-using-kafka-and-r2bc-part-ii-967810ac4fb0" rel="noopener">教程第二部分</a></p></div></div>    
</body>
</html>