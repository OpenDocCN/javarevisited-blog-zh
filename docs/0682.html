<html>
<head>
<title>Associative array like implementation in Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java中类似关联数组的实现</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/assocative-array-like-implementation-in-java-883997c660f5?source=collection_archive---------1-----------------------#2020-09-15">https://medium.com/javarevisited/assocative-array-like-implementation-in-java-883997c660f5?source=collection_archive---------1-----------------------#2020-09-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="11ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">许多编程语言支持带有命名索引的数组，例如<a class="ae jd" rel="noopener" href="/@javinpaul/top-10-courses-to-learn-c-for-beginners-best-and-free-4afc262a544e"> C++ </a>、<a class="ae jd" rel="noopener" href="/javarevisited/top-10-free-courses-to-learn-php-and-mysql-for-web-development-e96e69982675"> PHP </a>、<a class="ae jd" rel="noopener" href="/javarevisited/10-free-python-tutorials-and-courses-from-google-microsoft-and-coursera-for-beginners-96b9ad20b4e6"> Python </a>等。Java有一个使用映射数据结构的循环实现，但它不是一个关联数组。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/3abc66c42a45726df729b536504b1abd.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*6rR9iznN-n-uNbyoSlPsJA.jpeg"/></div><p class="jm jn et er es jo jp bd b be z dx translated">命名关联键值数组</p></figure><h1 id="961d" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">什么是关联数组？</h1><p id="24db" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">带有命名索引的数组称为关联数组(或散列)。</p><p id="e656" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">JavaScript中的关联数组</strong></p><p id="ad26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" rel="noopener" href="/javarevisited/10-best-online-courses-to-learn-javascript-in-2020-af5ed0801645"> JavaScript </a>不<strong class="ih hj">不</strong>支持带命名索引的数组。在JavaScript中，<strong class="ih hj">数组</strong>总是使用<strong class="ih hj">编号的索引</strong>。</p><p id="c799" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">甚至JavaScript数组基本上也只是对象，只是属性名是数字(0，1，…)。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="1e85" class="ky jr hi ku b fi kz la l lb lc">var myArray = {}; // creating a object<br/>myArray['a'] = 20; // setting the attribute a to 20<br/>myArray['b'] = 30; // setting the attribute b to 30</span></pre><p id="dcaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">重要的是要理解<code class="du ld le lf ku b">myArray['a'] = 20;</code>与<code class="du ld le lf ku b">myArray.a = 20;</code>是相同的</p><p id="699e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">c++中的关联数组</strong></p><p id="a206" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关联数组也被称为<strong class="ih hj">映射</strong>或<strong class="ih hj">字典</strong>。在<a class="ae jd" href="https://www.java67.com/2018/02/5-free-cpp-courses-to-learn-programming.html" rel="noopener ugc nofollow" target="_blank"> C++ </a>中。在这些数组中，索引可以是数字或任何其他数据类型，即可以是数字0、1、2、3..或者字符a、b、c、d… <br/>这些索引称为<strong class="ih hj"> <em class="lg">键</em> </strong>，存储在该位置的数据称为<br/> <strong class="ih hj"> <em class="lg">值</em> </strong>。所以在关联数组中我们有<strong class="ih hj"> (key，value) </strong>对。</p><p id="f7fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">PHP中的关联数组</strong></p><p id="0b52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两种方法可以创建关联阵列:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="7dbe" class="ky jr hi ku b fi kz la l lb lc">$age = array(“Naruto”=&gt;”15", “Sasuke”=&gt;”16", “Lee”=&gt;”17");</span><span id="9ddc" class="ky jr hi ku b fi lh la l lb lc">or</span><span id="0dfa" class="ky jr hi ku b fi lh la l lb lc">$age[‘Naruto’] = “15”;<br/>$age[‘Sasuke’] = “16”;<br/>$age[‘Lee’] = “17”;</span></pre><p id="a7d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">JAVA中的关联数组</strong></p><p id="80e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Java就像JavaScript一样<strong class="ih hj">不</strong>支持带有命名indexes.Java的数组<strong class="ih hj">数组</strong>总是使用<strong class="ih hj">编号的索引</strong>。但是Java有一个替代的字典实现，即Map，它提供了基于{key，value}对散列的机制和快速检索、冲突处理机制。</p><p id="1c4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是由于<a class="ae jd" href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" rel="noopener ugc nofollow" target="_blank"> Map </a>接口有很多功能要实现，我决定使用<a class="ae jd" href="https://docs.oracle.com/javase/8/docs/api/java/util/Dictionary.html" rel="noopener ugc nofollow" target="_blank">字典</a>接口，它有一套非常基本的方法(虽然这个接口现在已经过时了，但它最适合名为基本索引的关联数组。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/cd2bdc86fabad1127e30c8966b1df3b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y1W3UNaP6Dqzhx-5QbuzSg.png"/></div></div><p class="jm jn et er es jo jp bd b be z dx translated">字典接口的基本方法</p></figure><p id="1c8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以让我们深入研究代码:</p><p id="cf61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我通过实现Dictionary接口创建了ArrayDictionary类，它具有两个通用的数组变量:key和值(K[] keys，V[] values)，size &amp; incrementalSize。</p><p id="aef0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是github的完整实现链接:</p><div class="ln lo ez fb lp lq"><a href="https://github.com/root0109/util/blob/master/src/main/java/com/zaprit/collections/ArrayDictionary.java" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hj fi z dy lv ea eb lw ed ef hh bi translated">root0109/util</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">这是一组可以用来支持和简化java开发的工具。- root0109/util</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">github.com</p></div></div><div class="lz l"><div class="ma l mb mc md lz me jk lq"/></div></div></a></div><h2 id="fdbc" class="ky jr hi bd js mf mg mh jw mi mj mk ka iq ml mm ke iu mn mo ki iy mp mq km mr bi translated"><strong class="ak">我在哪里使用它？</strong></h2><p id="c342" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">正如我在关于序列化技术的博客中所解释的，处理大规模的开发人员倾向于通过选择<a class="ae jd" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/Externalizable.html" rel="noopener ugc nofollow" target="_blank">可外化</a> / <a class="ae jd" href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/io/Writable.html" rel="noopener ugc nofollow" target="_blank">可写</a>接口来实现他们自己的序列化机制，并决定如何序列化/反序列化成员变量。</p><p id="9de5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在下面阅读有关Java序列化问题的更多信息:</p><div class="ln lo ez fb lp lq"><a href="https://www.linqz.io/2018/03/serialization-techniques-for-highly-scalable-systems.html" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hj fi z dy lv ea eb lw ed ef hh bi translated">高度可伸缩系统的串行化技术</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">让我们一步一步地看看对象是如何序列化和反序列化的。所以当一个对象首先被序列化时…</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">www.linqz.io</p></div></div><div class="lz l"><div class="ms l mb mc md lz me jk lq"/></div></div></a></div><p id="946c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这两个接口都要求开发人员实现读/写方法。</p><p id="cb04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以很多人倾向于使用HashMap或LinkedHashMap实现来写入流和从流中读取，只是为了避免字节读/写顺序。</p><p id="76ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，Person类将id和name作为其成员变量。实现的读和写方法看起来像这样(下面的例子是<a class="ae jd" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/Externalizable.html" rel="noopener ugc nofollow" target="_blank">可外化的</a>读/写方法):</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="1c0c" class="ky jr hi ku b fi kz la l lb lc">@Override<br/>public void writeExternal(ObjectOutput out) throws IOException<br/>{<br/> Map&lt;String, Object&gt; serializedMap = new HashMap&lt;&gt;();<br/> serializedMap.put("id", id);<br/> serializedMap.put("name", this.getName());<br/> out.writeObject(serializedMap);<br/>}</span><span id="9b1f" class="ky jr hi ku b fi lh la l lb lc">@SuppressWarnings("unchecked")<br/>@Override<br/>public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException<br/>{<br/> Map&lt;String, Object&gt; deserializedMap = (Map&lt;String, Object&gt;) in.readObject();<br/> this.id = (String) deserializedMap.get("id");<br/> this.Name = (String) deserializedMap.get("name");<br/>}</span></pre><p id="3f34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Hashmap提供了不记住顺序的灵活性，但是增加了额外的内存开销。</p><p id="dd64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，为了避免这种情况，我在名为indexes的关联数组行上写了一个更简单有效的内存实现。所以ArrayDictionary替换了Hashmap，因此如果实现了<strong class="ih hj">可写的</strong>接口，那么实现将是:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="0db9" class="ky jr hi ku b fi kz la l lb lc">public void write(DataOutput out) throws IOException <br/>{<br/>  Dictionary&lt;String, Object&gt; serializedMap = new ArrayDictionary&lt;&gt;(); <br/>   serializedMap.put("id", id);<br/>   serializedMap.put("name", this.getName());<br/>   out.writeObject(serializedMap);<br/>}<br/><br/>public void readFields(DataInput in) throws IOException <br/>{<br/>    Dictionary&lt;String, Object&gt; deserializedMap = (ArrayDictionary&lt;String, Object&gt;) in.readObject();<br/>   this.id = (String) deserializedMap.get("id");<br/> this.Name = (String) deserializedMap.get("name");<br/>}</span></pre><p id="a261" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，上述用法描述了命名索引基数组的重要性。</p></div><div class="ab cl mt mu gp mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="hb hc hd he hf"><p id="aead" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你喜欢这个博客内容，请考虑买一杯咖啡。谢谢大家的支持！</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es na"><img src="../Images/72f3926be635730b25642ea784e4a95c.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/0*Sm4rEdKpMPuK1QLt.png"/></div></figure><p id="68ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有问题吗？建议？评论？</p><p id="1fd7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是什么？<a class="ae jd" rel="noopener" href="/@vaibhav0109"> <strong class="ih hj">在媒体上关注我</strong> </a>成为第一个阅读我的故事的人。</p></div></div>    
</body>
</html>