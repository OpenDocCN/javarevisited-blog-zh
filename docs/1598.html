<html>
<head>
<title>DTO or not to DTO?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DTO还是不去DTO？</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/dto-or-not-to-dto-58259d4228ec?source=collection_archive---------0-----------------------#2021-09-28">https://medium.com/javarevisited/dto-or-not-to-dto-58259d4228ec?source=collection_archive---------0-----------------------#2021-09-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/2aa850b84d7c84cbe1b9b32acb84fa4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nsjJGMFeiSDkojdzJ_rqeA.png"/></div></div></figure><div class=""/><p id="45f7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">免责声明:</strong> <em class="jo">这篇文章并没有考虑到</em> <a class="ae jp" rel="noopener" href="/javarevisited/java-14-new-language-features-1e185b7f120"> <em class="jo"> Java记录</em> </a> <em class="jo">的存在，它仅仅说的是dto，在他们的经典理解中。</em></p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="5b8d" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">我到底要不要用dto？</h1><p id="af3c" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">这是一个长期流行的，在某种程度上值得商榷，有时，甚至倾向于所谓的“神圣战争”的问题，非常简短的答案是</p><h1 id="b457" class="jx jy ht bd jz ka la kc kd ke lb kg kh ki lc kk kl km ld ko kp kq le ks kt ku bi translated"><strong class="ak"> —视情况而定。</strong></h1></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><p id="0a0a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">——DTO到底是什么？</p><p id="722a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">—它是一个<em class="jo">数据传输对象，</em>即数据聚集对象，其唯一目的是方便将数据从A点(源)传送到B点(目的)。</p><p id="8e26" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有很多人，在很多情况下，更喜欢一种方法(使用dto)而不是另一种方法(使用裸模型类/实体)，反之亦然；然而，没有哪种<em class="jo">单一来源的真理</em>更好用。</p><p id="3ddc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这在很大程度上取决于需求、软件设计、您决定坚持的架构方法、其他(与项目相关的)具体细节，甚至个人偏好。</p><p id="f239" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有些人甚至声称<strong class="is hu"> DTO是反模式的</strong>；有些人喜欢使用它们；有人认为，数据细化/调整应该发生在消费者/客户端(出于各种原因，其中之一可能是<em class="jo">没有API更改的策略</em>)。</p><p id="b698" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">话虽如此，是的，你可以简单地从你的控制器返回模型类(在<a class="ae jp" rel="noopener" href="/javarevisited/top-5-hibernate-online-training-courses-for-beginners-and-advance-java-programmers-469460596b2b"> Hibernate </a>中，它是@ <code class="du lf lg lh li b">Entity</code>)实例(或实例列表)并且<strong class="is hu">这种方法没有问题</strong>。我甚至可以说，这甚至没有违反任何来自<a class="ae jp" href="https://javarevisited.blogspot.com/2018/07/10-object-oriented-design-principles.html" rel="noopener ugc nofollow" target="_blank"> SOLID </a>或<a class="ae jp" rel="noopener" href="/javarevisited/10-oop-design-principles-you-can-learn-in-2020-f7370cccdd31?source=collection_home---4------1-----------------------"> Clean Code principles </a>的东西。</p><p id="4874" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是再一次..</p><blockquote class="lj"><p id="f889" class="lk ll ht bd lm ln lo lp lq lr ls jn dx translated">这取决于你用response做什么；你需要什么样的数据表示；正在讨论的对象的能力和目的应该是什么，等等..</p></blockquote><h1 id="ae3f" class="jx jy ht bd jz ka la kc kd ke lb kg kh ki lt kk kl km lu ko kp kq lv ks kt ku bi translated">在以下情况下，DTO通常是一种很好的做法:</h1><ol class=""><li id="fb30" class="lw lx ht is b it kv ix kw jb ly jf lz jj ma jn mb mc md me bi translated"><strong class="is hu">当您想要聚合来自不同[re]源的对象数据时，例如，您想要在持久层和业务(或Web)层之间放置一些<em class="jo">对象转换</em>逻辑:<br/> </strong>假设您正在使用ORM，并且您的数据库有一个Java代码抽象。现在想象一下，您从数据库中获取一个<code class="du lf lg lh li b">Employee</code>实例；然而，从另一个第三方web服务(或任何其他来源)中，您还会收到一些针对该<em class="jo">雇员</em>对象的<em class="jo">补充雇员</em>数据。说，是— <code class="du lf lg lh li b">EmployeeContact</code>。<br/>现在，您想将来自<em class="jo">雇员</em>对象的一些数据(假设它是<code class="du lf lg lh li b">ID</code>、<code class="du lf lg lh li b">Firstname</code>、<code class="du lf lg lh li b">Lastname</code>字段)和来自<em class="jo">雇员账户</em>对象的一些数据(假设它是<code class="du lf lg lh li b">City</code>、<code class="du lf lg lh li b">District</code>、<code class="du lf lg lh li b">Address</code>和<code class="du lf lg lh li b">PostalCode</code>字段)发送给客户机，客户机需要数据、建模雇员及其地址，但是您不希望分别发送这两个实例(尤其是，您不希望将所有的与发送两个实例并将组装责任委托给客户机不同，您可能会发现一个更好、更方便的替代方法是使用DTO。<br/>使用DTO看起来就像创建相应的DTO类(假设— <code class="du lf lg lh li b">EmployeeAddressDTO</code>)，它聚合了两个(或更多)模型类，并且对于这样一个类的每个实例，您将拥有一个聚合所需数据的模型，在上面的例子中，这些数据是来自<code class="du lf lg lh li b">employee</code>和<code class="du lf lg lh li b">employeeContact</code>对象的数据。顺便说一下，在这个汇总过程中，你可能还想做一些其他的事情，比如数据变更、调整、修改、计算等等。<br/>关键是你想要<em class="jo">组合来自不同来源的数据</em>，并把这种组合表示为一个统一的对象。这是使用DTO模式的一个很好的例子。DTO是可重用的，它符合单责任原则，并与其他层很好地隔离。<strong class="is hu">注，</strong>谓自；</li><li id="79a4" class="lw lx ht is b it mf ix mg jb mh jf mi jj mj jn mb mc md me bi translated"><strong class="is hu">当您不一定要组合从不同来源收到的数据，但您想要修改和定制您将返回的模型实例:<br/> </strong>假设您有一个非常大的实体(有很多字段)，调用相应端点(前端应用程序、移动设备或任何客户端)的客户端不需要接收这个巨大的实体(或实体列表)。如果你不顾客户的要求，仍然发送原始的/未改变的实体，你将会无效率地消耗网络带宽/负载(超过足够的)，性能将会降低，并且通常，你将会毫无理由地浪费计算资源。在这种情况下，您可能希望将您的原始实体转换为客户端需要的DTO对象(只有必填字段)。在这里，你甚至可能想要为一个实体、为不同的消费者/客户实现不同的DTO类，因为你可能想要为每个客户定制数据表示。</li></ol><p id="eff1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意，您可能会遇到这样的情况，当您的需求同时涉及上述第一点(聚合)和第二点(修改/定制)时。</p><figure class="ml mm mn mo fd hk er es paragraph-image"><a href="https://javarevisited.blogspot.com/2013/01/data-access-object-dao-design-pattern-java-tutorial-example.html#axzz5b2noKDk3"><div class="er es mk"><img src="../Images/2b52100f696dbc1422fddbbd17241923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8e_mF6vHAw57w58Vleb0nw.png"/></div></a></figure><p id="a633" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，如果您确定您的表/关系表示(实例<a class="ae jp" href="https://javarevisited.blogspot.com/2016/01/why-jpa-entity-or-hibernate-persistence-should-not-be-final-in-java.html#axzz5SmuS0lnR" rel="noopener ugc nofollow" target="_blank">@实体类</a>)正是客户需要的，就没有必要引入dto。</p><h1 id="d787" class="jx jy ht bd jz ka la kc kd ke lb kg kh ki lc kk kl km ld ko kp kq le ks kt ku bi translated">为了进一步支持这个想法，可以将@Entity返回到表示层，而不使用d to</h1><ol class=""><li id="ed92" class="lw lx ht is b it kv ix kw jb ly jf lz jj ma jn mb mc md me bi translated"><a class="ae jp" href="https://livebook.manning.com/book/java-persistence-with-hibernate-second-edition/chapter-3/64" rel="noopener ugc nofollow" target="_blank">3 . 3 . 2中的Java持久化与Hibernate，第二版</a>，甚至明确地激励它:</li></ol><blockquote class="mp mq mr"><p id="0efd" class="iq ir jo is b it iu iv iw ix iy iz ja ms jc jd je mt jg jh ji mu jk jl jm jn hb bi translated">您可以在持久性环境之外重用持久性类，例如，在单元测试或者在<strong class="is hu">表示层</strong>中。您可以使用常规的Java new操作符在任何运行时环境中创建实例，保持可测试性和可重用性；</p></blockquote><p id="b53f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.Hibernate实体<a class="ae jp" href="https://stackoverflow.com/a/2726357/1553537" rel="noopener ugc nofollow" target="_blank">不需要被</a>显式序列化。</p><h2 id="7414" class="mv jy ht bd jz mw mx my kd mz na nb kh jb nc nd kl jf ne nf kp jj ng nh kt ni bi translated">您可能喜欢的其他Hibernate和JPA文章</h2><div class="hh hi ez fb hj nj"><a rel="noopener follow" target="_blank" href="/javarevisited/top-5-hibernate-online-training-courses-for-beginners-and-advance-java-programmers-469460596b2b"><div class="nk ab dw"><div class="nl ab nm cl cj nn"><h2 class="bd hu fi z dy no ea eb np ed ef hs bi translated">2021年面向Java开发者的5门最佳Hibernate和JPA在线课程</h2><div class="nq l"><h3 class="bd b fi z dy no ea eb np ed ef dx translated">Hibernate是Java开发人员的一项关键技能，这些是在线学习Hibernate的最佳课程。</h3></div><div class="nr l"><p class="bd b fp z dy no ea eb np ed ef dx translated">medium.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx hp nj"/></div></div></a></div><div class="hh hi ez fb hj nj"><a rel="noopener follow" target="_blank" href="/javarevisited/top-5-books-to-learn-hibernate-for-java-developers-b2cb4b16ccd6"><div class="nk ab dw"><div class="nl ab nm cl cj nn"><h2 class="bd hu fi z dy no ea eb np ed ef hs bi translated">2021年学习Hibernate和JPA的前5本书</h2><div class="nq l"><h3 class="bd b fi z dy no ea eb np ed ef dx translated">Hibernate是最流行的开源ORM(对象关系映射)框架之一，它现在已经成为一个…</h3></div><div class="nr l"><p class="bd b fp z dy no ea eb np ed ef dx translated">medium.com</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx hp nj"/></div></div></a></div><div class="hh hi ez fb hj nj"><a href="https://www.java67.com/2016/02/top-20-hibernate-interview-questions.html" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab dw"><div class="nl ab nm cl cj nn"><h2 class="bd hu fi z dy no ea eb np ed ef hs bi translated">面向Java程序员的20大Hibernate面试问题及答案</h2><div class="nq l"><h3 class="bd b fi z dy no ea eb np ed ef dx translated">Hibernate是Java世界中最流行的持久性框架之一。Hibernate提供了一个对象到关系…</h3></div><div class="nr l"><p class="bd b fp z dy no ea eb np ed ef dx translated">www.java67.com</p></div></div><div class="ns l"><div class="nz l nu nv nw ns nx hp nj"/></div></div></a></div></div></div>    
</body>
</html>