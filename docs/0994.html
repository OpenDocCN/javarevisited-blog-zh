<html>
<head>
<title>How You Can Code Pac-Man In 2 Weeks Using Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Java在两周内编写Pac-Man</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/what-i-achieved-after-13-weeks-of-learning-java-e6a081c401c9?source=collection_archive---------0-----------------------#2021-02-11">https://medium.com/javarevisited/what-i-achieved-after-13-weeks-of-learning-java-e6a081c401c9?source=collection_archive---------0-----------------------#2021-02-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="866a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">这是一个循序渐进的指南，教你如何从头开始编写吃豆人的代码，尽管之前从未编写过游戏</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/da7876cb3108a034495dcc171ccd8cb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rHVnL0Drft8NF872"/></div></div><p class="jj jk et er es jl jm bd b be z dx translated">芭芭拉·赞多瓦尔在unsplash.com<a class="ae jn" href="https://unsplash.com/photos/nfA9WdbTfak" rel="noopener ugc nofollow" target="_blank">拍摄的</a><a class="ae jn" href="https://unsplash.com/@barbarazandoval" rel="noopener ugc nofollow" target="_blank">照片</a></p></figure><p id="2997" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">学习Java面向对象编程的最好方法就是编写游戏代码。</p><p id="2a40" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它教你如何创建类，以及抽象代码减少冗余的重要性。您将学习如何构建大型应用程序以及制作测试用例的重要性。但最重要的是，你学会了以一种有趣和吸引人的方式编码。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h2 id="b9a7" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">先决条件</h2><ul class=""><li id="67e8" class="lm ln hi jq b jr lo ju lp jx lq kb lr kf ls kj lt lu lv lw bi translated">关于控制流的知识(if，else，while，for，for each)</li><li id="fc83" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj lt lu lv lw bi translated">理解类(实例和静态方法/属性)</li><li id="775d" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj lt lu lv lw bi translated">对继承的理解</li><li id="8222" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj lt lu lv lw bi translated">谷歌搜索的博士学位</li></ul></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h2 id="eecf" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">如何开始</h2><p id="a994" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx mc jz ka kb md kd ke kf me kh ki kj hb bi translated">所有游戏的代码结构都有共同的主题思想</p><ul class=""><li id="f367" class="lm ln hi jq b jr js ju jv jx mf kb mg kf mh kj lt lu lv lw bi translated">它们都有一个主运行循环，游戏有“滴答”(游戏中的一种时间度量)以及对屏幕的绘制</li><li id="04e2" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj lt lu lv lw bi translated">它们都有一个主要的<code class="du mi mj mk ml b">Game</code>类，用来存储游戏属性，比如生命，剩余水果的数量</li><li id="6cfc" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj lt lu lv lw bi translated">他们使用<a class="ae jn" href="https://javarevisited.blogspot.com/2012/10/what-is-inheritance-in-java-and-oops-programming.html" rel="noopener ugc nofollow" target="_blank">继承</a>来最小化冗余代码。例如，一个<code class="du mi mj mk ml b">GameObject</code>类可以作为所有绘制到屏幕上的对象(吃豆人、鬼魂、水果和墙壁)的父类</li></ul><p id="28c6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">编写游戏程序时，重要的是要有一个你期望你的代码如何构造的计划。每段代码都应该有明确的意图——缺乏计划会导致代码杂乱无章，调试起来也很头疼。现在花几分钟计划将会节省你调试的时间。</p><p id="e32f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因此，阅读项目规范，<strong class="jq hj">创建一个类层次结构</strong> (UML图)和<strong class="jq hj">创建一个事件列表，详细说明您希望您的程序在运行一次后如何执行</strong>。将游戏分解成几个独立的步骤对于界定游戏的范围和弄清楚你的代码如何组合在一起是至关重要的。</p><p id="7a8b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">包括调用了哪些函数，它们如何工作的简要描述，以及将修改哪些对象——您希望从开始到结束都有一个逻辑有序的事件链。</p><p id="6ec4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">系统化是游戏编程的关键。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><a href="https://javarevisited.blogspot.com/2018/05/top-5-java-courses-for-beginners-to-learn-online.html"><div class="er es mm"><img src="../Images/fde2c154d8fa2cce8588993cb3fe75a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fmu09x-HUBvgOJQp"/></div></a><p class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://unsplash.com/@sharkovski?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kirill Sharkovski </a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="7f2f" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">程序应该如何运行的概述</h2><ol class=""><li id="301c" class="lm ln hi jq b jr lo ju lp jx lq kb lr kf ls kj mn lu lv lw bi translated">运行程序初始化一个<code class="du mi mj mk ml b">App</code>类的实例<em class="mo"> s. </em> <code class="du mi mj mk ml b">settings()</code>和<code class="du mi mj mk ml b">setup()</code>被自动调用，创建游戏窗口并初始化一个<code class="du mi mj mk ml b">Game</code>对象。</li><li id="aea7" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">游戏设置<a class="ae jn" href="https://javarevisited.blogspot.com/2015/03/parsing-large-json-files-using-jackson.html#axzz5YVgi0isQ" rel="noopener ugc nofollow" target="_blank"> JSON文件</a>和<code class="du mi mj mk ml b">map.txt</code>一样被解析，创建<code class="du mi mj mk ml b">GameObjects</code>的2d矩阵，存储各自的精灵和位置。<code class="du mi mj mk ml b">GameObject</code>将父类型的所有对象绘制到屏幕上</li><li id="4384" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">在<code class="du mi mj mk ml b">draw()</code>中，所有精灵都被绘制到屏幕上</li><li id="75c2" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">按键被记录下来，pacman被移动</li><li id="9bbf" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">吃豆人和鬼魂的实体被“勾选”，检查彼此、墙壁和水果的碰撞</li><li id="75af" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">这些鬼魂被赋予了各自的行为，并定期在“分散”和“追逐”状态之间切换</li><li id="79df" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">如果吃豆人失去3条生命或吃光所有水果，游戏结束。赢/输被绘制到屏幕上</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/342c5977594fb7eb6ecb3e470208a768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PC9TcHFelRxnorCoSNiFfw.png"/></div></div><p class="jj jk et er es jl jm bd b be z dx translated">Pacman的类层次结构/ UML图</p></figure><p id="4fc2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">上面的UML图应该用作指南，但是您可以随意做出自己的更改。</p><p id="990b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">尽量不要被这个项目的规模所压倒。帮助我应对的是把整个项目分解成小步骤。这意味着我的目标很小，很容易完成，这让我可以像滚雪球一样把我的小胜利变成一个完整的游戏。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="e693" class="mq ks hi bd kt mr ms mt kx mu mv mw lb io mx ip le ir my is lh iu mz iv lk na bi translated">1.创建应用程序类</h1><p id="1ec3" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx mc jz ka kb md kd ke kf me kh ki kj hb bi translated">从写主循环开始。你将从项目说明书中看到，我们正在使用<a class="ae jn" href="https://processing.github.io/processing-javadocs/core/processing/core/PApplet.html" rel="noopener ugc nofollow" target="_blank"> PApplet </a>和<a class="ae jn" href="https://processing.github.io/processing-javadocs/core/processing/core/PImage.html" rel="noopener ugc nofollow" target="_blank"> PImage </a>。两者都有丰富的javadoc和有用的javadoc。PApplet将用于创建游戏的主窗口，而PImage将用于加载实体的精灵。</p><h2 id="9994" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated"><strong class="ak">创建一个窗口，将精灵绘制到屏幕上</strong></h2><p id="4b1f" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx mc jz ka kb md kd ke kf me kh ki kj hb bi translated"><code class="du mi mj mk ml b">PApplet</code>将有<code class="du mi mj mk ml b">setup()</code>和<em class="mo"> </em> <code class="du mi mj mk ml b">settings()</code>的功能。脚手架已经填充了一部分，所以您应该专注于创建必要的对象。</p><p id="0f87" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">应该尽快初始化<code class="du mi mj mk ml b">Game</code>，最好是在调用<code class="du mi mj mk ml b">App() </code>构造函数的时候。在加载<code class="du mi mj mk ml b">map.txt</code>之前需要解析<a class="ae jn" href="https://www.java67.com/2017/05/how-to-convert-java-object-to-json-using-Gson-example-tutorial.html" rel="noopener ugc nofollow" target="_blank"> JSON文件</a>，因为它包含了所有的游戏设置ie。生命数量，实体速度。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nb nc l"/></div></figure><p id="8002" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">代码的解释。运行<code class="du mi mj mk ml b">App.java</code>后，构造函数<code class="du mi mj mk ml b">App()</code>将被调用，创建<code class="du mi mj mk ml b">Game</code>的一个实例。然后，<code class="du mi mj mk ml b">setup()</code>被自动调用，设置<code class="du mi mj mk ml b">frameRate</code>为60fps。包含设置的JSON文件被解析，例如生命，分散模式的长度，游戏从<code class="du mi mj mk ml b">map.txt</code>加载，其中包含地图如何布局的信息。</strong></p><h2 id="9def" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">创建主游戏循环，<em class="nd">，draw() </em>。</h2><p id="c818" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx mc jz ka kb md kd ke kf me kh ki kj hb bi translated">从PApplet文档中，您将看到该函数每帧调用一次——在本例中，每秒调用60次。</p><p id="3f27" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这个循环中，您需要将实体绘制到屏幕上，并对每个实体使用<code class="du mi mj mk ml b">tick()</code>函数，检查pacman、幽灵和墙壁之间的碰撞。你将需要添加一个检查赢的情况下，如<code class="du mi mj mk ml b">if (this.game.fruits == 0) { // do something }</code>。</p><p id="8f83" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于<code class="du mi mj mk ml b">draw()</code>，我推荐看看javadocs，尤其是返回PImage对象的<code class="du mi mj mk ml b">app.loadImage(spriteFilepath)</code>和将PImage渲染到屏幕指定位置的<code class="du mi mj mk ml b">app.image(PImage, x, y)</code>。</p><p id="63f2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">请注意，根据项目规范，吃豆人应该在张开嘴和紧闭嘴的精灵之间交替。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nb nc l"/></div></figure><p id="8457" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">代码的解释。</strong> <code class="du mi mj mk ml b">background(0,0,0);</code> <em class="mo"> </em>负责通过在之前的帧上绘制黑屏来刷新屏幕。<code class="du mi mj mk ml b">draw()</code>使用PApplet和PImage中的函数</p><p id="ecd6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du mi mj mk ml b">tick() </code>函数将在后面的文章中更深入地讨论，但简单地说，它负责以下动作</p><ol class=""><li id="3d22" class="lm ln hi jq b jr js ju jv jx mf kb mg kf mh kj mn lu lv lw bi translated">检查实体是否仍然存在</li><li id="6a05" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">(幽灵)检查游戏的当前状态，例如分散或追逐</li><li id="85d1" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">(重影)根据当前状态选择目标位置</li><li id="1669" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">把最后一次按键当作一个动作</li><li id="c2b0" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">将实体的移动排入队列</li><li id="7c06" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">检查潜在的碰撞</li><li id="b5b9" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">如果没有碰撞，移动游戏对象并根据最后一次移动更新精灵位置。如果移动会导致碰撞，请不要执行</li></ol><p id="7795" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du mi mj mk ml b">draw()</code>使用PApplet中的<code class="du mi mj mk ml b">app.image()</code>将精灵绘制到屏幕上。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nb nc l"/></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="75dc" class="mq ks hi bd kt mr ms mt kx mu mv mw lb io mx ip le ir my is lh iu mz iv lk na bi translated">2.解析JSON设置文件和map.txt</h1><p id="214e" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx mc jz ka kb md kd ke kf me kh ki kj hb bi translated">需要读取两个文件，第一个是JSON文件，其中包含游戏的所有设置，比如生命的数量、实体的速度、特定阶段的持续时间。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nb nc l"/></div></figure><p id="7b97" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个特殊的资源有助于学习如何解析JSON文件。</p><div class="ne nf ez fb ng nh"><a href="https://stackoverflow.com/a/46888601/14304605" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab dw"><div class="nj ab nk cl cj nl"><h2 class="bd hj fi z dy nm ea eb nn ed ef hh bi translated">如何使用Java和一个简单的JSON库读入JSON文件</h2><div class="no l"><p class="bd b fp z dy nm ea eb nn ed ef dx translated">stackoverflow.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu jh nh"/></div></div></a></div><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nb nc l"/></div></figure><p id="f01e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">代码的解释。这段代码创建了一个<code class="du mi mj mk ml b">JSONParser</code>对象，它允许我们读取JSON文件。特定字段即。<em class="mo">地图、生命、速度</em>都作为实例属性存储在<code class="du mi mj mk ml b">Game</code>类<em class="mo">中。如果有任何错误，它们将被捕获，程序的执行将停止。</em></strong></p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="9a00" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一旦JSON文件被解析，就需要使用<code class="du mi mj mk ml b">loadGame()</code>来加载游戏地图。编写简单游戏代码时，一个常见的编程思想是将所有的<code class="du mi mj mk ml b">GameObjects</code>存储在一个列表列表中(2d网格)。将对象存储为2d网格意味着每个元素都有一个可以链接到x，y坐标系的特定位置。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nv"><img src="../Images/acf09831bef0e980b96e427cfc22afe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/0*wfhRXRnWNcIIpkNd.jpg"/></div><p class="jj jk et er es jl jm bd b be z dx translated">照片来自<a class="ae jn" href="https://www.programiz.com/java-programming/multidimensional-array" rel="noopener ugc nofollow" target="_blank">programiz.com</a></p></figure><p id="534c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">每个<code class="du mi mj mk ml b">GameObject</code>应该至少存储来自<code class="du mi mj mk ml b">map.txt</code>的精灵、x、y和相应的字符。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nb nc l"/></div></figure><p id="7321" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">代码的解释。</strong>创建一个<code class="du mi mj mk ml b">GameObjects</code>的二维矩阵。包含<code class="du mi mj mk ml b">GameObjects</code>的数组列表的<a class="ae jn" href="https://www.java67.com/2015/06/20-java-arraylist-interview-questions.html" rel="noopener ugc nofollow" target="_blank">数组列表</a>。每个<code class="du mi mj mk ml b">GameObject</code>存储子画面、位置以及来自<code class="du mi mj mk ml b">map.txt</code>的相应字符。</p><p id="9f02" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du mi mj mk ml b">map.txt</code>被逐行读取，每个字符被迭代。对于遇到的每个值，使用一个<a class="ae jn" href="https://www.java67.com/2013/02/10-examples-of-hashmap-in-java-programming-tutorial.html" rel="noopener ugc nofollow" target="_blank"> HashMap </a>将字符与其对应的sprite文件路径配对。例如，“g”映射到<code class="du mi mj mk ml b">“src/main/resources/ghost.png”</code>。PApplet用于将文件路径转换为PImage sprite。</p><p id="c040" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">每个精灵都是16x16个单位大，这就是为什么x和y在循环的每次迭代中增加16。</p><p id="0612" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">由于每个对象都有不同的行为，所以它们的处理方式都略有不同</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nb nc l"/></div></figure><p id="a98a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果单元是一个玩家(“p”)，则创建一个玩家对象，并将其作为游戏的属性。这允许游戏容易地和直接地与玩家对象交互，而不需要每次都在2d矩阵中找到它。</p><p id="d77f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果该单元是重影(“a”或“c”或“I”或“w”)，则创建重影对象并将其添加到重影列表中。将实体添加到列表中(对墙也是如此)可以更容易地检查实体冲突。这可以通过在每次勾选时遍历重影和墙壁的列表来检查，并检查像素是否重叠，从而指示碰撞。</p><p id="6139" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果单元格是水果，那么您可以给每个<code class="du mi mj mk ml b">GameObject</code>赋予实例属性<code class="du mi mj mk ml b">isFruit</code>，在本例中将其设置为true。你可以在玩家<code class="du mi mj mk ml b">tick()</code>中设置一个检查，这样如果玩家用<code class="du mi mj mk ml b">isFruit == true</code>越过一个物体，玩家就会吃掉它，精灵就会消失。记录水果的总数，这样你就可以检查水果的情况。<code class="du mi mj mk ml b">if this.fruits == 0</code>，那么所有的水果都被吃掉，玩家赢了。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h2 id="1c12" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated"><strong class="ak">总结</strong></h2><p id="2ee4" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx mc jz ka kb md kd ke kf me kh ki kj hb bi translated">到目前为止，你已经完成了3件大事</p><ol class=""><li id="9d74" class="lm ln hi jq b jr js ju jv jx mf kb mg kf mh kj mn lu lv lw bi translated">App.java——你已经建立了游戏的主要运行循环</li><li id="24b8" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">Game.java——你已经从JSON文件中加载了游戏设置</li><li id="75c9" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj mn lu lv lw bi translated">Game.java——您已经遍历了<code class="du mi mj mk ml b">map.txt</code>文件，获得了相应的字符，找到了对应的子画面，用子画面和位置初始化了一个<code class="du mi mj mk ml b">GameObject</code>,并将所有的<code class="du mi mj mk ml b">GameObjects</code>存储在一个2d矩阵中</li></ol><p id="0d27" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在你应该可以看到屏幕上的所有实体了！</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nw"><img src="../Images/9a79c7f8249f5dd1ac186af2b39014b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*OO7Ex2dT6Xu4dLnygGFcgA.png"/></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="2754" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">感谢您的阅读！如果你想让我继续这个系列，请表示你的支持。</p><p id="39ac" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该系列目前的计划如下:</p><ul class=""><li id="ce62" class="lm ln hi jq b jr js ju jv jx mf kb mg kf mh kj lt lu lv lw bi translated">第2部分—如何编写pacman和ghost运动的代码</li><li id="8d6f" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj lt lu lv lw bi translated">第3部分—如何对像素冲突检测进行编码</li><li id="be06" class="lm ln hi jq b jr lx ju ly jx lz kb ma kf mb kj lt lu lv lw bi translated">第4部分——如何对个人幽灵行为进行编码</li></ul></div></div>    
</body>
</html>