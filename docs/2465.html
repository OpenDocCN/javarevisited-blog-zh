<html>
<head>
<title>Spring Boot 2 + JUnit 5 + Mockito</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Spring Boot 2 +朱尼特5 +莫奇托</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/spring-boot-2-junit-5-mockito-d8e2e5c8a90d?source=collection_archive---------0-----------------------#2022-11-02">https://medium.com/javarevisited/spring-boot-2-junit-5-mockito-d8e2e5c8a90d?source=collection_archive---------0-----------------------#2022-11-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/10a6faeb3ed398f05e65a34a1d1b834d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_EbnYDko_m74_LIjtmYX1Q.png"/></div></div><p class="iq ir et er es is it bd b be z dx translated">Spring Boot 2 +朱尼特5 +莫奇托</p></figure><h1 id="e296" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">介绍</h1><p id="c447" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在本文中，我们将学习如何在Spring Boot应用程序中使用Mockito创建一个JUnit 5测试类。JUnit是Java应用程序最流行的测试框架之一。JUnit 5支持Java 8的所有现代特性，并允许在测试中使用许多不同的方法和风格。</p><p id="dc77" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">在本文中，我们将使用以下三种方法。</p><ul class=""><li id="1d12" class="kv kw hi ju b jv kq jz kr kd kx kh ky kl kz kp la lb lc ld bi translated">使用<code class="du le lf lg lh b">MockMvc</code>执行REST调用进行测试。</li><li id="a185" class="kv kw hi ju b jv li jz lj kd lk kh ll kl lm kp la lb lc ld bi translated">利用<code class="du le lf lg lh b">TestRestTemplate</code>调用REST API的Spring boot测试。</li><li id="de9f" class="kv kw hi ju b jv li jz lj kd lk kh ll kl lm kp la lb lc ld bi translated"><code class="du le lf lg lh b">HelloController</code>类的单元测试。</li></ul></div><div class="ab cl ln lo gp lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hb hc hd he hf"><h1 id="7038" class="iu iv hi bd iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn ly jp jq jr bi translated">Maven依赖性</h1><p id="58dc" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">幸运的是，来自版本<code class="du le lf lg lh b">2.2.0</code>的<code class="du le lf lg lh b">spring-boot-starter-test</code>依赖项已经随Junit 5一起提供，并且还包含用于测试的Hamcrest和Mockito库。这是个好消息，因为我们不需要在最终的<code class="du le lf lg lh b">pom.xml</code>文件中添加很多依赖项。</p><p id="4784" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">JUnit 5由两个组件组成，例如:</p><ul class=""><li id="32d2" class="kv kw hi ju b jv kq jz kr kd kx kh ky kl kz kp la lb lc ld bi translated">JUnit Jupiter——用于在JUnit 5中编写测试和扩展，</li><li id="8c2b" class="kv kw hi ju b jv li jz lj kd lk kh ll kl lm kp la lb lc ld bi translated">JUnit Vintage —为在平台上运行基于JUnit 3和JUnit 4的测试提供测试引擎。</li></ul><p id="8940" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">对于我们的例子，我们不需要JUnit 3和JUnit 4支持，这就是为什么我们将排除这种依赖性。</p><p id="2f58" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">最终<code class="du le lf lg lh b">pom.xml</code>的结构如下:</p><pre class="lz ma mb mc fd md lh me mf aw mg bi"><span id="cdb1" class="mh iv hi lh b fi mi mj l mk ml"><br/>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br/>&lt;project  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br/>         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;<br/>    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;<br/><br/>    &lt;groupId&gt;com.demo.springboot&lt;/groupId&gt;<br/>    &lt;artifactId&gt;spring-boot2-junit5-mockito&lt;/artifactId&gt;<br/>    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;<br/><br/>    &lt;!-- Inherit defaults from Spring Boot --&gt;<br/>    &lt;parent&gt;<br/>        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;<br/>        &lt;version&gt;2.4.1&lt;/version&gt;<br/>    &lt;/parent&gt;<br/><br/>    &lt;properties&gt;<br/>        &lt;java.version&gt;1.8&lt;/java.version&gt;<br/>    &lt;/properties&gt;<br/><br/>    <strong class="lh hj">&lt;!-- Add typical dependencies for a web application --&gt;</strong><br/>    &lt;dependencies&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;<br/>        &lt;/dependency&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;<br/>            &lt;scope&gt;test&lt;/scope&gt;<br/>            &lt;exclusions&gt;<br/>                &lt;exclusion&gt;<br/>                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;<br/>                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;<br/>                &lt;/exclusion&gt;<br/>            &lt;/exclusions&gt;<br/>        &lt;/dependency&gt;<br/>    &lt;/dependencies&gt;<br/><br/>    <strong class="lh hj">&lt;!-- Package as an executable jar --&gt;</strong><br/>    &lt;build&gt;<br/>        &lt;plugins&gt;<br/>            &lt;plugin&gt;<br/>                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;<br/>            &lt;/plugin&gt;<br/>        &lt;/plugins&gt;<br/>    &lt;/build&gt;<br/>&lt;/project&gt;</span></pre><p id="bcf4" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我们有两个主要的依赖关系:</p><ul class=""><li id="475a" class="kv kw hi ju b jv kq jz kr kd kx kh ky kl kz kp la lb lc ld bi translated"><code class="du le lf lg lh b">spring-boot-starter-web</code> - web容器用于创建Spring REST API。</li><li id="25bc" class="kv kw hi ju b jv li jz lj kd lk kh ll kl lm kp la lb lc ld bi translated"><code class="du le lf lg lh b">spring-boot-starter-test</code> -单元和集成测试的主要依赖项。</li></ul><p id="0a6c" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated"><code class="du le lf lg lh b">spring-boot-maven-plugin</code>用于创建Spring Boot应用程序的可执行jar。</p></div><div class="ab cl ln lo gp lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hb hc hd he hf"><h1 id="01e6" class="iu iv hi bd iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn ly jp jq jr bi translated">项目结构</h1><p id="aa7f" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">测试项目具有以下结构:</p><pre class="lz ma mb mc fd md lh me mf aw mg bi"><span id="6b7f" class="mh iv hi lh b fi mi mj l mk ml"><br/>├── pom.xml<br/>├── src<br/>│   ├── main<br/>│   │   ├── java<br/>│   │   │   └── com<br/>│   │   │       └── demo<br/>│   │   │           └── springboot<br/>│   │   │               ├── Application.java<br/>│   │   │               ├── controller<br/>│   │   │               │   └── HelloController.java<br/>│   │   │               └── service<br/>│   │   │                   └── HelloService.java<br/>│   └── test<br/>│       └── java<br/>│           └── com<br/>│               └── demo<br/>│                   └── springboot<br/>│                       └── controller<br/>│                           ├── HelloControllerMockitoTest.java<br/>│                           ├── HelloControllerMockMvcTest.java<br/>│                           └── HelloControllerRestTemplTest.java</span></pre><p id="bd39" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我们使用以下类:</p><ul class=""><li id="6104" class="kv kw hi ju b jv kq jz kr kd kx kh ky kl kz kp la lb lc ld bi translated"><code class="du le lf lg lh b">Application</code> -用于启动web容器的主Spring Boot应用程序类。</li><li id="73e6" class="kv kw hi ju b jv li jz lj kd lk kh ll kl lm kp la lb lc ld bi translated"><code class="du le lf lg lh b">HelloController</code> -测试用弹簧支架控制器。</li><li id="d955" class="kv kw hi ju b jv li jz lj kd lk kh ll kl lm kp la lb lc ld bi translated"><code class="du le lf lg lh b">HelloService</code> -用于检查autowire在测试中如何工作的Spring服务。</li><li id="ef4c" class="kv kw hi ju b jv li jz lj kd lk kh ll kl lm kp la lb lc ld bi translated"><code class="du le lf lg lh b">HelloControllerMockitoTest</code> -使用Mockito测试<code class="du le lf lg lh b">HelloController</code>，</li><li id="e80e" class="kv kw hi ju b jv li jz lj kd lk kh ll kl lm kp la lb lc ld bi translated"><code class="du le lf lg lh b">HelloControllerMockMvcTest</code> -使用MockMvc测试<code class="du le lf lg lh b">HelloController</code>，</li><li id="9464" class="kv kw hi ju b jv li jz lj kd lk kh ll kl lm kp la lb lc ld bi translated"><code class="du le lf lg lh b">HelloControllerRestTemplTest</code> -使用TestRestTemplate测试<code class="du le lf lg lh b">HelloController</code>。</li></ul></div><div class="ab cl ln lo gp lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hb hc hd he hf"><h1 id="9f1e" class="iu iv hi bd iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn ly jp jq jr bi translated">用于JUnit 5测试的Spring REST API</h1><h2 id="42d6" class="mh iv hi bd iw mm mn mo ja mp mq mr je kd ms mt ji kh mu mv jm kl mw mx jq my bi translated"><code class="du le lf lg lh b">HelloController</code></h2><p id="0c85" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">名为<code class="du le lf lg lh b">HelloController</code>的Spring REST控制器将被用作我们测试的主类。它使用<code class="du le lf lg lh b">@Autowired</code>注释来注入<code class="du le lf lg lh b">HelloService</code>。</p><p id="e5f5" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated"><code class="du le lf lg lh b">@GetMapping</code>注释标记了<code class="du le lf lg lh b">greeting()</code>方法，从现在开始，该方法将用于处理对根路径<code class="du le lf lg lh b">/</code>的所有<code class="du le lf lg lh b">GET</code>请求。</p><pre class="lz ma mb mc fd md lh me mf aw mg bi"><span id="fedc" class="mh iv hi lh b fi mi mj l mk ml">package com.demo.springboot.controller;<br/><br/>import org.springframework.beans.factory.annotation.Autowired;<br/>import org.springframework.web.bind.annotation.GetMapping;<br/>import org.springframework.web.bind.annotation.ResponseBody;<br/>import org.springframework.web.bind.annotation.RestController;<br/><br/>import com.demo.springboot.service.HelloService;<br/><br/>@RestController<br/>public class HelloController {<br/><br/>    private final HelloService helloService;<br/><br/>    @Autowired<br/>    public HelloController(HelloService helloService) {<br/>        this.helloService = helloService;<br/>    }<br/><br/>    @GetMapping("/")<br/>    public @ResponseBody String greeting() {<br/>        return helloService.getWelcomeMessage();<br/>    }<br/>}</span></pre><h2 id="7921" class="mh iv hi bd iw mm mn mo ja mp mq mr je kd ms mt ji kh mu mv jm kl mw mx jq my bi translated">你好服务</h2><p id="cf5e" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated"><code class="du le lf lg lh b">HelloService</code>是一个简单的Spring服务，其方法<code class="du le lf lg lh b">getWelcomeMessage()</code>将在REST控制器类中运行。这个类的主要目的是展示我们如何在JUnit测试中使用Mockito来模拟类。</p><pre class="lz ma mb mc fd md lh me mf aw mg bi"><span id="b281" class="mh iv hi lh b fi mi mj l mk ml"><br/>package com.demo.springboot.service;<br/><br/>import org.springframework.stereotype.Service;<br/><br/>@Service<br/>public class HelloService {<br/><br/>    public String getWelcomeMessage() {<br/>        return "Hello World!";<br/>    }<br/>}</span></pre><h2 id="0c52" class="mh iv hi bd iw mm mn mo ja mp mq mr je kd ms mt ji kh mu mv jm kl mw mx jq my bi translated">主<code class="du le lf lg lh b">@SpringBootApplication</code>类</h2><p id="f1af" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">主Spring Boot应用程序类标有<code class="du le lf lg lh b">@SpringBootApplication</code>注释，并且包含一个单独的<code class="du le lf lg lh b">public static void main(String[] args)</code>方法，该方法默认启动web容器Tomcat。</p><pre class="lz ma mb mc fd md lh me mf aw mg bi"><span id="ea72" class="mh iv hi lh b fi mi mj l mk ml"><br/>package com.demo.springboot;<br/><br/>import org.springframework.boot.SpringApplication;<br/>import org.springframework.boot.autoconfigure.SpringBootApplication;<br/><br/>@SpringBootApplication<br/>public class Application {<br/><br/>    public static void main(String[] args) {<br/>        SpringApplication.run(Application.class, args);<br/>    }<br/>}</span></pre></div><div class="ab cl ln lo gp lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hb hc hd he hf"><h1 id="f141" class="iu iv hi bd iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn ly jp jq jr bi translated">方法1:使用<code class="du le lf lg lh b">MockMvc</code>执行REST调用进行测试</h1><p id="6aa1" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">让我们从一个使用<code class="du le lf lg lh b">MockMvc</code>的测试类开始我们的测试冒险。在这种方法中，不会启动Spring Boot应用服务器，但是会以与处理HTTP请求完全相同的方式调用代码。</p><p id="285e" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">测试类如下所示:</p><pre class="lz ma mb mc fd md lh me mf aw mg bi"><span id="c5fa" class="mh iv hi lh b fi mi mj l mk ml">package com.demo.springboot.controller;<br/><br/>import static org.hamcrest.Matchers.containsString;<br/>import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;<br/>import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;<br/>import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;<br/>import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;<br/><br/>import org.junit.jupiter.api.Test;<br/>import org.springframework.beans.factory.annotation.Autowired;<br/>import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;<br/>import org.springframework.boot.test.context.SpringBootTest;<br/>import org.springframework.test.web.servlet.MockMvc;<br/><br/>@SpringBootTest<br/>@AutoConfigureMockMvc<br/>public class HelloControllerMockMvcTest {<br/><br/>    @Autowired<br/>    private MockMvc mockMvc;<br/><br/>    @Test<br/>    public void shouldReturnDefaultMessage() throws Exception {<br/>        this.mockMvc.perform(get("/"))<br/>                    .andDo(print())<br/>                    .andExpect(status().isOk())<br/>                    .andExpect(content().string(containsString("Hello World!")));<br/>    }<br/>}</span></pre><p id="9637" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我们使用了<code class="du le lf lg lh b">MockMvc</code>类和<code class="du le lf lg lh b">@AutoConfigureMockMvc</code>来配置它并将其注入到测试类中。<code class="du le lf lg lh b">MockMvc</code>类用于执行API调用，但是Spring将只测试在<code class="du le lf lg lh b">HelloController</code>中处理它们的实现，而不是HTTP请求。</p><h1 id="65de" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">方法2:利用<code class="du le lf lg lh b">TestRestTemplate</code>调用REST API的Spring boot测试</h1><p id="0035" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在下一个方法中，我们将使用用于启动Spring应用程序上下文的<code class="du le lf lg lh b">@SpringBootTest</code>注释。</p><pre class="lz ma mb mc fd md lh me mf aw mg bi"><span id="921b" class="mh iv hi lh b fi mi mj l mk ml"><br/>package com.demo.springboot.controller;<br/><br/>import static org.assertj.core.api.Assertions.assertThat;<br/><br/>import org.junit.jupiter.api.BeforeEach;<br/>import org.junit.jupiter.api.Test;<br/>import org.springframework.beans.factory.annotation.Autowired;<br/>import org.springframework.boot.test.context.SpringBootTest;<br/>import org.springframework.boot.test.web.client.TestRestTemplate;<br/>import org.springframework.boot.web.server.LocalServerPort;<br/><br/>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)<br/>public class HelloControllerRestTemplTest {<br/><br/>    @LocalServerPort<br/>    private int port;<br/><br/>    private String url;<br/><br/>    @Autowired<br/>    private TestRestTemplate restTemplate;<br/><br/>    @BeforeEach<br/>    public void setUp() {<br/>        url = String.format("http://localhost:%d/", port);<br/>    }<br/><br/>    @Test<br/>    public void greetingShouldReturnDefaultMessage() {<br/>        assertThat(this.restTemplate.getForObject(url, String.class)).contains("Hello World!");<br/>    }<br/>}</span></pre><p id="7f14" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">在这种方法中，我们可以像在运行时应用程序中一样使用<code class="du le lf lg lh b">@Autowired</code>注释。Spring将解释它们并进行必要的注入。在<code class="du le lf lg lh b">@SpringBootTest</code>测试中，真正的Spring Boot应用服务器正在启动。</p><p id="6aba" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">在测试中，我们使用了:</p><ul class=""><li id="32d8" class="kv kw hi ju b jv kq jz kr kd kx kh ky kl kz kp la lb lc ld bi translated"><code class="du le lf lg lh b">webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT</code> -使用随机端口启动服务器，以避免任何端口冲突。</li><li id="8701" class="kv kw hi ju b jv li jz lj kd lk kh ll kl lm kp la lb lc ld bi translated"><code class="du le lf lg lh b">@LocalServerPort</code> -该注释告诉Spring向特定字段注入一个随机端口，</li><li id="9041" class="kv kw hi ju b jv li jz lj kd lk kh ll kl lm kp la lb lc ld bi translated"><code class="du le lf lg lh b">TestRestTemplate</code> - <code class="du le lf lg lh b">RestTemplate</code>用于测试用来发出一个真实的HTTP请求。</li></ul><h1 id="945a" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">方法3:<code class="du le lf lg lh b">HelloController</code>类的Mockito单元测试</h1><p id="f9a2" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如果我们想在测试<code class="du le lf lg lh b">HelloController</code>类时模仿一些对象，我们可以在单元测试中使用Mockito框架。在这种方法中，我们只是用JUnit和Mockito测试类，而没有进行任何HTTP调用。这是可能的，因为我们的REST控制器是一个普通的类。</p><pre class="lz ma mb mc fd md lh me mf aw mg bi"><span id="c992" class="mh iv hi lh b fi mi mj l mk ml"><br/>package com.demo.springboot.controller;<br/><br/>import static org.assertj.core.api.Assertions.assertThat;<br/>import static org.mockito.Mockito.when;<br/><br/>import org.junit.jupiter.api.BeforeEach;<br/>import org.junit.jupiter.api.Test;<br/>import org.junit.jupiter.api.extension.ExtendWith;<br/>import org.mockito.InjectMocks;<br/>import org.mockito.Mock;<br/>import org.mockito.junit.jupiter.MockitoExtension;<br/><br/>import com.demo.springboot.service.HelloService;<br/><br/>@ExtendWith(MockitoExtension.class)<br/>public class HelloControllerMockitoTest {<br/><br/>    @Mock<br/>    private HelloService helloService;<br/><br/>    @InjectMocks<br/>    private HelloController helloController;<br/><br/>    @BeforeEach<br/>    void setMockOutput() {<br/>        when(helloService.getWelcomeMessage()).thenReturn("Hello Mockito Test");<br/>    }<br/><br/>    @Test<br/>    public void shouldReturnDefaultMessage() {<br/>        String response = helloController.greeting();<br/>        assertThat(response).isEqualTo("Hello Mockito Test");<br/>    }<br/>}</span></pre><p id="9275" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">要开始在JUnit测试中使用Mockito，我们需要用<code class="du le lf lg lh b">@ExtendWith(MockitoExtension.class)</code>注释一个类。在我们的测试类中，我们模仿<code class="du le lf lg lh b">HelloService</code>来改变<code class="du le lf lg lh b">getWelcomeMessage()</code>方法的响应。<code class="du le lf lg lh b">@InjectMocks</code>注释告诉Mockito将所有模拟对象注入到测试类中。</p><h1 id="169e" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">结论</h1><p id="8cf0" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在本文中，我们介绍了几种使用JUnit 5和Mockito库测试Spring REST控制器的方法。这取决于我们是想使用<code class="du le lf lg lh b">@SpringBootTest</code>注释启动真正的Spring Boot服务器，还是简单地运行使用<code class="du le lf lg lh b">MockMvc</code>在HTTP请求上调用的实现。如果需要模仿或窥探依赖关系，也可以使用Mockito来测试REST控制器类。</p></div></div>    
</body>
</html>