<html>
<head>
<title>Code Smell 140 — Short Circuit Evaluation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">代码气味140 —短路评估</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/code-smell-140-short-circuit-evaluation-8afa1015ae11?source=collection_archive---------3-----------------------#2022-06-13">https://medium.com/javarevisited/code-smell-140-short-circuit-evaluation-8afa1015ae11?source=collection_archive---------3-----------------------#2022-06-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4c3d" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">我们在最初的编程课程中学习捷径。我们需要记住为什么。</h2></div><figure class="iz ja jb jc fd jd er es paragraph-image"><a href="https://javarevisited.blogspot.com/2015/01/difference-between-bitwsie-and-logical.html"><div class="er es iy"><img src="../Images/5b097db1db197440cbfe1b504a59e661.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Lq7jk4JOBnJs1QYQFbpyQ.jpeg"/></div></a></figure><blockquote class="jg jh ji"><p id="c162" class="jj jk jl jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated"><em class="hi">TL；DR:在评估布尔条件时偷懒</em></p></blockquote><h1 id="f6a4" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">问题</h1><ul class=""><li id="2cf3" class="ky kz hi jm b jn la jq lb lc ld le lf lg lh kf li lj lk ll bi translated">副作用</li><li id="f541" class="ky kz hi jm b jn lm jq ln lc lo le lp lg lq kf li lj lk ll bi translated">双向断层</li><li id="f0ab" class="ky kz hi jm b jn lm jq ln lc lo le lp lg lq kf li lj lk ll bi translated">性能问题</li></ul><h1 id="c0b9" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">解决方法</h1><ol class=""><li id="c316" class="ky kz hi jm b jn la jq lb lc ld le lf lg lh kf lr lj lk ll bi translated">用短路代替完整的评估</li></ol><h1 id="9539" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">语境</h1><p id="e271" class="pw-post-body-paragraph jj jk hi jm b jn la ij jp jq lb im js lc ls jv jw le lt jz ka lg lu kd ke kf hb bi translated">我们在101计算机课程中学习布尔。</p><p id="6598" class="pw-post-body-paragraph jj jk hi jm b jn jo ij jp jq jr im js lc ju jv jw le jy jz ka lg kc kd ke kf hb bi translated">布尔的真值表对数学来说很棒，但是作为软件工程师，我们需要更聪明。</p><p id="72ba" class="pw-post-body-paragraph jj jk hi jm b jn jo ij jp jq jr im js lc ju jv jw le jy jz ka lg kc kd ke kf hb bi translated">短路评估帮助我们偷懒，甚至建立无效的完整评估。</p><h1 id="c3fa" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">示例代码</h1><h2 id="2af0" class="lv kh hi bd ki lw lx ly km lz ma mb kq lc mc md ks le me mf ku lg mg mh kw mi bi translated">错误的</h2><pre class="iz ja jb jc fd mj mk ml mm aw mn bi"><span id="7651" class="lv kh hi mk b fi mo mp l mq mr">&lt;?</span><span id="65dc" class="lv kh hi mk b fi ms mp l mq mr">if (isOpen(file) &amp; size(contents(file)) &gt; 0)<br/>  // Full evaluation <br/>  // Will fail since we cannot retrieve contents <br/>  // from not open file</span></pre><h2 id="e725" class="lv kh hi bd ki lw lx ly km lz ma mb kq lc mc md ks le me mf ku lg mg mh kw mi bi translated">对吧</h2><pre class="iz ja jb jc fd mj mk ml mm aw mn bi"><span id="7c67" class="lv kh hi mk b fi mo mp l mq mr">&lt;?</span><span id="e239" class="lv kh hi mk b fi ms mp l mq mr">if (isOpen(file) &amp;&amp; size(contents(file)) &gt; 0)<br/>  // Short circuit evaluation <br/>  // If file is not open it will not get the contents</span></pre><h1 id="907d" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">侦查</h1><p id="352b" class="pw-post-body-paragraph jj jk hi jm b jn la ij jp jq lb im js lc ls jv jw le lt jz ka lg lu kd ke kf hb bi translated">[X]自动</p><p id="e639" class="pw-post-body-paragraph jj jk hi jm b jn jo ij jp jq jr im js lc ju jv jw le jy jz ka lg kc kd ke kf hb bi translated">我们可以在开发人员使用完全评估时警告他们。</p><h1 id="2c79" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">标签</h1><ul class=""><li id="cb4d" class="ky kz hi jm b jn la jq lb lc ld le lf lg lh kf li lj lk ll bi translated">布尔代数学体系的</li></ul><h1 id="e1bc" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">例外</h1><p id="7ca5" class="pw-post-body-paragraph jj jk hi jm b jn la ij jp jq lb im js lc ls jv jw le lt jz ka lg lu kd ke kf hb bi translated">不要使用短路作为IF替代方案。</p><p id="e4fa" class="pw-post-body-paragraph jj jk hi jm b jn jo ij jp jq jr im js lc ju jv jw le jy jz ka lg kc kd ke kf hb bi translated">如果操作数有副作用，这是另一种代码味道。</p><h1 id="593a" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">结论</h1><p id="f40d" class="pw-post-body-paragraph jj jk hi jm b jn la ij jp jq lb im js lc ls jv jw le lt jz ka lg lu kd ke kf hb bi translated">大多数编程语言都支持短路。</p><p id="7025" class="pw-post-body-paragraph jj jk hi jm b jn jo ij jp jq jr im js lc ju jv jw le jy jz ka lg kc kd ke kf hb bi translated">他们中的许多人把它作为唯一的选择。</p><p id="c130" class="pw-post-body-paragraph jj jk hi jm b jn jo ij jp jq jr im js lc ju jv jw le jy jz ka lg kc kd ke kf hb bi translated">我们需要喜欢这种表达方式。</p><h1 id="854d" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">关系</h1><div class="mt mu ez fb mv mw"><a href="https://blog.devgenius.io/code-smell-97-error-messages-without-empathy-952c320976d8" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">代码气味97——没有同理心的错误消息</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">我们应该特别注意用户(和我们自己)的错误描述。</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">blog.devgenius.io</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk je mw"/></div></div></a></div><div class="mt mu ez fb mv mw"><a href="https://blog.devgenius.io/code-smell-69-big-bang-javascript-ridiculous-castings-870f20469322" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">代码气味69 —大爆炸(JavaScript荒谬的铸件)</h2><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">blog.devgenius.io</p></div></div><div class="nf l"><div class="nl l nh ni nj nf nk je mw"/></div></div></a></div><h1 id="3bed" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">更多信息</h1><ul class=""><li id="c916" class="ky kz hi jm b jn la jq lb lc ld le lf lg lh kf li lj lk ll bi translated"><a class="ae nm" href="https://en.wikipedia.org/wiki/Short-circuit_evaluation" rel="noopener ugc nofollow" target="_blank">维基百科</a></li></ul></div><div class="ab cl nn no gp np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="hb hc hd he hf"><blockquote class="jg jh ji"><p id="1283" class="jj jk jl jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">编写一个没有合同的类就像生产一个没有规范的工程组件(电路、VLSI(超大规模集成)芯片、桥、引擎……)。没有专业工程师会考虑这个想法。</p></blockquote><p id="a7e5" class="pw-post-body-paragraph jj jk hi jm b jn jo ij jp jq jr im js lc ju jv jw le jy jz ka lg kc kd ke kf hb bi translated"><em class="jl">伯特兰·梅耶</em></p><div class="mt mu ez fb mv mw"><a href="https://blog.devgenius.io/software-engineering-great-quotes-3af63cea6782" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">软件工程名言</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">有时一个简短的想法可以带来惊人的想法。</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">blog.devgenius.io</p></div></div><div class="nf l"><div class="nu l nh ni nj nf nk je mw"/></div></div></a></div></div><div class="ab cl nn no gp np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="hb hc hd he hf"><p id="da4b" class="pw-post-body-paragraph jj jk hi jm b jn jo ij jp jq jr im js lc ju jv jw le jy jz ka lg kc kd ke kf hb bi translated">本文是CodeSmell系列的一部分。</p><div class="mt mu ez fb mv mw"><a href="https://blog.devgenius.io/how-to-find-the-stinky-parts-of-your-code-fa8df47fc39c" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">如何找到你的代码中有问题的部分</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">代码很难闻。让我们看看如何改变香味。</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">blog.devgenius.io</p></div></div><div class="nf l"><div class="nv l nh ni nj nf nk je mw"/></div></div></a></div></div></div>    
</body>
</html>