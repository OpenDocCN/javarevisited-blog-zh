<html>
<head>
<title>Local Variable Type Inference: Declare var, not war</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">局部变量类型推断:声明var，而不是war</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/declare-var-not-war-5bfb7a1a399e?source=collection_archive---------3-----------------------#2020-12-31">https://medium.com/javarevisited/declare-var-not-war-5bfb7a1a399e?source=collection_archive---------3-----------------------#2020-12-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if"><p id="6f12" class="ig ih hi bd ii ij ik il im in io ip dx translated">在本文中，我将尝试使用保留类型名var来解释Java 10的新特性局部变量类型推断。</p></blockquote><figure class="ir is it iu iv iw er es paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="er es iq"><img src="../Images/e5bfb71c8374d6bc34fcb8095e164217.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b8buQkPwQH3Xg3Eo"/></div></div><p class="jd je et er es jf jg bd b be z dx translated">照片由<a class="ae jh" href="https://unsplash.com/@casparrubin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡斯帕·卡米尔·鲁宾</a>在<a class="ae jh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1709" class="pw-post-body-paragraph ji jj hi jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke ip hb bi translated">Java变化很快，随着新的6个月发布周期的到来，我们将在每个版本中尝试新的特性。Java 10中新增了一个<a class="ae jh" href="https://openjdk.java.net/jeps/286" rel="noopener ugc nofollow" target="_blank">特性</a> <strong class="jk hj"> <em class="kf">局部变量类型推理</em> </strong>。它的基本目的是减少样板代码，提高用初始化器声明局部变量时的可读性。</p><blockquote class="if"><p id="4658" class="ig ih hi bd ii ij kg kh ki kj kk ip dx translated">程序必须写给人们阅读，顺便提一下，也必须写给机器执行~ <strong class="ak">哈罗德·艾贝尔森</strong></p></blockquote><p id="f780" class="pw-post-body-paragraph ji jj hi jk b jl kl jn jo jp km jr js jt kn jv jw jx ko jz ka kb kp kd ke ip hb bi translated">我们用一个例子来理解这个。以下代码是在没有使用<a class="ae jh" href="https://javarevisited.blogspot.com/2018/03/finally-java-10-has-var-to-declare-local-variables.html" rel="noopener ugc nofollow" target="_blank">局部变量类型推理</a>的情况下编写的。</p><figure class="kq kr ks kt fd iw"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="61c9" class="pw-post-body-paragraph ji jj hi jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke ip hb bi translated">根据Java 10局部变量类型推理进行重构后。</p><figure class="kq kr ks kt fd iw"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="2e79" class="pw-post-body-paragraph ji jj hi jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke ip hb bi translated">在上面重构的代码中，编译器可以通过查看RHS声明来推断声明的类型本身。</p><p id="66ca" class="pw-post-body-paragraph ji jj hi jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke ip hb bi translated">这些只是一些例子，帮助你理解这个特性以及我们如何使用局部变量类型推理。</p></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><p id="d5e4" class="pw-post-body-paragraph ji jj hi jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke ip hb bi translated">现在让我们了解一下局部变量类型推理在哪里可以使用，在哪里不可以使用。</p><h2 id="ac83" class="ld le hi bd lf lg lh li lj lk ll lm ln jt lo lp lq jx lr ls lt kb lu lv lw lx bi translated">在那里它可以被使用</h2><ol class=""><li id="76a6" class="ly lz hi jk b jl ma jp mb jt mc jx md kb me ip mf mg mh mi bi translated">局部变量初始值设定项</li><li id="10ef" class="ly lz hi jk b jl mj jp mk jt ml jx mm kb mn ip mf mg mh mi bi translated">增强型<code class="du mo mp mq mr b">for</code>循环中的索引</li><li id="1ef8" class="ly lz hi jk b jl mj jp mk jt ml jx mm kb mn ip mf mg mh mi bi translated">局部变量在传统的<code class="du mo mp mq mr b">for</code>循环中声明</li><li id="1561" class="ly lz hi jk b jl mj jp mk jt ml jx mm kb mn ip mf mg mh mi bi translated"><a class="ae jh" href="https://javarevisited.blogspot.com/2011/09/arm-automatic-resource-management-in.html" rel="noopener ugc nofollow" target="_blank"> try-with-resources语句的资源变量</a></li><li id="a6a8" class="ly lz hi jk b jl mj jp mk jt ml jx mm kb mn ip mf mg mh mi bi translated">隐式类型<a class="ae jh" rel="noopener" href="/javarevisited/7-best-java-tutorials-and-books-to-learn-lambda-expression-and-stream-api-and-other-features-3083e6038e14?source=---------14------------------"> lambda表达式</a>的形参。(Java <a class="ae jh" href="https://openjdk.java.net/jeps/323" rel="noopener ugc nofollow" target="_blank"> 11 </a>新增支持)</li></ol><p id="1de7" class="pw-post-body-paragraph ji jj hi jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke ip hb bi translated">下面的代码片段展示了一些有效的例子。</p><figure class="kq kr ks kt fd iw"><div class="bz dy l di"><div class="ku kv l"/></div></figure><h2 id="82d3" class="ld le hi bd lf lg lh li lj lk ll lm ln jt lo lp lq jx lr ls lt kb lu lv lw lx bi translated">在不能使用的地方</h2><ol class=""><li id="e480" class="ly lz hi jk b jl ma jp mb jt mc jx md kb me ip mf mg mh mi bi translated">菲尔茨</li><li id="650e" class="ly lz hi jk b jl mj jp mk jt ml jx mm kb mn ip mf mg mh mi bi translated">方法参数</li><li id="262d" class="ly lz hi jk b jl mj jp mk jt ml jx mm kb mn ip mf mg mh mi bi translated">方法返回类型</li><li id="0146" class="ly lz hi jk b jl mj jp mk jt ml jx mm kb mn ip mf mg mh mi bi translated">没有任何初始化的局部变量声明</li><li id="6f26" class="ly lz hi jk b jl mj jp mk jt ml jx mm kb mn ip mf mg mh mi bi translated">无法使用空值进行初始化</li></ol><p id="343d" class="pw-post-body-paragraph ji jj hi jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke ip hb bi translated">我试图在下面的代码片段中解释，如果以不受支持的方式使用它，会出现什么样的编译器错误。</p><figure class="kq kr ks kt fd iw"><div class="bz dy l di"><div class="ku kv l"/></div></figure></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><h2 id="334f" class="ld le hi bd lf lg lh li lj lk ll lm ln jt lo lp lq jx lr ls lt kb lu lv lw lx bi translated">有什么好处？</h2><p id="e5d3" class="pw-post-body-paragraph ji jj hi jk b jl ma jn jo jp mb jr js jt ms jv jw jx mt jz ka kb mu kd ke ip hb bi translated">如果你问我个人，我认为开发者应该明智地使用它。众所周知，每当一个新功能出现时，你肯定会兴奋不已，想要尝试一下。但是你必须明白，作为开发人员，我们阅读代码的次数比我们编写代码的次数要多。</p><p id="532e" class="pw-post-body-paragraph ji jj hi jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke ip hb bi translated">因为这关系到可读性，所以有些人会喜欢它，有些人会讨厌它。因此，如果在代码审查期间，有人说他们无法获得声明的类型<code class="du mo mp mq mr b">var </code>,那么这意味着其他人不太清楚，所以也许切换回我们显式声明类型的老式方法并不是那么糟糕。同样，在某些情况下，声明的类型非常明显，那么你可以跳过显式声明的类型，使用<em class="kf">变量</em>。</p><h2 id="8c37" class="ld le hi bd lf lg lh li lj lk ll lm ln jt lo lp lq jx lr ls lt kb lu lv lw lx bi translated">结论</h2><p id="2919" class="pw-post-body-paragraph ji jj hi jk b jl ma jn jo jp mb jr js jt ms jv jw jx mt jz ka kb mu kd ke ip hb bi translated">在本文中，我们已经介绍了什么是局部变量类型推断【Java 10的新特性,并举例说明了它在哪些地方可以使用，在哪些地方不被支持。可以进一步阅读OpenJDK团队准备的这些关于局部变量类型推理<strong class="jk hj"> <em class="kf">的<a class="ae jh" href="https://openjdk.java.net/projects/amber/LVTIFAQ.html" rel="noopener ugc nofollow" target="_blank">FAQ</a>。</em> </strong></p><h2 id="5df5" class="ld le hi bd lf lg lh li lj lk ll lm ln jt lo lp lq jx lr ls lt kb lu lv lw lx bi translated">支持我</h2><p id="e5b4" class="pw-post-body-paragraph ji jj hi jk b jl ma jn jo jp mb jr js jt ms jv jw jx mt jz ka kb mu kd ke ip hb bi translated">如果你喜欢你刚刚读到的，你可以给我买杯咖啡。</p><figure class="kq kr ks kt fd iw er es paragraph-image"><a href="https://www.buymeacoffee.com/meashish"><div class="er es mv"><img src="../Images/883994fb2cde2cb170202b796dac9bb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/0*zpLAgysjoDBd4fxu.png"/></div></a></figure><h2 id="cbac" class="ld le hi bd lf lg lh li lj lk ll lm ln jt lo lp lq jx lr ls lt kb lu lv lw lx bi translated">进一步阅读</h2><p id="d77a" class="pw-post-body-paragraph ji jj hi jk b jl ma jn jo jp mb jr js jt ms jv jw jx mt jz ka kb mu kd ke ip hb bi translated">可以继续看我之前的一些文章。</p><div class="mw mx ez fb my mz"><a href="https://ashishtechmill.com/10-books-every-java-developer-must-read" rel="noopener  ugc nofollow" target="_blank"><div class="na ab dw"><div class="nb ab nc cl cj nd"><h2 class="bd hj fi z dy ne ea eb nf ed ef hh bi translated">每个Java开发人员必读的10本书</h2><div class="ng l"><h3 class="bd b fi z dy ne ea eb nf ed ef dx translated">每个有经验的Java开发人员必读的书籍列表。涵盖并发性等主题…</h3></div><div class="nh l"><p class="bd b fp z dy ne ea eb nf ed ef dx translated">ashishtechmill.com</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn jb mz"/></div></div></a></div><div class="mw mx ez fb my mz"><a href="https://ashishtechmill.com/containerizing-spring-boot-application-with-jib" rel="noopener  ugc nofollow" target="_blank"><div class="na ab dw"><div class="nb ab nc cl cj nd"><h2 class="bd hj fi z dy ne ea eb nf ed ef hh bi translated">用Jib集装箱化Spring Boot应用</h2><div class="ng l"><h3 class="bd b fi z dy ne ea eb nf ed ef dx translated">在本帖中，我们将了解如何创建docker或OCI投诉图片，而无需安装任何docker客户端或…</h3></div><div class="nh l"><p class="bd b fp z dy ne ea eb nf ed ef dx translated">ashishtechmill.com</p></div></div><div class="ni l"><div class="no l nk nl nm ni nn jb mz"/></div></div></a></div></div></div>    
</body>
</html>