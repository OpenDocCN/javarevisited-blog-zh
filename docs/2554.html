<html>
<head>
<title>Simple ways to deploy in OpenShift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在OpenShift中部署的简单方法</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/deploying-in-openshift-a42c6870cbb1?source=collection_archive---------4-----------------------#2022-12-04">https://medium.com/javarevisited/deploying-in-openshift-a42c6870cbb1?source=collection_archive---------4-----------------------#2022-12-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="aec3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本地主机</p><p id="6fd3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OpenShift是一个基于Kubernetes的基于云的容器编排平台。它提供了一个自助式平台来按需创建、修改和部署应用程序，从而加快开发和发布生命周期。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2020/07/top-5-courses-to-learn-redhat-openshift.html"><div class="er es jd"><img src="../Images/53235c9cf8fa87d1670f67f59bc9414d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ToGUu0VVFiv0O9BBUsRX9w.png"/></div></a></figure><p id="fd71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">内容</strong></p><ul class=""><li id="1c84" class="jl jm hi ih b ii ij im in iq jn iu jo iy jp jc jq jr js jt bi translated"><a class="ae ju" href="#6bf0" rel="noopener ugc nofollow">为什么部署在OpenShift </a>？</li><li id="29a3" class="jl jm hi ih b ii jv im jw iq jx iu jy iy jz jc jq jr js jt bi translated"><a class="ae ju" href="#716c" rel="noopener ugc nofollow">先决条件</a></li><li id="826d" class="jl jm hi ih b ii jv im jw iq jx iu jy iy jz jc jq jr js jt bi translated"><a class="ae ju" href="#4109" rel="noopener ugc nofollow">部署应用程序的方式</a> <br/> - <a class="ae ju" href="#76e3" rel="noopener ugc nofollow">来自源代码</a>-<br/>-<a class="ae ju" href="#2560" rel="noopener ugc nofollow">来自图像库</a>-<br/>-<a class="ae ju" href="#c45b" rel="noopener ugc nofollow">来自图像流</a></li></ul><blockquote class="ka kb kc"><p id="6bf0" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">为什么在OpenShift中部署？</p></blockquote><p id="85a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有一大堆<a class="ae ju" href="https://www.redhat.com/en/technologies/cloud-computing/openshift/features" rel="noopener ugc nofollow" target="_blank">功能</a>是<a class="ae ju" rel="noopener" href="/javarevisited/6-best-openshift-courses-for-beginners-and-experienced-developers-d124edd2baff"> OpenShift </a>开箱即用提供的，而不是在裸机上一个一个地带来。<a class="ae ju" href="https://www.redhat.com/en/technologies/cloud-computing/openshift/red-hat-openshift-kubernetes#openshift-vs-kubernetes" rel="noopener ugc nofollow" target="_blank">这里是为什么应该选择OpenShift而不是Kubernetes的概述</a>。</p><p id="227f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">抛开理论不谈，让我们从开发人员的角度来看看一个基本的应用程序部署有多容易或多难。</p><blockquote class="ka kb kc"><p id="716c" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">先决条件</p></blockquote><p id="6036" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章假设读者已经，</p><ul class=""><li id="05ec" class="jl jm hi ih b ii ij im in iq jn iu jo iy jp jc jq jr js jt bi translated">暴露于<a class="ae ju" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank">码头环境</a></li><li id="8d6b" class="jl jm hi ih b ii jv im jw iq jx iu jy iy jz jc jq jr js jt bi translated">暴露于任何eco系统中的应用程序部署</li></ul><blockquote class="ka kb kc"><p id="4109" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">部署应用程序的方法</p></blockquote><p id="98bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想在本地设置<strong class="ih hj">打开</strong>，查看以下帖子</p><div class="kh ki ez fb kj kk"><a href="https://medium.suriyaprakhash.com/openshift-local-setup-a22130731bc2" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab dw"><div class="km ab kn cl cj ko"><h2 class="bd hj fi z dy kp ea eb kq ed ef hh bi translated">OpenShift本地设置</h2><div class="kr l"><h3 class="bd b fi z dy kp ea eb kq ed ef dx translated">2分钟内OC码就绪容器</h3></div><div class="ks l"><p class="bd b fp z dy kp ea eb kq ed ef dx translated">medium.suriyaprakhash.com</p></div></div><div class="kt l"><div class="ku l kv kw kx kt ky jj kk"/></div></div></a></div><p id="1dce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将应用程序部署到OpenShift有多种方式。</p><p id="82e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kd">最简单的方法</em>是使用<strong class="ih hj">控制台UI </strong>来添加/移除资源/项目/应用程序。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2022/05/docker-interview-questions-answers-for.html"><div class="er es kz"><img src="../Images/affffb7149d3a9708f5694815f720af1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rSfzWLAyqivxrDd1YbAzew.png"/></div></a></figure><p id="d65b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，在<em class="kd">现实世界</em>中，我们会使用某种<strong class="ih hj">管道</strong>来<em class="kd">部署</em>应用程序。其中，通过<strong class="ih hj">自动化脚本</strong>部署应用程序可能会派上用场。</p><p id="60cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，这里有三种简单的方法<strong class="ih hj">将应用程序部署到OpenShift集群中，主要使用<strong class="ih hj"> <em class="kd">命令行工具</em> </strong>，它可以成为管道脚本的一部分。</strong></p><ul class=""><li id="c97e" class="jl jm hi ih b ii ij im in iq jn iu jo iy jp jc jq jr js jt bi translated">来自源代码</li><li id="9837" class="jl jm hi ih b ii jv im jw iq jx iu jy iy jz jc jq jr js jt bi translated">来自图像存储库</li><li id="c010" class="jl jm hi ih b ii jv im jw iq jx iu jy iy jz jc jq jr js jt bi translated">来自图像流</li></ul><blockquote class="ka kb kc"><p id="76e3" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">来自源代码</p></blockquote><p id="2c1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码既可以在<strong class="ih hj">本地</strong>中，也可以在<strong class="ih hj">远程源代码</strong>库中，比如<a class="ae ju" href="https://about.gitlab.com/" rel="noopener ugc nofollow" target="_blank"> Gitlab </a>或<a class="ae ju" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>。</p><p id="aff3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">— <strong class="ih hj">代码库</strong></p><pre class="je jf jg jh fd la lb lc bn ld le bi"><span id="ee6a" class="lf lg hi lb b be lh li l lj lk">oc new-app &lt;github-url&gt; --name='appname'</span></pre><p id="b511" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> —本地</strong></p><pre class="je jf jg jh fd la lb lc bn ld le bi"><span id="6d01" class="lf lg hi lb b be lh li l lj lk">oc new-app . --name='java-local'</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ll"><img src="../Images/c4d6e7fd90af85df97b55cc2f64d7f92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w_uihTfPAFMNi5uj_-dOdw.png"/></div></div><p class="lq lr et er es ls lt bd b be z dx translated">导航到本地文件系统中的代码路径，并运行上面的代码</p></figure><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2019/05/top-5-courses-to-learn-docker-and-kubernetes-for-devops.html"><div class="er es lu"><img src="../Images/4c55dc1defb6fca9f930b97d345700c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s4x_7au6OaH7v1Z_N6N3KA.png"/></div></a><p class="lq lr et er es ls lt bd b be z dx translated">创建的部署</p></figure><blockquote class="ka kb kc"><p id="2560" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">来自图像存储库</p></blockquote><p id="e56e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将是最常见的首选基本方法。这提供了更多的控制，而不是从<strong class="ih hj">源代码</strong>中提取并使用<a class="ae ju" href="https://docs.openshift.com/container-platform/4.7/cicd/builds/understanding-buildconfigs.html" rel="noopener ugc nofollow" target="_blank"> OC的<strong class="ih hj">构建配置</strong> </a> <strong class="ih hj">，</strong>。</p><p id="725b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们试着用一个强制的<strong class="ih hj">环境</strong>变量运行来自<a class="ae ju" href="https://hub.docker.com/_/mysql" rel="noopener ugc nofollow" target="_blank"> docker hub </a>的<a class="ae ju" href="https://www.mysql.com/" rel="noopener ugc nofollow" target="_blank"> mysql </a>镜像，</p><pre class="je jf jg jh fd la lb lc bn ld le bi"><span id="bbec" class="lf lg hi lb b be lh li l lj lk">oc new-app --name=mysql-img \<br/>    --image=mysql \<br/>    --env=MYSQL_ROOT_PASSWORD=suriya</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lv"><img src="../Images/e5dcb82ddb381f4f7b89d1a62eae1d68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WZH7TBdIlxck6PELZHzx3A.png"/></div></div></figure><p id="74d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是上述<strong class="ih hj">部署</strong>的<strong class="ih hj">吊舱</strong>环境信息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lw"><img src="../Images/edd5777b4decdf47f8acb758cb921f1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tIttpJmvxYclU79l7oAxlQ.png"/></div></div><p class="lq lr et er es ls lt bd b be z dx translated">带有<strong class="bd lx">MYSQL _ ROOT _ PASSWORD = suriya</strong>变量的环境变量</p></figure><p id="088b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们使用控制台对docker容器执行<strong class="ih hj"> exec </strong>，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ly"><img src="../Images/d50fefa88e869d8ebfad05212d711363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OGhKmUNYZ_8P2LEkdThjmA.png"/></div></div><p class="lq lr et er es ls lt bd b be z dx translated">使用密码<strong class="bd lx"> suriya </strong>作为<strong class="bd lx"> root </strong>用户登录</p></figure><p id="565a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们创建一个新的用户<strong class="ih hj">配置映射</strong> <em class="kd">资源</em></p><pre class="je jf jg jh fd la lb lc bn ld le bi"><span id="74ee" class="lf lg hi lb b be lh li l lj lk">oc create configmap mysql-config \<br/>    --from-literal=MYSQL_USER=user_a \<br/>    --from-literal=MYSQL_DATABASE=mydb</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lz"><img src="../Images/78bc12e717d6fa83aa3e175b02a16a2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MwJQBHip_SpXUFPCc9Qyew.png"/></div></div><p class="lq lr et er es ls lt bd b be z dx translated"><strong class="bd lx">配置映射资源</strong>显示创建的<strong class="bd lx">文字</strong>键值</p></figure><pre class="je jf jg jh fd la lb lc bn ld le bi"><span id="5484" class="lf lg hi lb b be lh li l lj lk">oc create secret generic mysql-secret \<br/>    --from-literal=MYSQL_PASSWORD=user_a_pass</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ma"><img src="../Images/fc391fa45f2d94cbf6366b875b83b749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rt2yI3CG7c3Fo1GQEPhqGw.png"/></div></div><p class="lq lr et er es ls lt bd b be z dx translated"><strong class="bd lx">秘密资源</strong>显示创建的秘密</p></figure><p id="9a41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们将它设置为容器的<strong class="ih hj">环境</strong>变量，以便它对mysql可见，</p><pre class="je jf jg jh fd la lb lc bn ld le bi"><span id="b4f4" class="lf lg hi lb b be lh li l lj lk">oc set env deployment/mysql-img \<br/>    --from=configmap/mysql-config \<br/>    --from=secret/mysql-secret</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mb"><img src="../Images/55cb7ae26186abe551412207a2b0c7cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zTIrwRuFsHF_r2LJgKzl_Q.png"/></div></div><p class="lq lr et er es ls lt bd b be z dx translated">终端显示<strong class="bd lx"> mydb </strong>和<strong class="bd lx">T53】登录用户<strong class="bd lx"> user_a </strong></strong></p></figure><blockquote class="ka kb kc"><p id="c45b" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">来自图像流</p></blockquote><p id="e341" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这一部分，我们将使用我们的<a class="ae ju" href="https://medium.suriyaprakhash.com/private-docker-registry-adef3a6d2dee#311e" rel="noopener ugc nofollow" target="_blank">私有映像库</a>，类似于在本地机器上运行的<a class="ae ju" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> docker hub </a>。</p><p id="78c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是运行本地图像存储库的步骤，</p><div class="kh ki ez fb kj kk"><a href="https://medium.suriyaprakhash.com/private-docker-registry-adef3a6d2dee" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab dw"><div class="km ab kn cl cj ko"><h2 class="bd hj fi z dy kp ea eb kq ed ef hh bi translated">私人码头登记处</h2><div class="kr l"><h3 class="bd b fi z dy kp ea eb kq ed ef dx translated">下面的帖子将有助于运行一个私人docker注册表。在本地工作时，玩起来真的很方便…</h3></div><div class="ks l"><p class="bd b fp z dy kp ea eb kq ed ef dx translated">medium.suriyaprakhash.com</p></div></div></div></a></div><p id="c1fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在构建<strong class="ih hj"> docker映像</strong>并使用<strong class="ih hj"> docker构建</strong>和<strong class="ih hj"> docker推送将其推送到<a class="ae ju" href="https://medium.suriyaprakhash.com/private-docker-registry-adef3a6d2dee#311e" rel="noopener ugc nofollow" target="_blank">本地映像库</a>之后。</strong>运行以下<strong class="ih hj">将图像从<a class="ae ju" href="https://medium.suriyaprakhash.com/private-docker-registry-adef3a6d2dee#311e" rel="noopener ugc nofollow" target="_blank">本地图像库</a>导入<em class="kd"> OpenShift的</em> <strong class="ih hj">内部图像流</strong>。</strong></p><pre class="je jf jg jh fd la lb lc bn ld le bi"><span id="666a" class="lf lg hi lb b be lh li l lj lk">oc import-image my-app-img-import --from=192.168.128.1:5443/my-app \<br/>    --reference-policy='Local' --confirm</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mc"><img src="../Images/3829225a79e3823e9afaa665a23cbc61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MjHbQPWnoM_Zx8iNqFSOiA.png"/></div></div><p class="lq lr et er es ls lt bd b be z dx translated">通过控制台或CLI检查<strong class="bd lx">图像流</strong></p></figure><p id="2631" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，运行<strong class="ih hj"> new-app </strong>从图像流<strong class="ih hj"> <em class="kd"> my-app-img-import、</em> </strong>创建一个新的应用</p><pre class="je jf jg jh fd la lb lc bn ld le bi"><span id="0f7a" class="lf lg hi lb b be lh li l lj lk">oc new-app --image-stream=my-app-img-import</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es md"><img src="../Images/ab7117028ec8ad1c9d38c94ae9a1c917.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_npub5XHFiyTD9LOA1k8zQ.png"/></div></div><p class="lq lr et er es ls lt bd b be z dx translated">使用部署创建的新项目— <strong class="bd lx"> pod </strong>和<strong class="bd lx">服务</strong></p></figure><p id="bbde" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有其他的<em class="kd">管理部署</em>的方法来促进<strong class="ih hj">持续集成</strong>和<strong class="ih hj">部署</strong>无缝，而不是在命令行中传递所有变量。</p><p id="bb32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">改天再来看看吧！</p><p id="5295" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">祝本地主机运行愉快！</p></div></div>    
</body>
</html>