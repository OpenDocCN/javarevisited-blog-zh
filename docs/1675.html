<html>
<head>
<title>Debugging Tutorial 1 — Introduction: Conditional Breakpoints</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">调试教程1 —简介:条件断点</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/debugging-tutorial-1-introduction-conditional-breakpoints-1721efee1ace?source=collection_archive---------2-----------------------#2021-10-24">https://medium.com/javarevisited/debugging-tutorial-1-introduction-conditional-breakpoints-1721efee1ace?source=collection_archive---------2-----------------------#2021-10-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b40252b6320eee7da68572e0dde1eeaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*omCrFBt6FTpmqvs7oq6hdA.jpeg"/></div></div></figure><p id="619f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本系列中，我将带您了解调试应用程序并发现其中问题的过程。在我们调试的时候，我们将涵盖对大多数开发人员来说很重要的技术。我将介绍以下调试器:</p><ul class=""><li id="8717" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">IntelliJ/IDEA —使用Java/Kotlin</li><li id="794e" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">PyCharm — Python</li><li id="5482" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">VSCode —对于JavaScript</li><li id="18dd" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">WebStorm —针对JavaScript</li></ul><p id="6d80" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些应该涵盖了您将遇到的大多数用例，有些内容似乎是重复的/多余的，所以如果您觉得自己“掌握了要点”，可以直接跳到适用的部分。</p><p id="d1cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意，虽然我不会讨论TypeScript，但是JavaScript教程中讨论的所有内容也适用于TypeScript。这同样适用于大多数JVM语言，如Scala等。</p><p id="46f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通常人们根据IDE/语言来区分这些教程。我认为将它们放在一起有利于提供“大画面”。在我们的职业生涯中，我们也经历过语言/ide，拥有更广阔的视角是有帮助的。</p><p id="16a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在以后的帖子中，我还想谈谈Chrome DevTools和Firefox Web Developer Tools的浏览器调试。然而，这是一个稍微不同的过程，所以我现在不考虑它们。</p><p id="aafd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我还附上了一个视频教程，直观地突出了这些步骤。如果我的说明不清楚，这可能会有帮助:</p><figure class="kc kd ke kf fd ij"><div class="bz dy l di"><div class="kg kh l"/></div></figure><h1 id="9d4d" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">动机</h1><p id="f95d" class="pw-post-body-paragraph iq ir hi is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">本系列的主要目标是让您快速了解，这样我们就可以在接近尾声时深入真正有趣的教程。第一部分可能看起来有点琐碎，因为我假设我对调试技术一无所知，但我计划随着我们的前进深入了解这些帖子。</p><p id="103e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但你可能会问自己，为什么要经历这些？</p><p id="9990" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为什么我们需要经历一个调试教程？我已经知道编程和使用调试器并不是火箭科学…</p><p id="60b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗯……根据这个<a class="ae ll" href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.370.9611&amp;rep=rep1&amp;type=pdf" rel="noopener ugc nofollow" target="_blank">研究</a>，我们花了50%的时间来追踪bug，尽管我看到的数字从25%到75%不等。不幸的是，这是大学并不真正教授的技能。甚至在我们的工作中，人们也忽略了这一基本技能。有一些书涵盖了这个主题，但是很多都过时了，而且是针对更复杂的场景。</p><p id="7e15" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">调试不仅仅是寻找bug。当我需要在我不熟悉的代码区域实现一个新特性时，我通常会打开调试器，开始调试这些区域。试着像调试问题一样查看流程。检查烟囱、构件等。为了更好地理解系统的工作方式并验证我的假设。</p><h1 id="a095" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">入门指南</h1><p id="4615" class="pw-post-body-paragraph iq ir hi is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">为了开始，我们需要一个简单的应用程序，我们可以在本教程的初始部分调试。为此，我们将使用Prime Main来计算质数。这是一个简单的应用程序，你可以在你的IDE中获取并打开它。</p><p id="2f20" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意，这些应用程序是专门未经优化和冗长的，以给我们更多的地方放置断点和步骤。</p><p id="c386" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是各种语言的版本:</p><ul class=""><li id="217b" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj">爪哇</strong>——【gist.github.com/shai-almog/e400134f01decc96..】T2</li><li id="93d9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">科特林——<a class="ae ll" href="https://gist.github.com/shai-almog/c454d39464ca2893c014807838c5102f" rel="noopener ugc nofollow" target="_blank">gist.github.com/shai-almog/c454d39464ca2893..</a></li><li id="e3f0" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">Python</strong>——<a class="ae ll" href="https://gist.github.com/shai-almog/8c8bbbb4297f758f7ce1d5f7a4cc1c74" rel="noopener ugc nofollow" target="_blank">gist.github.com/shai-almog/8c8bbbb4297f758f..</a></li><li id="48ea" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">JavaScript</strong>——<a class="ae ll" href="https://gist.github.com/shai-almog/167a34571b0fae6eeed56742c44895cd" rel="noopener ugc nofollow" target="_blank">gist.github.com/shai-almog/167a34571b0fae6e..</a></li></ul><p id="cc5a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下载适当的源文件，并将其作为主源文件添加到IDE的新项目中。您可以运行该应用程序，但要记住，它将运行很长时间来搜索质数。</p><h1 id="4d88" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">简单条件断点</h1><p id="9791" class="pw-post-body-paragraph iq ir hi is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">首先，我们需要调试应用程序。在JetBrains的ide中，我们只需右键单击可执行文件并选择debug，如下所示:</p><figure class="kc kd ke kf fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2018/09/top-5-courses-to-learn-intellij-idea-java-and-android-development.html"><div class="er es lm"><img src="../Images/c7ed277df8e4e5fd6029cad55620bded.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aZk2bEKD8xXCg4Nh"/></div></a></figure><p id="c3bb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意，您可能需要等待IDE完成对文件的扫描和索引，这样它才会显示相应的调试操作。</p><p id="186f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">VSCode也是如此。选择IDE左侧的调试视图，然后单击“运行并调试”按钮。</p><figure class="kc kd ke kf fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2011/02/how-to-setup-remote-debugging-in.html"><div class="er es ln"><img src="../Images/8a2e5347807b23e429bbb2fee7db4c95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uglzPfUk9R-Fkfc6"/></div></a></figure><p id="109c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将提示您使用一个环境，选择Node.js继续。</p><p id="e3dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦你开始调试，你可以通过点击文件左边的“gutter”区域来设置一个断点。让我们对每种文件类型/IDE做一个快速实验。</p><h1 id="c5b1" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">运转</h1><figure class="kc kd ke kf fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2020/05/top-5-courses-to-learn-eclipse-ide-for-java-developers.html"><div class="er es lo"><img src="../Images/7f918ff8e83e495230e16f8e7ac64fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ggyLptisE6OsJ_gG"/></div></a><p class="lp lq et er es lr ls bd b be z dx translated">在JetBrains IntelliJ/IDEA上运行</p></figure><figure class="kc kd ke kf fd ij er es paragraph-image"><a href="https://www.java67.com/2018/01/how-to-remote-debug-java-application-in-Eclipse.html"><div class="er es lo"><img src="../Images/31b16cc83fae015f9b4d4b60ccf30ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FUiZ54fRgV0Msykx"/></div></a><p class="lp lq et er es lr ls bd b be z dx translated">在VSCode上运行</p></figure><p id="dfcd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们在文件的第行放置一个断点。请注意，Java文件比其他主要的主文件更加复杂:</p><ul class=""><li id="4b5a" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">对于Java，将断点放在第28行</li><li id="1619" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">对于科特林线21</li><li id="3d4d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">对于JavaScript第11行</li><li id="c01a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">对于Python第11行</li></ul><p id="b5f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦命中断点，您应该能够在左下角看到堆栈跟踪。堆栈跟踪表示调用当前方法的方法。在栈顶你可以看到当前的方法。你可以点击每个“堆栈框架”来查看调用者和调用者框架中变量的状态。</p><p id="d68b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在右下角(对于JetBrains)或左上角(对于VSCode ),您可以看到当前堆栈框架中的变量。注意n，这是我们正在计算的数字。请注意，它不是一个原语，而是一个大整数，我们用它来支持Java中非常大的数字(这些数字可能大于9，223，372，036，854，775，807，这是Long的极限)。</p><p id="5519" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以使用“设置值”功能更改变量值:</p><figure class="kc kd ke kf fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2011/02/how-to-setup-remote-debugging-in.html"><div class="er es lt"><img src="../Images/337cf0a010af441f269812dfa2ceb69f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3r7WR0xfxS95vlV9"/></div></a><p class="lp lq et er es lr ls bd b be z dx translated">在JetBrains中设置价值</p></figure><figure class="kc kd ke kf fd ij er es paragraph-image"><a href="https://www.java67.com/2018/02/5-free-eclipse-and-junit-online-courses-java-developers.html"><div class="er es lu"><img src="../Images/dd5ff808635395d1184c8ba97166a4d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tqwds2Y-4HlUGNyM"/></div></a><p class="lp lq et er es lr ls bd b be z dx translated">在VSCode中设置值</p></figure><p id="4bd9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这对调试边缘情况非常有帮助。只需将变量设置为您遇到问题的值，然后重现问题。</p><p id="1f71" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个很好的JetBrains功能可以让你以不同的方式查看一个值，例如十六进制，二进制等。：</p><figure class="kc kd ke kf fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2015/10/133-java-interview-questions-answers-from-last-5-years.html"><div class="er es lv"><img src="../Images/7e40a7c71161085b70cfeaf8d2111210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4IJ7Et0yVx821CaC"/></div></a></figure><p id="4e50" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们可以右键单击断点来编辑它。我们可以为断点设置一个条件，只有满足该条件时才会停止执行:</p><figure class="kc kd ke kf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/3b25d6284ea6777bd257d7ce40937dde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qPgjmUDajekq92X1"/></div></div><p class="lp lq et er es lr ls bd b be z dx translated">IntelliJ/IDEA上JetBrains中的条件断点</p></figure><figure class="kc kd ke kf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/6b80da0475dc826c521124a6f4c2b90a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9HU6rC4ElDxa-WK2"/></div></div><p class="lp lq et er es lr ls bd b be z dx translated">通过在VSCode中编辑断点来添加条件断点</p></figure><figure class="kc kd ke kf fd ij er es paragraph-image"><a href="https://www.java67.com/2018/08/top-10-free-java-courses-for-beginners-experienced-developers.html"><div class="er es ly"><img src="../Images/ed141dc55b728ef6ed1026307f01b79a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gli1YuZ7SF-jXRL2"/></div></a><p class="lp lq et er es lr ls bd b be z dx translated">VSCode中的条件断点编辑</p></figure><p id="bde0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为Java代码有点不同，所以我使用了<code class="du lz ma mb mc b">primesToTest[0] == 2</code>,这总是正确的。你可以试着把它设置为3，这会花很长时间，你可以看到它只会在那个点停止。</p><p id="b402" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在其他情况下，我使用<code class="du lz ma mb mc b">num % 2 == 0</code>作为一个永远为假的条件。因为那条线上面的线检查一个数是否是偶数，而它永远不会是偶数。将此条件转换为<code class="du lz ma mb mc b">num % 2 == 1</code>将始终为真，断点将被命中。</p><h1 id="197c" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">更进一步</h1><p id="0f17" class="pw-post-body-paragraph iq ir hi is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">条件断点是调试器中最强大的工具之一，但遗憾的是没有得到充分利用。当你在一个循环中经历失败时，我们经常一次又一次地走过这个循环…等待合适的条件出现。</p><p id="d588" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过使用设置值或条件，我们可以在调试过程中更快地移动，并可能更准确地再现问题，而没有您通常看到的单步调试的延迟。</p><h1 id="c818" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="9690" class="pw-post-body-paragraph iq ir hi is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">在本系列的第一部分中，我试图强调调试技能对我们日常工作的重要性。伟大的开发人员有效地使用他们的工具来提高生产率，调试器是一台复杂的机器，我们需要有效地使用它。根据一些统计数据，调试可能和我们的编码技能一样重要。不幸的是，即使是像条件断点，设置值等基本功能。大多数开发人员很少使用。我希望本系列的这篇文章和以后的文章能帮助你改变这种情况，并帮助你快速找到bug。</p></div></div>    
</body>
</html>