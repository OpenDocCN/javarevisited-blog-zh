<html>
<head>
<title>What Is up Casting and Down Casting in Java?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java中什么是向上强制转换和向下强制转换？</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/what-is-up-casting-and-down-casting-in-java-latest-ca114ef76a5f?source=collection_archive---------0-----------------------#2022-12-15">https://medium.com/javarevisited/what-is-up-casting-and-down-casting-in-java-latest-ca114ef76a5f?source=collection_archive---------0-----------------------#2022-12-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="c71e" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">面向对象编程</h2><div class=""/><div class=""><h2 id="2ee6" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">为你下次面试准备的java编程中向上造型和向下造型的完整指南。</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/29e38ebb9ed3867db261ccc102fba581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhR0GNM_wrfEawQ4HfU2ZQ.jpeg"/></div></div><p class="js jt et er es ju jv bd b be z dx translated">照片由Clément H在Unsplash上拍摄</p></figure></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><p id="7197" class="pw-post-body-paragraph kd ke hi kf b kg kh is ki kj kk iv kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">在本文中，我将解释Java 中的<a class="ae kz" href="https://javarevisited.blogspot.com/2012/12/what-is-type-casting-in-java-class-interface-example.html" rel="noopener ugc nofollow" target="_blank">转换特性。通过阅读这篇文章，你将能够理解与铸造相关的概念和程序。何时使用它们以及如何有效地写它们。</a></p></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><blockquote class="la"><p id="47fe" class="lb lc hi bd ld le lf lg lh li lj ky dx translated">铸造意味着将一种类型转换成另一种类型。</p></blockquote><h2 id="3112" class="lk ll hi bd lm ln lo lp lq lr ls lt lu km lv lw lx kq ly lz ma ku mb mc md ho bi translated">在java中，我们有两种类型的造型:</h2><h2 id="89b4" class="lk ll hi bd lm ln me lp lq lr mf lt lu km mg lw lx kq mh lz ma ku mi mc md ho bi translated">1.向上抛</h2><h2 id="2eef" class="lk ll hi bd lm ln me lp lq lr mf lt lu km mg lw lx kq mh lz ma ku mi mc md ho bi translated">2.向下铸造</h2><p id="6bdd" class="pw-post-body-paragraph kd ke hi kf b kg mj is ki kj mk iv kl km ml ko kp kq mm ks kt ku mn kw kx ky hb bi translated">现在，让我们首先了解定义:</p><h1 id="68dd" class="mo ll hi bd lm mp mq mr lq ms mt mu lu ix mv iy lx ja mw jb ma jd mx je md my bi translated">1.向上投射:</h1><p id="01cc" class="pw-post-body-paragraph kd ke hi kf b kg mj is ki kj mk iv kl km ml ko kp kq mm ks kt ku mn kw kx ky hb bi translated">将子类对象分配给父类引用。</p><pre class="jh ji jj jk fd mz na nb bn nc nd bi"><span id="923b" class="ne ll hi na b be nf ng l nh ni">Syntax for up casting : Parent p = new Child();</span></pre><p id="c979" class="pw-post-body-paragraph kd ke hi kf b kg kh is ki kj kk iv kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">这里<code class="du nj nk nl na b"><strong class="kf hs">p</strong></code>是一个父类引用，但指向子对象。</p><p id="bc04" class="pw-post-body-paragraph kd ke hi kf b kg kh is ki kj kk iv kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated"><em class="nm">这个引用</em> <code class="du nj nk nl na b"><em class="nm">p</em></code> <em class="nm">可以访问父类的所有方法和变量，但只能访问子类中被覆盖的方法。</em></p><p id="6805" class="pw-post-body-paragraph kd ke hi kf b kg kh is ki kj kk iv kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated"><strong class="kf hs"> <em class="nm">向上转换给了我们访问父类成员的灵活性，但是使用这个特性不可能访问所有的子类成员。我们可以访问子类的一些指定成员，而不是所有成员。例如，我们只能访问子类中被覆盖的方法。</em> </strong></p><h1 id="781a" class="mo ll hi bd lm mp mq mr lq ms mt mu lu ix mv iy lx ja mw jb ma jd mx je md my bi translated">2.向下投射:</h1><p id="e539" class="pw-post-body-paragraph kd ke hi kf b kg mj is ki kj mk iv kl km ml ko kp kq mm ks kt ku mn kw kx ky hb bi translated">将父类引用(指向子类对象)分配给子类引用。</p><pre class="jh ji jj jk fd mz na nb bn nc nd bi"><span id="7793" class="ne ll hi na b be nf ng l nh ni">Syntax for down casting : Child c = (Child)p;</span></pre><p id="b36b" class="pw-post-body-paragraph kd ke hi kf b kg kh is ki kj kk iv kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">这里<strong class="kf hs"> p </strong>指向子类的对象，正如我们在前面的例子中看到的，现在我们将这个引用<strong class="kf hs"> p </strong>转换为子类引用<strong class="kf hs"> c </strong>。</p><p id="eaa9" class="pw-post-body-paragraph kd ke hi kf b kg kh is ki kj kk iv kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated"><strong class="kf hs"> <em class="nm">现在这个子类引用c可以访问子类以及父类的所有方法和变量。</em> </strong></p><blockquote class="la"><p id="96b0" class="lb lc hi bd ld le lf lg lh li lj ky dx translated">例如，如果我们有两个类，比如说<code class="du nj nk nl na b"><strong class="ak">Machine</strong></code> <strong class="ak"> </strong>和<code class="du nj nk nl na b"><strong class="ak">Laptop</strong></code> <strong class="ak"> </strong>，它们扩展了<code class="du nj nk nl na b"><strong class="ak">Machine</strong></code> <strong class="ak"> </strong>类。现在对于上抛来说，每台笔记本电脑<strong class="ak"> </strong>都将是一台机器，但是对于下抛来说，每台机器可能都不是笔记本电脑，因为可能有一些机器可以是<code class="du nj nk nl na b"><strong class="ak">Printer</strong></code>、<code class="du nj nk nl na b"><strong class="ak">Mobile</strong></code>、<strong class="ak">、</strong>等。</p><p id="ef2f" class="lb lc hi bd ld le lf lg lh li lj ky dx translated"><strong class="ak">因此向下转换并不总是安全的，我们在进行向下转换之前显式地写类名。</strong>这样它就不会在编译时给出错误，但如果父类引用没有指向适当的子类，它可能会在运行时抛出<code class="du nj nk nl na b"><a class="ae kz" href="https://javarevisited.blogspot.com/2012/12/how-to-solve-javalangclasscastexception-java.html" rel="noopener ugc nofollow" target="_blank"><strong class="ak">ClassCastExcpetion</strong></a></code> <a class="ae kz" href="https://javarevisited.blogspot.com/2012/12/how-to-solve-javalangclasscastexception-java.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> </strong> </a>。</p></blockquote><p id="4033" class="pw-post-body-paragraph kd ke hi kf b kg nn is ki kj no iv kl km np ko kp kq nq ks kt ku nr kw kx ky hb bi translated">让我们看下面的例子来理解这一点:</p><pre class="jh ji jj jk fd mz na nb bn nc nd bi"><span id="ef91" class="ne ll hi na b be nf ng l nh ni">Machine machine = new Machine ();<br/>Laptop laptop = (Laptop)machine;//this won't give an error while compiling<br/>//laptop is a reference of type Laptop and machine is a reference <br/>//of type Machine and points to Machine class Object .<br/>//So logically assigning machine to laptop is invalid <br/>//because these two classes have different object strucure.<br/>//And hence throws ClassCastException at run time .<br/></span></pre><blockquote class="la"><p id="92ae" class="lb lc hi bd ld le ns nt nu nv nw ky dx translated">为了去掉<code class="du nj nk nl na b">ClassCastException</code>,我们可以使用<code class="du nj nk nl na b"><a class="ae kz" href="https://javarevisited.blogspot.com/2015/12/10-points-about-instanceof-operator-in-java-example.html" rel="noopener ugc nofollow" target="_blank">instanceof</a></code> <a class="ae kz" href="https://javarevisited.blogspot.com/2015/12/10-points-about-instanceof-operator-in-java-example.html" rel="noopener ugc nofollow" target="_blank">操作符</a>在向下转换的情况下检查类引用的正确类型。</p></blockquote><h2 id="d31f" class="lk ll hi bd lm ln lo lp lq lr ls lt lu km lv lw lx kq ly lz ma ku mb mc md ho bi translated">举个例子，</h2><pre class="jh ji jj jk fd mz na nb bn nc nd bi"><span id="8c3c" class="ne ll hi na b be nf ng l nh ni">if(machine instanceof Laptop){<br/>    Laptop laptop = machine;<br/>    //here machine must be pointing to Laptop class object .<br/>}</span></pre><p id="dd6a" class="pw-post-body-paragraph kd ke hi kf b kg kh is ki kj kk iv kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">我试图用例子解释向上转换和向下转换的用例。试着理解这个程序，并阅读评论以获得完整的解释。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nx ny l"/></div><p class="js jt et er es ju jv bd b be z dx translated"><strong class="ak">上抛和下抛</strong></p></figure><h2 id="f433" class="lk ll hi bd lm ln me lp lq lr mf lt lu km mg lw lx kq mh lz ma ku mi mc md ho bi translated">输出:</h2><pre class="jh ji jj jk fd mz na nb bn nc nd bi"><span id="e2ce" class="ne ll hi na b be nf ng l nh ni">Machine has started!!!<br/>Laptop has started!!!<br/>Laptop has stopped!!!<br/>Laptop has started!!!<br/>Laptop has started!!!<br/>Laptop has started!!!<br/>Laptop has stopped!!!</span></pre></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><h1 id="82b9" class="mo ll hi bd lm mp nz mr lq ms oa mu lu ix ob iy lx ja oc jb ma jd od je md my bi translated">为什么向下转换不安全？</h1><p id="9e4b" class="pw-post-body-paragraph kd ke hi kf b kg mj is ki kj mk iv kl km ml ko kp kq mm ks kt ku mn kw kx ky hb bi translated">在下面的程序中，我解释了为什么向下转换是不安全的。我也向你展示了你什么时候会得到<a class="ae kz" href="https://javarevisited.blogspot.com/2012/12/how-to-solve-javalangclasscastexception-java.html" rel="noopener ugc nofollow" target="_blank"><em class="nm">ClassCastException</em></a>。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nx ny l"/></div><p class="js jt et er es ju jv bd b be z dx translated">一个例外的例子是向下转换</p></figure><h2 id="cfe9" class="lk ll hi bd lm ln me lp lq lr mf lt lu km mg lw lx kq mh lz ma ku mi mc md ho bi translated">输出:</h2><pre class="jh ji jj jk fd mz na nb bn nc nd bi"><span id="40dd" class="ne ll hi na b be nf ng l nh ni">Machine has started!!!<br/>Laptop has started!!!<br/>Laptop has stopped!!!<br/>Exception in thread “main” java.lang.ClassCastException: com.vikram.Machine cannot be cast to com.vikram.Laptop<br/>at com.vikram.Main.main(Main.java:38)</span></pre></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><p id="e8ba" class="pw-post-body-paragraph kd ke hi kf b kg kh is ki kj kk iv kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated"><em class="nm">本文到此为止。希望你喜欢这篇文章。</em></p><h1 id="2154" class="mo ll hi bd lm mp mq mr lq ms mt mu lu ix mv iy lx ja mw jb ma jd mx je md my bi translated">类似内容可以关注<a class="oe of ge" href="https://medium.com/u/2c3b611409dc?source=post_page-----ca114ef76a5f--------------------------------" rel="noopener" target="_blank">维克拉姆古普塔</a>。</h1><h2 id="0066" class="lk ll hi bd lm ln me lp lq lr mf lt lu km mg lw lx kq mh lz ma ku mi mc md ho bi translated"><strong class="ak"> <em class="og">你可能喜欢阅读下面的博客，了解常见的java面试概念和问题。</em>T24】</strong></h2><div class="oh oi ez fb oj ok"><a rel="noopener follow" target="_blank" href="/@basecs101/do-you-know-nested-and-inner-classes-in-java-latest-b270e0988091"><div class="ol ab dw"><div class="om ab on cl cj oo"><h2 class="bd hs fi z dy op ea eb oq ed ef hr bi translated">你知道Java中的嵌套类和内部类吗？</h2><div class="or l"><h3 class="bd b fi z dy op ea eb oq ed ef dx translated">什么，为什么，如何:你需要知道的一切。</h3></div><div class="os l"><p class="bd b fp z dy op ea eb oq ed ef dx translated">medium.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy jq ok"/></div></div></a></div><div class="oh oi ez fb oj ok"><a rel="noopener follow" target="_blank" href="/@basecs101/do-you-know-the-tight-and-loose-coupling-in-the-oop-latest-b03f8e600115"><div class="ol ab dw"><div class="om ab on cl cj oo"><h2 class="bd hs fi z dy op ea eb oq ed ef hr bi translated">你知道Oop中的紧耦合和松耦合吗？</h2><div class="or l"><h3 class="bd b fi z dy op ea eb oq ed ef dx translated">你的下一个面试问题可能是关于面向对象的范例。</h3></div><div class="os l"><p class="bd b fp z dy op ea eb oq ed ef dx translated">medium.com</p></div></div><div class="ot l"><div class="oz l ov ow ox ot oy jq ok"/></div></div></a></div><div class="oh oi ez fb oj ok"><a rel="noopener follow" target="_blank" href="/@basecs101/confused-with-enum-here-is-an-article-to-clear-it-latest-e39d88fe7c66"><div class="ol ab dw"><div class="om ab on cl cj oo"><h2 class="bd hs fi z dy op ea eb oq ed ef hr bi translated">与Enum混淆？这里有一篇文章来澄清一下。</h2><div class="or l"><h3 class="bd b fi z dy op ea eb oq ed ef dx translated">关于ENUM你必须知道的一切。</h3></div><div class="os l"><p class="bd b fp z dy op ea eb oq ed ef dx translated">medium.com</p></div></div><div class="ot l"><div class="pa l ov ow ox ot oy jq ok"/></div></div></a></div></div></div>    
</body>
</html>