<html>
<head>
<title>Spring Sessions with Apache Ignite</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Apache Ignite的春季会议</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/spring-sessions-with-apache-ignite-191057fe44d0?source=collection_archive---------0-----------------------#2021-09-19">https://medium.com/javarevisited/spring-sessions-with-apache-ignite-191057fe44d0?source=collection_archive---------0-----------------------#2021-09-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/743269007f49ada6696de0163a3c32fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bZE4XyyYk_wJ6qAo"/></div></div><p class="iq ir et er es is it bd b be z dx translated">莫里斯·萨尔在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="daba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://ignite.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Ignite </a>是一个高性能的分布式数据库，它将数据存储在内存中(也是持久的)。</p><p id="eaf1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与每一个NoSQL解决方案一样，它支持开箱即用的复制和分片，但也提供了<a class="ae iu" href="https://ignite.apache.org/features/acid-transactions.html" rel="noopener ugc nofollow" target="_blank"> ACID事务</a>、<a class="ae iu" href="https://ignite.apache.org/docs/latest/SQL/sql-introduction" rel="noopener ugc nofollow" target="_blank"> SQL支持</a>和<a class="ae iu" href="https://www.gridgain.com/docs/latest/developers-guide/distributed-computing/distributed-computing" rel="noopener ugc nofollow" target="_blank">计算网格</a>。</p><p id="a15b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将使用Apache Ignite作为Spring会话的数据库。例如，如果您已经将该工具用于Map-Reduce计算，则没有必要再部署一个数据源(如Redis)来存储会话，您可以重用Apache Ignite。</p><h1 id="d32c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">关系</h1><p id="4749" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">有几种方法可以从Java应用程序连接到ignite:</p><ol class=""><li id="4c33" class="kw kx hi ix b iy iz jc jd jg ky jk kz jo la js lb lc ld le bi translated">胖客户端</li><li id="536f" class="kw kx hi ix b iy lf jc lg jg lh jk li jo lj js lb lc ld le bi translated">瘦客户端</li><li id="07e5" class="kw kx hi ix b iy lf jc lg jg lh jk li jo lj js lb lc ld le bi translated"><a class="ae iu" href="https://javarevisited.blogspot.com/2015/07/javasqlsqlexception-no-suitable-driver-found-jdbc.html#axzz6v01lJ700" rel="noopener ugc nofollow" target="_blank"> JDBC司机</a></li></ol><h2 id="2f34" class="lk ju hi bd jv ll lm ln jz lo lp lq kd jg lr ls kh jk lt lu kl jo lv lw kp lx bi translated">胖客户端</h2><p id="c140" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">我的建议是，如果不使用特定的操作，就避免使用胖客户端。重点是胖客户端作为没有数据的节点插入到集群拓扑中。默认情况下，<a class="ae iu" href="https://en.wikipedia.org/wiki/Ring_network" rel="noopener ugc nofollow" target="_blank">环形拓扑</a>用于节点通信，因此每个客户端节点都会降低整体通信速度(您可以使用<a class="ae iu" href="https://www.gridgain.com/docs/latest/developers-guide/clustering/zookeeper-discovery" rel="noopener ugc nofollow" target="_blank"> ZooKeeper Discovery </a>来改进)。</p><h2 id="a25c" class="lk ju hi bd jv ll lm ln jz lo lp lq kd jg lr ls kh jk lt lu kl jo lv lw kp lx bi translated">瘦客户端</h2><p id="bb64" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">瘦客户端是我最喜欢的选择。您可以在此表中看到支持的功能。</p><p id="f881" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，最新版本的瘦客户机几乎可以做任何事情，而且没有一些缺点。它不插入拓扑，而是连接到一个服务器节点。瘦客户端的版本可以不同于集群版本，这使得集群升级变得非常容易。</p><h2 id="07c2" class="lk ju hi bd jv ll lm ln jz lo lp lq kd jg lr ls kh jk lt lu kl jo lv lw kp lx bi translated">JDBC司机</h2><p id="29fc" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated"><a class="ae iu" href="https://www.gridgain.com/docs/latest/developers-guide/SQL/JDBC/jdbc-client-driver" rel="noopener ugc nofollow" target="_blank"> JDBC驱动</a>是一种相对简单的连接方式，尤其是如果您以前使用过关系数据库，并决定用Apache Ignite替换以前的数据库。</p><p id="6add" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你计划使用<a class="ae iu" href="https://www.gridgain.com/docs/latest/developers-guide/distributed-computing/distributed-computing" rel="noopener ugc nofollow" target="_blank">分布式计算</a>或低级操作<code class="du ly lz ma mb b">IgniteCache</code>，最好立刻选择瘦客户端。</p><p id="93ba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，要连接到Apache Ignite，我们需要添加一个依赖项:</p><figure class="mc md me mf fd ij"><div class="bz dy l di"><div class="mg mh l"/></div></figure><p id="e2c4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">并创建瘦客户机的bean:</p><figure class="mc md me mf fd ij"><div class="bz dy l di"><div class="mg mh l"/></div></figure><h1 id="dd1c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">点燃弹簧数据</h1><p id="a08f" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">为了以<a class="ae iu" href="https://spring.io/projects/spring-data" rel="noopener ugc nofollow" target="_blank"> Spring Data </a>的方式使用Apache Ignite，我们需要添加这两个依赖项:</p><figure class="mc md me mf fd ij"><div class="bz dy l di"><div class="mg mh l"/></div></figure><p id="ccd6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">并通过添加<strong class="ix hj"><em class="mi">@ EnableIgniteRepositories</em></strong>注释来启用Ignite储存库。</p><p id="9aae" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">之后，我们可以使用<strong class="ix hj"><em class="mi">@ repository config:</em></strong>创建存储库接口</p><figure class="mc md me mf fd ij"><div class="bz dy l di"><div class="mg mh l"/></div></figure><h1 id="d571" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">春季会议</h1><p id="7df4" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">Apache Ignite连接被建立，<a class="ae iu" href="https://www.java67.com/2021/01/spring-data-jpa-interview-questions-answers-java.html" rel="noopener ugc nofollow" target="_blank"> Spring数据仓库</a>被创建。现在，我们只需要创建一个<code class="du ly lz ma mb b">org.springframework.session.SessionRepository</code>的bean。Apache Ignite是键值存储，可以序列化/反序列化任何Java objec T21，所以我们可以使用T2作为一个值。</p><figure class="mc md me mf fd ij"><div class="bz dy l di"><div class="mg mh l"/></div></figure><h1 id="e9a4" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结论</h1><p id="3b42" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">由于有了<code class="du ly lz ma mb b">ignite-spring-data-2.2-ext</code>依赖关系，将Apache Ignite连接到Spring Boot项目变得非常简单，它允许我们使用带有<a class="ae iu" href="https://spring.getdocs.org/en-US/spring-data-docs/spring-data-jpa/reference/jpa.repositories/jpa.query-methods.html" rel="noopener ugc nofollow" target="_blank">派生查询方法</a>和<a class="ae iu" href="https://javarevisited.blogspot.com/2021/09/spring-data-jpa-query-example-tutorial.html" rel="noopener ugc nofollow" target="_blank"> @Query annotations </a>的标准Spring数据仓库进行更复杂的查询。</p><p id="da16" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">之后，您不仅可以使用Apache Ignite存储会话，还可以将其作为应用程序缓存或主数据库(Apache Ignite从2.1版开始支持<a class="ae iu" href="https://ignite.apache.org/docs/latest/persistence/native-persistence" rel="noopener ugc nofollow" target="_blank">本机持久性</a>)。</p><p id="eaee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以在<a class="ae iu" href="https://github.com/wirtsleg/spring-sessions-with-apache-ignite" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到完整的源代码。</p></div></div>    
</body>
</html>