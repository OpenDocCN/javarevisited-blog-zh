<html>
<head>
<title>Difference between Java 8 Optional class orElse and orElseGet methods.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java 8可选类orElse和orElseGet方法的区别。</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/difference-between-java-8-optional-class-orelse-and-orelseget-methods-3698fefa72ed?source=collection_archive---------4-----------------------#2021-05-13">https://medium.com/javarevisited/difference-between-java-8-optional-class-orelse-and-orelseget-methods-3698fefa72ed?source=collection_archive---------4-----------------------#2021-05-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="ab32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">读者们好，</p><p id="c768" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Java 8引入了许多新特性，如Lambda表达式、方法引用、函数接口、流API、默认方法等，使开发人员的生活变得更加轻松。其中最重要的是选修课。它为表示可选值而不是空引用提供了类型级的解决方案。高效使用Optional可以帮助<a class="ae jd" href="https://javarevisited.blogspot.com/2013/05/ava-tips-and-best-practices-to-avoid-nullpointerexception-program-application.html" rel="noopener ugc nofollow" target="_blank">避免Java </a>中的NullPointerException。</p><p id="a806" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">optional类附带了两个有用的方法<strong class="ih hj"> orElse </strong>和<strong class="ih hj"> orElseGet，</strong>，如果Optional为空，则返回默认值。</p><ul class=""><li id="07b6" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">OrElse方法—它接受一个参数，该参数是Optional为null时要返回的值。这里orElse也可以接受null作为结果默认值，尽管从orElse方法返回null并不是一个好的做法。</li></ul><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es jn"><img src="../Images/6e0e25160c2a109b6e52c8d2a96708f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7l_rlu-ziJZZ5z1eY-iNRQ.png"/></div></div></figure><ul class=""><li id="3b95" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">OrElseGet方法—它接受一个参数，该参数是当Optional为null时返回值的供应商函数。这里需要注意的一点是，当Optional为null并且Supplier函数也为null时，就会抛出NullPointerException。在内部，它使用supplier.get()方法来获取值，很明显，如果一个供应商为空，那么它将导致NPE(在Java中不应该有一个<a class="ae jd" href="https://javarevisited.blogspot.com/2016/01/how-to-check-if-string-is-not-null-and-empty-in-java-example.html" rel="noopener ugc nofollow" target="_blank">空检查</a>用于这个方法:P)</li></ul><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es jz"><img src="../Images/4c28cf1cd40b9d1e0f94d98644cfb58c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z5eRw_pan1qbG6sjECZTjw.png"/></div></div></figure><p id="4c3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很明显，在空可选的情况下，这两种方法都有助于获得默认值，但是这两种方法有什么不同，什么时候使用哪一种呢？</p><p id="b662" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在性能方面有很大的区别。无论Optional是否为null都将执行orElse方法，但是orElseGet方法只有在<a class="ae jd" href="https://javarevisited.blogspot.com/2017/04/10-examples-of-optional-in-java-8.html#axzz6ccm5KWKs" rel="noopener ugc nofollow" target="_blank"> Optional为null </a>时才会执行。当默认值提供程序函数是一个开销很大的操作时，这种行为很有用。</p><figure class="jo jp jq jr fd js er es paragraph-image"><a href="https://javarevisited.blogspot.com/2017/04/10-examples-of-optional-in-java-8.html#axzz6ccm5KWKs"><div class="er es ka"><img src="../Images/2f3a4475140d54cf1034d05c7d689888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Z0a5OQuiUBXc-wt_zzY0A.png"/></div></a></figure><p id="3171" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的程序将生成下面的输出。很明显，在使用<a class="ae jd" href="https://www.java67.com/2018/06/java-8-optional-example-ispresent-orElse-get.html" rel="noopener ugc nofollow" target="_blank">或</a>方法的情况下，当Optional不为空时，避免了高成本的操作。</p><figure class="jo jp jq jr fd js er es paragraph-image"><a href="https://www.java67.com/2018/06/java-8-optional-example-ispresent-orElse-get.html"><div class="er es kb"><img src="../Images/4c6ca53ddaa7f27fc49e7df0ce2cb629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HSimC4R8RADisW1L32fD5w.png"/></div></a></figure><p id="ad85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是orElse和orElseGet方法的区别。</p><p id="dda3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢你的时间和快乐的学习！</p></div></div>    
</body>
</html>