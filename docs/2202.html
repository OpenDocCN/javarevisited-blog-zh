<html>
<head>
<title>Spring Boot-Microservice deployment with Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Spring Boot-Docker微服务部署</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/spring-boot-microservice-deployment-with-docker-28f539928ce7?source=collection_archive---------1-----------------------#2022-06-22">https://medium.com/javarevisited/spring-boot-microservice-deployment-with-docker-28f539928ce7?source=collection_archive---------1-----------------------#2022-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9f20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们将在Docker的帮助下部署基于Spring boot的微服务。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2018/02/top-5-spring-microservices-courses-with-spring-boot-and-spring-cloud.html"><div class="er es jd"><img src="../Images/85650534e5675730b4559e4bf3879b93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JEy8wnaAXFpcwtZV3_YcHA.png"/></div></a><p class="jl jm et er es jn jo bd b be z dx translated">弹簧靴罐的对接(复制图像)</p></figure><p id="3124" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用以前教程中编写的产品微服务进行dockering。</p><p id="39b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jp" rel="noopener" href="/@somwanshisagar11/write-microservice-in-less-than-2-mins-faster-than-maggi-b5b0d65a058">在不到2分钟的时间内编写微服务..(比Maggi快)</a></p><p id="ba3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">先决条件:</strong></p><ul class=""><li id="3ed5" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">弹簧靴2.7.0</li><li id="464c" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">Maven 3.6以上</li><li id="dc5d" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">Java 8或更高版本</li><li id="6b9a" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">Docker或与Docker一起玩</li><li id="82e8" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">用于服务测试的邮递员</li></ul><p id="b3ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想知道在你的机器上安装docker的步骤，请点击<a class="ae jp" href="https://docs.docker.com/engine/install/" rel="noopener ugc nofollow" target="_blank">了解更多详情。</a></p><p id="e307" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不浪费时间，让我们开始<a class="ae jp" rel="noopener" href="/javarevisited/5-best-docker-courses-for-java-and-spring-boot-developers-bbf01c5e6542">整理春季启动应用</a> …</p><p id="5d65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第一步</strong>:在项目的根路径下创建dockerfile(指我们存放pom.xml文件的路径)。请参考下面的屏幕截图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ke"><img src="../Images/6257cc7dbd1951c6c7a66bbecd77da69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*oZ4nNdijwm_gvfutf7hrxA.png"/></div><p class="jl jm et er es jn jo bd b be z dx translated">项目目录中Dockerfile的位置</p></figure><p id="5907" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们假设您已经在机器上安装了docker。如果你在安装docker时遇到了麻烦，那么我们可以选择其他选项<a class="ae jp" href="https://labs.play-with-docker.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> <em class="kf">来使用Docker </em> </strong> </a> <strong class="ih hj"> <em class="kf">。</em>T19】</strong></p><p id="9b65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kf">注意</em> </strong> : <em class="kf">要使用Play with docker，您需要在Docker hub中创建帐户。这是一个完全免费的docker动手工具。</em></p><p id="15ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2:创建Docker文件:</strong></p><p id="f2e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们在maven项目目录中定义的路径下创建Dockerfile。请不要在docker文件中添加任何扩展名。文本文件（textfile）</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2022/05/docker-interview-questions-answers-for.html"><div class="er es kg"><img src="../Images/5ccb68e5f60b7d360a748934a5aaf65a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*lsKxhUn3r-zzC86ZYGwkBA.png"/></div></a><p class="jl jm et er es jn jo bd b be z dx translated">Dockerfile文件</p></figure><p id="2b0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kf">来自:</em> </strong> <em class="kf">要构建码头工人形象我们需要一个基础形象。我们正在对接基于java的项目，所以基本图像将被打开。<br/> </em> <strong class="ih hj"> <em class="kf">标签:</em> </strong> <em class="kf">标签是关于图像或容器的元数据。它们不会影响应用程序的功能。<br/></em><strong class="ih hj"><em class="kf">WORKDIR:</em></strong><em class="kf">设置一个</em> <a class="ae jp" rel="noopener" href="/javarevisited/top-5-free-courses-to-learn-docker-for-beginners-best-of-lot-b2b1ad2b98ad"> <em class="kf"> Docker容器</em> </a> <em class="kf">的工作目录。<br/> </em> <strong class="ih hj"> <em class="kf">复制:</em> </strong> <em class="kf">将指定的文件复制到镜像中。在我们的例子中，我们将产品微服务jar从目标文件夹复制到容器内的app文件夹。<br/></em><strong class="ih hj"><em class="kf">EXPOSE:</em></strong><em class="kf">公开容器内特定端口上的服务。<br/></em><strong class="ih hj"><em class="kf">CMD:</em></strong><em class="kf">容器一启动就执行命令。</em></p><p id="e952" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:构建Docker映像:</strong></p><p id="a6c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要构建docker映像，请转到我们放置docker文件的路径并运行下面的命令</p><p id="065f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kf"> docker build -t &lt;图像名称/图像ID &gt; : &lt;版本&gt; </em></p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://www.java67.com/2021/04/top-5-courses-to-learn-docker-for-java.html"><div class="er es kh"><img src="../Images/3bd9880b8e9ac87945a530c735183a6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xl5AO1iap3_TAY4--plKXQ.png"/></div></a><p class="jl jm et er es jn jo bd b be z dx translated">用标签构建docker图像</p></figure><p id="d66d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦docker映像在docker CLI上成功构建，您将在命令提示符下获得成功消息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2022/05/docker-interview-questions-answers-for.html"><div class="er es ki"><img src="../Images/f88b8fedc8af77949cf108c6e46b6fd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sNKMHcQTOHDuALqp9l1gbQ.png"/></div></a><p class="jl jm et er es jn jo bd b be z dx translated">建立码头形象</p></figure><p id="ca97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第四步:在Docker中列出图像:</strong></p><p id="ea90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kf"> docker images </em>或<em class="kf">docker images ls</em>命令可用于列出本地存储库中的图像。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://www.youtube.com/watch?v=gL4txpW5ijU"><div class="er es kj"><img src="../Images/79f58eba961c4680a43e6571e3caa7a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j5hSjSjHNgy4fVqxEGkcQQ.png"/></div></a><p class="jl jm et er es jn jo bd b be z dx translated">docker图像列表</p></figure><p id="aabe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤5:在Docker引擎上运行Docker映像:</strong></p><p id="a0e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kf"> docker run -d -p 7070:9090 &lt;图像Id &gt; </em></p><p id="74c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">选项d : </strong>在后台运行容器并打印容器Id。以分离模式运行。</p><p id="0946" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">选项p : </strong>向主机发布容器的端口。在我们的例子中，容器将在9090端口上运行，外部系统或主机可以在7070端口上访问应用程序。</p><p id="a821" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如-p <external port=""> : <internal port=""/></external></p><p id="45d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kf">码头集装箱ls </em></p><p id="fcc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该命令将显示docker引擎中所有正在运行的容器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2019/05/top-5-courses-to-learn-docker-and-kubernetes-for-devops.html#axzz7DP5DDtxT"><div class="er es kk"><img src="../Images/d9b262fc262f4ea7ac152f3229e24fbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-pEH41PmqhK8u_hCBo8e8w.png"/></div></a><p class="jl jm et er es jn jo bd b be z dx translated">运行docker图像</p></figure><p id="eaf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要查看正在运行的容器的日志，我们可以使用下面的命令</p><p id="b8d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kf"> docker logs -f &lt;集装箱Id&gt;T72】</em></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kl"><img src="../Images/cd40abbb28dd15a1ead559fcd46dcc3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6_-yhVyEz8VUxClSgYZ32g.png"/></div></div><p class="jl jm et er es jn jo bd b be z dx translated">查看容器日志</p></figure></div><div class="ab cl kq kr gp ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="hb hc hd he hf"><p id="3e3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤6:测试服务</strong></p><p id="764d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们在控制台上测试服务，并查看服务的输出。我们可以使用<a class="ae jp" href="https://javarevisited.blogspot.com/2015/10/how-to-send-http-request-from-unix-or-linux-curl-wget-example.html" rel="noopener ugc nofollow" target="_blank"> Curl </a>或<a class="ae jp" rel="noopener" href="/javarevisited/7-best-courses-to-learn-postman-tool-for-web-service-and-api-testing-f225c138fa5a"> Postman </a>来启动请求。</p><p id="ac61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kf">注:</em> </strong> <em class="kf">我在Docker工具箱上测试过应用，默认主机IP是192.168.99.100。您可以使用以下命令获取主机IP。</em></p><p id="df7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kf"> docker -machine ip默认</em></p><p id="2eb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是呼叫服务的选项。</p><ul class=""><li id="fe29" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">使用curl命令调用服务:</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2017/03/10-examples-of-curl-command-in-unix-and-Linux.html#axzz6bYzaddcE"><div class="er es kx"><img src="../Images/c67bd09941032d15bcd646d036f27c37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gQswA9ZFrY0Bo6e01wI83Q.png"/></div></a></figure><ul class=""><li id="7c49" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">使用<a class="ae jp" href="https://javarevisited.blogspot.com/2020/02/top-5-postman-tutorials-and-courses-for-web-developers.html" rel="noopener ugc nofollow" target="_blank">邮递员</a>呼叫服务:</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2020/02/top-5-postman-tutorials-and-courses-for-web-developers.html"><div class="er es ky"><img src="../Images/fa7800885685d3f4254315173bcd2ed7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QgofNdOOJrNdJ-KAWj--Ow.png"/></div></a></figure><p id="24bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经完成了基于Spring boot的微服务的Docker部署。</p><p id="4378" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快乐学习…</p><div class="kz la ez fb lb lc"><a rel="noopener follow" target="_blank" href="/javarevisited/13-topics-you-should-prepare-for-your-next-spring-boot-interview-5f2993a04ff5"><div class="ld ab dw"><div class="le ab lf cl cj lg"><h2 class="bd hj fi z dy lh ea eb li ed ef hh bi translated">你应该为2022年的下一次Spring Boot面试准备的13个话题</h2><div class="lj l"><h3 class="bd b fi z dy lh ea eb li ed ef dx translated">你应该为下一次Java和Spring Boot面试准备的13个基本主题的列表和学习资源…</h3></div><div class="lk l"><p class="bd b fp z dy lh ea eb li ed ef dx translated">medium.com</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq jj lc"/></div></div></a></div></div></div>    
</body>
</html>