<html>
<head>
<title>Writing my First Ethereum Smart Contract (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">撰写我的第一份以太坊智能合约(第二部分)</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/writing-my-first-ethereum-smart-contract-part-2-fe9833985aae?source=collection_archive---------3-----------------------#2021-11-24">https://medium.com/javarevisited/writing-my-first-ethereum-smart-contract-part-2-fe9833985aae?source=collection_archive---------3-----------------------#2021-11-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4ab3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的<a class="ae jd" rel="noopener" href="/p/fa74e329cb93">前一篇文章</a>中，我已经涵盖了关于稳健的大部分基本和核心概念。如果你没有，那就赶快看看吧！</p><p id="7904" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们通过一个非常简单的智能合约开始动手编程吧！</p><p id="f275" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们将使用一个基于web的以太坊IDE — <a class="ae jd" href="https://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank"> Remix </a>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2020/07/top-5-online-courses-to-learn-blockchain.html#axzz6tFYADc00"><div class="ab fe cl jj"><img src="../Images/2595dcdf644098d06ae6d766715e6450.png" data-original-src="https://miro.medium.com/v2/0*rCxEhSLRq0xwkEEI"/></div></a><p class="jm jn et er es jo jp bd b be z dx translated">照片由<a class="ae jd" href="https://unsplash.com/@shams_ad?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Shamsudeen Adedokun </a>在<a class="ae jd" href="https://unsplash.com/s/photos/remix-ide?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="7de5" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">关于混音</h1><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://www.java67.com/2018/02/5-free-blockchain-technology-courses.html"><div class="er es ko"><img src="../Images/a584c06a506807c2aba72ee66b954e03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fpfrQH8I7SBoPqEf0zVXUA.png"/></div></a><p class="jm jn et er es jo jp bd b be z dx translated">混音页面截图</p></figure><p id="e9bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您通过<a class="ae jd" href="https://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank">链接</a>导航到Remix，您应该能够看到一个类似的屏幕。它支持不同的用户界面主题，如黑暗，光明和中世纪等。您可以通过导航栏左下角的<em class="kp">档位</em>设置图标进行更改。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2021/11/top-5-courses-to-learn-ethereum-for.html"><div class="er es kq"><img src="../Images/ba750abbdc1ced279b86e97980f4bce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fEzEO6hXrSbEmJKSiTeuSQ.png"/></div></a></figure><p id="7fc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们将主要关注前3个选项卡。</p><ol class=""><li id="e42a" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">文件浏览器标签——你可以创建文件，甚至链接到你的Github。</li><li id="95b4" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">编译器选项卡—您需要在这里编译代码。(我们将使用0.5.0版本的编译器)</li><li id="1353" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">Deploy &amp; Run Transactions选项卡—您将选择要部署的已编译合同，您还可以在此处看到部署合同的地址。</li></ol><h1 id="54bb" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">编码</h1><h2 id="5e60" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">设置基础环境。</h2><p id="4f72" class="pw-post-body-paragraph if ig hi ih b ii lt ik il im lu io ip iq lv is it iu lw iw ix iy lx ja jb jc hb bi translated">在Remix中创建一个新文件— <code class="du ly lz ma mb b">Dice.sol</code>并将下面的代码复制粘贴到其中。进入编译器选项卡，点击<code class="du ly lz ma mb b">Compile Dice.sol</code>。</p><p id="7da6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下代码为您提供了一个非常基本的骰子智能契约，它具有以下功能:</p><ul class=""><li id="f86c" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc mc kx ky kz bi translated">创建一个新骰子</li><li id="a3d9" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc mc kx ky kz bi translated">掷色子</li><li id="2614" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc mc kx ky kz bi translated">停止掷骰子</li></ul><p id="a4e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可能需要一些时间来浏览代码，消化并参考我们在<a class="ae jd" rel="noopener" href="/p/fa74e329cb93">上一篇文章(变量、函数、修饰符和事件)</a>中浏览过的一些概念。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="md me l"/></div></figure><p id="a644" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们试着在混音中运行，感受一下它应该如何工作。现在，选择第三个选项卡—部署和运行事务。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mf"><img src="../Images/bfca988881f79768b0ca189e1e753518.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*_MV_2gB6D22aFxKBKImbNg.png"/></div></figure><p id="1cbb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，您有10个帐户，每个帐户有100个以太网。如果需要，您可以点击<code class="du ly lz ma mb b">ACCOUNT</code>标题旁边的“+”图标添加更多账户。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="er es mg"><img src="../Images/a7aa3d9c1c5661bf1b93760e00edceb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5u5YBVi-4Mxz5DHsfJm7vA.png"/></div></div></figure><p id="fdc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保您选择了方框1中突出显示的骰子合约。单击<code class="du ly lz ma mb b">Deploy</code>按钮，您应该会在框4中看到与您的输出类似的变化(给您一条成功部署的消息),在框3中看到已部署的合同。</p><p id="03d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在框3中，除了智能合约的地址(您可以通过单击复制图标轻松访问该地址)，您还可以看到您已编码的函数列表。在这里，您可以进行交互并测试智能合约的所有功能。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ml"><img src="../Images/68c3481dac3a751588f8908c01a88507.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*Hlf9VJjhnb6JtxXN6UWwyw.png"/></div></figure><p id="2163" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可能已经注意到，您选择用来部署智能合同的帐户比以前更少了。这是因为将智能合约部署到“测试”网络中需要一些(非常少的)GAS。</p><h2 id="2bf9" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">让我们测试一下这些功能。</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="er es mm"><img src="../Images/76925fff49c50188f28d2cb85e3643c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r1NYcwYzzq-nIVpVwJwM_Q.png"/></div></div></figure><p id="698e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要运行<code class="du ly lz ma mb b">add</code>功能，我们需要为骰子指定一些值(至少0.1乙醚)，因此您需要输入一些在红色框中突出显示的值，否则您将被抛出一个错误:</p><pre class="je jf jg jh fd mn mb mo mp aw mq bi"><span id="d9f7" class="lf jr hi mb b fi mr ms l mt mu">transact to Dice.add errored: VM error: revert.</span><span id="e38e" class="lf jr hi mb b fi mv ms l mt mu">revert<br/>      The transaction has been reverted to the initial state.<br/>Reason provided by the contract: "at least 0.01 ETH is needed to spawn a new dice".<br/>....</span></pre><p id="6f92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以按照自己的节奏尝试其他功能。</p><h2 id="faf0" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">锻炼身体。</h2><p id="473f" class="pw-post-body-paragraph if ig hi ih b ii lt ik il im lu io ip iq lv is it iu lw iw ix iy lx ja jb jc hb bi translated">现在，尝试编写一个新函数——销毁骰子并返回以太。您可能需要考虑一些条件，如ownerOnly、isValidDice等。看看如何用一种特殊的方法把乙醚归还给物主。</p><p id="3826" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里是<a class="ae jd" href="https://gist.github.com/chialiyun/b376a4a5741f3763c83864025f20efcf" rel="noopener ugc nofollow" target="_blank">链接</a>到完整的代码供你参考。</p></div><div class="ab cl mw mx gp my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="hb hc hd he hf"><h1 id="cc8e" class="jq jr hi bd js jt nd jv jw jx ne jz ka kb nf kd ke kf ng kh ki kj nh kl km kn bi translated">结论</h1><p id="5ffb" class="pw-post-body-paragraph if ig hi ih b ii lt ik il im lu io ip iq lv is it iu lw iw ix iy lx ja jb jc hb bi translated">我希望这个简单的教程已经让您更好地理解了如何创建自己的智能合同！在后续文章中，我们将更深入地使用一个对管理开发生命周期、调试和测试有用的框架。</p><p id="824e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您的阅读！下次见！🤓</p></div></div>    
</body>
</html>