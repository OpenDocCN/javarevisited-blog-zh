<html>
<head>
<title>The missing Java data structures no one ever told you about — Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">没有人告诉过你的缺失的Java数据结构——第3部分</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/the-missing-java-data-structures-no-one-ever-told-you-about-part-3-d26387b9e66e?source=collection_archive---------4-----------------------#2021-08-24">https://medium.com/javarevisited/the-missing-java-data-structures-no-one-ever-told-you-about-part-3-d26387b9e66e?source=collection_archive---------4-----------------------#2021-08-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="255a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<a class="ae jd" href="https://github.com/donraab/eclipse-collections" rel="noopener ugc nofollow" target="_blank"> Eclipse集合</a>中了解原语集合支持。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/742d39f9cd24f4534d53a1e872155da6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0KahX9WQa7Z1tF0k"/></div></div><p class="jq jr et er es js jt bd b be z dx translated">照片由<a class="ae jd" href="https://unsplash.com/@poncho_nj?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Alfonso Navarro </a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h1 id="7eed" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">爪哇拳击的弊端</h1><p id="2f11" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Java有八种基本类型。分别是<code class="du kx ky kz la b">boolean</code>、<code class="du kx ky kz la b">byte</code>、<code class="du kx ky kz la b">char</code>、<code class="du kx ky kz la b">short</code>、<code class="du kx ky kz la b">int</code>、<code class="du kx ky kz la b">float</code>、<code class="du kx ky kz la b">long</code>和<code class="du kx ky kz la b">double</code>。每个基本类型都有相应的对象包装器。分别是<code class="du kx ky kz la b">Boolean</code>、<code class="du kx ky kz la b">Byte</code>、<code class="du kx ky kz la b">Character</code>、<code class="du kx ky kz la b">Short</code>、<code class="du kx ky kz la b">Integer</code>、<code class="du kx ky kz la b">Float</code>、<code class="du kx ky kz la b">Long</code>和<code class="du kx ky kz la b">Double</code>。装箱是获取原始值并将其存储在相应包装类型的实例中的过程。自动装箱是Java 5中添加的一个特性。自动装箱使得在相应的包装类的实例中自动包装原始值成为可能，而不需要开发人员显式地编写任何代码来执行包装。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lb lc l"/></div><p class="jq jr et er es js jt bd b be z dx translated">原始值、包装类型、自动装箱和显式装箱</p></figure><p id="eb97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有关自动装箱和拆箱的更多信息，请参考Java教程中关于<a class="ae jd" href="https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html" rel="noopener ugc nofollow" target="_blank">自动装箱和拆箱</a>的章节。</p><p id="1d78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://www.baeldung.com/jvm-measuring-object-sizes" rel="noopener ugc nofollow" target="_blank">“测量JVM中的对象大小”</a>是一篇很好的文章，介绍了如何使用<a class="ae jd" href="https://openjdk.java.net/projects/code-tools/jol/" rel="noopener ugc nofollow" target="_blank"> Java Object Layout </a>，这是一个OpenJDK代码工具项目。</p><h2 id="29ef" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">为什么拳击是邪恶的？</h2><p id="10d5" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Java的拳击几乎是纯粹的浪费。开发人员最关心的是包装器中的原始值，而不是包装器本身。包装器的存在主要是为了让开发人员可以在集合中使用原始值。自动装箱的便利是邪恶的，因为它使开发人员能够悄悄地生成包装垃圾，这对他们的应用程序的性能有负面影响。</p><h1 id="d22d" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">谢谢，请不要隐藏盒子！</h1><p id="9b90" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank"> Eclipse Collections </a>通过提供完整的原始集合给开发者完全的控制权，帮助他们避免在Java堆中创建隐藏的盒子。今天，Eclipse Collections有几种原始数据结构，可以处理所有八种原始类型。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lr"><img src="../Images/4ad186bf73cc9bca6576f4c75ee05f44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VnqcUIAPlEJ9OFwm5syT3g.png"/></div></div><p class="jq jr et er es js jt bd b be z dx translated">原始集合高级视图</p></figure><p id="f1e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">API中支持对象和原语集合之间的转换。</p><p id="d6c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">类似于对象集合上的实现，返回类型是共变的，并且由子类型特殊化。我将通过展示可变和不可变类型的API示例来演示这一点。</p><h1 id="8aa2" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">可视化原始集合类型层次结构</h1><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ls"><img src="../Images/7602c972c8553289d2870bfa14ac41f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yzAO5Ciqu8Am_5gWxXfH8w.png"/></div></div><p class="jq jr et er es js jt bd b be z dx translated">PrimitiveIterable是所有基元集合类型的父类型</p></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lt"><img src="../Images/d78f0dbe0d983cd0e5d35d9729996df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vkS5xustMLJQAGBEPSPaKw.png"/></div></div><p class="jq jr et er es js jt bd b be z dx translated">单一基元类型(int)的可迭代类型层次结构</p></figure><h1 id="88c1" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">构建时代码生成</h1><p id="f6a8" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">如果复制和维护上述图表的源代码八次似乎是一项不可能的任务，那么您是正确的。诀窍是我们从模板文件中代码生成基本的集合类型。Eclipse Collections使用<a class="ae jd" href="https://www.stringtemplate.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> StringTemplate </strong> </a>为其原始集合生成大部分Java源代码。这发生在构建时。所以你不会看到。GitHub中原始集合的java源文件。然而，您会在<code class="du kx ky kz la b">eclipse-collections-code-generator</code>模块中看到扩展名为. stg的模板。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lu"><img src="../Images/c0426e56b6dbc5ace01f48fe45a4a179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OzfiewtImrIXllTAlMnFgw.png"/></div></div><p class="jq jr et er es js jt bd b be z dx translated">StringTemplate模板文件:primitiveList.stg</p></figure><h1 id="55dc" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">给我看看代码</h1><p id="f47b" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我将给出一种原始类型的所有原始数据结构的例子。有一个非常丰富的原始集合API，我将在代码中演示相当多的方法。准备滚动，因为有很多例子。</p><h2 id="d57c" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">目录</h2><p id="7fc9" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">单击下面的链接跳转到某个部分。单击每个部分底部的目录链接返回此处。</p><ul class=""><li id="6384" class="lv lw hi ih b ii ij im in iq lx iu ly iy lz jc ma mb mc md bi translated"><a class="ae jd" href="#cb4c" rel="noopener ugc nofollow">列表</a></li><li id="b82b" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated"><a class="ae jd" href="#6157" rel="noopener ugc nofollow">设置</a></li><li id="335c" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated"><a class="ae jd" href="#2364" rel="noopener ugc nofollow">袋子</a></li><li id="f92a" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated"><a class="ae jd" href="#0bb8" rel="noopener ugc nofollow">堆栈</a></li><li id="5ea0" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated"><a class="ae jd" href="#de1c" rel="noopener ugc nofollow">地图</a></li><li id="f632" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated"><a class="ae jd" href="#0454" rel="noopener ugc nofollow">懒惰</a></li><li id="a05f" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated"><a class="ae jd" href="#c66c" rel="noopener ugc nofollow">同步</a></li><li id="5b26" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated"><a class="ae jd" href="#3e6a" rel="noopener ugc nofollow">不可修改</a></li><li id="9cf2" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated"><a class="ae jd" href="#8f09" rel="noopener ugc nofollow">字符串</a></li><li id="42fe" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated"><a class="ae jd" href="#6f97" rel="noopener ugc nofollow">内存成本</a></li></ul><h2 id="cb4c" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">原始列表</h2><p id="aec2" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Eclipse集合中的原语<code class="du kx ky kz la b">List</code>实现是基于数组的。有可变和不可变的原始列表。下面的代码将演示可变和不可变类型上可用的API。包层次结构中将出现一种模式，这将使在IDE中发现不同的类型变得更加容易。</p><p id="1716" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注:</strong> <code class="du kx ky kz la b">IntInterval</code>是一个<code class="du kx ky kz la b">ImmutableIntList</code>。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="5476" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="#d57c" rel="noopener ugc nofollow"> TOC </a></p><h2 id="6157" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">原始集合</h2><p id="43ec" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Eclipse集合中的原语<code class="du kx ky kz la b">Set</code>实现是基于数组的，并且使用开放式寻址。有可变的和不可变的原语集合。下面的代码将演示可变集和不可变集上可用的API。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="d068" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="#d57c" rel="noopener ugc nofollow"> TOC </a></p><h2 id="2364" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">原始包</h2><p id="b59e" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Eclipse集合中的原语<code class="du kx ky kz la b">Bag</code>实现由原语<code class="du kx ky kz la b">Maps</code>提供支持。例如，<code class="du kx ky kz la b">IntBag</code>将由<code class="du kx ky kz la b">IntIntMap</code>支持。其中第一个<code class="du kx ky kz la b">int</code>是<code class="du kx ky kz la b">Bag</code>的类型，第二个<code class="du kx ky kz la b">int</code>是<code class="du kx ky kz la b">Bag</code>中每个值的计数。有可变和不可变的原始包。下面的代码将演示可变和不可变包上可用的API。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="5a8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="#d57c" rel="noopener ugc nofollow">目录</a></p><h2 id="0bb8" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">原始堆栈</h2><p id="6b57" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Eclipse集合中的原语<code class="du kx ky kz la b">Stack</code>实现由一个原语数组支持。有可变和不可变的原始堆栈。下面的代码将演示可变和不可变堆栈上可用的API。</p><p id="4d74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong> <code class="du kx ky kz la b">Stack</code>不是<code class="du kx ky kz la b">Collection</code>，所以<code class="du kx ky kz la b">Stack</code>没有<code class="du kx ky kz la b">add</code>、<code class="du kx ky kz la b">addAll</code>、<code class="du kx ky kz la b">remove</code>、<code class="du kx ky kz la b">removeAll</code>或<code class="du kx ky kz la b">retainAll</code>这样额外的变异方法。在Eclipse集合中，<code class="du kx ky kz la b">Stack</code>确实有丰富的可迭代方法集(例如，<code class="du kx ky kz la b">select</code>、<code class="du kx ky kz la b">reject</code>、<code class="du kx ky kz la b">collect</code>等)。).</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="1084" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="#d57c" rel="noopener ugc nofollow"> TOC </a></p><h2 id="de1c" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">原始地图</h2><p id="bcf8" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Eclipse集合中的原语<code class="du kx ky kz la b">Map</code>实现支持键类型和值类型的所有组合。在键和值类型相同的情况下，键和值都存储在一个数组中。如果键和值类型不同，它们将存储在不同的数组中。有可变和不可变的原始地图。下面的代码将演示可变和不可变映射上可用的API。</p><p id="a207" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:Eclipse集合中的<code class="du kx ky kz la b">Map</code>类型在值上是<code class="du kx ky kz la b">Iterable</code>。所以一个<code class="du kx ky kz la b">IntIntMap</code>也是一个<code class="du kx ky kz la b">IntIterable</code>，支持<code class="du kx ky kz la b">IntIterable</code>上可用的全套方法。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="749e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="#d57c" rel="noopener ugc nofollow">目录</a></p><h2 id="0454" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">原始惰性可迭代</h2><p id="efcc" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">每个原始集合都可以通过调用<code class="du kx ky kz la b">asLazy</code>返回一个惰性视图。下面的代码将展示一些在<code class="du kx ky kz la b">LazyIntInterable</code>上可用的惰性操作。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="1177" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="#d57c" rel="noopener ugc nofollow">目录</a></p><h2 id="c66c" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">原始同步集合</h2><p id="9110" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">每个可变的原始集合都可以通过调用<code class="du kx ky kz la b">asSynchronized</code>返回一个同步视图。在没有显式锁定的情况下，同步集合与<code class="du kx ky kz la b">iterator</code>一起使用是不安全的。但是，在方法内部获取锁的类型上有大量不同的原子操作。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="5521" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="#d57c" rel="noopener ugc nofollow">目录</a></p><h2 id="3e6a" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">原始不可修改集合</h2><p id="aeee" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">每个可变的原始集合都可以通过调用<code class="du kx ky kz la b">asUnmodifiable</code>返回一个不可修改的视图。不可修改的集合与<code class="du kx ky kz la b">add</code>、<code class="du kx ky kz la b">remove</code>等可变方法一起使用不安全。因为他们会扔一个<code class="du kx ky kz la b">UnsupportedOperationException</code>。然而，集合中有大量的只读方法可用。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="5d4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="#d57c" rel="noopener ugc nofollow"> TOC </a></p><h2 id="8f09" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">原始字符串</h2><p id="104e" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Eclipse集合有三个原始的<code class="du kx ky kz la b">String</code>适配器— <code class="du kx ky kz la b">CharAdapter</code>、<code class="du kx ky kz la b">CodePointAdapter</code>、<code class="du kx ky kz la b">CodePointList</code>。这些类型为<code class="du kx ky kz la b">String</code>中的字符或代码点提供了丰富的原始协议。<code class="du kx ky kz la b">CharAdapter</code>和<code class="du kx ky kz la b">CodePointAdapter</code>是一个<code class="du kx ky kz la b">String</code>上的纯视图。<code class="du kx ky kz la b">CodePointList</code>实际上将来自<code class="du kx ky kz la b">String</code>的代码点缓存在一个<code class="du kx ky kz la b">ImmutableIntList</code>中。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="3138" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="#d57c" rel="noopener ugc nofollow">目录</a></p><h2 id="6f97" class="ld jv hi bd jw le lf lg ka lh li lj ke iq lk ll ki iu lm ln km iy lo lp kq lq bi translated">内存成本</h2><p id="7c20" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">将原语打包成包装器会带来巨大的内存开销。下表显示了在原始数据结构和装箱数据结构中存储100万个int值的内存比较成本。我可能需要一段时间来把它绘制成图表，但是我想我应该早点分享这些原始的比较，以及我用来计算它们的代码。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mj"><img src="../Images/09110ea53185693597717180efec9906.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*JyHYPrf_9mOQ28tRa_uXJg.png"/></div><p class="jq jr et er es js jt bd b be z dx translated">原始集合和装箱集合的内存开销比较表</p></figure><p id="955b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注</strong>:最容易收集的垃圾是从未产生的垃圾。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><h1 id="3db6" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">等待瓦尔哈拉</h1><p id="e8a0" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我对Valhalla项目给Java带来的希望感到兴奋。你可能正在等待项目<a class="ae jd" href="https://openjdk.java.net/projects/valhalla/" rel="noopener ugc nofollow" target="_blank"> Valhalla </a>来提高你正在编写的代码的性能。我真希望我能等到瓦尔哈拉。这可能会为我和许多其他从事Eclipse集合和其他原始集合库工作的人节省大量工作。不幸的是，等待编程语言未来版本的高级功能并不是每个人都可以选择的。</p><p id="47ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大约九年前，我们将具有丰富API的原始集合添加到了Eclipse集合中。我们看到的好处是显著的。对这些好处的认识有望帮助维持<a class="ae jd" href="https://openjdk.java.net/jeps/218" rel="noopener ugc nofollow" target="_blank"> JEP 218:泛型优于原语类型</a>的持续关注和发展。</p><p id="94bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我很高兴我们没有等。我们在原始收藏领域学到的和继续学到的经验可以帮助我们了解瓦尔哈拉工程的设计和开发。</p><h1 id="bbfd" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">关于Java中缺失数据结构的思考</h1><p id="8010" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">即使到了Java的Valhalla之后，Java中也会有很多缺失的数据结构。去年，我写了一篇关于Java收藏领域需要复兴的文章。一个全面的Java集合库的潜在特性空间是巨大的。基于<a class="ae jd" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank">月食收藏</a>的规模，这一点显而易见。无论如何，我们将继续Eclipse集合，并帮助发展Java集合空间。</p><p id="4fdf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望您喜欢我对一些没有人告诉过您的缺失的Java数据结构的三部分概述。现在你可以说有人告诉了你其中的一些。</p><p id="f1e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="mk">特别感谢</em><a class="ml mm ge" href="https://medium.com/u/8fe7c47c374f?source=post_page-----d26387b9e66e--------------------------------" rel="noopener" target="_blank"><em class="mk">Siri sha Pratha</em></a><em class="mk">校对本博客的草稿版本。</em></p><p id="1e0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="mk">我是</em><a class="ae jd" href="https://projects.eclipse.org/projects/technology.collections" rel="noopener ugc nofollow" target="_blank"><em class="mk">Eclipse Foundation</em></a><em class="mk">的</em><a class="ae jd" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank"><em class="mk">Eclipse Collections</em></a><em class="mk">OSS项目的项目负责人。</em> <a class="ae jd" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank"> <em class="mk">月食收藏</em> </a> <em class="mk">为</em> <a class="ae jd" href="https://github.com/eclipse/eclipse-collections/blob/master/CONTRIBUTING.md" rel="noopener ugc nofollow" target="_blank"> <em class="mk">投稿</em> </a> <em class="mk">打开。如果你喜欢这个库，你可以在GitHub上让我们知道。</em></p></div><div class="ab cl mn mo gp mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="hb hc hd he hf"><p id="3e29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其他<strong class="ih hj"> Java编程文章</strong>你可能喜欢:<br/> <a class="ae jd" href="https://javarevisited.blogspot.com/2019/10/the-java-developer-roadmap.html" rel="noopener ugc nofollow" target="_blank">完整的Java开发者路线图</a><br/><a class="ae jd" rel="noopener" href="/javarevisited/9-things-java-programmers-should-learn-in-2018-3f0b2207dfc4">Java程序员应该学习的10件事</a> <br/> <a class="ae jd" rel="noopener" href="/hackernoon/10-best-programming-languages-to-learn-in-2019-e5b05af4a972">你可以学习的10种编程语言</a> <br/> <a class="ae jd" href="http://www.java67.com/2018/04/10-tools-java-developers-should-learn.html" rel="noopener ugc nofollow" target="_blank"> 10种工具每个Java开发者都应该知道的</a><br/><a class="ae jd" href="http://javarevisited.blogspot.sg/2013/04/10-reasons-to-learn-java-programming.html" rel="noopener ugc nofollow" target="_blank">2021年学习Java编程语言的10个理由</a><a class="ae jd" rel="noopener" href="/javarevisited/5-essential-frameworks-every-java-developer-should-learn-6ed83315f1fb"/><br/><a class="ae jd" rel="noopener" href="/javarevisited/top-10-free-interactive-programming-courses-from-educative-for-beginners-to-learn-in-2021-713cbf96d4eb">我最喜欢的初学者免费编程课程</a> <br/> 7最佳数据结构与算法初学者课程 <br/> <a class="ae jd" rel="noopener" href="/hackernoon/50-data-structure-and-algorithms-interview-questions-for-programmers-b4b1ac61f5b0"> 50+数据结构与算法面试题</a></p><div class="mu mv ez fb mw mx"><a rel="noopener follow" target="_blank" href="/javarevisited/the-java-programmer-roadmap-f9db163ef2c2"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="bd hj fi z dy nc ea eb nd ed ef hh bi translated">2021年Java程序员路线图</h2><div class="ne l"><h3 class="bd b fi z dy nc ea eb nd ed ef dx translated">2021年成为Java开发人员的图解指南，包含相关课程的链接</h3></div><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">medium.com</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl jo mx"/></div></div></a></div></div></div>    
</body>
</html>