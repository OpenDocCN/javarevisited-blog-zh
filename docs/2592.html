<html>
<head>
<title>OAuth and misconceptions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">真相和误解</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/oauth-and-misconceptions-fe2005fecd72?source=collection_archive---------1-----------------------#2022-12-13">https://medium.com/javarevisited/oauth-and-misconceptions-fe2005fecd72?source=collection_archive---------1-----------------------#2022-12-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8130" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用简单的类比解释</p><p id="689b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OAuth已经很多年了，但是仍然有一个困惑</p><ul class=""><li id="7225" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">是为了<strong class="ih hj">认证</strong>还是为了<strong class="ih hj">授权</strong>或者两者都是？</li><li id="e5dc" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">需要如何验证令牌？</li><li id="82f4" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">ID令牌与访问令牌</li><li id="ab35" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">SAML与OpenID连接</li></ul><p id="d354" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们试着在这篇文章中澄清一些事情。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es jr"><img src="../Images/a2368b9d27549de282688f423be3c828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*MldI4Cet_1DVdqieSt1HQw.png"/></div></figure><p id="f54d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">内容</strong></p><ul class=""><li id="a762" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><a class="ae jz" href="#f5f6" rel="noopener ugc nofollow">认证vs授权</a></li><li id="f151" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">谁需要它们？</li><li id="013f" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">【OAuth如何做到两者兼得？</li><li id="fb4a" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="#286f" rel="noopener ugc nofollow">如何验证访问令牌？</a></li><li id="e250" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="#5f49" rel="noopener ugc nofollow">接入令牌没有用户信息吗？</a></li><li id="1577" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="#7494" rel="noopener ugc nofollow">访问令牌可以包含哪些信息？</a></li><li id="80c0" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="#0934" rel="noopener ugc nofollow">为什么选择OpenID Connect？</a></li><li id="d795" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">OIDC强调什么标准？</li><li id="c0b7" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">如何在客户端验证生成的id令牌？</li><li id="6201" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="#8d7f" rel="noopener ugc nofollow">可以从用户信息端点检索用户吗？</a></li><li id="cab6" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">JWT看起来怎么样？</li><li id="1617" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">储存这些代币的最佳方式是什么？</li><li id="3347" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="#00cd" rel="noopener ugc nofollow"> OIDC vs SAML </a></li><li id="33c3" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">我们能在SAML中使用OAuth吗？</li><li id="c6fb" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="#9050" rel="noopener ugc nofollow">对比授权流量</a></li></ul><blockquote class="ka kb kc"><p id="f5f6" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">身份验证与授权</p></blockquote><p id="8c88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">认证</strong>答案，</p><ul class=""><li id="23ae" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">如果<em class="kd">你在<em class="kd">系统</em>中</em></li><li id="92c6" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">你是你声称的那个人<em class="kd">吗</em></li><li id="eea0" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">您是否登录了</li></ul><p id="2e30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">授权</strong>答案，</p><ul class=""><li id="2fa6" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">你是否有权限访问资源</li></ul><p id="b066" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们拿一个<strong class="ih hj">保管箱</strong>来类比一下，更好理解。</p><p id="ca97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们考虑一下，<strong class="ih hj">保险箱</strong>在<strong class="ih hj">银行</strong>，当用户需要访问<strong class="ih hj">保险箱时，</strong>用户向<strong class="ih hj">银行助理</strong>提供他们的<em class="kd">驾驶执照</em>或<em class="kd">某种照片id </em>到<strong class="ih hj">证明他们是谁</strong>，这是<strong class="ih hj">认证</strong>过程的一部分。</p><figure class="js jt ju jv fd jw er es paragraph-image"><a href="https://javarevisited.blogspot.com/2018/01/how-http-basic-authentication-works-in.html#axzz6hhgr3Uqg"><div class="er es kh"><img src="../Images/0b2a10d306b30618a281298531d7dff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*WJEbbN5N36FDTbb9gO2i0w.png"/></div></a></figure><p id="7e79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦完成，用户使用银行提供的<em class="kd">门禁卡来访问</em>保险箱<strong class="ih hj">，</strong>，但是同一张卡不能用来打开<em class="kd">不属于该用户或无权访问</em>的其他储物柜，这种<strong class="ih hj">根据对某一资源的访问</strong>来限制用户的方式就是<strong class="ih hj">授权</strong>过程。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ki"><img src="../Images/bbe41da1a4ac49167ad489163e668518.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*SegafK6Ycwo0_xVaLFxnwQ.png"/></div></figure><blockquote class="ka kb kc"><p id="5c22" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">谁需要它们？</p></blockquote><p id="470a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们要注意的是，<a class="ae jz" href="#f5f6" rel="noopener ugc nofollow">认证和授权</a>不仅仅是<strong class="ih hj">给人类<strong class="ih hj">用户</strong>到<em class="kd">访问</em>受<strong class="ih hj">保护的资源</strong>。也有这样的情况，涉及<strong class="ih hj">机器<em class="kd"> </em> </strong> <em class="kd">与<strong class="ih hj">交谈</strong></em>其他</strong> <strong class="ih hj">机器</strong>到<strong class="ih hj">获取受保护的信息，</strong>只能被某些机器访问。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es kj"><img src="../Images/d20c670bfee0239986c22939a5eccf10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vx7pLIg9MlPnji59uQbDvw.png"/></div></div></figure><p id="3977" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jz" href="#f5f6" rel="noopener ugc nofollow">认证和授权</a>是<strong class="ih hj">保护资源</strong>免受<strong class="ih hj">人类(</strong> <em class="kd">用户</em> <strong class="ih hj"> ) </strong>和<strong class="ih hj">机器(</strong> <em class="kd">客户端/服务器</em> <strong class="ih hj"> ) </strong>攻击的技术。因此，实现应该<em class="kd">验证</em> &amp; <em class="kd">允许/限制</em>他们尝试访问<strong class="ih hj">资源服务器</strong>。</p><blockquote class="ka kb kc"><p id="4896" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">它是如何实现两者的？</p></blockquote><p id="983b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">核心<a class="ae jz" href="https://oauth.net/specs/" rel="noopener ugc nofollow" target="_blank"> OAuth规范</a>只谈<strong class="ih hj">授权。</strong></p><p id="b311" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">了解OAuth角色&amp;术语</strong></p><p id="109d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当与<strong class="ih hj">银行储物柜</strong>类比<strong class="ih hj">【实际平方值】</strong>中的角色进行比较时，</p><ul class=""><li id="fb70" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">资源所有者</strong>是<strong class="ih hj">拥有保管箱的用户。【用户名密码用户】</strong></li><li id="cee2" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">资源服务器，</strong>顾名思义就是<strong class="ih hj">银行保险箱</strong>，存放受保护用户的贵重物品。<strong class="ih hj">【托管API的服务器】</strong></li><li id="95d8" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">访问令牌</strong>是颁发给<strong class="ih hj">资源所有者/用户</strong>的<strong class="ih hj">物理访问卡，用于访问特定的<strong class="ih hj">保险箱。[编码字符串可以包含任何格式的任何自定义信息] </strong></strong></li><li id="419b" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">代理</strong>是<strong class="ih hj">银行保险箱的物理读卡器。【浏览器】</strong></li><li id="c150" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">客户端</strong>是在物理读卡器上运行 <em class="kd">的<strong class="ih hj">软件。<strong class="ih hj">【React/Angular SPA或手机App或客户端服务器或网关】</strong></strong></em></li><li id="e99a" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">范围</strong>是访问的类型，比如说<strong class="ih hj">向/从银行储物柜存取</strong>东西。比如说，如果<strong class="ih hj">用户</strong>和<strong class="ih hj">配偶</strong>都可以访问<strong class="ih hj">同一个保险箱，</strong>那么<em class="kd">的访问限制可以配置为</em>使得<em class="kd">用户的配偶</em>只能存款，并且可以拥有<em class="kd">无取款权限【T23:)<strong class="ih hj">【产品:读取，产品:写入，产品:更新，个人资料，openid，电子邮件—范围为列表】</strong></em></li><li id="a61c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">授权服务器</strong>是<strong class="ih hj">服务器，它根据可能位于远程的作用域来验证和授权或拒绝访问</strong>。<strong class="ih hj">【负责发放访问令牌的服务器】</strong></li></ul><p id="70e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们仔细观察，资源所有者的<strong class="ih hj">配偶</strong>可以<em class="kd">拿到资源所有者的门禁卡</em>并从保险箱中取出东西，因为配偶正在使用资源所有者的门禁卡。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es ko"><img src="../Images/aafaca78c50090e9d55029874626daf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DpR4Mdzk9aofmNOZ"/></div></div><p class="kp kq et er es kr ks bd b be z dx translated">由<a class="ae jz" href="https://unsplash.com/@rd421?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> R.D. Smith </a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="9182" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">也就是说，<em class="kd">对<strong class="ih hj">访问令牌</strong>拥有访问</em>权限的人可以根据令牌的<strong class="ih hj">范围</strong>访问资源。它只关心访问的委托，而不关心是谁，这转化为<strong class="ih hj">授权过程</strong>。</p><blockquote class="ka kb kc"><p id="286f" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">等一下。如何验证<strong class="ih hj">访问令牌</strong>？</p></blockquote><p id="7650" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jz" href="https://auth0.com/docs/secure/tokens/access-tokens/validate-access-tokens" rel="noopener ugc nofollow" target="_blank"> OAuth </a>核心规范没有指定任何机制来<a class="ae jz" href="https://auth0.com/docs/secure/tokens/access-tokens/validate-access-tokens" rel="noopener ugc nofollow" target="_blank">验证令牌</a>。<a class="ae jz" href="https://datatracker.ietf.org/doc/html/rfc7662" rel="noopener ugc nofollow" target="_blank"> OAuth 2.0自测扩展</a>谈到使用<strong class="ih hj">自测端点</strong>或<strong class="ih hj">使用授权服务器和资源服务器都能理解的格式</strong>。</p><blockquote class="ka kb kc"><p id="5f49" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated"><strong class="ih hj">访问令牌</strong>没有用户信息吗？</p></blockquote><p id="73d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jz" href="https://oauth.net/2/access-tokens/" rel="noopener ugc nofollow" target="_blank">访问令牌</a>可以有任何信息，可以是OAuth核心规范没有限制的任何格式。负责验证的是<a class="ae jz" href="https://auth0.com/docs/secure/tokens/access-tokens/validate-access-tokens" rel="noopener ugc nofollow" target="_blank"> API。</a></p><blockquote class="ka kb kc"><p id="7494" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">如果<strong class="ih hj">访问令牌</strong>可以拥有<strong class="ih hj">任何信息</strong>，那么为什么它不能拥有<strong class="ih hj">用户信息</strong>？</p></blockquote><p id="eaf8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当然，我们可以使用<strong class="ih hj">访问令牌</strong>来<strong class="ih hj">存储用户信息。</strong> <a class="ae jz" rel="noopener" href="/javarevisited/top-10-courses-to-learn-spring-security-and-oauth2-with-spring-boot-for-java-developers-8f0222d6066d"> <strong class="ih hj"> OAuth </strong> </a>并不限制它，但是在<strong class="ih hj">访问令牌</strong>中实现<strong class="ih hj">用户信息</strong>的人有责任注意这些陷阱，并教育团队他们自己的处理方法。</p><p id="0bad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里有一些需要注意的陷阱，</p><ul class=""><li id="ec85" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">根据<strong class="ih hj"> OAuth规范</strong>,<strong class="ih hj">客户端</strong>不应读取用户信息，因为<a class="ae jz" href="https://oauth.net/2/access-tokens/" rel="noopener ugc nofollow" target="_blank">访问令牌</a>是针对<strong class="ih hj"> API </strong>或<strong class="ih hj">资源服务器的。</strong>因此，如果使用<a class="ae jz" href="#6b93" rel="noopener ugc nofollow">授权码授予</a>或<a class="ae jz" href="#6b93" rel="noopener ugc nofollow">隐式授予</a>，并且如果客户端需要用户信息，那么它将需要<em class="kd">一个单独的机制</em>来处理用户信息。</li><li id="7eb3" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">由于访问令牌仅用于委托，一旦访问令牌被盗，持有访问令牌的人将有权访问资源，因此<em class="kd">必须实施单独的机制</em>来避免这种情况。</li><li id="a96b" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">使用<a class="ae jz" href="#6b93" rel="noopener ugc nofollow">隐式授权</a>时，当<strong class="ih hj">状态</strong>参数未被跟踪时，注入攻击。那么，什么是状态参数。它是一个随机生成的字符串，存储在<strong class="ih hj">代理</strong>中，并检查响应是否包含相同的<strong class="ih hj">状态。</strong></li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es kt"><img src="../Images/0a96475ede667192253c0b383fe102b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*1eVIiW2iFoWokzKNjQ4vJA.png"/></div><p class="kp kq et er es kr ks bd b be z dx translated"><strong class="bd ku">隐式流程</strong>用<strong class="bd ku">状态</strong>参数授权端点</p></figure><ul class=""><li id="30bc" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">当令牌响应被发送时，它没有指定令牌是给谁的或者令牌是做什么的——缺少受众，这最终必须被处理。</li></ul><p id="4d7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请点击此处查看详细信息，</p><div class="kv kw ez fb kx ky"><a href="https://oauth.net/articles/authentication/#common-pitfalls" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">使用OAuth 2.0的最终用户身份验证- OAuth</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">OAuth 2.0规范定义了一个委托协议，该协议对于跨…</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">oauth.net</p></div></div><div class="lh l"><div class="li l lj lk ll lh lm jx ky"/></div></div></a></div><blockquote class="ln"><p id="0934" class="lo lp hi bd lq lr ls lt lu lv lw jc dx translated">为了<strong class="ak">克服</strong>认证中的这些陷阱，避免每个人<em class="lx">执行</em>他们自己的<em class="lx">机制</em>来处理事情。2014年建立了一个<strong class="ak">标准，称为<a class="ae jz" href="https://openid.net/connect/" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> OpenID Connect </strong> </a>来处理<strong class="ak">认证</strong>。</strong></p></blockquote><blockquote class="ka kb kc"><p id="93cd" class="if ig kd ih b ii ly ik il im lz io ip ke ma is it kf mb iw ix kg mc ja jb jc hb bi translated">OpenID Connect强调的是什么标准？</p></blockquote><p id="b1c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">据说，当<strong class="ih hj">作用域<em class="kd"> openid </em> </strong>和其他作用域一起被传递时，<strong class="ih hj">授权服务器</strong>会返回一个带有用户信息的<a class="ae jz" href="#b9d0" rel="noopener ugc nofollow"> JWT </a>，可以被<strong class="ih hj">客户端访问。</strong></p><p id="abd7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">身份提供者</strong>又名<strong class="ih hj"> <em class="kd">组织/商业实体</em> </strong>维护用户的<strong class="ih hj">目录，还运行<strong class="ih hj">身份服务器</strong>以显示<strong class="ih hj">登录页面</strong>并发布<a class="ae jz" href="https://www.oauth.com/oauth2-servers/openid-connect/id-tokens/" rel="noopener ugc nofollow" target="_blank">身份令牌</a>来建立认证。已经出示给<em class="kd">银行助理</em>认证的<em class="kd">行驶证</em>，类似于<a class="ae jz" href="https://cloud.google.com/docs/authentication/token-types#id" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">身份证</strong> </a> <strong class="ih hj">。</strong></strong></p><ul class=""><li id="8ea1" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">身份提供者</strong>就是发放行驶证的<strong class="ih hj">车管所</strong></li><li id="f139" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">身份证令牌</strong> <a class="ae jz" href="#ade4" rel="noopener ugc nofollow"> <strong class="ih hj">债权</strong> </a>是驾驶证上<strong class="ih hj">姓名、出生日期、地址</strong>的键值对</li></ul><blockquote class="ka kb kc"><p id="229b" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">如何在客户端验证生成的<strong class="ih hj"> id令牌</strong>？</p></blockquote><p id="f908" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jz" href="https://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation" rel="noopener ugc nofollow" target="_blank"> Open ID Connect </a>指定了声明列表，如<em class="kd"> iat、aud、acr、auth_time </em>，但它随不同的提供者而不同。</p><p id="4339" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有一些提供<a class="ae jz" href="https://developer.okta.com/docs/reference/api/oidc/#introspect" rel="noopener ugc nofollow" target="_blank">自省url </a>进行验证。</p><blockquote class="ka kb kc"><p id="8d7f" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">难道我们不能访问<strong class="ih hj"> <em class="hi"> userinfo </em> </strong>端点来获得相同的用户信息，而不是使用来自<strong class="ih hj"> id令牌</strong>的<strong class="ih hj">声明</strong>吗？</p></blockquote><p id="b9a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">绝对正确。我们可以使用<strong class="ih hj"> userinfo端点</strong>来检索<em class="kd">简档</em>信息、<em class="kd">偏好</em>和<em class="kd">用户特定</em>信息，以防获得<a class="ae jz" href="https://cloud.google.com/docs/authentication/token-types#id" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> id令牌</strong> </a>中不存在的信息。从<a class="ae jz" href="https://cloud.google.com/docs/authentication/token-types#id" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> id令牌</strong> </a> <strong class="ih hj"> </strong>中获取信息，以避免不必要的网络调用，这将是非常有益的。</p><blockquote class="ka kb kc"><p id="b9d0" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">JWT是什么样子的？</p></blockquote><p id="f767" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">被称为<a class="ae jz" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">的JSON Web令牌</strong> </a> <strong class="ih hj"> </strong>遵循一个由<strong class="ih hj">点(.).通常它们有三个部分</strong></p><ul class=""><li id="3352" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">标题</strong> base64编码</li><li id="8941" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">有效载荷</strong> base64编码</li><li id="9969" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="https://medium.suriyaprakhash.com/cryptography-algorithms-e86ce7e2bb9b#1182" rel="noopener ugc nofollow" target="_blank">签名人签名</a></li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es md"><img src="../Images/e7579e8c5cfd04ae7e5c150f5656af7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*hT1ZqZkf_lcjUodhWj9Jlg.png"/></div><p class="kp kq et er es kr ks bd b be z dx translated"><strong class="bd ku">红色</strong>部分是<strong class="bd ku">头部</strong>，<strong class="bd ku">紫色</strong>部分是<strong class="bd ku">有效载荷</strong>，<strong class="bd ku">蓝色</strong>部分是<strong class="bd ku">签名</strong></p></figure><ul class=""><li id="0dda" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">第1部分</strong> —包含算法、JWK密钥id和类型</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es me"><img src="../Images/dca0d1954640d4c0d1da1f1c8f5471ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*Myr3NmGACnfU_TUhixkZSA.png"/></div><p class="kp kq et er es kr ks bd b be z dx translated">带有<strong class="bd ku"> kid </strong>的典型JWT收割台从<strong class="bd ku"> JWKS终点</strong>到<strong class="bd ku">获取<strong class="bd ku"> JWK </strong>验证</strong>有效载荷中的<strong class="bd ku">签名</strong></p></figure><ul class=""><li id="ade4" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">第2部分</strong> —关键值对声明</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mf"><img src="../Images/fa05dc85a84e9534155d877f63fdb79f.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*S-YLCTZhQGAwiA-3do3y6A.png"/></div><p class="kp kq et er es kr ks bd b be z dx translated">JWT有效载荷与键值<strong class="bd ku">声明</strong></p></figure><ul class=""><li id="a06f" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">第3部分</strong>—<strong class="ih hj">签名</strong>到<strong class="ih hj">验证令牌</strong>是否是由实际OAuth提供者签名的<strong class="ih hj">，</strong></li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es mg"><img src="../Images/e54ffd29605b4bb91b069eca3ab49e36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DxsuMKpC82HVYZDKyzGYbQ.png"/></div></div><p class="kp kq et er es kr ks bd b be z dx translated">在上述JWKS enpoint中匹配kid以获取JWK字符串/ <a class="ae jz" href="https://medium.suriyaprakhash.com/cryptography-algorithms-e86ce7e2bb9b#41bc" rel="noopener ugc nofollow" target="_blank">公共证书</a></p></figure><p id="a2e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用来自JWT报头的密钥id (kid)从<strong class="ih hj"> JWKS端点</strong>到<strong class="ih hj">获取<strong class="ih hj"> JWK </strong>，验证</strong>第3部分中的<strong class="ih hj">签名</strong>。</p><p id="0f99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要了解更多关于<a class="ae jz" href="https://medium.suriyaprakhash.com/cryptography-algorithms-e86ce7e2bb9b#1182" rel="noopener ugc nofollow" target="_blank">签名和验证</a>的信息，请阅读以下内容。</p><div class="kv kw ez fb kx ky"><a href="https://medium.suriyaprakhash.com/cryptography-algorithms-e86ce7e2bb9b" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">加密算法</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">需要记住的简单备忘单</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">medium.suriyaprakhash.com</p></div></div><div class="lh l"><div class="mh l lj lk ll lh lm jx ky"/></div></div></a></div><blockquote class="ka kb kc"><p id="47ed" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">储存这些代币的最好方法是什么？</p></blockquote><p id="4c16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常建议以安全的方式存储<strong class="ih hj"> id令牌</strong>或<strong class="ih hj">访问令牌</strong>，例如在<strong class="ih hj">加密数据库</strong>或<strong class="ih hj">安全服务器端存储</strong>。这完全取决于所使用的资助类型。</p><p id="1fd5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在理解它之前，我们需要知道下面的<a class="ae jz" href="https://auth0.com/docs/manage-users/sessions" rel="noopener ugc nofollow" target="_blank">会话</a>是在<em class="kd">成功登录</em>之后创建的，</p><ul class=""><li id="d688" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">您的<a class="ae jz" href="#b311" rel="noopener ugc nofollow">客户端</a>中的本地会话—希望应用程序团队需要担心安全地存储它们。</li><li id="c753" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">在<a class="ae jz" href="https://auth0.com/docs/glossary?term=authorization-server" rel="noopener ugc nofollow" target="_blank">授权服务器</a>中创建的会话</li><li id="2a7e" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">在使用来自<a class="ae jz" href="https://developers.google.com/identity/openid-connect/openid-connect" rel="noopener ugc nofollow" target="_blank">谷歌</a>或<a class="ae jz" href="https://developers.facebook.com/docs/facebook-login/limited-login/token/" rel="noopener ugc nofollow" target="_blank">脸书</a>的<a class="ae jz" href="#7494" rel="noopener ugc nofollow"> OpenIDConnect </a>的情况下，在它们的终端创建第三个会话来维护<a class="ae jz" href="#f5f6" rel="noopener ugc nofollow">认证</a>。</li></ul><h2 id="88ff" class="mi mj hi bd ku mk ml mm mn mo mp mq mr iq ms mt mu iu mv mw mx iy my mz na nb bi translated">带后端的SPA</h2><p id="7dd5" class="pw-post-body-paragraph if ig hi ih b ii nc ik il im nd io ip iq ne is it iu nf iw ix iy ng ja jb jc hb bi translated"><em class="kd"> Angular </em>或<em class="kd"> React </em>具有后端的应用程序将主要使用<a class="ae jz" href="#6b93" rel="noopener ugc nofollow"> <strong class="ih hj">授权代码</strong> </a> grant，其中代码被发送到<em class="kd">后端网关</em>或<em class="kd">后端应用程序</em>，后者将<strong class="ih hj">调用令牌端点以获取令牌</strong>，并将用户的<strong class="ih hj"> id令牌</strong>和<strong class="ih hj">访问令牌</strong>存储在db中。现在，可以了</p><ul class=""><li id="0599" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><a class="ae jz" rel="noopener" href="/javarevisited/lets-taste-cookies-30fd342e60cf#0546">用<em class="kd">会话信息</em>和<a class="ae jz" rel="noopener" href="/javarevisited/lets-taste-cookies-30fd342e60cf#2f8d">http only</a>&amp;<a class="ae jz" rel="noopener" href="/javarevisited/lets-taste-cookies-30fd342e60cf#deb8">Secure</a><a class="ae jz" rel="noopener" href="/javarevisited/lets-taste-cookies-30fd342e60cf#83fb">cookie属性</a>创建一个cookie </a>并发送回前端，这样SPA就不能以<a class="ae jz" rel="noopener" href="/@suriyaprakhash/cryptography-algorithms-e86ce7e2bb9b#0584"> <strong class="ih hj">加密格式</strong> </a> <strong class="ih hj">访问它。</strong></li><li id="3e38" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">发送<strong class="ih hj">所需的非敏感用户信息</strong>作为<a class="ae jz" rel="noopener" href="/javarevisited/lets-taste-cookies-30fd342e60cf#9cf6">非http only</a><a class="ae jz" rel="noopener" href="/javarevisited/lets-taste-cookies-30fd342e60cf#deb8">Secure</a><a class="ae jz" rel="noopener" href="/javarevisited/lets-taste-cookies-30fd342e60cf#83fb">cookie</a>，以便<em class="kd">SPA可以访问用户信息</em>用于<strong class="ih hj">显示或其他目的</strong>。</li></ul><h2 id="a76d" class="mi mj hi bd ku mk ml mm mn mo mp mq mr iq ms mt mu iu mv mw mx iy my mz na nb bi translated">没有后端的SPA</h2><p id="2abe" class="pw-post-body-paragraph if ig hi ih b ii nc ik il im nd io ip iq ne is it iu nf iw ix iy ng ja jb jc hb bi translated">比方说，如果流是一个被SPA使用的<strong class="ih hj"> </strong> <a class="ae jz" href="#6b93" rel="noopener ugc nofollow"> <strong class="ih hj">隐式授权</strong> </a>或<a class="ae jz" href="#6b93" rel="noopener ugc nofollow"><strong class="ih hj">【PKCE】</strong></a>，而没有后端<strong class="ih hj">，</strong>，我们可能会被迫将令牌存储在<a class="ae jz" href="https://medium.suriyaprakhash.com/lets-taste-cookies-30fd342e60cf" rel="noopener ugc nofollow" target="_blank"> Cookie </a>、本地存储或会话中，或者存储在内存中。</p><p id="de44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> id令牌</strong>的<strong class="ih hj">签名形式</strong>或<strong class="ih hj">加密形式</strong>可以存储在<a class="ae jz" href="https://medium.suriyaprakhash.com/lets-taste-cookies-30fd342e60cf" rel="noopener ugc nofollow" target="_blank"> cookie </a>或本地存储中，以屏蔽<strong class="ih hj">用户信息</strong>和<strong class="ih hj">声明</strong>。并且<strong class="ih hj">访问令牌</strong>可以存储在<strong class="ih hj">启用了<a class="ae jz" href="https://auth0.com/docs/authenticate/login/configure-silent-authentication" rel="noopener ugc nofollow" target="_blank">静默认证</a>的内存</strong>中，或者以<strong class="ih hj">加密格式</strong>存储在<a class="ae jz" rel="noopener" href="/@suriyaprakhash/lets-taste-cookies-30fd342e60cf#deb8"> cookie </a>或本地存储中。</p><p id="f09a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意</strong>如果有人能够访问<strong class="ih hj">源代码</strong>和<strong class="ih hj">cookie</strong>或<strong class="ih hj">本地存储</strong>就有可能危害您的系统。</p><h2 id="b1c2" class="mi mj hi bd ku mk ml mm mn mo mp mq mr iq ms mt mu iu mv mw mx iy my mz na nb bi translated">本机应用程序</h2><p id="b705" class="pw-post-body-paragraph if ig hi ih b ii nc ik il im nd io ip iq ne is it iu nf iw ix iy ng ja jb jc hb bi translated">这个问题没有直接的答案，因为基于应用程序的类型有不同的实现。</p><p id="96d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更多信息请参考<a class="ae jz" href="https://auth0.com/docs/quickstart/native#native" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">原生/移动应用</strong> </a> <strong class="ih hj"> </strong>。</p><h2 id="2269" class="mi mj hi bd ku mk ml mm mn mo mp mq mr iq ms mt mu iu mv mw mx iy my mz na nb bi translated">服务对服务</h2><p id="ccee" class="pw-post-body-paragraph if ig hi ih b ii nc ik il im nd io ip iq ne is it iu nf iw ix iy ng ja jb jc hb bi translated">在后端试图访问另一个后端服务的情况下，简单直接的答案是使用<a class="ae jz" href="#6b93" rel="noopener ugc nofollow">客户端凭证授权</a>。可以在后端表中轻松跟踪令牌和本地会话。</p><blockquote class="ka kb kc"><p id="00cd" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">这是否意味着OIDC类似于SAML的断言？</p></blockquote><p id="bb28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是的。两个<strong class="ih hj">身份协议</strong>处理相同的认证机制。两个设施都是SSO。</p><p id="1afb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jz" href="https://developer.okta.com/docs/concepts/saml/" rel="noopener ugc nofollow" target="_blank"> SAML </a>用户直接向身份提供商认证，而OIDC it使用服务提供商。</p><p id="58ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">SAML使用XML断言，而OIDC以JSON格式传输断言。</p><blockquote class="ka kb kc"><p id="5410" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">我们可以和SAML一起使用OAuth吗？</p></blockquote><p id="ff1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是的。<strong class="ih hj"> SAML 2.0 </strong>支持<a class="ae jz" href="https://developer.okta.com/docs/guides/implement-grant-type/saml2assert/main/#grant-type-flow" rel="noopener ugc nofollow" target="_blank">授予式流程</a>。客户端可以获得<a class="ae jz" href="https://developer.okta.com/docs/guides/implement-grant-type/saml2assert/main/#about-the-saml-2-0-assertion-grant" rel="noopener ugc nofollow" target="_blank"> SAML断言，并使用base64编码的断言调用授权服务器</a>来获取访问令牌。</p><blockquote class="ka kb kc"><p id="6b93" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">赠款流量比较</p></blockquote><p id="9050" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> OAuth 2.0 </strong>支持以下流程:</p><ul class=""><li id="1bf6" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><a class="ae jz" href="https://oauth.net/2/grant-types/authorization-code/" rel="noopener ugc nofollow" target="_blank">授权代码流程</a></li><li id="b19c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="https://oauth.net/2/pkce/" rel="noopener ugc nofollow" target="_blank">代码交换的证明密钥</a></li><li id="e6b3" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="https://oauth.net/2/grant-types/client-credentials/" rel="noopener ugc nofollow" target="_blank">客户证书授予流程</a></li><li id="c5e5" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="https://oauth.net/2/grant-types/device-code/" rel="noopener ugc nofollow" target="_blank">设备授权许可</a></li><li id="9320" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="https://oauth.net/2/grant-types/implicit/" rel="noopener ugc nofollow" target="_blank">隐式流</a></li><li id="983e" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jz" href="https://oauth.net/2/grant-types/password/" rel="noopener ugc nofollow" target="_blank">资源所有者密码授予流程</a></li></ul><p id="233e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> SAML 2.0 </strong>支持<a class="ae jz" href="https://developer.okta.com/docs/guides/implement-grant-type/saml2assert/main/#grant-type-flow" rel="noopener ugc nofollow" target="_blank">授权型流程</a></p><p id="d652" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">开放ID连接</strong>支持以下流程:</p><ul class=""><li id="9562" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">使用<a class="ae jz" href="https://openid.net/specs/openid-connect-basic-1_0.html" rel="noopener ugc nofollow" target="_blank"> OAuth授权代码流</a>的基本基于Web的依赖方</li><li id="641b" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">使用<a class="ae jz" href="https://openid.net/specs/openid-connect-implicit-1_0.html" rel="noopener ugc nofollow" target="_blank"> OAuth隐式流程</a>的基本基于Web的依赖方</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><a href="https://www.java67.com/2012/08/spring-interview-questions-answers.html"><div class="er es nh"><img src="../Images/e72b3f33daa2097d994e878a660806aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rmNSwfJv7SZp78gX5DClJA.png"/></div></a></figure><p id="2d18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OAuth 2.0让<a class="ae jz" href="https://developer.okta.com/docs/concepts/oauth-openid/#openid-connect" rel="noopener ugc nofollow" target="_blank">来选择包含什么<strong class="ih hj">范围</strong> </a> <strong class="ih hj"> </strong>。但是，根据OpenID connect规范，它使用<a class="ae jz" href="https://cloud.google.com/docs/authentication/token-types#id" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> id令牌</strong> </a> <strong class="ih hj"> </strong>作为结果，同时尝试调用<strong class="ih hj">授权</strong>端点<strong class="ih hj">范围</strong>被设置为<strong class="ih hj"> <em class="kd"> openid </em> </strong>以及其他自定义范围，这些自定义范围告知<strong class="ih hj">授权服务器</strong>在响应中发布<a class="ae jz" href="https://cloud.google.com/docs/authentication/token-types#id" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> id令牌</strong> </a>以及<a class="ae jz" href="https://cloud.google.com/docs/authentication/token-types#access" rel="noopener ugc nofollow" target="_blank"/></p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ni"><img src="../Images/3ce13ed1cd51a314862f123a0b8ca19d.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*gp_lv9kuKod2f7Odqx6YSA.png"/></div></figure><p id="7bee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里是<strong class="ih hj">秋田犬游乐场</strong>穿行在每一个人流中，</p><div class="kv kw ez fb kx ky"><a href="https://www.oauth.com/playground/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">OAuth 2.0游乐场</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">这些示例通过与一个模拟的OAuth 2.0授权服务器进行交互，引导您完成各种OAuth流程。</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">www.oauth.com</p></div></div><div class="lh l"><div class="nj l lj lk ll lh lm jx ky"/></div></div></a></div><p id="61e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">相同的详细视频可以在下面的链接中找到，</p><figure class="js jt ju jv fd jw"><div class="bz dy l di"><div class="nk nl l"/></div></figure></div></div>    
</body>
</html>