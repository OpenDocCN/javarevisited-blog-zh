<html>
<head>
<title>HTML to PDF — Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTML到PDF — Java</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/html-to-pdf-java-9f46288faeb?source=collection_archive---------1-----------------------#2021-02-02">https://medium.com/javarevisited/html-to-pdf-java-9f46288faeb?source=collection_archive---------1-----------------------#2021-02-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4efc" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">ironPDF解决方案</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ix"><img src="../Images/ae79fa663840fd022e710daec1744a63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*qbTaTtkKF6qZZ9wyr0xKQA.jpeg"/></div></figure><h1 id="77da" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">用例</h1><p id="5efb" class="pw-post-body-paragraph jx jy hi jz b ka kb ij kc kd ke im kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">2020年初，我妻子想重做她的简历，所以我主动给了她一个小工具，她只需告知她的培训、文凭和经历，然后谁会把它们放在一个文件里。</p><p id="a223" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">起初我想创建一个word格式的文档，但我对渲染不满意，前端的HTML看起来比最终的文档更好，这时候我想知道是否有办法将这个HTML转换成PDF。<br/>这导致了itext pdf<strong class="jz hj">html 2 pdf</strong>(itext Java库)<strong class="jz hj"> </strong>解决方案的使用，我的前端发送给我一个对应于她的简历的对象，我只需将其格式化，然后生成pdf文档。</p><p id="afd9" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">但是使用这个解决方案来处理复杂的css文件，比如Bootstrap，会导致我的控制台出现很多警告，有时转换后的html内容会丢失一些格式。<br/>在寻找一个将html转换成pdf的新解决方案时，发现了ironPDF解决方案，并决定尝试测试它。</p><h1 id="4768" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">什么是PDF？</h1><blockquote class="kz la lb"><p id="cea6" class="jx jy lc jz b ka ku ij kc kd kv im kf ld kw ki kj le kx km kn lf ky kq kr ks hb bi translated"><strong class="jz hj">可移植文档格式</strong> ( <strong class="jz hj"> PDF </strong>，标准化为<strong class="jz hj"> ISO 32000 </strong>，是由<a class="ae kt" href="https://en.wikipedia.org/wiki/Adobe_Systems" rel="noopener ugc nofollow" target="_blank"> Adobe </a>于1992年开发的<a class="ae kt" href="https://en.wikipedia.org/wiki/File_format" rel="noopener ugc nofollow" target="_blank">文件格式</a>，以独立于<a class="ae kt" href="https://en.wikipedia.org/wiki/Application_software" rel="noopener ugc nofollow" target="_blank">应用软件</a>、<a class="ae kt" href="https://en.wikipedia.org/wiki/Computer_hardware" rel="noopener ugc nofollow" target="_blank">硬件</a>和<a class="ae kt" href="https://en.wikipedia.org/wiki/Operating_system" rel="noopener ugc nofollow" target="_blank">操作系统</a>的方式呈现<a class="ae kt" href="https://en.wikipedia.org/wiki/Document" rel="noopener ugc nofollow" target="_blank">文档</a>，包括文本格式和图像。基于<a class="ae kt" href="https://en.wikipedia.org/wiki/PostScript" rel="noopener ugc nofollow" target="_blank"> PostScript </a>语言，每个PDF文件封装了一个固定版式平面文档的完整描述，包括文本、<a class="ae kt" href="https://en.wikipedia.org/wiki/Font" rel="noopener ugc nofollow" target="_blank">字体</a>、<a class="ae kt" href="https://en.wikipedia.org/wiki/Vector_graphics" rel="noopener ugc nofollow" target="_blank">矢量图形</a>、<a class="ae kt" href="https://en.wikipedia.org/wiki/Raster_images" rel="noopener ugc nofollow" target="_blank">光栅图像</a>以及其他需要显示的信息。PDF源于Adobe联合创始人约翰·沃诺克于1991年发起的“卡米洛特计划”。</p></blockquote><h1 id="b4eb" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">IronPDF解决方案</h1><p id="84eb" class="pw-post-body-paragraph jx jy hi jz b ka kb ij kc kd ke im kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">使用以前的解决方案处理复杂的css文件，比如Bootstrap，会导致我的控制台出现很多警告，有时转换后的html内容会丢失一些格式。在寻找一个新的将html转换为pdf的解决方案时，我发现了ironPDF解决方案，并决定尝试测试它。</p><h2 id="3e90" class="lg jg hi bd jh lh li lj jl lk ll lm jp kg ln lo jr kk lp lq jt ko lr ls jv lt bi translated">什么是ironPDF？</h2><blockquote class="lu"><p id="a9db" class="lv lw hi bd lx ly lz ma mb mc md ks dx translated"><a class="ae kt" href="https://ironpdf.com/java/" rel="noopener ugc nofollow" target="_blank"><strong class="ak"><em class="me">Iron PDF for Java</em></strong></a><em class="me">是Iron Software开发和维护的一个库，帮助软件工程师在Java 8+、Kotlin、Scala项目中创建、编辑和提取PDF内容。</em></p><p id="7059" class="lv lw hi bd lx ly lz ma mb mc md ks dx translated"><em class="me"> IronPDF for Java建立在</em> <a class="ae kt" href="https://ironpdf.com/" rel="noopener ugc nofollow" target="_blank"> <em class="me"> IronPDF for。</em> </a>网<em class="me">。</em></p></blockquote><p id="6610" class="pw-post-body-paragraph jx jy hi jz b ka mf ij kc kd mg im kf kg mh ki kj kk mi km kn ko mj kq kr ks hb bi translated">为了获得所有可用特性的完整列表，我邀请tou去查看java库的文档。</p><h2 id="f772" class="lg jg hi bd jh lh li lj jl lk ll lm jp kg ln lo jr kk lp lq jt ko lr ls jv lt bi translated">依赖性</h2><p id="18d0" class="pw-post-body-paragraph jx jy hi jz b ka kb ij kc kd ke im kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">使用maven，在您的<em class="lc"> pom.xml </em>中导入以下依赖项</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="a0eb" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">使用gradle，将它添加到你的<em class="lc">版本中</em></p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mk ml l"/></div></figure><h2 id="8c15" class="lg jg hi bd jh lh li lj jl lk ll lm jp kg ln lo jr kk lp lq jt ko lr ls jv lt bi translated">履行</h2><h2 id="783f" class="lg jg hi bd jh lh li lj jl lk ll lm jp kg ln lo jr kk lp lq jt ko lr ls jv lt bi translated"><strong class="ak">将html转换成pdf文件</strong></h2><p id="82e6" class="pw-post-body-paragraph jx jy hi jz b ka kb ij kc kd ke im kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">因此，让我们从ironPDF工具的最基本的java api开始，将html字符串转换为PDF文件，为此，我首先需要注册我的许可证密钥。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="549a" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">在这个例子中，为了防止我提交代码时泄露秘密，我将许可证密钥放在一个环境变量中。</p><p id="2dae" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">然后我只需要调用PdfDocument类的正确方法renderHtmlAsPdf，用我的html的字符串表示作为参数。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="d5b7" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">这是简单而有效的，并且呈现的PDF文件尊重格式。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="er es mm"><img src="../Images/0616b1d461709dce7b98e9af610765a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_Mas_KLn5FcQA-uI.png"/></div></div><p class="mr ms et er es mt mu bd b be z dx translated">以pdf格式呈现html</p></figure><p id="9374" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">因此，在我制作CV生成器的最初用例中，我可以很容易地用一个字符串生成器替换字符串参数，该生成器将我的所有对象转换为字符串方法，然后生成PDF。</p><p id="f7dc" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">好的，但是样式怎么样？在今天的html文件中，我们有一些样式，你知道，CSS。</p><h2 id="efb9" class="lg jg hi bd jh lh li lj jl lk ll lm jp kg ln lo jr kk lp lq jt ko lr ls jv lt bi translated"><strong class="ak">添加样式和javascript </strong></h2><p id="f1e6" class="pw-post-body-paragraph jx jy hi jz b ka kb ij kc kd ke im kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">知道你可以在你的字符串中包含style，比如bootstrap，生成的pdf会在你的浏览器IHM中呈现。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="4bcf" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">正如你所看到的，我甚至在字符串中添加了一些javascript，结果如下:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="er es mm"><img src="../Images/f1a1cf729534a53141edaba177cc2363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SLb4Bm_YDsKVkHeC.png"/></div></div></figure><p id="f37b" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">完成的pdf转换器可以很好地将html转换成pdf并保留所有的css。</p><p id="e76c" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">如果我读取转换的日志，我还可以看到转换的所有步骤和关于渲染器的所有信息。</p><p id="6db4" class="pw-post-body-paragraph jx jy hi jz b ka ku ij kc kd kv im kf kg kw ki kj kk kx km kn ko ky kq kr ks hb bi translated">在前面的例子中，我使用Stringbuilder来创建我的html结构，但是这个库也允许我们将html文件转换成pdf文档，您只需要更改在pdf document:<strong class="jz hj">pdf document . renderhtmlfileaspdf</strong>中调用的方法，并将要转换的html文件作为参数传递。</p><h1 id="1df2" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">利弊</h1><h2 id="c5f7" class="lg jg hi bd jh lh li lj jl lk ll lm jp kg ln lo jr kk lp lq jt ko lr ls jv lt bi translated"><strong class="ak">优点</strong></h2><ul class=""><li id="e952" class="mv mw hi jz b ka kb kd ke kg mx kk my ko mz ks na nb nc nd bi translated">转换html内容或html文件非常容易</li><li id="f458" class="mv mw hi jz b ka ne kd nf kg ng kk nh ko ni ks na nb nc nd bi translated">使用像bootstrap这样的复杂css不会像itext pdf java库那样产生警告或错误</li><li id="af93" class="mv mw hi jz b ka ne kd nf kg ng kk nh ko ni ks na nb nc nd bi translated">html内容中的样式在生成pdf时被保存。</li></ul><h2 id="eae3" class="lg jg hi bd jh lh li lj jl lk ll lm jp kg ln lo jr kk lp lq jt ko lr ls jv lt bi translated"><strong class="ak">缺点</strong></h2><ul class=""><li id="afa5" class="mv mw hi jz b ka kb kd ke kg mx kk my ko mz ks na nb nc nd bi translated">macOS上尚不支持。</li></ul></div></div>    
</body>
</html>