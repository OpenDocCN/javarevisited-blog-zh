<html>
<head>
<title>JAVA : The Inside Story of Blocks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JAVA:块的内幕</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/blocks-in-java-27085f671cc5?source=collection_archive---------1-----------------------#2022-11-21">https://medium.com/javarevisited/blocks-in-java-27085f671cc5?source=collection_archive---------1-----------------------#2022-11-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><a href="https://www.java67.com/2016/08/10-jvm-options-for-java-production-application.html"><div class="er es if"><img src="../Images/bc65485308de8c1ed113ea58b92e5f6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*WqUssVviC_jILjYcdylqRA.png"/></div></a></figure><p id="2ff4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当我们说blocks时，你想到的第一件事是什么，它通常是一个大而重的正方形或平边的东西。</p><p id="40af" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在在java中，当我们说blocks时，它的意思是在花括号{ }中定义的一组指令。它没有任何名称，所以您不能显式地调用它，它将由<a class="ae jk" rel="noopener" href="/javarevisited/7-best-courses-to-learn-jvm-garbage-collection-and-performance-tuning-for-experienced-java-331705180686"> JVM </a>自动调用。所以说到块，我们应该知道在类内部直接定义为成员的块被称为初始化块。java中有两种类型的初始化块:</p><h1 id="4682" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak"> 1。实例初始化块</strong></h1><p id="9c57" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">如上所述，直接在类内部定义而没有静态修饰符的块被称为初始化块。初始化对象后，JVM会自动调用它。</p><p id="f425" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在实例初始化块中，必须只定义实例变量。让我们看看在实例块中定义静态成员的时候。</p><pre class="ko kp kq kr fd ks kt ku bn kv kw bi"><span id="d6d0" class="kx jm hi kt b be ky kz l la lb"><br/>class HelloWorld {<br/>    {<br/>        static int a = 10;<br/>      System.out.println("Instance initialization Block is called out");<br/>    }<br/>    public static void main(String[] args) {<br/>        System.out.println("Hello, Viewers!");<br/>        HelloWorld hello = new HelloWorld();<br/>    }<br/>}</span></pre><p id="1092" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当我们要执行这个脚本时，请看下面的gif，你会知道为什么我们不推荐用静态关键字定义变量。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/993b99fde67cd22b59a983188e510159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*1nG_IihnFbaxgYdgGfwIeQ.gif"/></div><p class="ld le et er es lf lg bd b be z dx translated">在实例初始化的块中定义静态关键字</p></figure><p id="fd4d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们看看，当我们不创建一个类的对象，而只是在没有静态关键字的情况下运行程序时，会发生什么。</p><pre class="ko kp kq kr fd ks kt ku bn kv kw bi"><span id="4e4c" class="kx jm hi kt b be ky kz l la lb"><br/>class HelloWorld {<br/>    {<br/>      int a = 10;<br/>      System.out.println("Instance initialization Block is called out");<br/>    }<br/>    public static void main(String[] args) {<br/>        System.out.println("Hello, Viewers!");<br/>       <br/>    }<br/>}</span></pre><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/c5f2da45b15dabe9a5a0ac88d8b4e1d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*vLMpyh-9o023rFxz5GLyQA.gif"/></div><p class="ld le et er es lf lg bd b be z dx translated">当你运行程序而没有创建一个类的对象时</p></figure><p id="4060" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">看看发生了什么，我们实例初始化的块甚至没有被执行，但是为什么呢？这是一个原因，正如你所知，我们没有创建一个对象，每当我们创建一个类的对象，我们使用构造函数。现在你这么想了什么？所以构造函数的基本用途是初始化类的实例变量。如果你不创建一个对象，它不会初始化实例变量的值，所以在这种情况下，这就是发生的事情。实例初始化的块只有在我们创建类的对象时才会执行。下面是一个带有GIF的例子。</p><pre class="ko kp kq kr fd ks kt ku bn kv kw bi"><span id="fa3d" class="kx jm hi kt b be ky kz l la lb"><br/><br/>class HelloWorld {<br/>    {<br/>      int a = 10;<br/>      System.out.println("Instance initialization Block is called out");<br/>    }<br/>    public static void main(String[] args) {<br/>        System.out.println("Hello, Viewers!");<br/>        HelloWorld callInstanceInitializedBlock = new HelloWorld();<br/>       <br/>    }<br/>}</span></pre><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/a18b7484a92a98317293cffe35319073.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*wHRGfBNr7AfWMPAjPVbEGw.gif"/></div><p class="ld le et er es lf lg bd b be z dx translated">当你创建一个类的对象时</p></figure><blockquote class="lh li lj"><p id="50f1" class="im in lk io b ip iq ir is it iu iv iw ll iy iz ja lm jc jd je ln jg jh ji jj hb bi translated"><strong class="io hj">从上面的解释，我们可以说，每当有一个对象被创建时，实例块就会被执行。</strong></p></blockquote><h1 id="84fe" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak"> 2。静态初始化块</strong></h1><p id="17f9" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">在类内部直接用静态修饰符定义的块称为静态初始化块。</p><pre class="ko kp kq kr fd ks kt ku bn kv kw bi"><span id="656e" class="kx jm hi kt b be ky kz l la lb"><br/>class HelloWorld {<br/>   static {<br/>       int a = 10;<br/>      System.out.println("Static initialization Block is called out");<br/>    }<br/>    public static void main(String[] args) {<br/>        System.out.println("Hello, Viewers!");<br/>        <br/>    }<br/>}</span></pre><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/c4499f1642920d31f7cc545c7d16043e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*c2Hh8txdnetlCOjeXnUkDw.gif"/></div><p class="ld le et er es lf lg bd b be z dx translated">静态初始化块</p></figure><p id="8a2e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在如果你已经看到了上面Gif中的输出，你会发现静态块在“Hello Viewers！”，但是为什么。答案很简单，所有用static修饰符定义的成员或变量都会在类被加载时被加载到内存中，也就是方法区。</p><blockquote class="lh li lj"><p id="1ebc" class="im in lk io b ip iq ir is it iu iv iw ll iy iz ja lm jc jd je ln jg jh ji jj hb bi translated">如上所述，初始化类后，静态初始化的块将被JVM自动调用。所以通过这样的解释，我们可以说静态块在类加载过程中只会执行一次。</p><p id="f6cf" class="im in lk io b ip iq ir is it iu iv iw ll iy iz ja lm jc jd je ln jg jh ji jj hb bi translated"><strong class="io hj">我们将在以后的博客中讨论方法区域、堆栈内存和堆内存，那时我们将熟悉变量和方法的类型。</strong></p></blockquote><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es lo"><img src="../Images/d16df434aeafd8f98eda519529532e6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*dWeGu41rMPDVDZ-V71CsVA.gif"/></div></figure><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/b2dcafbbe9ff335f6704da09a822ba72.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/1*rAs9QQVzXQuehHPZegrzZQ.gif"/></div></figure></div></div>    
</body>
</html>