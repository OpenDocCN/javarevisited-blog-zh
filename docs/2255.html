<html>
<head>
<title>Never spread 3rd party dependencies across your application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不要在你的应用程序中散布第三方依赖</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/never-spread-3rd-party-dependencies-across-your-application-604fdd6b4195?source=collection_archive---------2-----------------------#2022-07-19">https://medium.com/javarevisited/never-spread-3rd-party-dependencies-across-your-application-604fdd6b4195?source=collection_archive---------2-----------------------#2022-07-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="388b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以正确的方式管理您的第三方依赖关系。将第三方依赖的代码与应用程序的其余部分隔离开来。编写可重用的代码。用适当的JUnit测试覆盖这个逻辑。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2016/09/top-5-json-library-in-java-JEE.html"><div class="er es jd"><img src="../Images/7b414e7aee4a63e76f10abb907b60d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*j9Ll_UhNxthcgVU_"/></div></a><p class="jl jm et er es jn jo bd b be z dx translated">索菲娅·列夫琴科在<a class="ae jp" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="5c64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您依赖第三方时，您必须以正确的方式使用它们。典型的错误方法是在整个应用程序中使用第三方依赖的类。</p><p id="838a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然由于实施速度的原因，它在开始时可能看起来不错，但以后您将付出代价。随着世界上一切事物的变化，您对第三方的依赖也将发生变化，您当前的版本将会过时。那你应该把它换成新版本。变化足以迫使你重写一些代码。</p><p id="5596" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么你应该在你的应用程序中的许多地方这样做。当然，你可能会打碎东西。你将被迫做大量的回归测试。迁移到第三方依赖的新版本将是一个巨大的痛苦！</p><p id="a6ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我来说说我自己经历的例子吧。在一家公司，我的任务是将Apache <a class="ae jp" rel="noopener" href="/javarevisited/20-essential-java-libraries-and-apis-every-programmer-should-learn-5ccd41812fc7"> HTTP客户端库</a>从版本4迁移到版本5。他们使用这个库实现了对20多个不同API的REST调用。</p><p id="4d6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个API都有一堆不同的端点。总共有100多个不同的终点。不幸的是，他们没有为访问第三方API端点编写通用代码，但是每种方法都有自己的代码。</p><p id="ea49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">许多地方都有大量的复制粘贴代码。你可以想象这次迁移有多艰难！您应该在所有这些地方更改代码。因为Apache HTTP客户端库4和5之间存在差异，所以为了不破坏某些东西，每个更改都需要回归测试。</p><p id="e843" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，主要是没有任何自动集成测试来使这种迁移更容易(为了不破坏API方之间的契约)。最后，这是一个非常耗时且容易出错的过程！</p><h2 id="c791" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">结论</h2><p id="c9c4" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">将代码从第三方依赖中分离出来，放入自己的服务层。不要在你的应用程序中散布来自第三方依赖的代码。编写包含JUnit和集成测试的可重用代码。它最终会给你带来好处的！</p></div></div>    
</body>
</html>