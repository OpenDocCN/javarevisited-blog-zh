<html>
<head>
<title>How To Dockerize your Spring Boot Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将你的Spring Boot申请归档</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/how-to-dockerize-your-spring-boot-application-a2d2a84eda1a?source=collection_archive---------1-----------------------#2021-02-27">https://medium.com/javarevisited/how-to-dockerize-your-spring-boot-application-a2d2a84eda1a?source=collection_archive---------1-----------------------#2021-02-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1d0e020909fb1a98d8310942e0000f6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Q5avdoWUDt6gvy67oHv5w.jpeg"/></div></div></figure><h1 id="9eb0" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated"><strong class="ak">概述</strong></h1><p id="156e" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在本文中，我们将研究如何对我们的Spring Boot应用程序进行dockerize。如今，在软件开发领域，有一种做基于容器的部署的冲动。<a class="ae km" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>是一种开源技术，主要用于开发、发布和运行应用程序。一旦将应用程序及其所有依赖项打包到Docker容器中，就可以确保它可以在任何环境中运行。</p><h1 id="359e" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">术语</h1><p id="e3eb" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在我们深入应用程序的docker化过程之前，最好先了解一下docker术语。</p><p id="db43" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj"> <em class="ks"> docker文件</em> </strong></p><ul class=""><li id="1bcc" class="kt ku hi jq b jr kn jv ko jz kv kd kw kh kx kl ky kz la lb bi translated">Docker文件是一个简单的文本文件，包含如何构建图像的说明。</li></ul><p id="86b0" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj"> <em class="ks"> docker图像</em> </strong></p><ul class=""><li id="6474" class="kt ku hi jq b jr kn jv ko jz kv kd kw kh kx kl ky kz la lb bi translated">一个<strong class="jq hj"> Docker映像</strong>包含一组用于创建能够在<strong class="jq hj"> Docker </strong>平台上运行的<strong class="jq hj">容器</strong>的指令。</li></ul><p id="7f38" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj"> <em class="ks">码头工人集装箱</em> </strong></p><ul class=""><li id="84bd" class="kt ku hi jq b jr kn jv ko jz kv kd kw kh kx kl ky kz la lb bi translated">容器是Docker映像的实例，可以使用Docker run命令运行。<a class="ae km" rel="noopener" href="/javarevisited/top-15-online-courses-to-learn-docker-kubernetes-and-aws-for-fullstack-developers-and-devops-d8cc4f16e773"> Docker </a>的基本用途是运行集装箱。</li></ul><p id="21fc" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj"><em class="ks">docker hub/registry</em></strong></p><ul class=""><li id="3b02" class="kt ku hi jq b jr kn jv ko jz kv kd kw kh kx kl ky kz la lb bi translated">注册中心的工作方式基本上类似于一个<a class="ae km" rel="noopener" href="/javarevisited/7-best-courses-to-learn-gitlab-for-developers-and-devops-engineers-10d4de4ae206"> git存储库</a>，允许你推和拉容器图像。</li></ul><p id="5119" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj"> <em class="ks"> docker撰写</em> </strong></p><ul class=""><li id="1431" class="kt ku hi jq b jr kn jv ko jz kv kd kw kh kx kl ky kz la lb bi translated">Compose是一个定义和运行多容器Docker应用程序的工具。</li></ul><p id="9eac" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj"> <em class="ks"> docker卷</em> </strong></p><ul class=""><li id="98a7" class="kt ku hi jq b jr kn jv ko jz kv kd kw kh kx kl ky kz la lb bi translated">为了能够保存(持久化)数据并在容器之间共享数据，<a class="ae km" rel="noopener" href="/javarevisited/10-free-courses-to-learn-docker-and-devops-for-frontend-developers-691ac7652cee"> Docker </a>提出了<em class="ks">卷</em>的概念。</li></ul><h1 id="47a6" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">让我们停下来！</h1><figure class="lc ld le lf fd ij"><div class="bz dy l di"><div class="lg lh l"/></div></figure><h2 id="3016" class="li ir hi bd is lj lk ll iw lm ln lo ja jz lp lq je kd lr ls ji kh lt lu jm lv bi translated">1.创建Jar文件</h2><p id="252b" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">作为第一步，您需要使用下面的命令创建一个可执行的jar文件。</p><ul class=""><li id="0140" class="kt ku hi jq b jr kn jv ko jz kv kd kw kh kx kl ky kz la lb bi translated">如果你用的是<a class="ae km" rel="noopener" href="/javarevisited/6-best-maven-courses-for-beginners-in-2020-23ea3cba89"> maven </a></li></ul><pre class="lc ld le lf fd lw lx ly lz aw ma bi"><span id="4e82" class="li ir hi lx b fi mb mc l md me"><strong class="lx hj"><em class="ks">$ mvn clean install</em></strong></span></pre><ul class=""><li id="035c" class="kt ku hi jq b jr kn jv ko jz kv kd kw kh kx kl ky kz la lb bi translated">如果您正在使用<a class="ae km" rel="noopener" href="/javarevisited/5-best-gradle-courses-and-books-to-learn-in-2021-93f49ce8ff8e"> Gradle </a></li></ul><pre class="lc ld le lf fd lw lx ly lz aw ma bi"><span id="ec3b" class="li ir hi lx b fi mb mc l md me"><strong class="lx hj"><em class="ks">$ gradle build</em></strong></span></pre><p id="1c83" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">您应该能够在spring boot项目中的目标文件夹下看到生成的jar。这个jar文件的好处是我们可以像运行控制台应用程序一样运行这个web应用程序。所以我们的下一步是创建一个docker文件。</p><h2 id="7a7e" class="li ir hi bd is lj lk ll iw lm ln lo ja jz lp lq je kd lr ls ji kh lt lu jm lv bi translated">2.创建Dockerfile文件</h2><p id="4bcd" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我们必须在项目的根目录下创建一个docker文件。</p><pre class="lc ld le lf fd lw lx ly lz aw ma bi"><span id="b6da" class="li ir hi lx b fi mb mc l md me">FROM openjdk:8-jdk-alpine<br/>VOLUME /tmp<br/>ADD target/Docker-0.0.1-SNAPSHOT.jar app.jar<br/>ENTRYPOINT ["java","-jar","/app.jar"]</span></pre><p id="ae71" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">来自:我们正在从基础映像openjdk构建我们的映像，我们将OpenJDK作为父映像，并在此基础上进行构建</p><p id="1ffa" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">卷:<a class="ae km" href="https://javarevisited.blogspot.com/2019/02/difference-between-contextconfiguration-and-springapplicationConfiguration-annotations-in-spring-boot-testing.html" rel="noopener ugc nofollow" target="_blank"> spring boot应用程序</a>需要这个卷，因为tomcat试图在这个卷内部创建一个工作文件夹</p><p id="2ba4" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">ADD:它将我们的jar添加到docker映像中</p><p id="2676" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">ENTRYPOINT:它指定我们的应用程序运行的入口点。</p><h2 id="4eb2" class="li ir hi bd is lj lk ll iw lm ln lo ja jz lp lq je kd lr ls ji kh lt lu jm lv bi translated">3.构建Docker映像</h2><p id="fd84" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">转到docker文件位置，打开命令提示符并运行以下命令。</p><ul class=""><li id="9eb1" class="kt ku hi jq b jr kn jv ko jz kv kd kw kh kx kl ky kz la lb bi translated">如果你用的是<a class="ae km" rel="noopener" href="/javarevisited/top-10-free-courses-to-learn-maven-jenkins-and-docker-for-java-developers-51fa7a1e66f6"> maven </a></li></ul><pre class="lc ld le lf fd lw lx ly lz aw ma bi"><span id="6554" class="li ir hi lx b fi mb mc l md me">$ docker build -t tag-name/image-name .</span></pre><ul class=""><li id="f872" class="kt ku hi jq b jr kn jv ko jz kv kd kw kh kx kl ky kz la lb bi translated">如果你用的是<a class="ae km" href="https://javarevisited.blogspot.com/2020/06/maven-vs-gradle-beginners-introduction.html#axzz6dHZ7oEpK" rel="noopener ugc nofollow" target="_blank"> Gradle </a></li></ul><pre class="lc ld le lf fd lw lx ly lz aw ma bi"><span id="9a28" class="li ir hi lx b fi mb mc l md me">$ docker build — build-arg JAR_FILE=build/libs/*.jar -t tag-name/image-name .</span></pre><p id="515e" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">您可以使用以下命令检查现有图像。</p><pre class="lc ld le lf fd lw lx ly lz aw ma bi"><span id="b91b" class="li ir hi lx b fi mb mc l md me">docker image ls</span></pre><p id="c705" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">注意:现在你可以把你的图片推送到<a class="ae km" rel="noopener" href="/javarevisited/5-best-docker-courses-for-java-and-spring-boot-developers-bbf01c5e6542"> docker hub </a>。这样别人就可以拉你的图像，运行docker图像。我们可以使用同一个图像创建多个容器。</p><h2 id="ab35" class="li ir hi bd is lj lk ll iw lm ln lo ja jz lp lq je kd lr ls ji kh lt lu jm lv bi translated">4.运行Docker容器</h2><p id="a5da" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">为了运行我们的docker映像，我们必须进行端口映射。这是因为我们的应用程序运行在某种虚拟环境中，所以我们必须进行从您的主机到docker-machine的端口映射。使用下面的命令来完成。</p><pre class="lc ld le lf fd lw lx ly lz aw ma bi"><span id="8749" class="li ir hi lx b fi mb mc l md me">$ docker run -p 9090:8080 -t tag-name/image-name</span></pre><p id="c88f" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">如果你想停止我们的容器，使用下面的命令。</p><pre class="lc ld le lf fd lw lx ly lz aw ma bi"><span id="af55" class="li ir hi lx b fi mb mc l md me">$ docker container stop container ID</span></pre><p id="0ce2" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><em class="ks">要了解更多关于docker的信息，请浏览</em><a class="ae km" href="https://docs.docker.com/get-started/overview/" rel="noopener ugc nofollow" target="_blank"><strong class="jq hj"><em class="ks">docker</em></strong></a></p><p id="0fcd" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">我希望你已经理解了如何使用Docker容器化一个Spring Boot应用程序。感谢阅读😊。</p></div></div>    
</body>
</html>