<html>
<head>
<title>Remove Dirty NullChecks in Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">移除Java中的脏空值检查</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/remove-dirty-nullchecks-in-java-8aca833dc276?source=collection_archive---------0-----------------------#2022-01-22">https://medium.com/javarevisited/remove-dirty-nullchecks-in-java-8aca833dc276?source=collection_archive---------0-----------------------#2022-01-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2012/06/common-cause-of-javalangnullpointerexce.html"><div class="er es if"><img src="../Images/0f820eca2cb0a715aebd4b1239c7322d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YfBCO3iCUFN1Cqz0CiibcQ.png"/></div></a></figure><p id="16c5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当我用Java编写代码时，我总是担心NullPointerException。</p><p id="180b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">作为开发人员，我应该提供没有错误的代码。</p><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="11d4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于一些项目，我使用过javascript，我在Javascript中看到了一个美丽/惊人的东西。也就是说，我们可以检查执行一些函数，如果值不为空，否则，它不会执行。</p><pre class="jl jm jn jo fd jr js jt ju aw jv bi"><span id="796c" class="jw jx hi js b fi jy jz l ka kb">let name = user ?. name;</span></pre><p id="7ae8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这个？。在技术上等同于</p><pre class="jl jm jn jo fd jr js jt ju aw jv bi"><span id="be9f" class="jw jx hi js b fi jy jz l ka kb">(user !== null || user !== undefined)             ? user.name             : undefined;</span></pre></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h2 id="2220" class="jw jx hi bd kj kk kl km kn ko kp kq kr ix ks kt ku jb kv kw kx jf ky kz la lb bi translated">我们不能用Java来做这个吗？</h2><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="lc jq l"/></div></figure><p id="fb15" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们可以创建一些通用方法如下。</p><pre class="jl jm jn jo fd jr js jt ju aw jv bi"><span id="3cd4" class="jw jx hi js b fi jy jz l ka kb">public static &lt;I, O&gt; O executeViaNullSafer(I value, Function&lt;I, O&gt; executorFunction) {<br/>     return value != null ? executorFunction.apply(value) : null;   <br/>}</span></pre><p id="9d88" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="ld">该函数接收值和一个可执行函数。如果该值不为空，函数将执行，可执行函数的输出将从该方法返回，否则该方法将返回空。</em> </strong></p><p id="5485" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是一个像javascript一样的单行方法？。接线员。</p><h2 id="d3aa" class="jw jx hi bd kj kk kl km kn ko kp kq kr ix ks kt ku jb kv kw kx jf ky kz la lb bi translated">怎么会？</h2><p id="7892" class="pw-post-body-paragraph im in hi io b ip le ir is it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj hb bi translated">例如，如果我需要修剪一些字符串类型的变量。显然，我们需要在修剪之前检查变量是否为空，因为如果变量为空，那么它将提供一个<a class="ae jk" href="https://www.java67.com/2021/05/how-to-solve-nullpointerexception-in-java.html" rel="noopener ugc nofollow" target="_blank"> NullPointerException </a>。</p><p id="3141" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">正常代码</strong></p><pre class="jl jm jn jo fd jr js jt ju aw jv bi"><span id="c599" class="jw jx hi js b fi jy jz l ka kb">public String trimValue(String value){<br/> if(value==null){<br/>   return null;<br/>}else{<br/>   return value.trim();<br/>}<br/></span></pre><p id="a413" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们可以用现代java改进这段代码，如下所示。</p><pre class="jl jm jn jo fd jr js jt ju aw jv bi"><span id="c3af" class="jw jx hi js b fi jy jz l ka kb">public String trimValue(String value){<br/> return value==null) ? null  : value.trim();</span></pre><p id="5f90" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">让我们试试我们的executeViaNullSafer方法</strong></p><pre class="jl jm jn jo fd jr js jt ju aw jv bi"><span id="cc06" class="jw jx hi js b fi jy jz l ka kb">String trimmedValue = executeViaNullSafer(value, val -&gt; val.trim());</span></pre><p id="bc02" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们也可以使用方法引用</p><pre class="jl jm jn jo fd jr js jt ju aw jv bi"><span id="aa62" class="jw jx hi js b fi jy jz l ka kb">String trimmedValue = executeViaNullSafer(value,String::trim);</span></pre><p id="e3b8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们来看看javascript的例子</p><pre class="jl jm jn jo fd jr js jt ju aw jv bi"><span id="92f4" class="jw jx hi js b fi jy jz l ka kb">String name = executeViaNullSafer(user, User::getName);</span></pre><p id="ebd3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这就是我在java应用程序中减少这些空检查的方法。我也发布了NullUtil maven依赖项。</p><p id="51eb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><a class="ae jk" href="https://search.maven.org/artifact/io.github.rcvaram/NullUtil/1.0/ja" rel="noopener ugc nofollow" target="_blank">https://search . maven . org/artifact/io . github . rcvaram/NullUtil/1.0/ja</a>r</p><pre class="jl jm jn jo fd jr js jt ju aw jv bi"><span id="3e78" class="jw jx hi js b fi jy jz l ka kb">&lt;dependency&gt;<br/>   &lt;groupId&gt;io.github.rcvaram&lt;/groupId<br/>   &lt;artifactId&gt;NullUtil&lt;/artifactId&gt;<br/>   &lt;version&gt;1.0&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="ca89" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Github网址→<a class="ae jk" href="https://github.com/rcvaram/NullUtil" rel="noopener ugc nofollow" target="_blank">https://github.com/rcvaram/NullUtil</a></p><p id="517c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这种依赖还为你做了什么。</p><ul class=""><li id="3b44" class="lj lk hi io b ip iq it iu ix ll jb lm jf ln jj lo lp lq lr bi translated"><strong class="io hj">nullutil . executevianullsafer</strong>方法将对非空值执行给定函数，当值为空时，它将返回空值，而不是执行函数。</li><li id="c85b" class="lj lk hi io b ip ls it lt ix lu jb lv jf lw jj lo lp lq lr bi translated">方法将对非空值执行给定的函数，如果值为空，它将返回给定的默认值。</li><li id="e834" class="lj lk hi io b ip ls it lt ix lu jb lv jf lw jj lo lp lq lr bi translated"><strong class="io hj"> NullUtil.executeMutator方法</strong>对引用类型值进行变异，不返回任何内容。如果该值为null，它将不会执行任何操作。</li><li id="15fe" class="lj lk hi io b ip ls it lt ix lu jb lv jf lw jj lo lp lq lr bi translated"><strong class="io hj"> NullUtil.replaceNull </strong>方法会用给定的defaultValue替换空值。当值不为空时，它将返回值。</li><li id="beb4" class="lj lk hi io b ip ls it lt ix lu jb lv jf lw jj lo lp lq lr bi translated"><strong class="io hj"> NullUtil.hasText </strong>方法用于检查字符串值是否有任何一种文本。</li><li id="2c0c" class="lj lk hi io b ip ls it lt ix lu jb lv jf lw jj lo lp lq lr bi translated"><strong class="io hj"> NullUtil.trimValue </strong>方法将被用来修剪字符串，而不会导致空指针异常。</li></ul></div></div>    
</body>
</html>