<html>
<head>
<title>Bash Script Tips</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Bash 脚本技巧</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/bash-script-tips-3265a30f4f86?source=collection_archive---------0-----------------------#2020-01-18">https://medium.com/javarevisited/bash-script-tips-3265a30f4f86?source=collection_archive---------0-----------------------#2020-01-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3f54" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不是 Linux 系统管理员的专家，但是我每天都在工作和使用基于 Linux/Unix 的系统，我发现自己熟悉大多数 shell 脚本命令行，并且非常有效地使用它们。</p><p id="0966" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天，我想分享我使用这些命令的经验和最佳实践。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/4ddfc30cb5eb2ab0ec12be7bb8fe8783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*RSz5gTByxj9H_33HmxnJ0w.jpeg"/></div></figure><h1 id="7b12" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">BASH 基础</h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="95bc" class="ko jm hi kk b fi kp kq l kr ks">env                 # displays all environment variables</span><span id="4895" class="ko jm hi kk b fi kt kq l kr ks">echo $SHELL         # displays the shell you're using<br/>echo $BASH_VERSION  # displays bash version</span><span id="7f56" class="ko jm hi kk b fi kt kq l kr ks"><br/>whereis bash        # locates the binary, source and manual-page for <br/>                      a command<br/>which bash          # finds out which program is executed as 'bash' <br/>                      (default: /bin/bash, can change across <br/>                       environments)</span><span id="8f03" class="ko jm hi kk b fi kt kq l kr ks">clear               # clears content on window </span></pre><h1 id="c8f1" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">文件/目录</h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="89af" class="ko jm hi kk b fi kp kq l kr ks">ls  ## listing current files/directories<br/>ls -options ## list with opertions </span><span id="23b4" class="ko jm hi kk b fi kt kq l kr ks">cd  ## change directory<br/>mkdir ## make directory<br/>pwd   ## output current location path<br/>cp src dest  ## copy files/directories from src to dest<br/>mv src dest  ##  move files/directories from src to dest<br/>rm  files/dir ## remove files directories<br/>touch file  ## create empty file</span></pre><h1 id="6b58" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">搜索</strong>操作</h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="9135" class="ko jm hi kk b fi kp kq l kr ks">find ## find files and directories in your system. example<br/><strong class="kk hj">find ./directoryname -name file.txt<br/>find ./directoryname -name *.txt</strong></span><span id="f97e" class="ko jm hi kk b fi kt kq l kr ks"># find all folders/files but excluding any tar files and excluding #the sub folder test and all files in test folder<br/><strong class="kk hj">find /dbdata/backup  ! -path ".tar"  ! -path "/test" ! -path "/test/"</strong></span><span id="4ad5" class="ko jm hi kk b fi kt kq l kr ks">grep  ## search for content text in files/directories</span><span id="c788" class="ko jm hi kk b fi kt kq l kr ks">#grep <!-- -->-i<!-- --> to make case insensitive searches<br/><strong class="kk hj">$grep -i "grape" file.txt</strong></span><span id="58d5" class="ko jm hi kk b fi kt kq l kr ks">#g<!-- -->rep<!-- --> to count the number of times a word appears in a file<strong class="kk hj"><br/>$grep -c "text to search" file.txt</strong></span></pre><h1 id="c502" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">快捷命令</strong></h1><p id="e00c" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated"><strong class="ih hj">别名</strong>是一个 Linux 命令，用于 bash 命令的快捷方式/别名。这是一种快速的方法，可以将长命令行映射成短的，容易记忆的命令行。语法是</p><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="a5da" class="ko jm hi kk b fi kp kq l kr ks">alias alias_name="command_to_run"<br/>ex : <br/>alias gitc="git commmit"<br/>alias top="htop"</span></pre><h1 id="a932" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">生产率</strong></h1><p id="48db" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">为了使别名命令永久地与您的帐户配置文件一起工作。您应该在~/中添加 alias 命令，如下所示。bashrc:</p><p id="31cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用下面的内容创建一个文件~/bash_aliases:</p><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="0541" class="ko jm hi kk b fi kp kq l kr ks"><em class="kz">## Colorize the ls output ##</em><br/><strong class="kk hj">alias</strong> ls='ls --color=auto'<br/> <br/><em class="kz">## Use a long listing format ##</em><br/><strong class="kk hj">alias</strong> ll='ls -la'<br/> <br/><em class="kz">## Show hidden files ##</em><br/><strong class="kk hj">alias</strong> l.='ls -d .* --color=auto'</span><span id="2c2d" class="ko jm hi kk b fi kt kq l kr ks"><br/>alias lt='ls --human-readable --size -1 -S --classify'<br/><br/>alias gh='history|grep'<br/><br/>##count files<br/>alias count='find . -type f | wc -l'<br/><br/><br/>##top with htop instead<br/><br/>alias top='htop'</span></pre><p id="a633" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将下面几行添加到 fille 中。/bashrc</p><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="a8af" class="ko jm hi kk b fi kp kq l kr ks">if [ -e $HOME/.bash_aliases ]; then<br/>    source $HOME/.bash_aliases<br/>fi</span></pre><h1 id="5261" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">生产环境的别名</h1><p id="593f" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">有些别名命令非常安全，尤其是在生产环境中。</p><p id="1727" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> dd 命令</strong></p><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="888b" class="ko jm hi kk b fi kp kq l kr ks">##dd command : is a command to copy data from one file ore device to another</span><span id="bf5a" class="ko jm hi kk b fi kt kq l kr ks">example : dd <strong class="kk hj">if</strong>=/dev/zero <strong class="kk hj">of</strong>=/dev/sda<br/>- <strong class="kk hj">if</strong> option is the source and /dev/zero is an unlimited source of zero bytes<br/>- <strong class="kk hj">of</strong> is the target and /dev/sda is a disk drive or volume</span><span id="1147" class="ko jm hi kk b fi kt kq l kr ks">You see what is is going with above. It’s an excellent way to erase the contents of a whole disk and a pretty quick way to lose a lot of data. This is how hacker can put a bomb in your server just one command line.</span><span id="8481" class="ko jm hi kk b fi kt kq l kr ks">#How to prevent it?</span><span id="14ba" class="ko jm hi kk b fi kt kq l kr ks">You can disable the whole dd command with the following alias:</span><span id="fa68" class="ko jm hi kk b fi kt kq l kr ks"><strong class="kk hj">alias dd='echo "no dd command available"'</strong></span><span id="5afd" class="ko jm hi kk b fi kt kq l kr ks">If the dd command isexecuted on your system, it only prints out <em class="kz">no dd command available</em>.</span></pre><p id="5bf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> chmod | chown 命令</strong></p><p id="c546" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些命令经常在 LINUX 系统中使用。但是，您可能会很容易在以下情况下犯下打字错误:</p><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="dea5" class="ko jm hi kk b fi kp kq l kr ks">$ cd /opt/project1  # you want to set the permission to All 777 to all files and folders in this directory. you type the command below</span><span id="6615" class="ko jm hi kk b fi kt kq l kr ks"><strong class="kk hj">chmod -R 777 /</strong> instead of  <strong class="kk hj">chmod -R 777 ./</strong></span><span id="434b" class="ko jm hi kk b fi kt kq l kr ks">what happens with command above?</span><span id="2471" class="ko jm hi kk b fi kt kq l kr ks">chmod -R applies file permissions recursively 777 permission mode to set (permit everything). </span><span id="8564" class="ko jm hi kk b fi kt kq l kr ks">./ the directory or file which should be changed</span><span id="2ffa" class="ko jm hi kk b fi kt kq l kr ks">If you don’t pay attention which directory you want to target and accidentally take the root directory (/) instead of the current directory (./) , you will screw up all permissions of your whole system with root folder, and you can not rollback it back with right permissions.</span><span id="79e0" class="ko jm hi kk b fi kt kq l kr ks">How to prevent this?</span><span id="22fc" class="ko jm hi kk b fi kt kq l kr ks">You can avoid the typo above, you can add the following alias:</span><span id="c7ee" class="ko jm hi kk b fi kt kq l kr ks"><strong class="kk hj">alias chmod='chmod --preserve-root'</strong><br/><strong class="kk hj">alias chown='chown --preserve-root'</strong></span><span id="98f4" class="ko jm hi kk b fi kt kq l kr ks">This will always decline a recursive change on the root directory.</span></pre><p id="e806" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更多的命令别名使你的工作更有效率</p><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="c20a" class="ko jm hi kk b fi kp kq l kr ks"><em class="kz">## Colorize the ls output ##</em><br/><strong class="kk hj">alias</strong> ls='ls --color=auto</span><span id="3d12" class="ko jm hi kk b fi kt kq l kr ks"><em class="kz"># do not delete / or prompt if deleting more than 3 files at a time </em><br/><strong class="kk hj">alias</strong> rm='rm -i --preserve-root'<br/> <br/><em class="kz"># confirmation #</em><br/><strong class="kk hj">alias</strong> mv='mv -i'<br/><strong class="kk hj">alias</strong> cp='cp -i'<br/><strong class="kk hj">alias</strong> ln='ln -i'<br/> <br/><em class="kz"># safety Parenting changing perms on / #</em><br/><strong class="kk hj">alias</strong> chown='chown --preserve-root'<br/><strong class="kk hj">alias</strong> chmod='chmod --preserve-root'<br/><strong class="kk hj">alias</strong> chgrp='chgrp --preserve-root'</span><span id="cf8d" class="ko jm hi kk b fi kt kq l kr ks">alias top="htop"</span><span id="7b8c" class="ko jm hi kk b fi kt kq l kr ks">alias mkdir="mkdir -pv"</span><span id="bb38" class="ko jm hi kk b fi kt kq l kr ks">alias wget="wget -c"</span><span id="506f" class="ko jm hi kk b fi kt kq l kr ks">alias myip="curl http://ipecho.net/plain; echo"</span><span id="0b04" class="ko jm hi kk b fi kt kq l kr ks">alias free="free -mt"<br/>alias du="du -ach | sort -h"<br/>alias df="df -Tha --total"</span></pre><h1 id="9ef8" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">系统内存，CPU</h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="1248" class="ko jm hi kk b fi kp kq l kr ks"><em class="kz">## pass options to free </em><br/><strong class="kk hj">alias</strong> meminfo='free -m -l -t'<br/> <br/><em class="kz">## get top process consuming memory</em><br/><strong class="kk hj">alias</strong> psmem='ps auxf | sort -nr -k 4'<br/><strong class="kk hj">alias</strong> psmem10='ps auxf | sort -nr -k 4 | head -10'<br/> <br/><em class="kz">## get top process consuming cpu ##</em><br/><strong class="kk hj">alias</strong> pscpu='ps auxf | sort -nr -k 3'<br/><strong class="kk hj">alias</strong> pscpu10='ps auxf | sort -nr -k 3 | head -10'<br/> <br/><em class="kz">## Get server cpu info ##</em><br/><strong class="kk hj">alias</strong> cpuinfo='lscpu'<br/> <br/><em class="kz">## older system use /proc/cpuinfo ##</em><br/><em class="kz">##alias cpuinfo='less /proc/cpuinfo' ##</em><br/> <br/><em class="kz">## get GPU ram on desktop / laptop##</em><br/><strong class="kk hj">alias</strong> gpumeminfo='grep -i --color memory /var/log/Xorg.0.log'</span><span id="df00" class="ko jm hi kk b fi kt kq l kr ks">alias dd='echo "no dd command available"'</span></pre><h1 id="4e69" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">字符串操作</strong></h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="d8b1" class="ko jm hi kk b fi kp kq l kr ks">#Parameter expansions</span><span id="7933" class="ko jm hi kk b fi kt kq l kr ks">STR="/tmp/test/foo.txt"<br/>echo ${STR%.txt}    # /tmp/test/foo<br/>echo ${STR%.txt}.o  # /tmp/test/foo.o</span><span id="fe2b" class="ko jm hi kk b fi kt kq l kr ks">echo ${STR##*.}     # txt(extension)<br/>echo ${STR##*/}     # foo.txt (basepath)</span><span id="e32b" class="ko jm hi kk b fi kt kq l kr ks">echo ${STR#*/}      # tmp/test/foo.txt<br/>echo ${STR##*/}     # foo.txt</span><span id="efd0" class="ko jm hi kk b fi kt kq l kr ks">echo ${STR/foo/bar} # /tmp/test/bar.txt</span><span id="0688" class="ko jm hi kk b fi kt kq l kr ks">#Lenght<br/>echo "<strong class="kk hj">${#</strong><strong class="kk hj">STR</strong><strong class="kk hj">}</strong>" #<!-- -->Length of <!-- -->$<!-- -->STR</span><span id="fd66" class="ko jm hi kk b fi kt kq l kr ks">#Manipulation<br/>STR="HELLO WORLD!"<br/>echo ${STR,}   #=&gt; "hELLO WORLD!" (lowercase 1st letter)<br/>echo ${STR,,}  #=&gt; "hello world!" (all lowercase)<br/><br/>STR="hello world!"<br/>echo ${STR^}   #=&gt; "Hello world!" (uppercase 1st letter)<br/>echo ${STR^^}  #=&gt; "HELLO WORLD!" (all uppercase)</span><span id="93b6" class="ko jm hi kk b fi kt kq l kr ks">#Default values<br/>${FOO:-val} #$FOO<!-- -->, or <!-- -->val<!-- --> if not set<br/>${FOO:=val} #<!-- -->Set <!-- -->$FOO<!-- --> to <!-- -->val<!-- --> if not set<br/>${FOO:+val} #val<!-- --> if <!-- -->$FOO<!-- --> is set<br/>${FOO:?message} #<!-- -->Show error message and exit if <!-- -->$FOO<!-- --> is not set</span><span id="fe3a" class="ko jm hi kk b fi kt kq l kr ks">The <!-- -->:<!-- --> is optional (eg, <!-- -->${FOO=word}<!-- --> works)</span></pre><h1 id="35c8" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">重寄</h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="76a7" class="ko jm hi kk b fi kp kq l kr ks">echo "test message" &gt; output.txt   # stdout to (file)<br/>cat file1.txt &gt;&gt; output.txt  # stdout to (file), append<br/>python hello.py 2&gt; error.log   # stderr to (file)<br/>python hello.py 2&gt;&amp;1           # stderr to stdout<br/>python hello.py 2&gt;/dev/null    # stderr to (null)<br/>python hello.py &amp;&gt;/dev/null    # stdout and stderr to (null)</span><span id="41ec" class="ko jm hi kk b fi kt kq l kr ks">python hello.py &lt; foo.txt      # feed foo.txt to stdin for python</span></pre><h1 id="a7aa" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">历史</h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="3794" class="ko jm hi kk b fi kp kq l kr ks">history  # show all histories</span></pre><h1 id="4bb3" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">功能</strong></h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="f121" class="ko jm hi kk b fi kp kq l kr ks">test.sh</span><span id="f25b" class="ko jm hi kk b fi kt kq l kr ks">#!/bin/bash<br/><br/><strong class="kk hj">function1</strong>() {<br/>  echo "Hello $1"<br/>}</span><span id="435c" class="ko jm hi kk b fi kt kq l kr ks"># Same as above (alternate syntax)<br/>function <strong class="kk hj">function1</strong>() {<br/>    echo "hello $1"<br/>}</span><span id="e940" class="ko jm hi kk b fi kt kq l kr ks"><strong class="kk hj">function1</strong> world<br/><strong class="kk hj">function1 </strong>"Phnom Penh"</span></pre><h1 id="0ec3" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">返回值</h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="5e12" class="ko jm hi kk b fi kp kq l kr ks">myfunc() {<br/>    local myresult='some value'<br/>    echo $myresult<br/>}</span><span id="395a" class="ko jm hi kk b fi kt kq l kr ks">result="$(myfunc)"</span></pre><h1 id="101d" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">论据</strong></h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="4965" class="ko jm hi kk b fi kp kq l kr ks">$0    #reserved for the function name</span><span id="a8b4" class="ko jm hi kk b fi kt kq l kr ks">$* or $@  # holds all the arguments passed to the function</span><span id="158d" class="ko jm hi kk b fi kt kq l kr ks">$#    #total number of parameters passed to the function</span><span id="de31" class="ko jm hi kk b fi kt kq l kr ks">$? # return value</span></pre><h1 id="7424" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">SSH、系统信息和网络命令</h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="86c1" class="ko jm hi kk b fi kp kq l kr ks">ssh user@host            # connects to host as user<br/>ssh -p &lt;port&gt; user@host  # connects to host on specified port as <br/>                           user<br/>ssh-copy-id user@host    # adds your ssh key to host for user to <br/>                            enable a keyed or passwordless login</span><span id="dca5" class="ko jm hi kk b fi kt kq l kr ks">##copy file<br/>scp user@host:file.txt /local/file # copy server file to local file<br/>scp file user@host:/path/file     # copy local file to remote server</span><span id="a116" class="ko jm hi kk b fi kt kq l kr ks">##copy folders from server to local folder<br/>scp -r user@host:folder local/folder <br/>##copy local folders from local to remote server folder<br/>scp -r local/folder user@host:folder</span><span id="d1d1" class="ko jm hi kk b fi kt kq l kr ks">whoami                   # returns your username<br/>passwd                   # lets you change your password<br/>quota -v                 # shows what your disk quota is<br/>date                     # shows the current date and time<br/>uptime                   # shows current uptime<br/>w                        # displays whois online<br/>finger &lt;user&gt;            # displays information about user<br/>uname -a                 # shows kernel information<br/><br/>df                       # shows disk usage<br/>du &lt;filename&gt;            # shows the disk usage of the files and  <br/>                           directories in filename (du -s give only <br/>                           a total)</span><span id="c817" class="ko jm hi kk b fi kt kq l kr ks">last &lt;yourUsername&gt;      # lists your last logins<br/>ps -u yourusername       # lists your processes<br/>kill &lt;PID&gt;               # kills the processes with the ID you gave<br/>killall &lt;processname&gt;    # kill all processes with the name<br/>top  / htop              # displays your currently active processes<br/></span><span id="845c" class="ko jm hi kk b fi kt kq l kr ks">ping &lt;host&gt;              # pings host and outputs results<br/>whois &lt;domain&gt;           # gets whois information for domain<br/>dig &lt;domain&gt;             # gets DNS information for domain<br/>dig -x &lt;host&gt;            # reverses lookup host<br/>wget &lt;file&gt;              # downloads file<br/>curl &lt;domain_url&gt;        # download  and reading content from url</span></pre><p id="74a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将 sudo 命令授予具有特定操作和文件夹的特定用户</p><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="ed5c" class="ko jm hi kk b fi kp kq l kr ks">#grant user1 with sudo chmod 700 /dbdata/backup <br/>$cd /etc/sudoers.d<br/>$visudo<br/>user1 ALL=NOPASSWD:/bin/chmod [!s] /dbdata/backup/</span></pre><h1 id="3ed0" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">Cron 任务</h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="cde4" class="ko jm hi kk b fi kp kq l kr ks"><strong class="kk hj">#Format cron task syntax<br/>Min  Hour Day  Mon  Weekday<br/>*    *    *    *    *  command to be execute<br/>┬    ┬    ┬    ┬    ┬<br/>│    │    │    │    └─  Weekday  (0=Sun .. 6=Sat)<br/>│    │    │    └──────  Month    (1..12)<br/>│    │    └───────────  Day      (1..31)<br/>│    └────────────────  Hour     (0..23)<br/>└─────────────────────  Minute   (0..59)</strong></span><span id="c085" class="ko jm hi kk b fi kt kq l kr ks">###Example####<br/>0 * * * *        every hour<br/>*/15 * * * *     every 15 mins<br/>0 */2 * * *      every 2 hours<br/>0 0 * * 0        every Sunday midnight</span><span id="3d2a" class="ko jm hi kk b fi kt kq l kr ks"><br/><strong class="kk hj"># Adding tasks easily crontab<br/></strong>echo "this is my cron" | crontab</span><span id="c1d4" class="ko jm hi kk b fi kt kq l kr ks"><strong class="kk hj"># Open in editor<br/>crontab -e</strong></span><span id="2986" class="ko jm hi kk b fi kt kq l kr ks"><strong class="kk hj"># List cron tasks<br/>crontab -l [-u user]</strong></span></pre><h1 id="ea68" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">Heredoc</h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="65e9" class="ko jm hi kk b fi kp kq l kr ks">cat &lt;&lt;<!-- -->END<br/>**************************************<br/>Put your instruction comment text<br/>**************************************<br/>END</span></pre><h1 id="9292" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">其他高级命令</h1><p id="8c83" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">还有其他命令，例如</p><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="0147" class="ko jm hi kk b fi kp kq l kr ks">cut<br/>awk<br/>sed<br/>tee<br/>xargs<br/>kill<br/>ps<br/>tail<br/>less<br/>more<br/>cat<br/>...</span><span id="d316" class="ko jm hi kk b fi kt kq l kr ks">command list users who can sudo or super users in our Linux system with command:</span><span id="f7a7" class="ko jm hi kk b fi kt kq l kr ks"><strong class="kk hj">$ </strong><a class="ae la" href="https://ostechnix.com/the-grep-command-tutorial-with-examples-for-beginners/" rel="noopener ugc nofollow" target="_blank"><strong class="kk hj">grep</strong></a><strong class="kk hj"> '^sudo:.*$' /etc/group | cut -d: -f4</strong><br/>sophea,ubuntu</span><span id="67fb" class="ko jm hi kk b fi kt kq l kr ks">or this command<br/><strong class="kk hj">$ getent group sudo | cut -d: -f4</strong></span></pre><h1 id="1fd0" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">查找用户是否有 sudo 权限</h1><p id="0eba" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">我们现在知道如何在我们的 Linux 系统中找到所有的 sudo 用户。如何发现某个用户是否有 sudo 权限？那很简单！</p><p id="da43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要确定一个用户是否是 sudo 用户，只需运行</p><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="0d50" class="ko jm hi kk b fi kp kq l kr ks">$ sudo -l -U sophea</span></pre><h1 id="6ec5" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">向 Linux 上的普通用户授予 Sudo 特权</h1><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="f82d" class="ko jm hi kk b fi kp kq l kr ks">sudo usermod -a -G sudo sophea  <br/>or this command</span><span id="83ac" class="ko jm hi kk b fi kt kq l kr ks">sudo adduser sophea sudo</span></pre><h2 id="a77c" class="ko jm hi bd jn lb lc ld jr le lf lg jv iq lh li jz iu lj lk kd iy ll lm kh ln bi translated">删除用户的 sudo 权限</h2><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="25be" class="ko jm hi kk b fi kp kq l kr ks">sudo deluser sopheasudo</span></pre><p id="8599" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">样本输出:</strong></p><pre class="je jf jg jh fd kj kk kl km aw kn bi"><span id="6ae8" class="ko jm hi kk b fi kp kq l kr ks">Removing user `sophea' from group `sudo' ...<br/>Done.</span></pre><p id="b4cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这篇文章能够帮助您，扩大您对 bash shell 脚本的了解。</p><p id="fb8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果这篇文章是有帮助的，请支持按下<strong class="ih hj">按钮</strong>，帮助其他读者也看到这个故事。</p><p id="c13e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我期待着反馈和评论</p><div class="lo lp ez fb lq lr"><a href="https://javarevisited.blogspot.com/2018/02/5-courses-to-learn-shell-scripting-in-linux.html" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">在线学习 Linux Shell 脚本(bash、ksh、csh)的前 5 门课程——最好的</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">开发人员的大量时间浪费在尝试重复任务和命令上，尤其是当涉及到…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">javarevisited.blogspot.com</p></div></div><div class="ma l"><div class="mb l mc md me ma mf jj lr"/></div></div></a></div><div class="lo lp ez fb lq lr"><a rel="noopener follow" target="_blank" href="/javarevisited/top-10-courses-to-learn-linux-command-line-in-2020-best-and-free-f3ee4a78d0c0"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">2020 年学习 Linux 命令行的 10 大课程——最好的免费课程</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">有没有想过为什么命令行仍然在使用，即使有数百种人性化的图形用户界面和工具…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">medium.com</p></div></div><div class="ma l"><div class="mg l mc md me ma mf jj lr"/></div></div></a></div></div></div>    
</body>
</html>