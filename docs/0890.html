<html>
<head>
<title>Builder Design Pattern in Java for Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向初学者的Java构建器设计模式</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/builder-design-pattern-in-java-for-beginners-9b93d2a15440?source=collection_archive---------2-----------------------#2021-01-02">https://medium.com/javarevisited/builder-design-pattern-in-java-for-beginners-9b93d2a15440?source=collection_archive---------2-----------------------#2021-01-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><a href="https://medium.com/javarevisited/7-best-online-courses-to-learn-object-oriented-design-pattern-in-java-749b6399af59"><div class="er es if"><img src="../Images/611a1f08cf88a092cc6f1e57121903a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r8RXECPcFPuViUNrsgV5tA.jpeg"/></div></a><p class="im in et er es io ip bd b be z dx translated">照片由<a class="ae iq" href="https://unsplash.com/@guiccunha?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">古伊列梅·崔林</a>在<a class="ae iq" href="https://unsplash.com/s/photos/builder?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="18a3" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">生成器设计模式是一种用于创建复杂对象的创造性设计模式。当从超过四个参数的构造函数中创建对象时，我们更容易出错。即使一个参数被切换或丢失，也要花费相当多的时间来找出问题所在。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="93e8" class="jy jz hi ju b fi ka kb l kc kd"><strong class="ju hj">public class </strong>Customer {<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">name</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">firstName</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">lastName</strong>;<br/>    <strong class="ju hj">public int age</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">address</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">city</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">mobileNumber</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">pincode</strong>;<br/><br/>    <strong class="ju hj">public </strong>Customer(String name, <br/>                    String firstName, <br/>                    String lastName, <br/>                    <strong class="ju hj">int </strong>age, <br/>                    String address, <br/>                    String city, <br/>                    String mobileNumber,<br/>                    String pincode) {<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">name </strong>= name;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">firstName </strong>= firstName;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">lastName </strong>= lastName;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">age </strong>= age;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">address </strong>= address;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">city </strong>= city;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">mobileNumber </strong>= mobileNumber;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">pincode </strong>= pincode;<br/>    }<br/>}</span></pre><p id="bcb4" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">考虑上面的例子，<a class="ae iq" href="https://javarevisited.blogspot.com/2012/12/what-is-object-in-java-or-oops-example.html#axzz6ikhp68Le" rel="noopener ugc nofollow" target="_blank">对象创建</a>需要八个参数，如果你错过了其中一个，那么就要准备好花时间去找出哪里出错了。现在，如果客户没有明确提供<code class="du ke kf kg ju b">firstName </code>和<code class="du ke kf kg ju b">lastName </code>怎么办？我们必须再创建一个构造函数，它不接受这两个参数。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="f242" class="jy jz hi ju b fi ka kb l kc kd"><strong class="ju hj">public </strong>Customer(String name, <strong class="ju hj">int </strong>age, String address, String city, String mobileNumber, String pincode) {<br/>    <strong class="ju hj">this</strong>.<strong class="ju hj">name </strong>= name;<br/>    <strong class="ju hj">this</strong>.<strong class="ju hj">age </strong>= age;<br/>    <strong class="ju hj">this</strong>.<strong class="ju hj">address </strong>= address;<br/>    <strong class="ju hj">this</strong>.<strong class="ju hj">city </strong>= city;<br/>    <strong class="ju hj">this</strong>.<strong class="ju hj">mobileNumber </strong>= mobileNumber;<br/>    <strong class="ju hj">this</strong>.<strong class="ju hj">pincode </strong>= pincode;<br/>}</span></pre><p id="e054" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">如果在不久的将来增加了一个参数，我们将不得不增加一个构造函数或者编辑之前的构造函数，并且在使用过构造函数的地方增加参数。进入<a class="ae iq" href="http://javarevisited.blogspot.sg/2012/06/builder-design-pattern-in-java-example.html" rel="noopener ugc nofollow" target="_blank">构建器设计模式</a>我们的救世主。它不仅有助于轻松地创建对象，而且有助于我们长期维护代码。让我们看看这是如何实现的。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="da32" class="jy jz hi ju b fi ka kb l kc kd"><strong class="ju hj">public class </strong>Customer {<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">name</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">firstName</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">lastName</strong>;<br/>    <strong class="ju hj">public int age</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">address</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">city</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">mobileNumber</strong>;<br/>    <strong class="ju hj">public </strong>String <strong class="ju hj">pincode</strong>;<br/><br/>    <strong class="ju hj">public </strong>String getName() {<br/>        <strong class="ju hj">return name</strong>;<br/>    }<br/><br/>    <strong class="ju hj">public </strong>String getFirstName() {<br/>        <strong class="ju hj">return firstName</strong>;<br/>    }<br/><br/>    <strong class="ju hj">public </strong>String getLastName() {<br/>        <strong class="ju hj">return lastName</strong>;<br/>    }<br/><br/>    <strong class="ju hj">public int </strong>getAge() {<br/>        <strong class="ju hj">return age</strong>;<br/>    }<br/><br/>    <strong class="ju hj">public </strong>String getAddress() {<br/>        <strong class="ju hj">return address</strong>;<br/>    }<br/><br/>    <strong class="ju hj">public </strong>String getCity() {<br/>        <strong class="ju hj">return city</strong>;<br/>    }<br/><br/>    <strong class="ju hj">public </strong>String getMobileNumber() {<br/>        <strong class="ju hj">return mobileNumber</strong>;<br/>    }<br/><br/>    <strong class="ju hj">public </strong>String getPincode() {<br/>        <strong class="ju hj">return pincode</strong>;<br/>    }<br/><br/>    @Override<br/>    <strong class="ju hj">public </strong>String toString() {<br/>        <strong class="ju hj">return "Customer{" </strong>+<br/>                <strong class="ju hj">"name='" </strong>+ <strong class="ju hj">name </strong>+ <strong class="ju hj">'\'' </strong>+<br/>                <strong class="ju hj">", firstName='" </strong>+ <strong class="ju hj">firstName </strong>+ <strong class="ju hj">'\'' </strong>+<br/>                <strong class="ju hj">", lastName='" </strong>+ <strong class="ju hj">lastName </strong>+ <strong class="ju hj">'\'' </strong>+<br/>                <strong class="ju hj">", age=" </strong>+ <strong class="ju hj">age </strong>+<br/>                <strong class="ju hj">", address='" </strong>+ <strong class="ju hj">address </strong>+ <strong class="ju hj">'\'' </strong>+<br/>                <strong class="ju hj">", city='" </strong>+ <strong class="ju hj">city </strong>+ <strong class="ju hj">'\'' </strong>+<br/>                <strong class="ju hj">", mobileNumber='" </strong>+ <strong class="ju hj">mobileNumber </strong>+ <strong class="ju hj">'\'' </strong>+<br/>                <strong class="ju hj">", pincode='" </strong>+ <strong class="ju hj">pincode </strong>+ <strong class="ju hj">'\'' </strong>+<br/>                <strong class="ju hj">'}'</strong>;<br/>    }<br/><br/>    <strong class="ju hj">private </strong>Customer(CustomerBuilder customerBuilder) {<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">name </strong>= customerBuilder.<strong class="ju hj">name</strong>;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">firstName </strong>= customerBuilder.<strong class="ju hj">firstName</strong>;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">lastName </strong>= customerBuilder.<strong class="ju hj">lastName</strong>;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">pincode </strong>= customerBuilder.<strong class="ju hj">pincode</strong>;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">address </strong>= customerBuilder.<strong class="ju hj">address</strong>;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">mobileNumber </strong>= customerBuilder.<strong class="ju hj">mobileNumber</strong>;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">age </strong>= customerBuilder.<strong class="ju hj">age</strong>;<br/>        <strong class="ju hj">this</strong>.<strong class="ju hj">city </strong>= customerBuilder.<strong class="ju hj">city</strong>;<br/>    }<br/><br/>    <strong class="ju hj">public static class </strong>CustomerBuilder {<br/>        <strong class="ju hj">private </strong>String <strong class="ju hj">name</strong>;<br/>        <strong class="ju hj">private </strong>String <strong class="ju hj">firstName</strong>;<br/>        <strong class="ju hj">private </strong>String <strong class="ju hj">lastName</strong>;<br/>        <strong class="ju hj">private int age</strong>;<br/>        <strong class="ju hj">private </strong>String <strong class="ju hj">address</strong>;<br/>        <strong class="ju hj">private </strong>String <strong class="ju hj">city</strong>;<br/>        <strong class="ju hj">private </strong>String <strong class="ju hj">mobileNumber</strong>;<br/>        <strong class="ju hj">private </strong>String <strong class="ju hj">pincode</strong>;<br/><br/>        <strong class="ju hj">public </strong>CustomerBuilder() {<br/>        }<br/><br/>        <strong class="ju hj">public </strong>CustomerBuilder setName(String name) {<br/>            <strong class="ju hj">this</strong>.<strong class="ju hj">name </strong>= name;<br/>            <strong class="ju hj">return this</strong>;<br/>        }<br/><br/>        <strong class="ju hj">public </strong>CustomerBuilder setFirstName(String firstName) {<br/>            <strong class="ju hj">this</strong>.<strong class="ju hj">firstName </strong>= firstName;<br/>            <strong class="ju hj">return this</strong>;<br/>        }<br/><br/>        <strong class="ju hj">public </strong>CustomerBuilder setLastName(String lastName) {<br/>            <strong class="ju hj">this</strong>.<strong class="ju hj">lastName </strong>= lastName;<br/>            <strong class="ju hj">return this</strong>;<br/>        }<br/><br/>        <strong class="ju hj">public </strong>CustomerBuilder setAge(<strong class="ju hj">int </strong>age) {<br/>            <strong class="ju hj">this</strong>.<strong class="ju hj">age </strong>= age;<br/>            <strong class="ju hj">return this</strong>;<br/>        }<br/><br/>        <strong class="ju hj">public </strong>CustomerBuilder setAddress(String address) {<br/>            <strong class="ju hj">this</strong>.<strong class="ju hj">address </strong>= address;<br/>            <strong class="ju hj">return this</strong>;<br/>        }<br/><br/>        <strong class="ju hj">public </strong>CustomerBuilder setCity(String city) {<br/>            <strong class="ju hj">this</strong>.<strong class="ju hj">city </strong>= city;<br/>            <strong class="ju hj">return this</strong>;<br/>        }<br/><br/>        <strong class="ju hj">public </strong>CustomerBuilder setMobileNumber(String mobileNumber) {<br/>            <strong class="ju hj">this</strong>.<strong class="ju hj">mobileNumber </strong>= mobileNumber;<br/>            <strong class="ju hj">return this</strong>;<br/>        }<br/><br/>        <strong class="ju hj">public </strong>CustomerBuilder setPincode(String pincode) {<br/>            <strong class="ju hj">this</strong>.<strong class="ju hj">pincode </strong>= pincode;<br/>            <strong class="ju hj">return this</strong>;<br/>        }<br/><br/>        <strong class="ju hj">public </strong>Customer build() {<br/>            <strong class="ju hj">return new </strong>Customer(<strong class="ju hj">this</strong>);<br/>        }<br/>    }<br/>}</span></pre><p id="cb09" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">需要注意的事项:</p><ol class=""><li id="2bd0" class="kh ki hi it b iu iv iy iz jc kj jg kk jk kl jo km kn ko kp bi translated">有一个静态内部类可以返回对象。</li><li id="9521" class="kh ki hi it b iu kq iy kr jc ks jg kt jk ku jo km kn ko kp bi translated">静态类有setters，也有一个build()方法，该方法将返回新的Customer对象。</li><li id="4c81" class="kh ki hi it b iu kq iy kr jc ks jg kt jk ku jo km kn ko kp bi translated">外部类只有getters，它帮助我们获取设置的字段。</li></ol><p id="c7c3" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">让我们看看如何实例化客户对象</strong></p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="57d9" class="jy jz hi ju b fi ka kb l kc kd"><strong class="ju hj">public class </strong>BuilderClassImplementation {<br/>    <strong class="ju hj">public static void </strong>main(String[] args) {<br/>        Customer customer = <strong class="ju hj">new </strong>Customer.CustomerBuilder()<br/>                .setName(<strong class="ju hj">"Omkar Kulkarni"</strong>)<br/>                .setFirstName(<strong class="ju hj">"Omkar"</strong>)<br/>                .setLastName(<strong class="ju hj">"Kulkarni"</strong>)<br/>                .setMobileNumber(<strong class="ju hj">"8551223****"</strong>)<br/>                .build();<br/>    }<br/>}</span></pre><p id="d68d" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">优点:</strong></p><ol class=""><li id="47b5" class="kh ki hi it b iu iv iy iz jc kj jg kk jk kl jo km kn ko kp bi translated">消除了向构造函数传递如此多的参数。</li><li id="5438" class="kh ki hi it b iu kq iy kr jc ks jg kt jk ku jo km kn ko kp bi translated">我们不必在构造函数中传递null。</li><li id="76eb" class="kh ki hi it b iu kq iy kr jc ks jg kt jk ku jo km kn ko kp bi translated">代码为<strong class="it hj"> <em class="kv">可维护</em> </strong>。</li><li id="4603" class="kh ki hi it b iu kq iy kr jc ks jg kt jk ku jo km kn ko kp bi translated">一旦创建了对象，我们就可以强制<strong class="it hj"><em class="kv"/></strong>不变性。</li></ol><p id="a9af" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">缺点:</strong></p><ol class=""><li id="e7e4" class="kh ki hi it b iu iv iy iz jc kj jg kk jk kl jo km kn ko kp bi translated">内部和外部类中的代码是重复的。</li><li id="3978" class="kh ki hi it b iu kq iy kr jc ks jg kt jk ku jo km kn ko kp bi translated">实例也可能在没有参数的情况下创建。</li></ol><p id="49f6" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">可能会有这样的情况，我们需要一些强制性的参数，但是在上面的实现中，对象可能是无参数创建的。</p><p id="1cef" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">因此，在这种情况下，我们需要对构建器类的实现进行一些调整。我们传递对象创建可能需要的强制字段，而不是有一个空的构造函数。</p><p id="ef03" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">下面是构造函数的实现。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="5e32" class="jy jz hi ju b fi ka kb l kc kd"><strong class="ju hj">public </strong>CustomerBuilder(String name, <strong class="ju hj">int </strong>age, String city) {<br/>    <strong class="ju hj">this</strong>.<strong class="ju hj">name </strong>= name;<br/>    <strong class="ju hj">this</strong>.<strong class="ju hj">age </strong>= age;<br/>    <strong class="ju hj">this</strong>.<strong class="ju hj">city </strong>= city;<br/>}</span></pre><p id="936d" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">对象实例化也会因此而改变。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="1a52" class="jy jz hi ju b fi ka kb l kc kd">Customer customer = <strong class="ju hj">new </strong>Customer<br/>        .CustomerBuilder(<strong class="ju hj">"Omkar"</strong>, 29, <strong class="ju hj">"Pune"</strong>)<br/>        .setMobileNumber(<strong class="ju hj">"987*******"</strong>)<br/>        .build();</span></pre><h2 id="d0de" class="jy jz hi bd kw kx ky kz la lb lc ld le jc lf lg lh jg li lj lk jk ll lm ln lo bi translated"><strong class="ak">结论:</strong></h2><p id="5233" class="pw-post-body-paragraph ir is hi it b iu lp iw ix iy lq ja jb jc lr je jf jg ls ji jj jk lt jm jn jo hb bi translated">构建器设计模式应该使用创造性的设计模式来创建复杂的对象。代码变得可维护，不容易出错。</p></div></div>    
</body>
</html>