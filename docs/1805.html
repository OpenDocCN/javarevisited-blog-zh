<html>
<head>
<title>GCP Certification — let’s sail together.FirstEnd to End Project — CI/CD with Jenkins and GKE — PART I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GCP认证——让我们一起航行。首个端到端项目—詹金斯和GKE的CI/CD—第一部分</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/gcp-certification-lets-sail-together-9f08c0344f18?source=collection_archive---------1-----------------------#2021-12-11">https://medium.com/javarevisited/gcp-certification-lets-sail-together-9f08c0344f18?source=collection_archive---------1-----------------------#2021-12-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/62aec829e6c5cef69c143f96484543e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mtqWNH5q5eKCN3dTJBMs6A.png"/></div></div></figure><p id="6ce4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大家好，</p><p id="b124" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">经过2个月的努力学习GCP，这里是我第一次尝试创建一个端到端的项目与CI/CD管道使用以下产品:-</p><ol class=""><li id="98ea" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/shell/docs" rel="noopener ugc nofollow" target="_blank">云壳</a></li><li id="5477" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/kubernetes-engine/docs" rel="noopener ugc nofollow" target="_blank">谷歌Kubernetes引擎(GKE) </a></li><li id="5791" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/source-repositories/docs" rel="noopener ugc nofollow" target="_blank">云源库</a></li><li id="5fe7" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/build/docs" rel="noopener ugc nofollow" target="_blank">云构建</a></li><li id="148c" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/container-registry/docs" rel="noopener ugc nofollow" target="_blank">集装箱登记处</a></li><li id="df3e" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/compute/docs" rel="noopener ugc nofollow" target="_blank">计算引擎</a></li><li id="09cc" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/load-balancing/docs" rel="noopener ugc nofollow" target="_blank">云负载均衡</a></li><li id="cf69" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/iam/docs" rel="noopener ugc nofollow" target="_blank">身份和访问管理(IAM) </a></li><li id="2852" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/storage/docs" rel="noopener ugc nofollow" target="_blank">云存储</a></li><li id="95a3" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/logging/docs" rel="noopener ugc nofollow" target="_blank">云日志</a></li><li id="2a62" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/monitoring/docs" rel="noopener ugc nofollow" target="_blank">云监测</a></li><li id="77af" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://flask.palletsprojects.com/en/2.0.x/" rel="noopener ugc nofollow" target="_blank">烧瓶</a></li><li id="1602" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank"> Python </a></li><li id="8136" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://www.ansible.com/" rel="noopener ugc nofollow" target="_blank">可回答的</a></li><li id="5dbb" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://www.terraform.io/" rel="noopener ugc nofollow" target="_blank">地形</a></li><li id="6b5c" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank">码头工人</a></li><li id="8ae6" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://www.jenkins.io/" rel="noopener ugc nofollow" target="_blank">詹金斯</a></li><li id="c4b5" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated">kubectx——在集群之间切换的工具</li><li id="4f55" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated">kubens——在Kubernetes名称空间之间切换的工具</li><li id="c0e1" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/compute/docs/instance-groups#managed_instance_groups" rel="noopener ugc nofollow" target="_blank">实例组</a></li><li id="c06b" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/compute/docs/instance-templates/" rel="noopener ugc nofollow" target="_blank">实例模板</a></li></ol><p id="8699" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">关键参考文献</strong></p><ol class=""><li id="3961" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><a class="ae jx" href="https://plugins.jenkins.io/google-oauth-plugin/" rel="noopener ugc nofollow" target="_blank">谷歌OAuth凭证</a></li><li id="d803" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://cloud.google.com/iam/docs/creating-managing-service-account-keys#iam-service-account-keys-create-gcloud" rel="noopener ugc nofollow" target="_blank">创建和管理服务账户密钥</a></li><li id="f2b1" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated">K8s — <a class="ae jx" href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" rel="noopener ugc nofollow" target="_blank">部署</a> / <a class="ae jx" href="https://kubernetes.io/docs/concepts/services-networking/service/" rel="noopener ugc nofollow" target="_blank">服务</a> / <a class="ae jx" href="https://kubernetes.io/docs/concepts/services-networking/ingress/" rel="noopener ugc nofollow" target="_blank">入口</a> / <a class="ae jx" href="https://kubernetes.io/docs/concepts/configuration/secret/" rel="noopener ugc nofollow" target="_blank">机密</a></li><li id="d5a7" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/" rel="noopener ugc nofollow" target="_blank">名称空间</a></li><li id="5b84" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://kubernetes.io/docs/tasks/administer-cluster/namespaces/" rel="noopener ugc nofollow" target="_blank">用名称空间共享一个集群</a></li><li id="a10b" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/" rel="noopener ugc nofollow" target="_blank">使用RBAC授权</a></li><li id="6058" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://plugins.jenkins.io/kubernetes/" rel="noopener ugc nofollow" target="_blank">詹金斯插件</a></li><li id="7dcd" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://www.jenkins.io/solutions/pipeline/" rel="noopener ugc nofollow" target="_blank">詹金斯的管道代码</a></li><li id="0a47" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><a class="ae jx" href="https://www.jenkins.io/doc/book/pipeline/jenkinsfile/" rel="noopener ugc nofollow" target="_blank">使用Jenkinsfile </a></li></ol><h1 id="3e59" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">目标:-</h1><p id="d856" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">在kubernetes引擎上部署简单的hello world python应用程序。使用负载平衡器公开应用程序，然后使用jenkins实施CI/CD。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/7e3adfc457e4d05287fe69d8bb0a379c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cU4_nctShbdwt7sOat2-rg.png"/></div></div></figure><p id="8b21" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">高级执行步骤:- </strong></p><ol class=""><li id="2888" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj">版本控制:</strong>创建并克隆源代码库，推送应用代码</li><li id="37b4" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><strong class="is hj">应用开发:</strong>使用flask构建简单的python hello world应用</li><li id="83b8" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><strong class="is hj">构建应用</strong>:使用Docker构建应用映像，并将其推送到容器注册表中</li><li id="7fdf" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><strong class="is hj">基础架构设置:</strong>设置GKE集群，在同一个集群中的3个不同环境(开发、Uat和生产)中启用自动扩展</li><li id="7f53" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><strong class="is hj">部署:</strong>在GKE部署应用程序，并通过负载均衡器公开服务。</li><li id="1786" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><strong class="is hj"> CI/CD : </strong>通过Jenkins使<strong class="is hj"> </strong>自动化</li><li id="b262" class="jo jp hi is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw bi translated"><strong class="is hj">监控您的应用:</strong>设置云监控仪表板，以监控pods状态和其他指标</li></ol><p id="683f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们启航吧……!！！</p><p id="fe84" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">准备工作</strong> :-执行以下基本设置命令</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="97f9" class="lq ke hi lm b fi lr ls l lt lu">gcloud auth list<br/>gcloud config list project<br/>gcloud config set project lets-sail-development</span><span id="7186" class="lq ke hi lm b fi lv ls l lt lu">#Enable required API's</span><span id="bc35" class="lq ke hi lm b fi lv ls l lt lu">gcloud services enable container.googleapis.com cloudbuild.googleapis.com sourcerepo.googleapis.com containeranalysis.googleapis.com</span><span id="f2d2" class="lq ke hi lm b fi lv ls l lt lu">#Let's set the zone upfront<br/>gcloud config set compute/zone us-west1-b<br/></span></pre><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/9f6fb87a20fecba83cf8cb35f4d36646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kpj9E4Z6BiO2XsGPAVciHw.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/3928b6f5f85a61e7ec2bf7fc3209e283.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cXO_Buf-dcWmf0y8DKatoA.png"/></div></div></figure><p id="72bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们设置回购，以便我们开始签入代码。</p><ol class=""><li id="8548" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj">版本控制:</strong>创建并克隆源代码库，推送应用代码</li></ol><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="cbb8" class="lq ke hi lm b fi lr ls l lt lu">gcloud source repos create firstclusterepo-app</span><span id="6773" class="lq ke hi lm b fi lv ls l lt lu">first google source repository:- <a class="ae jx" href="https://source.developers.google.com/p/lets-sail-development/r/firstclusterepo-app" rel="noopener ugc nofollow" target="_blank">https://source.cloud.google.com/lets-sail-development/firstclusterepo-app</a></span><span id="9782" class="lq ke hi lm b fi lv ls l lt lu">mkdir lets-sail<br/>cd lets-sail</span><span id="6f25" class="lq ke hi lm b fi lv ls l lt lu">gcloud init</span><span id="a969" class="lq ke hi lm b fi lv ls l lt lu">gcloud source repos clone firstclusterepo-app --project=lets-sail-development<br/>cd firstclusterepo-app<br/>git status</span></pre><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/31a72ceb517762b5354db3c989247877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GKeNUCbsCPLQxho7CRm6iA.png"/></div></div></figure><p id="eac5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要查看您的代码报告，请转到导航菜单&gt;源代码库</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/c3e65c6fdc27dd5588c5e1838540302f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mRfRmk74_BPczyt6ag8Rrg.png"/></div></div></figure><p id="fe54" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.<strong class="is hj">应用开发:</strong>使用flask构建简单的Hello World python应用</p><p id="6e1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">应用程序python文件</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="ffeb" class="lq ke hi lm b fi lr ls l lt lu">cd ~/lets-sail/firstclusterepo-app<br/>mkdir firstapp<br/>cd firstapp</span><span id="adee" class="lq ke hi lm b fi lv ls l lt lu"><strong class="lm hj">nano firstapp.py</strong></span><span id="4cb6" class="lq ke hi lm b fi lv ls l lt lu">from flask import Flask<br/>app = Flask('first-app')<br/><a class="ae jx" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route('/')<br/>def hello():<br/>  return "Hello World! Lets sail together - prod.\n"<br/>if __name__ == '__main__':<br/>  app.run(host = '0.0.0.0', port = 8080)</span></pre><p id="32fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">应用程序python测试文件</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="f1c2" class="lq ke hi lm b fi lr ls l lt lu"><strong class="lm hj">nano test_firstapp.py</strong></span><span id="a489" class="lq ke hi lm b fi lv ls l lt lu">import unittest<br/>from firstapp import hello<br/>class TestFirstApp(unittest.TestCase):<br/>    def test_hello(self):<br/>        self.assertEqual(hello(), "Hello World! Lets sail together - prod.\n")<br/>if __name__ == '__main__':<br/>  unittest.main()</span></pre><p id="bd96" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">应用程序docker文件</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="2212" class="lq ke hi lm b fi lr ls l lt lu"><strong class="lm hj">nano Dockerfile</strong></span><span id="e32a" class="lq ke hi lm b fi lv ls l lt lu">FROM python:3.7-slim<br/>RUN pip install flask<br/>WORKDIR /app<br/>COPY firstapp.py /app/firstapp.py<br/>ENTRYPOINT ["python"]<br/>CMD ["/app/firstapp.py"]</span></pre><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/8c8974bbfd974613311d5481e59968f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C1hzC4bpycIEiG7SmyddRQ.png"/></div></div></figure><p id="011b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们提交Terraform配置文件和firstapp代码</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="102e" class="lq ke hi lm b fi lr ls l lt lu">cd ~/lets-sail/firstclusterepo-app/firstapp</span><span id="8835" class="lq ke hi lm b fi lv ls l lt lu">git status<br/>git add .</span><span id="2382" class="lq ke hi lm b fi lv ls l lt lu">#You can use your own email id and user id<br/>git config --global user.email "<a class="ae jx" href="mailto:student-01-c6fca7d7079c@qwiklabs.net" rel="noopener ugc nofollow" target="_blank">student-01-c6fca7d7079c@qwiklabs.net</a>"<br/>git config --global user.name "<a class="ae jx" href="mailto:student-01-c6fca7d7079c@qwiklabs.net" rel="noopener ugc nofollow" target="_blank">student-01-c6fca7d7079c</a>"<br/>git commit -m "Firstapp code"<br/>git push</span></pre><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/4dd16dc0e24b017e20f4ca65450c32db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sPWe9mVhCeXKWmibsrW3dw.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/9160c6d649a1b7fe1d046bae6ca406bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P31Ehj7vnH-rXC1R5Qsv4Q.png"/></div></div></figure><p id="1021" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.<strong class="is hj">构建应用</strong>:使用云构建器构建docker映像。将图像推送到容器注册表</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="b09c" class="lq ke hi lm b fi lr ls l lt lu">cd ~/lets-sail/firstclusterepo-app/firstapp</span><span id="611b" class="lq ke hi lm b fi lv ls l lt lu">gcloud builds submit --tag="gcr.io/lets-sail-development/first-app:1.0.0" .</span><span id="fe93" class="lq ke hi lm b fi lv ls l lt lu"><strong class="lm hj">Image </strong>: gcr.io/lets-sail-development/first-app:1.0.0</span></pre><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/0bc17e1c9188c4a4c9f1152fc8bea9cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*clHWJxT64jApTPRKSMznNg.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/d956e3a0d553d473aad9168c3633d226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uiJltYseXesCXybNe5Ruqw.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/8ba9dd3eed7790e296cf44720c4e9fd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rD-hiP0zO2vijHZYcag9hA.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/0f958b8005e531d5e840238c77bee46a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vEKxXkBQvc10UdtHJ91bTg.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/8672f89cd061920b769b8f8808a5c3ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eHL6Ves_bJiPmQwiH0ciTw.png"/></div></div></figure><p id="9453" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.<strong class="is hj">基础架构设置:</strong>在同一个集群中的3个不同环境(开发、Uat和生产)中设置启用了自动扩展的GKE集群</p><p id="dc71" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们使用Terraform设置基本集群</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="dcd2" class="lq ke hi lm b fi lr ls l lt lu">cd ~/lets-sail/firstclusterepo-app/<br/>mkdir terraform<br/>cd terraform</span><span id="cde4" class="lq ke hi lm b fi lv ls l lt lu"><strong class="lm hj">nano main.tf</strong></span><span id="6260" class="lq ke hi lm b fi lv ls l lt lu">resource "google_container_cluster" "first-cluster" {<br/>  name               = "first-cluster"<br/>  location           = "us-west1-b"<br/>  initial_node_count = 3<br/>}</span><span id="7ef3" class="lq ke hi lm b fi lv ls l lt lu">output "cluster_name" {<br/>  value = google_container_cluster.first-cluster.name<br/>}<br/>output "cluster_location" {<br/>  value = google_container_cluster.first-cluster.location<br/>}</span></pre><p id="3700" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们应用地形文件</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="cd89" class="lq ke hi lm b fi lr ls l lt lu">terraform init<br/>terraform validate<br/>terraform apply</span></pre><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/2a55cc0c4a83d4e8ad9e4967d000457a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b_gricZwKoECiglWjnW_cg.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/766c8e0652d73e7b300d6cb924cc6245.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QMTFhneDPIUVO4pKNN99pQ.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/69e1e5752d5ab309209a6b4297218746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uN_Zm-JVwMWRm4NnBalztA.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/41e495eb226b276f26da70b7f68fcf84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UT8__bZE6dcaSAcF3D0yIg.png"/></div></div></figure><p id="6e30" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一个高级选项是使用cli创建启用了自动扩展+自动节点配置功能的群集</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="ef81" class="lq ke hi lm b fi lr ls l lt lu">gcloud container clusters create first-cluster --num-nodes=2 --enable-vertical-pod-autoscaling --release-channel=rapid  --cluster-version=1.21.5-gke.1302 --enable-autoscaling --min-nodes 1 --max-nodes 5 --enable-autoprovisioning --min-cpu 1 --min-memory 2 --max-cpu 45 --max-memory 160 --zone us-west1-b --machine-type n1-standard-2 --scopes  "<a class="ae jx" href="https://www.googleapis.com/auth/source.read_write,cloud-platform" rel="noopener ugc nofollow" target="_blank">https://www.googleapis.com/auth/source.read_write,cloud-platform</a>"</span></pre><p id="a438" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们提交地形文件</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="d0df" class="lq ke hi lm b fi lr ls l lt lu">cd ~/lets-sail/firstclusterepo-app/terraform</span><span id="0f6e" class="lq ke hi lm b fi lv ls l lt lu">git status<br/>git commit -a -m "Terraform config "<br/>git push</span></pre><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/60bab57340e8bb1ab63194ecd4253037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ECHYJCWqY8OTvekMYPY4jg.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/7a6cf1aea2168ece64d8dd63fa5f6769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eyo5Mz3UUVNPquXqd7MO8g.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/c79cdd075bc2bae2c9d59de98eaa629e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X3R4DE_OtmN7XVHZEHVDFw.png"/></div></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/52454b68ff282bb0da2053669280cb71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9T5Cx0RsuCWS6P0pA7Ra3g.png"/></div></div></figure><p id="a515" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5.<strong class="is hj">部署:</strong>在GKE部署应用程序，并通过负载均衡器公开应用程序服务。</p><p id="9542" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">应用程序部署yaml</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="e76c" class="lq ke hi lm b fi lr ls l lt lu">cd ~/lets-sail/firstclusterepo-app<br/>mkdir docker<br/>cd docker<br/>mkdir prod<br/>cd prod</span><span id="171b" class="lq ke hi lm b fi lv ls l lt lu"><strong class="lm hj">nano firstapp.yaml</strong></span><span id="10a8" class="lq ke hi lm b fi lv ls l lt lu">apiVersion: apps/v1<br/>kind: Deployment<br/>metadata:<br/>  name: first-app<br/>  namespace: prod<br/>spec:<br/>  replicas: 3<br/>  selector:<br/>    matchLabels:<br/>      run: first-app<br/>  template:<br/>    metadata:<br/>      labels:<br/>        run: first-app<br/>    spec:<br/>      containers:<br/>      - name: first-app<br/>        image: gcr.io/lets-sail-development/first-app:1.0.0<br/>        ports:<br/>            - name: http<br/>              containerPort: 80</span></pre><p id="d0f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">应用服务yaml</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="b024" class="lq ke hi lm b fi lr ls l lt lu"><strong class="lm hj">nano firstappservice.yaml</strong></span><span id="f8ae" class="lq ke hi lm b fi lv ls l lt lu">apiVersion: v1<br/>kind: Service<br/>metadata:<br/>  name: "first-app-service"<br/>  namespace: prod<br/>spec:<br/>  selector:<br/>    run: "first-app"<br/>  ports:<br/>    - protocol: "TCP"<br/>      port: 80<br/>      targetPort: 8080<br/>  type: LoadBalancer</span></pre><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/2d5ed96ca18d1127345287b7d90f2bb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D5AE5g_HhHCWaIBCD9_13w.png"/></div></div></figure><p id="ae13" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要与集群交互，请获取凭据</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="5367" class="lq ke hi lm b fi lr ls l lt lu">gcloud container clusters get-credentials first-cluster</span></pre><p id="07a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为每个环境创建不同的名称空间</p><p id="dba7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">产品环境</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="e9c5" class="lq ke hi lm b fi lr ls l lt lu">cd ~/lets-sail/firstclusterepo-app/docker/prod<br/>kubectl create ns prod<br/>kubectl apply -f firstapp.yaml</span></pre><p id="f87e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用服务yaml公开</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="c36e" class="lq ke hi lm b fi lr ls l lt lu">kubectl apply -f firstappservice.yaml</span></pre><p id="fb35" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一个选项—如果需要，通过cli公开</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="5781" class="lq ke hi lm b fi lr ls l lt lu">kubectl expose deployment first-app --name first-app-service --namespace=prod --type LoadBalancer --port 80 --target-port 8080</span></pre><p id="c399" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">开发环境</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="ecb2" class="lq ke hi lm b fi lr ls l lt lu">cd ~/lets-sail/firstclusterepo-app<br/>git checkout dev<br/>git push --set-upstream origin dev</span><span id="379a" class="lq ke hi lm b fi lv ls l lt lu">mkdir docker<br/>cd docker<br/>mkdir dev<br/>cd dev</span><span id="9a3b" class="lq ke hi lm b fi lv ls l lt lu">kubectl create ns dev</span><span id="d146" class="lq ke hi lm b fi lv ls l lt lu">#Create same yaml files as prod, except for one attribute update namespace: dev<br/>nano firstapp.yaml <br/>nano firstappservice.yaml</span><span id="b4d2" class="lq ke hi lm b fi lv ls l lt lu">kubectl apply -f firstapp.yaml<br/>kubectl apply -f firstappservice.yaml</span></pre><p id="e24f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">UAT环境</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="bd77" class="lq ke hi lm b fi lr ls l lt lu">cd ~/lets-sail/firstclusterepo-app<br/>git checkout uat<br/>git push --set-upstream origin uat</span><span id="85dd" class="lq ke hi lm b fi lv ls l lt lu">mkdir docker<br/>cd docker<br/>mkdir uat<br/>cd uat</span><span id="5e19" class="lq ke hi lm b fi lv ls l lt lu">kubectl create ns uat</span><span id="5387" class="lq ke hi lm b fi lv ls l lt lu">#Create same yaml files as prod, except for one attribute update namespace: uat<br/>nano firstapp.yaml <br/>nano firstappservice.yaml</span><span id="a8eb" class="lq ke hi lm b fi lv ls l lt lu">kubectl apply -f firstapp.yaml<br/>kubectl apply -f firstappservice.yaml</span></pre><p id="f470" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">回购的结构应该是这样的</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mr"><img src="../Images/4c57e063c95daef4c1a9b7ea515fe39f.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*8ulBGOa8TelkerMBAdu1gw.png"/></div></figure><p id="22de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">主分支</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/7f5c22378316d4dff1b82d0e31ca6360.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wtep5jAGhW-hrpECm9y0kg.png"/></div></div></figure><p id="5a7a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">发展处</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mt"><img src="../Images/35203d67e831281dd1a39041abea0564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i8faS6FVMqkjKUcRZGMR1Q.png"/></div></div></figure><p id="f876" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Uat部门</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/f9109eb40e9fbe32f460b41b8259429e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tvuEpwPZWKL0Abauzk3m0A.png"/></div></div></figure><p id="9efd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在集群上部署所有3个env</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/d3095a89fb54859ca0d9a2a7af443402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dv8_bstrmNwHJ5vAzYgPww.png"/></div></div></figure><p id="a427" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所有3个env在集群上公开的服务</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mw"><img src="../Images/643f50224ba460739e324639c7c26946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vZr42oRjSoTlhsGVpaBxIw.png"/></div></div></figure><p id="5f22" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">开发中—可通过外部IP上的负载平衡器成功访问应用</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mx"><img src="../Images/89a9c9906cecf09f6315a358fc9667e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*ry3IburJU3yYrjBO23-nWw.png"/></div></figure><p id="a915" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Uat中—可通过外部IP上的负载平衡器成功访问应用</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es my"><img src="../Images/8c9b4119d09ff6cad69fb7c8b665bfa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*oz7Z44-gtH_wCeYwwfZDBA.png"/></div></figure><p id="d678" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在生产中—可通过外部IP上的负载平衡器成功访问应用程序</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mz"><img src="../Images/75fa338036b7062598250391a5ae4ac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*n_Rb_SmKZbuH5i2bG7WrVg.png"/></div></figure><p id="fff6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">附加信息:</p><p id="daae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">外部IP可以在VPC部分看到</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/062b28a9775dba94b00baefc8abcce94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bkizgMkHK8yZ1U6LqmVs-Q.png"/></div></div></figure><p id="3a9f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建了其他防火墙规则</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nb"><img src="../Images/0f4b0a7ca73d3de2334a0eee1bd61c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dtAl71ruFTmIYuLIrweulg.png"/></div></div></figure><p id="987d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2台计算虚拟机创建为第一个群集节点</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nc"><img src="../Images/09a82eedbb50d613580985f266b64a16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ABv0t_QLvBJYxVquqSJCaw.png"/></div></div></figure><p id="d3d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">实例模板已创建</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nd"><img src="../Images/811cba99c3ba1d86f00aedff75e1d703.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*48wTrYRkHp5nTTZqf83m0Q.png"/></div></div></figure><p id="a1e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">实例组已创建</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ne"><img src="../Images/ad9da4ce8e117dc514f113bc1ba646e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gYGjpep3xkHVRE5UMAopzA.png"/></div></div></figure><p id="61d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">K8s健康检查服务</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nf"><img src="../Images/ca0ce014e6aa6680463b98b19ad471f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mm07yXsPXMghRwd82rSTfw.png"/></div></div></figure><p id="4dd2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3个负载平衡器，分别用于生产、开发和Uat</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ng"><img src="../Images/25fea4cce7e2cfbf34d720742a0dbe08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5XUYbkjnkVff9PD-zFsqtw.png"/></div></div></figure><p id="9f83" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用于应用构建的云存储</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nh"><img src="../Images/0e75999c88d5add990a03fc0277f9663.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*45vxQL4mrtaPiQnEs0whKg.png"/></div></div></figure><p id="cada" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">提供docker映像详细信息的云构建</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ni"><img src="../Images/97ba48caac95e5bab77a7decf13e4017.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vds9CU9yzf_zf0Uvy3Wngg.png"/></div></div></figure><p id="7d1d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">保存docker图像的容器注册表</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nj"><img src="../Images/e25ea8de5c3201f0898c173494afd458.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v0RaGnuP-_tyuTVe9u0wxA.png"/></div></div></figure><p id="f13e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jx" href="https://medium.com/p/714e45efb798/edit?source=your_stories_page----------------------------------------" rel="noopener">未完待续第二部分</a> ……..！！</p></div></div>    
</body>
</html>