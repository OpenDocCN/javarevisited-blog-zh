<html>
<head>
<title>How to verify that void methods were called using Mockito</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何验证void方法是使用Mockito调用的</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/how-to-verify-that-void-methods-were-called-using-mockito-f439bfa347be?source=collection_archive---------1-----------------------#2020-06-15">https://medium.com/javarevisited/how-to-verify-that-void-methods-were-called-using-mockito-f439bfa347be?source=collection_archive---------1-----------------------#2020-06-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9b88f7069262814064623abb0fcda5e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wlqj_dYufOdNzVoOp6DiIA.jpeg"/></div></div></figure><p id="3e77" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated">ockito是最流行的java模仿框架。这个故事很简单，我将向你展示如何模拟和验证一个void方法调用。</p><p id="0ba0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有时，当我们测试一个void方法的调用时，我们只想确保在它的生命周期中的某个时刻，会用某些参数调用另一个方法。让我们看下面的例子:</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div><p class="kd ke et er es kf kg bd b be z dx translated">SomeClass.java</p></figure><p id="8cea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面这段遗留代码中，最重要的部分是一个叫做<em class="kh"> someMethod() </em>的方法。我们必须确保以正确的方式调用它，但不幸的是，它属于一个我们无法访问的依赖项，而且更复杂的是，它在一个私有方法中。</p><p id="e519" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ki" rel="noopener" href="/javarevisited/top-10-courses-to-learn-eclipse-junit-and-mockito-for-java-developers-4de1e8d62b96"> Mockito框架</a>可以帮助我们模拟和验证方法调用。<br/>我们可以这样做:</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div><p class="kd ke et er es kf kg bd b be z dx translated">SomeClassTest.java</p></figure><p id="32d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本测试课程中最重要的重点是:</p><ul class=""><li id="5701" class="kj kk hi is b it iu ix iy jb kl jf km jj kn jn ko kp kq kr bi translated">被测试的类永远不会被嘲笑。</li><li id="f80d" class="kj kk hi is b it ks ix kt jb ku jf kv jj kw jn ko kp kq kr bi translated">需要模拟被测试类的依赖关系。</li><li id="d774" class="kj kk hi is b it ks ix kt jb ku jf kv jj kw jn ko kp kq kr bi translated">通过调用模拟对象上的方法，我们将模拟该方法调用</li><li id="9c27" class="kj kk hi is b it ks ix kt jb ku jf kv jj kw jn ko kp kq kr bi translated">在您的测试中，首先执行测试中的动作，然后调用<em class="kh"> verify() </em>，而不是相反。</li><li id="0f5f" class="kj kk hi is b it ks ix kt jb ku jf kv jj kw jn ko kp kq kr bi translated">通过使用<em class="kh"> verify() </em>方法，我们将测试在某一点上使用完全相同的参数调用了来自模拟的方法。</li><li id="4851" class="kj kk hi is b it ks ix kt jb ku jf kv jj kw jn ko kp kq kr bi translated">在我们的代码中使用受保护的方法是很好的实践。测试类可以访问受保护的方法，因为包名是相同的。(当然，在你的项目中，结构测试将在<em class="kh"> src/test/java </em>下进行，而生产代码在<em class="kh"> src/main/java </em>下进行)。</li></ul></div><div class="ab cl kx ky gp kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hb hc hd he hf"><p id="76db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可能喜欢的其他<strong class="is hj"> Java测试文章和资源</strong></p><div class="le lf ez fb lg lh"><a rel="noopener follow" target="_blank" href="/javarevisited/10-test-automation-libraries-for-java-developers-e40cb61dcd49"><div class="li ab dw"><div class="lj ab lk cl cj ll"><h2 class="bd hj fi z dy lm ea eb ln ed ef hh bi translated">面向Java开发人员的10多个测试自动化库</h2><div class="lo l"><h3 class="bd b fi z dy lm ea eb ln ed ef dx translated">最近写了一些关于Java开发者今年应该学什么的文章，比如编程语言…</h3></div><div class="lp l"><p class="bd b fp z dy lm ea eb ln ed ef dx translated">medium.com</p></div></div><div class="lq l"><div class="lr l ls lt lu lq lv io lh"/></div></div></a></div><div class="le lf ez fb lg lh"><a rel="noopener follow" target="_blank" href="/javarevisited/5-courses-to-learn-junit-and-mockito-in-2019-best-of-lot-f217d8b93688"><div class="li ab dw"><div class="lj ab lk cl cj ll"><h2 class="bd hj fi z dy lm ea eb ln ed ef hh bi translated">深入学习JUnit和Mockito的5门课程—最佳选择</h2><div class="lo l"><h3 class="bd b fi z dy lm ea eb ln ed ef dx translated">今天，我们将讨论JUnit和单元测试，这是任何软件开发人员的关键技能之一。你可以…</h3></div><div class="lp l"><p class="bd b fp z dy lm ea eb ln ed ef dx translated">medium.com</p></div></div><div class="lq l"><div class="lw l ls lt lu lq lv io lh"/></div></div></a></div><p id="1ef2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你喜欢这个并且发现它很有用，请不要忘记关注<a class="ae ki" rel="noopener" href="/@javing.uk"> Javing </a>并给我们一些掌声:)</p><blockquote class="lx ly lz"><p id="c720" class="iq ir kh is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hb bi translated">如果你不是媒体成员，我强烈推荐你加入媒体，阅读不同领域伟大作家的精彩故事。你可以在这里<strong class="is hj">加入中等</strong><a class="ae ki" rel="noopener" href="/@somasharma_81597/membership"><strong class="is hj"/></a></p></blockquote><p id="fcf9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kh">最初发布于</em><a class="ae ki" href="http://javing.blogspot.com/2013/05/how-to-verify-that-void-methods-were.html" rel="noopener ugc nofollow" target="_blank">http://javing . blogspot . com/2013/05/how-to-verify-that-void-methods-were . html</a></p></div></div>    
</body>
</html>