<html>
<head>
<title>The efficiency of our testing process at optimal costs with Headless Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用无头测试，以最佳成本提高测试流程的效率</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/the-efficiency-of-our-testing-process-at-optimal-costs-with-headless-testing-87ebaa974ba5?source=collection_archive---------2-----------------------#2022-05-23">https://medium.com/javarevisited/the-efficiency-of-our-testing-process-at-optimal-costs-with-headless-testing-87ebaa974ba5?source=collection_archive---------2-----------------------#2022-05-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4352afe009c9b60ab4a9f0b6cf2da4d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-iDoAIIUiK52teIk.png"/></div></div></figure><p id="afb2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">软件测试行业已经提出了新的技术(比如敏捷方法)来减少交付时间，同时以减少的成本和工作量确保高质量的产品交付。</p><p id="497c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">与各种应用程序测试过程相比，测试web应用程序是最棘手的。测试人员需要通过考虑各种参数，如集成、可用性、UI、互操作性和安全性，在不同的浏览器上测试应用程序(这很困难，因为市场上有许多浏览器，没有人能确定用户可能会使用哪种浏览器)。为了提高测试web应用的效率和简易性，无头浏览器测试被开发出来。</p><h1 id="f829" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">无头浏览器和无头测试</h1><p id="df4c" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">Selenium Web driver是一个Web自动化工具，使您能够在不同的浏览器上运行测试。这些浏览器可以是Internet Explorer、Firefox或Chrome。要在Selenium上使用特定的浏览器，您需要相应的驱动程序。</p><p id="de33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在测试运行时，<a class="ae kr" rel="noopener" href="/javarevisited/my-favorite-free-courses-to-learn-selenium-web-drive-for-automation-testing-2f248c8fe6aa"> Selenium </a>启动脚本中调用的相应浏览器，并执行测试步骤。您可以看到运行中的浏览器和测试执行。</p><p id="d8e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，无头浏览器是没有图形用户界面的网络浏览器<strong class="is hj">。这个程序的行为就像一个浏览器，但不会向我们显示任何GUI，<a class="ae kr" rel="noopener" href="/javarevisited/top-7-courses-to-learn-selenium-for-java-and-c-developers-to-learn-automation-testing-free-and-e91637cd9622?source=---------19------------------"> Selenium </a>在后台执行测试</strong></p><p id="9ab8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">市场上有几种无头浏览器，以下是最流行的几种:</p><ul class=""><li id="5c87" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">铬</li><li id="dc67" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">火狐浏览器</li><li id="138d" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">html单元驱动程序</li><li id="85b4" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">PhoantomJS</li></ul><h2 id="5a05" class="lg jp hi bd jq lh li lj ju lk ll lm jy jb ln lo kc jf lp lq kg jj lr ls kk lt bi translated">什么是无头浏览器测试，它有什么作用？</h2><p id="539a" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">无头浏览器测试是在没有浏览器UI或GUI类型的情况下运行浏览器测试的过程。在无头浏览器测试中，为了进行跨浏览器测试，测试人员可以准确并成功地运行测试用例，而不需要知道应用程序需要在哪个浏览器上进行测试。</p><p id="f994" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<a class="ae kr" rel="noopener" href="/javarevisited/7-best-courses-to-learn-jenkins-and-ci-cd-for-devops-engineers-and-software-developers-df2de8fe38f3">持续集成环境</a>中，这种测试方法有利于运行测试，因为持续测试的扩展是高效完成的，因为没有人观察视觉效果。</p><p id="4bb5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这种类型的浏览器可以访问所有网页，并且无需向用户显示它们，这种浏览器可以将网页内容移动到另一个程序。由于无头浏览器程序在后台运行，像普通浏览器一样，用户在启动无头浏览器时在屏幕上什么也看不到。</p><p id="3829" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">即使没有两个浏览器的实现是相同的，无头浏览器也可以分析和解释网页。这允许无头浏览器提供真实的浏览器视角，而不需要内存或实际浏览器GUI测试用例中产生的成本。</p><p id="903c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用无头浏览器或进行无头测试的原因是它们比普通浏览器更快。由于您没有打开浏览器GUI，因此您可以忽略普通浏览器加载<a class="ae kr" rel="noopener" href="/javarevisited/10-best-css-online-courses-for-beginners-and-experienced-developers-54aa2e8c0253"> CSS </a>、<a class="ae kr" rel="noopener" href="/javarevisited/10-best-online-courses-to-learn-javascript-in-2020-af5ed0801645"> JavaScript </a>和渲染<a class="ae kr" rel="noopener" href="/javarevisited/10-best-html-and-css-courses-for-beginners-in-2021-6757eec00032"> HTML </a>所花费的时间。</p><p id="f83c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">借助无头测试，您可以观察到2到15倍的性能扩展速度。如果性能是测试过程的关键方面，那么无头浏览器可能是一个不错的选择。</p><h1 id="7e0b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">无头浏览器测试的局限性</h1><p id="af45" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">当我们将测试与CI/CD管道集成时，无头浏览器测试是有用的，在CI/CD管道中，测试脚本自动运行，无需任何人工干预。</p><p id="6549" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这种情况下，不需要启动web浏览器，因为CI/CD管道会在晚上或凌晨自动运行，没有人会看到执行过程。</p><p id="8d2f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">即使我们在一个浏览器上运行一个测试，也需要大量的资源。如果我们并行运行我们的测试，那么可能会导致测试的执行速度变慢。</p><p id="d3a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了克服这个问题，我们可以在一个无头浏览器中执行我们的测试，在那里不需要打开浏览器就可以执行。它对系统资源的需求要少得多。</p><p id="4c47" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果几乎相同，但没有利用系统的GPU。</p><h2 id="548a" class="lg jp hi bd jq lh li lj ju lk ll lm jy jb ln lo kc jf lp lq kg jj lr ls kk lt bi translated">所以现在你可以理解无头浏览器测试的优势了</h2><p id="941b" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">与正常的测试执行相比，执行时间要少得多。这样在测试次数比较多的情况下，可以节省很多时间。</p><p id="1b63" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在将我们的测试与<a class="ae kr" rel="noopener" href="/javarevisited/top-10-free-courses-to-learn-jenkins-docker-and-kubernetes-for-devops-in-2020-best-of-lot-62a0541ffeb3"> CI/CD </a>管道集成时，无头模式对于测试的自动执行也很有用。因为它不需要GUI来执行测试。</p><p id="1f0e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">测试的整体性能也更好，因为打开web浏览器的开销被消除了。</p><p id="3509" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然观察到了无头测试的优势，但是我们可以从无头测试中观察到一些限制</p><h1 id="aada" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">缺点无头浏览器测试</h1><p id="c4be" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">我们不能总是使用无头模式来执行。为了从最终用户的角度检查整体用户体验，我们需要以正常的方式执行测试。</p><p id="5942" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果测试因为某些问题而失败，那么在无头模式下调试这些问题是很困难的。在这些情况下，需要正常执行。</p><p id="76dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在某些情况下，我们可能会遇到一个只能在headless模式下重现的bug。这些类型的错误不会对产品产生太大的影响。</p><h1 id="cf36" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">selenium中的无头自动化</h1><p id="76b0" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">如上所述，Selenium web驱动程序提供了各种驱动程序和配置，有助于在无头模式下运行selenium TC。</p><ul class=""><li id="05d4" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">使用无头Chrome浏览器运行Selenium测试用例。</li><li id="39a2" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">使用headless Firefox浏览器运行Selenium测试用例。</li><li id="ed9b" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">使用HTMLUnitDriver运行Selenium测试用例</li><li id="dd4c" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">并使用PhantomJs运行Selenium测试用例</li></ul><h1 id="db93" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">无头Chrome浏览器</h1><p id="e83e" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated"><a class="ae kr" href="https://developers.google.com/web/updates/2017/04/headless-chrome" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> <em class="lu">无头Chrome </em> </strong> </a>是一种在没有完整浏览器用户界面的无头环境中运行<em class="lu"> Chrome浏览器</em>的方式。<em class="lu">无头Chrome </em>为你提供了一个真实的浏览器环境，而没有运行完整版<em class="lu"> Chrome的内存开销。</em> <em class="lu">谷歌Chrome </em>从59版本开始提供无头执行。<em class="lu"> Selenium WebDriver </em>提供了一个名为<strong class="is hj"><em class="lu">“Chrome options”</em></strong>的类，可以指定某些配置来改变<em class="lu"> Chrome的默认行为。</em>其中一个配置是<strong class="is hj"> <em class="lu">【无头】</em> </strong>模式，它在运行测试用例时以<em class="lu">无头</em>模式启动<em class="lu"> Chrome </em></p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="4a27" class="lg jp hi ma b fi me mf l mg mh">if (browserName != null &amp;&amp; browserName.equals("chrome"))<br/>{<br/>    Class&lt;? extends WebDriver&gt; driverClass = ChromeDriver.class;<br/>    ChromeDriverManager.<em class="lu">getInstance</em>(driverClass).setup();<br/>    driver = new ChromeDriver();<br/>}<br/> else if (browserName != null &amp;&amp; browserName.equals("chromeHeadless"))<br/>{<br/>    Class&lt;? extends WebDriver&gt; driverClass = ChromeDriver.class;<br/>    ChromeDriverManager.<em class="lu">getInstance</em>(driverClass).setup();<br/>    ChromeOptions options = new ChromeOptions();<br/>    options.setHeadless(true);<br/>     //options.addArguments("--headless");<br/>    driver = new ChromeDriver(options);<br/>}</span></pre><h1 id="378b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">无头Firefox浏览器</h1><p id="5410" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">对于<strong class="is hj"> <em class="lu">无头火狐，</em> </strong>我们必须以和在无头Chrome中一样的方式工作。首先，我们将为<a class="ae kr" href="https://www.toolsqa.com/selenium-webdriver/selenium-geckodriver/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> <em class="lu"> Gecko驱动</em> </strong> </a> <em class="lu">(用于火狐浏览器)</em>设置路径，然后将选项设置为无头。在这里，我们使用<em class="lu"> Selenium WebDriver提供的<strong class="is hj"><em class="lu">firfox options</em></strong>类的<strong class="is hj"><em class="lu">set headless</em></strong><em class="lu">(true)</em>方法。</em></p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="e0cd" class="lg jp hi ma b fi me mf l mg mh">else if (browserName != null &amp;&amp; browserName.equals("firefox"))<br/>{<br/>    Class&lt;? extends WebDriver&gt; driverClass = FirefoxDriver.class;<br/>    FirefoxDriverManager.<em class="lu">getInstance</em>(driverClass).setup();<br/>    FirefoxOptions options = new FirefoxOptions();<br/>    options.setHeadless(true);<br/>    driver = new FirefoxDriver(options);<br/>}</span></pre><h1 id="bede" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">HtmlUnitDriver</h1><p id="1d37" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">为了实现无头测试，Selenium使用了<em class="lu"> HtmlUnitDriver、</em>这是<em class="lu"> WebDriver的另一个实现、</em>类似于<em class="lu"> FirefoxDriver、ChromeDriver、</em>等。HTMLUnitDriver 是一个外部依赖项，需要你显式添加库。</p><p id="66d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="lu">注:</em> </strong> <em class="lu">在早期版本的</em><a class="ae kr" href="https://javarevisited.blogspot.com/2018/02/top-5-selenium-webdriver-with-java-courses-for-testers.html" rel="noopener ugc nofollow" target="_blank"><em class="lu">Selenium</em></a><em class="lu">(2.53版之前)中，在Selenium库内部就有HtmlUnitDriver，不需要外部下载jar。虽然仍然支持这个驱动程序，但它现在是一个独立的依赖项，使用Html单元框架。这些依赖项需要像其他jar一样添加到项目中，或者您可以添加maven依赖项</em></p><p id="3120" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下载<em class="lu"> HtmlUnitDriver </em>依赖项</p><p id="6de6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">1.导航到<a class="ae kr" href="https://github.com/SeleniumHQ/htmlunit-driver/releases" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="lu">https://github.com/SeleniumHQ/htmlunit-driver/releases</em></strong></a>。</p><p id="043b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.点击最新版本的HTML单元驱动程序</p><p id="d830" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.添加到java构建路径，或者您可以添加maven依赖项</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="4633" class="lg jp hi ma b fi me mf l mg mh">&lt;dependency&gt;<br/>    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;<br/>    &lt;artifactId&gt;htmlunit-driver&lt;/artifactId&gt;<br/>    &lt;version&gt;3.61.0&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="dc8e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注释01—</p><p id="1050" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该语法将构造一个新实例，禁用<a class="ae kr" href="https://www.toolsqa.com/javascript/javascript-tutorial/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="lu">JavaScript</em></strong></a>，并使用默认浏览器版本。如果您的应用程序需要一些<em class="lu"> JavaScript </em>功能，您可以使用下面文章中提到的配置来启用这些功能:</p><h2 id="0826" class="lg jp hi bd jq lh li lj ju lk ll lm jy jb ln lo kc jf lp lq kg jj lr ls kk lt bi translated">用于在HtmlUnitWebDriver中启用JavaScript支持</h2><p id="057b" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated"><em class="lu"> HtmlUnitWebDriver </em>默认情况下不启用<a class="ae kr" href="https://www.toolsqa.com/javascript/javascript-tutorial/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="lu">JavaScript</em></strong></a>。意思是在上面的代码中，如果你试图执行<em class="lu"> JavaScript </em>，就会抛出一个错误，说明<a class="ae kr" rel="noopener" href="/javarevisited/5-free-books-to-learn-javascript-for-beginners-4cca79834262"> JavaScript </a>没有启用。要创建启用了<em class="lu"> JavaScript </em>的驱动实例，可以使用构造函数<strong class="is hj"><em class="lu">HtmlUnitDriver</em></strong><em class="lu">(布尔启用JavaScript)和</em>将值设置为true，如下所示</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="0067" class="lg jp hi ma b fi me mf l mg mh">else if (browserName != null &amp;&amp; browserName.equals("HtmlUnitDriver"))<br/>{<br/>      driver = new HtmlUnitDriver(true);<br/><br/>}</span></pre><p id="142e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，这将创建一个启用了<a class="ae kr" rel="noopener" href="/javarevisited/my-favorite-free-tutorials-and-courses-to-learn-javascript-8f4d0a71faf2"> <em class="lu"> JavaScript </em> </a>的<em class="lu"> HtmlUnitDriver、</em>的实例。</p><p id="13a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注释02 —</p><p id="9b9c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，当我们使用默认选项<em class="lu"> HTMLUnitDriver，</em>运行测试用例时，它选择了浏览器。默认情况下，该浏览器位于您的计算机上。如果你也想在一个特定的浏览器版本中执行测试用例，你也可以在<em class="lu"> HTMLUnitDriver的帮助下做同样的事情。</em>让我们来了解一下如何实现同样的目标:</p><p id="3656" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lu"> HtmlUnitDriver </em>允许你选择你想要运行测试的浏览器版本。主要支持的浏览器有<strong class="is hj"> <em class="lu"> Chrome、Firefox、Internet Explorer。</em> </strong>我们可以使用不同版本的浏览器，绕过构造函数中的值，用指定的版本创建新的实例</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="d3f1" class="lg jp hi ma b fi me mf l mg mh">else if (browserName != null &amp;&amp; browserName.equals("HtmlUnitDriver"))<br/>{<br/>      driver = new HtmlUnitDriver(BrowserVersion.<em class="lu">EDGE</em>);<br/><br/>}</span></pre><h1 id="f0a3" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">幻象</h1><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/2802fe4ab10697c9baba4de8d245b73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*e9c06Nrh-vhoFw-p.png"/></div></div></figure><p id="3a37" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">PhantomJS是一个带有JavaScript API的无头浏览器。它是无头网站测试、访问和操作网页的最佳解决方案&amp;带有标准的DOM API。</p><p id="124f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了使用含硒的幻想曲，必须使用GhostDriver。<strong class="is hj"> GhostDriver </strong>是web driver Wire protocol is simple JS for PhantomJS的实现。</p><p id="16ae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最新发布的PhatomJS已经集成了<strong class="is hj">ghost driver</strong>和<strong class="is hj">不需要单独安装。</strong></p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="9ce1" class="lg jp hi ma b fi me mf l mg mh">else if (browserName != null &amp;&amp; browserName.equals("phantomjs"))<br/>{<br/>    System.<em class="lu">setProperty</em>("phantomjs.binary.path","/Users/preethi/Documents/Presonal/Own Project/phantomjs-2.1.1-macosx/bin/phantomjs");<br/>     driver= new PhantomJSDriver();<br/>}</span></pre><p id="282c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是代码的完整实现</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="168e" class="lg jp hi ma b fi me mf l mg mh">class BrowserFactory {<br/>    static WebDriver getBrowser(String browserName) {<br/><br/>        WebDriver driver;<br/><br/>        if (browserName != null &amp;&amp; browserName.equals("chrome"))<br/>        {<br/>            Class&lt;? extends WebDriver&gt; driverClass = ChromeDriver.class;<br/>            ChromeDriverManager.<em class="lu">getInstance</em>(driverClass).setup();<br/>            driver = new ChromeDriver();<br/>        }<br/>         else if (browserName != null &amp;&amp; browserName.equals("chromeHeadless"))<br/>        {<br/>            Class&lt;? extends WebDriver&gt; driverClass = ChromeDriver.class;<br/>            ChromeDriverManager.<em class="lu">getInstance</em>(driverClass).setup();<br/>            ChromeOptions options = new ChromeOptions();<br/>            options.setHeadless(true);<br/>             //options.addArguments("--headless");<br/>            driver = new ChromeDriver(options);<br/>        }<br/>        else if (browserName != null &amp;&amp; browserName.equals("firefox"))<br/>        {<br/>            Class&lt;? extends WebDriver&gt; driverClass = FirefoxDriver.class;<br/>            FirefoxDriverManager.<em class="lu">getInstance</em>(driverClass).setup();<br/>            FirefoxOptions options = new FirefoxOptions();<br/>            options.setHeadless(true);<br/>            driver = new FirefoxDriver(options);<br/>        }<br/>        else if (browserName != null &amp;&amp; browserName.equals("HtmlUnitDriver"))<br/>        {<br/>              driver = new HtmlUnitDriver(BrowserVersion.<em class="lu">EDGE</em>);<br/><br/>        }<br/>        else if (browserName != null &amp;&amp; browserName.equals("phantomjs"))<br/>        {<br/>            System.<em class="lu">setProperty</em>("phantomjs.binary.path","/Users/preethi/Documents/Presonal/Own Project/phantomjs-2.1.1-macosx/bin/phantomjs");<br/>             driver= new PhantomJSDriver();<br/>        }<br/>        else {<br/>            Class&lt;? extends WebDriver&gt; driverClass = ChromeDriver.class;<br/>            ChromeDriverManager.<em class="lu">getInstance</em>(driverClass).setup();<br/>            driver = new ChromeDriver();<br/>        }<br/><br/>        driver.manage().window().maximize();<br/>        driver.manage().timeouts().implicitlyWait(Wait.<em class="lu">EXPLICIT_WAIT</em>, TimeUnit.<em class="lu">SECONDS</em>);<br/>        return driver;<br/>    }<br/>}</span></pre><p id="50a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢您的阅读…</p></div></div>    
</body>
</html>