<html>
<head>
<title>What are the new features for Java 14?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java 14有哪些新特性？</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/what-are-the-new-features-for-java-14-c1981f6e0551?source=collection_archive---------0-----------------------#2020-04-13">https://medium.com/javarevisited/what-are-the-new-features-for-java-14-c1981f6e0551?source=collection_archive---------0-----------------------#2020-04-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><a href="https://medium.com/javarevisited/top-5-java-online-courses-for-beginners-best-of-lot-1e1e240a758"><div class="er es if"><img src="../Images/4303f9b193feb9114a14820fa7e247d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W5ddUPE6HSJLmD6o.png"/></div></a></figure><p id="9f95" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Java 14现已上市！Java 14 (Java SE 14)及其Java开发工具包14 (JDK 14)开源已于2020年3月17日发布，是世界上最通用的编码语言和应用平台。</p><h1 id="a740" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">新功能</h1><p id="d071" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">以下是Java 14的新特性。</p><p id="0d7c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">参考资料:【https://openjdk.java.net/projects/jdk/14/】T2</p><p id="d917" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">针对开发者:</strong></p><p id="3b1e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">1–305:instance of的模式匹配(预览)<br/>2–358:有用的NullPointerExceptions<br/>3–359:记录(预览)<br/>4–361:开关表达式(标准)<br/>5–368:文本块(第二次预览)</p><p id="e8d2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">其他功能/工具</strong></p><p id="21d5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">1–343:打包工具(孵化器)<br/>2–345:NUMA感知的G1内存分配<br/>3–349:JFR事件流<br/>4–352:非易失映射字节缓冲区<br/>5–362:弃用Solaris和SPARC端口<br/>6–363:删除并发标记清除(CMS)垃圾收集器<br/>7–364:MAC OS上的ZGC<br/>8–365:Windows上的ZGC【T19</p><p id="de1f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">针对开发者:</strong></p><p id="0afa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> 305:实例的模式匹配(预览)</strong></p><p id="e68a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">请任何Java开发人员展示他们的代码库，你会在整个代码中很好地使用条件实例。具体来说，条件检查的实例之后通常是类型转换。</p><p id="2593" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Java 14之前:</p><blockquote class="ko kp kq"><p id="6660" class="im in kr io b ip iq ir is it iu iv iw ks iy iz ja kt jc jd je ku jg jh ji jj hb bi translated"><code class="du kv kw kx ky b">if (obj instanceof String) {<br/> String item = (String) obj;<br/> System.out.println(item);<br/>}</code></p></blockquote><p id="2622" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Java 14以上版本:</p><blockquote class="ko kp kq"><p id="3aaa" class="im in kr io b ip iq ir is it iu iv iw ks iy iz ja kt jc jd je ku jg jh ji jj hb bi translated">在上面的代码中，只有当obj是String类型时，实例s才会被赋值。变量的范围仅限于条件块。</p></blockquote><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="6e21" class="lh jl hi ky b fi li lj l lk ll">more example :</span><span id="4bc9" class="lh jl hi ky b fi lm lj l lk ll">if (obj instanceof String str &amp;&amp; str.length() &gt; 5) {..    str.contains(..) ..<br/>}<br/><br/>if (obj instanceof String str || str.length() &gt; 5) {.. str.contains(..) ..<br/>}</span><span id="cb70" class="lh jl hi ky b fi lm lj l lk ll">if (!(obj instanceof String str)) {<br/>    .. str.contains(..) .. // no need to declare str object again with casting<br/>} else {<br/>    .. str....<br/>}</span></pre><h1 id="39b5" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak"> 358:有用的空指针异常</strong></h1><p id="b2f0" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">空指针异常对于任何开发人员来说都是一场噩梦。以前，直到Java 13，调试声名狼藉的npe都很棘手。开发人员不得不求助于其他调试工具，或者手动确定为空的变量/方法，因为堆栈跟踪只会显示行号。</p><p id="d3e5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Java 14之前</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="8168" class="lh jl hi ky b fi li lj l lk ll">Author author = null;<br/>String name = author.getName()</span><span id="cdb8" class="lh jl hi ky b fi lm lj l lk ll">//Stacktrace<br/>Exception in thread "main"at NullPointerExample.main(NullPointerExample.java:5)</span></pre><p id="db7f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Java 14以后</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="7528" class="lh jl hi ky b fi li lj l lk ll">Java 14 introduced a new JVM feature which gives better insights with a more descriptive stack as shown below:</span><span id="2b23" class="lh jl hi ky b fi lm lj l lk ll">Exception in thread "main"<!-- --> <!-- -->java.lang.NullPointerException: Cannot invoke "author.getName()"<!-- --> <!-- -->because the <strong class="ky hj">return</strong> <!-- -->value of "author"<!-- --> <!-- -->is <strong class="ky hj">null<br/></strong>at NullPointerExample.main(NullPointerExample.java:4)</span><span id="323b" class="lh jl hi ky b fi lm lj l lk ll"><strong class="ky hj">Note</strong>: The above feature is not a language feature. It’s an enhancement in the runtime environment.</span></pre><h1 id="a478" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak"> 359:记录(预览)</strong></h1><p id="2c18" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">这是JDK 14中的预览语言功能。它用于压缩记录的类声明语法。</p><p id="0773" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们需要编写大量低价值、重复的代码来负责任地编写一个简单的数据类:构造函数、访问函数、equals()、hashCode()、toString()等。</p><p id="75c5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了避免这种重复的代码，Java计划使用记录语法。</p><p id="550c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">之前:</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="851b" class="lh jl hi ky b fi li lj l lk ll">final class Author{<br/>    public final String name;<br/>    public final int age;<br/><br/>    public Author(String name, int age) {<br/>        this.name = name;<br/>        this.age = age;<br/>    }<br/><br/>    // state-based implementations of equals, hashCode, toString<br/>    // nothing else</span></pre><p id="a102" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">带有记录语法的Java 14</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="6e51" class="lh jl hi ky b fi li lj l lk ll">record <!-- -->Author<!-- -->(int name, int age){}</span><span id="e9c2" class="lh jl hi ky b fi lm lj l lk ll"><br/>//Static field</span><span id="95b6" class="lh jl hi ky b fi lm lj l lk ll">record Author (<strong class="ky hj">int</strong> <!-- -->id, String name, String topic) {<br/>   <strong class="ky hj">static</strong> <strong class="ky hj">int</strong> <!-- -->followers;<br/>   <strong class="ky hj">public</strong> <strong class="ky hj">static</strong> <!-- -->String followerCount() {<br/>      <strong class="ky hj">return</strong> <!-- -->"Followers are "+ followers;<br/>   }</span><span id="e509" class="lh jl hi ky b fi lm lj l lk ll"><strong class="ky hj">   public</strong> <!-- -->String description(){<br/>     <strong class="ky hj">return</strong> <!-- -->"Author "+ name + " writes on "+ topic;<br/>   }</span><span id="a127" class="lh jl hi ky b fi lm lj l lk ll"><strong class="ky hj">   public</strong> <!-- -->Author{<br/>      <strong class="ky hj">if</strong> <!-- -->(id &lt; 0) {<br/>         <strong class="ky hj">throw</strong> <strong class="ky hj">new</strong> <!-- -->IllegalArgumentException( "id must be greater than 0.");<br/>    }<br/>  }<br/>}</span></pre><h1 id="2968" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">记录可以实现接口</h1><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="0099" class="lh jl hi ky b fi li lj l lk ll">record Author(String name, String topic) <strong class="ky hj">implements</strong> <!-- -->Information {</span><span id="488c" class="lh jl hi ky b fi lm lj l lk ll"><strong class="ky hj">   public</strong> <!-- -->String getFullName() {<br/>      <strong class="ky hj">return</strong> <!-- -->"Author "+ name + " writes on "<!-- --> <!-- -->+ topic;<br/>  }<br/>}</span><span id="6280" class="lh jl hi ky b fi lm lj l lk ll"><strong class="ky hj">interface</strong> <!-- -->Information {<br/>   String getFullName();<br/>}</span></pre><h1 id="20f1" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">记录支持多个构造函数</h1><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="4683" class="lh jl hi ky b fi li lj l lk ll">record Author(String name, String topic) {<br/>  public Author() {<br/> <br/>    this("NA", "NA");<br/>  }<br/> <br/>  public Author(String name) {<br/> <br/>    this(name, "NA");<br/>  }<br/>}</span></pre><h1 id="b090" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">记录允许修改访问器方法</h1><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="2e83" class="lh jl hi ky b fi li lj l lk ll">record Author(String name, String topic) {<br/>  public String name() {<br/>        return "This article was written by " + this.name;<br/>    }<br/>}</span></pre><p id="4341" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">使用记录的限制:</strong> <br/> -记录不能扩展任何其他类，除了对应于状态描述的组件的私有final字段之外，不能声明实例字段。<br/> -记录是隐式最终的，不能是抽象的，这样的限制强调了记录的API完全由它的状态定义来定义，并且不能被另一个类或记录修改。<br/> -记录的组成部分是最终的。</p><h1 id="8781" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak"> 361:开关表达式(标准)</strong></h1><p id="362a" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">java 14之前</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="7b20" class="lh jl hi ky b fi li lj l lk ll">switch (day) {<br/>    case MONDAY:<br/>    case FRIDAY:<br/>    case SUNDAY:<br/>        System.out.println(100);<br/>        break;<br/>    case TUESDAY:<br/>        System.out.println(200);<br/>        break;<br/>    case THURSDAY:<br/>    case SATURDAY:<br/>        System.out.println(300);<br/>        break;<br/>    case WEDNESDAY:<br/>        System.out.println(400);<br/>        break;<br/>}</span></pre><p id="9201" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在使用Java 14之后</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="f877" class="lh jl hi ky b fi li lj l lk ll">switch (day) {<br/>    case MONDAY, FRIDAY, SUNDAY -&gt; System.out.println(100);<br/>    case TUESDAY                -&gt; System.out.println(200);<br/>    case THURSDAY, SATURDAY     -&gt; System.out.println(300);<br/>    case WEDNESDAY              -&gt; System.out.println(400);<br/>}</span><span id="d7b4" class="lh jl hi ky b fi lm lj l lk ll"><br/>another example:</span><span id="d343" class="lh jl hi ky b fi lm lj l lk ll">int numLetters = switch (day) {<br/>    case MONDAY, FRIDAY, SUNDAY -&gt; 100;<br/>    case TUESDAY                -&gt; 200;<br/>    case THURSDAY, SATURDAY     -&gt; 300;<br/>    case WEDNESDAY              -&gt; 400;<br/>};</span><span id="04e9" class="lh jl hi ky b fi lm lj l lk ll">//Yielding a value - introduce a new yield<br/>int value = switch (day) {<br/>    case MONDAY  -&gt; 100;<br/>    case TUESDAY -&gt; 200;<br/>    default      -&gt; {<br/>        int d = day.toString().length();<br/>        int result = f(d);<br/>        yield result;<br/>    }<br/>};</span></pre><h1 id="1a9a" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak"> 368:文本块(第二次预览)</strong></h1><p id="b744" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">文本块是作为Java 13中的一个预览特性引入的，目的是允许轻松创建多行字符串文字。它有助于轻松创建HTML和JSON或<a class="ae kn" rel="noopener" href="/hackernoon/top-5-sql-and-database-courses-to-learn-online-48424533ac61"> SQL查询字符串</a>。</p><p id="fbd4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在Java 14中，文本块仍然在预览中，只是增加了一些新的内容。我们现在可以使用:</p><p id="785a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">-反斜杠，用于显示好看的多行字符串块。<br/> -\s用于考虑缺省情况下被编译器忽略的尾随空格。它保留了它前面的所有空间</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="b640" class="lh jl hi ky b fi li lj l lk ll">String text = """<br/>               Did you know \<br/>               Java 14<!-- --> <!-- -->\<br/>               has the most features among\<br/>               all non-LTS versions so far\<br/>             """;</span><span id="3c62" class="lh jl hi ky b fi lm lj l lk ll">String text2 = """<br/>                 line1<br/>                 line2 \s<br/>                 line3<br/>               """;</span><span id="48e9" class="lh jl hi ky b fi lm lj l lk ll">String text3 = "line1\nline2 \nline3\n"</span><span id="af0b" class="lh jl hi ky b fi lm lj l lk ll">//text2 and text3 are equal.</span></pre><p id="ece9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">其他功能/工具:</strong></p><h1 id="9190" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">包装工具(培养箱)</h1><p id="e3bc" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">目前，Java应用程序通常作为简单的JAR文件分发。然而，这不是很方便，尤其是对于应用程序的用户来说。如果Java应用程序是像Windows上的MSI或Mac上的DMG那样的可安装包，那就好得多了。这将允许以用户熟悉的方式分发、安装和卸载Java应用程序。</p><p id="9de2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><a class="ae kn" href="https://openjdk.java.net/jeps/343" rel="noopener ugc nofollow" target="_blank"> JEP 343 </a>引入了<code class="du kv kw kx ky b">jpackage</code>工具，该工具将Java应用打包成一个特定于平台的包，该包包含所有必需的依赖项。Java 14可以支持这个jpackage工具，但还不完全支持。</p><ul class=""><li id="8720" class="ln lo hi io b ip iq it iu ix lp jb lq jf lr jj ls lt lu lv bi translated">Linux上的DEB和RPM</li><li id="c79d" class="ln lo hi io b ip lw it lx ix ly jb lz jf ma jj ls lt lu lv bi translated">苹果电脑上的PKG和DMG</li><li id="9167" class="ln lo hi io b ip lw it lx ix ly jb lz jf ma jj ls lt lu lv bi translated">Windows上的MSI和EXE</li></ul><p id="7204" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">请通过<a class="ae kn" href="https://openjdk.java.net/projects/jdk/14/" rel="noopener ugc nofollow" target="_blank">https://openjdk.java.net/projects/jdk/14/</a>查看更多细节</p><p id="0929" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您可能喜欢的其他Java文章:</p><div class="mb mc ez fb md me"><a rel="noopener follow" target="_blank" href="/javarevisited/what-java-programmers-should-learn-in-2020-648050533c83"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hj fi z dy mj ea eb mk ed ef hh bi translated">2020年Java程序员该学什么？</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">2020年Java程序员可以学习的有用工具、技术、框架和库</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">medium.com</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms ik me"/></div></div></a></div><div class="mb mc ez fb md me"><a rel="noopener follow" target="_blank" href="/javarevisited/top-5-courses-to-learn-new-features-of-java-8-to-java-13-107eb51d2a13"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hj fi z dy mj ea eb mk ed ef hh bi translated">学习Java 8到Java 13新特性的前5门课程</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">从Java 8到Java 13引入了许多有用的特性，如lambda表达式、流API、新日期和…</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">medium.com</p></div></div><div class="mn l"><div class="mt l mp mq mr mn ms ik me"/></div></div></a></div><div class="mb mc ez fb md me"><a rel="noopener follow" target="_blank" href="/javarevisited/what-next-for-senior-developers-in-tech-project-manager-technical-architect-or-a-devops-engineer-b532a80c9ba1"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hj fi z dy mj ea eb mk ed ef hh bi translated">高科技领域的高级开发人员接下来会做什么？项目经理、技术架构师或DevOps工程师</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">是时候考虑职业生涯的下一个层次了。</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">medium.com</p></div></div><div class="mn l"><div class="mu l mp mq mr mn ms ik me"/></div></div></a></div></div></div>    
</body>
</html>