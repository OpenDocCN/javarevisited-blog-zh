<html>
<head>
<title>Why you should NOT use Functions in Angular HTML</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么不应该在Angular HTML中使用函数</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/why-you-should-not-use-functions-in-angular-html-f445371a4b6b?source=collection_archive---------0-----------------------#2021-09-05">https://medium.com/javarevisited/why-you-should-not-use-functions-in-angular-html-f445371a4b6b?source=collection_archive---------0-----------------------#2021-09-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="359a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Angular最佳实践集</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7fbba53eb1db64912b649a7c0162dfb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7w42zVMzwHsPsfcuWxY4UQ.jpeg"/></div></div></figure><h1 id="96e2" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">介绍</h1><p id="4e07" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">如果你在一个稍微复杂一点的项目中使用Angular，你将——很有可能——开始编写组件函数来编辑或转换某种你想在组件中显示的数据。如果你不熟悉Angular的方法，你可以使用你在HTML文件中写的函数，你会发现它很有效！。所以一切都很好，不是吗？</p><p id="4546" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不幸的是，不尽然。在本教程中，您将了解为什么这是一个非常糟糕的实践，以及如何以一种干净、可维护的方式解决这个问题。</p><h1 id="5d4d" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">先决条件</h1><p id="f79b" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">要理解为什么在<a class="ae ks" rel="noopener" href="/javarevisited/10-best-html-and-css-courses-for-beginners-in-2021-6757eec00032"> HTML </a>中调用函数是非常糟糕的，如果你过度使用它，会大大降低你的应用程序的速度，你需要了解有角度的<a class="ae ks" href="https://angular.io/guide/lifecycle-hooks" rel="noopener ugc nofollow" target="_blank">生命周期钩子</a>。</p><p id="91ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简而言之，这些是一堆函数，具体来说就是<strong class="ih hj">15</strong>T8】函数，每次创建、编辑并最终销毁组件时都会执行这些函数，这是检测应用程序变化的角度方式。</p><blockquote class="kt ku kv"><p id="7358" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc hb bi translated">Angular在每个DOM事件之后运行的<a class="ae ks" href="https://angular.io/guide/glossary#change-detection" rel="noopener ugc nofollow" target="_blank">变化检测</a>过程中寻找数据绑定值的变化:每次击键、鼠标移动、定时器滴答和服务器响应。</p></blockquote><p id="fde0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">图1显示了从创建一个组件的第一步到销毁该组件所执行的所有生命周期挂钩。更多信息请参见<a class="ae ks" href="https://angular.io/guide/lifecycle-hooks#peek-a-boo" rel="noopener ugc nofollow" target="_blank">官方文件</a>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://www.java67.com/2020/08/5-best-online-courses-to-learn-html-5.html"><div class="er es la"><img src="../Images/52c00e42dbf2b36a493344746f15cb4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*u80plkpICLJYAgHfBjZ3wQ.png"/></div></a><p class="lb lc et er es ld le bd b be z dx translated">图1:躲猫猫日志</p></figure><h1 id="aa74" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">问题</h1><p id="040a" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">因此，你可以想象一下，如果你有一个像样的应用程序，你以嵌套的方式组织你的组件，以利于代码的可重用性，你有一个组件下面有10个嵌套组件，你有一个函数在最少嵌套的组件中调用。对于任何DOM事件，这个函数将被调用大约15 x 10 = <strong class="ih hj"> 150次</strong>！</p><p id="1a72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了降低应用程序的速度之外，如果您在调用的这些函数中有任何逻辑，那么您就冒着破坏这种逻辑的风险，并且您在应用程序中引入了一个巨大的不可预测性来源。</p><p id="3bab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么，如何将函数调用的范围限制为仅当其输入发生变化时，而不是其他情况呢？</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lf lg l"/></div></figure><h1 id="ea88" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">管道救援</strong></h1><p id="73e4" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">Angular有一个很大的用途，叫做管道，你可以在这种情况下使用，请参考这里的<a class="ae ks" href="https://angular.io/guide/pipes" rel="noopener ugc nofollow" target="_blank">官方文件</a>。如果您熟悉Linux管道，那么几乎没有什么新东西需要学习。如果没有，那么继续阅读。</p><p id="fead" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基本上，pipes允许您对输入执行转换代码并返回结果，就像任何普通函数一样，<strong class="ih hj"> <em class="kw">但是，</em> </strong> <a class="ae ks" rel="noopener" href="/javarevisited/10-courses-to-learn-angular-for-web-development-6da1bd2856dc"> Angular </a>只在检测到输入值或引用的变化时才执行管道，而不是所有的生命周期挂钩。</p><p id="ffa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，编写前面提到的代码片段的更好方法如下:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lf lg l"/></div></figure><p id="c177" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以创建一个如下所示的管道:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lf lg l"/></div></figure><p id="d2df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个重构步骤还将有助于提高整个应用程序的代码可重用性，因为您现在可以在应用程序中的任何地方使用这个管道，而不需要在需要使用的每个组件中编写转换逻辑，就像使用<a class="ae ks" rel="noopener" href="/javarevisited/my-favorite-free-tutorials-and-courses-to-learn-javascript-8f4d0a71faf2">普通JS </a>函数一样。</p><p id="4c41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">管道通过<code class="du lh li lj lk b">args</code>数组接受不确定数量的参数。您可以将任何其他参数传递给它，并稍后在<code class="du lh li lj lk b">transfom </code>函数中访问它们。</p><h1 id="0927" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">警告</h1><p id="1422" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">请记住，管道的这种行为仅适用于原始输入值，如<code class="du lh li lj lk b">String</code>或<code class="du lh li lj lk b">Number</code>，或者一个对象引用。这意味着如果您将一个数组传递给管道，然后您通过添加/移除一个项目来更改<a class="ae ks" rel="noopener" href="/javarevisited/two-sum-coding-problem-how-to-find-all-pairs-which-adds-to-a-given-sum-in-an-array-in-java-a396be0f308d">数组</a>，管道将<strong class="ih hj">不会检测到</strong>这种更改。至于管道，这是对象的相同参考。</p><p id="0b8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要解决这个问题，你有两种可能:</p><p id="88fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1-每次编辑<a class="ae ks" rel="noopener" href="/javarevisited/20-array-coding-problems-and-questions-from-programming-interviews-869b475b9121?source=---------15------------------">数组</a>时返回一个新数组(新引用)(推荐给性能苛刻的应用)。</p><p id="8c15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2-使管道不纯，它本质上将像一个函数，将在所有的生命周期钩子中执行。</p></div></div>    
</body>
</html>