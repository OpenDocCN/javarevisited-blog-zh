<html>
<head>
<title>Start Mongo DB Cluster on MacOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在MacOS上启动Mongo DB集群</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/start-mongo-db-cluster-on-localhost-a87de276595f?source=collection_archive---------1-----------------------#2020-07-24">https://medium.com/javarevisited/start-mongo-db-cluster-on-localhost-a87de276595f?source=collection_archive---------1-----------------------#2020-07-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9af073c55ca5c8e936438a9f0c86bc17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q6gFUuUFoe9lcRwZdPYDaw.jpeg"/></div></div></figure><p id="1195" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将mongo作为独立的单个实例启动非常简单。但是在生产环境中，mongo db总是以集群格式运行。</p><p id="b97b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，如何在您的本地机器上或者在临时实例上或者出于测试目的复制相同的集群格式<a class="ae jo" href="https://javarevisited.blogspot.com/2019/01/top-5-mongodb-online-training-courses.html" rel="noopener ugc nofollow" target="_blank"> mongo db </a>变得至关重要。</p><p id="c50d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些步骤包括:</p><ol class=""><li id="a6e1" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">下载mongo二进制文件(Mongo安装)</li><li id="eb7c" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">为集群的不同节点创建数据目录</li><li id="63ef" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">启动指向不同端口的mongo节点(因为我们在一台机器上运行所有节点)</li><li id="b736" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">启动副本集</li><li id="37c1" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">随时可以使用</li></ol></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h2 id="28a2" class="kk kl hi bd km kn ko kp kq kr ks kt ku jb kv kw kx jf ky kz la jj lb lc ld le bi translated">1.下载mongo二进制文件</h2><p id="be79" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">从<a class="ae jo" href="https://www.mongodb.com/try/download/community" rel="noopener ugc nofollow" target="_blank"> mongo官网</a>下载任意mongo库。</p><p id="3280" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">提取本地目录中的二进制文件。假设我们提取了/Users/my user/Documents/MongoDB中的二进制文件。</p><h2 id="96ce" class="kk kl hi bd km kn ko kp kq kr ks kt ku jb kv kw kx jf ky kz la jj lb lc ld le bi translated">2.为集群的不同节点创建数据目录</h2><p id="9845" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">现在，为集群的每个节点创建不同的数据目录。为简单起见，让我们用节点本身的名称来创建目录。</p><blockquote class="lk ll lm"><p id="2b80" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated">mkdir-p/Users/my user/data/MongoDB/rs0–0</p><p id="dfad" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated">mkdir-p/Users/my user/data/MongoDB/rs0–1</p><p id="3952" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated">mkdir-p/Users/my user/data/MongoDB/rs0–2</p></blockquote><p id="2149" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建指向mongo二进制文件的软链接，如下所示:</p><blockquote class="lk ll lm"><p id="f4b7" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated">sudo CP/Users/my user/Documents/MongoDB/bin/*/usr/local/bin</p><p id="16d7" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated">sudo ln-s/Users/my user/Documents/MongoDB/bin/*/usr/local/bin</p></blockquote><h2 id="696e" class="kk kl hi bd km kn ko kp kq kr ks kt ku jb kv kw kx jf ky kz la jj lb lc ld le bi translated">3.启动指向不同端口的mongo节点</h2><blockquote class="lk ll lm"><p id="ef52" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated">CD/Users/my user/Documents/MongoDB/bin</p></blockquote><p id="4554" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">mongod — replSet rs0 —端口27017—bind _ IP localhost—dbpath/Users/my user/data/MongoDB/rs0–0—oplogSize 128</p><p id="cf08" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在终端中打开新标签，并启动另一个节点</p><blockquote class="lk ll lm"><p id="edf5" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated">mongod — replSet rs0 —端口27018—bind _ IP localhost—dbpath/Users/my user/data/MongoDB/rs0–1—oplogSize 128</p></blockquote><p id="64e8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在终端中打开另一个标签，并启动第三个节点</p><blockquote class="lk ll lm"><p id="dc48" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated">mongod — replSet rs0 —端口27019—bind _ IP localhost—dbpath/Users/my user/data/MongoDB/rs0–2—oplogSize 128</p></blockquote><h2 id="44f5" class="kk kl hi bd km kn ko kp kq kr ks kt ku jb kv kw kx jf ky kz la jj lb lc ld le bi translated">4.启动副本集</h2><p id="187c" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">现在，打开新选项卡并连接到在端口27017上运行的节点，如下所示:</p><blockquote class="lk ll lm"><p id="f8e7" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated">蒙戈港27017</p></blockquote><p id="8bbe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在你在mongo控制台。现在，我们需要使用以下命令启动副本集:</p><blockquote class="lk ll lm"><p id="8da6" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated">rs.initiate({ <br/> … _id: "rs0 "，<br/> …成员:[ <br/> … { <br/> … _id: 0，<br/> …主机:" localhost:27017" <br/> … }，<br/> … { <br/> … _id: 1，<br/> …主机:" localhost:27018" <br/> … }，<br/> … { <br/> … _id: 2，<br/> …主机:" localhost:227。</p></blockquote><h2 id="8980" class="kk kl hi bd km kn ko kp kq kr ks kt ku jb kv kw kx jf ky kz la jj lb lc ld le bi translated">5.随时可以使用。</h2><p id="1356" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">现在您的mongo集群已经准备好了，您可以将它与您的应用程序连接起来。</p><p id="553e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">希望这是有益的。快乐学习！！！</p></div></div>    
</body>
</html>