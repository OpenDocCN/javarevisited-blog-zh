<html>
<head>
<title>Everything you’ve been taught about writing comments is wrong. Here’s why</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你所学的关于写评论的一切都是错的。原因如下</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/everything-youve-been-taught-about-writing-comments-is-wrong-here-s-why-e529e3f5bf7e?source=collection_archive---------2-----------------------#2021-06-15">https://medium.com/javarevisited/everything-youve-been-taught-about-writing-comments-is-wrong-here-s-why-e529e3f5bf7e?source=collection_archive---------2-----------------------#2021-06-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c3a6633a68d5cdafd8ad3f40df685cd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Aj8xlCcg5jmBy0OFrAoqDw.png"/></div></div></figure><p id="2c47" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有些人爱评论，到处写，有些人讨厌评论，根本不写。你应该在中间，甚至更偏向于“我不写评论”，但也有你应该的地方。</p><p id="1b38" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇文章是名为<a class="ae jo" href="https://rebrand.ly/spcc-comments" rel="noopener ugc nofollow" target="_blank"> clean code:在7天内提升你的编程生涯</a>的Clean Code深度课程的一部分，你可以去看看。它目前以87%的折扣出售。</p><figure class="jq jr js jt fd ij er es paragraph-image"><a href="https://rebrand.ly/spcc-comments"><div class="er es jp"><img src="../Images/dc9c4358d48d8c1502f7fa18c29da201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*yDVe-HZhy4OdzzOSYdnP6A.png"/></div></a></figure><p id="e468" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不用到处写评论。你不需要。你是一个程序员，你知道如何阅读代码。尤其是当你遵循“小方法”原则的时候。你可以在<a class="ae jo" rel="noopener" href="/javarevisited/a-key-to-clean-code-small-methods-cff120538eba">https://medium . com/Java re visited/a-key-to-clean-code-small-methods-CFF 120538 EBA</a>上了解更多相关信息</p><p id="f630" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们希望我们的代码是“自文档化的”。那就是:你写的代码是如此的描述性，以至于你不需要注释。它是自我表达的。你可以像读散文一样读它。这才是你应该努力争取的。</p><p id="9a4f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看一些例子:</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ju jv l"/></div></figure><p id="d383" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些评论有帮助吗？<em class="jw">“这田是为年”，“这田是为日”</em>……我知道我能读。我可以看到这是一个<strong class="is hj">字段</strong>，我可以看到它的<strong class="is hj">名称</strong>。对此我不需要评论。参见方法注释:<em class="jw">“此方法计算两个日期之间的差异”</em>。它只是重复方法的名称。这样写评论没什么意义。不要这样做。这有两个主要原因:</p><ol class=""><li id="8237" class="jx jy hi is b it iu ix iy jb jz jf ka jj kb jn kc kd ke kf bi translated">这是不需要的，因为它非常清楚，即使没有他们</li><li id="198e" class="jx jy hi is b it kg ix kh jb ki jf kj jj kk jn kc kd ke kf bi translated">这需要更多的时间和精力，因为你需要更新评论和思考它们。很多时候你可能不会更新它们。他们变得更加无用。它们不仅变得毫无用处，而且还可能产生误导。</li></ol><p id="eba2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我认为这个例子非常明显，你不需要更多的说服。让我们继续:</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ju jv l"/></div></figure><p id="4857" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们需要这样的评论吗？<em class="jw">“映射至雇主”。</em>考虑一下</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es kl"><img src="../Images/8a431b0ed34c31c21ce30618c9e1dfe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S-AOrktlF2Y9112vkEGUsQ.png"/></div></figure><p id="8988" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不，我们也不需要那个。我们在“小方法”原则文章(上面的链接)中讨论过这个问题。我们希望尽可能合乎逻辑地提取方法。像这样的评论是我们应该提取逻辑的一个很好的指示。</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ju jv l"/></div></figure><p id="45f6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那更好。这是一个自我记录代码的例子。我们没有注释，只是创建了一个方法，它的名字作为注释。这样做的好处是我们有更小的方法，并且“文档”不必更新，因为…我们没有。</p><h1 id="c863" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">哪里写评论？</h1><p id="1ec4" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">当然，有些地方写评论是个好主意。例如，如果你有一个不能自我记录的代码，比如regex。或者如果你正在写一个很多人会用的API或者库。</p><p id="36fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我创建的一个简单的图表，可以帮助你:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/b7207dfc2dac5ac760375cd233b10cd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*CwZVThbCVPfZDSbtm3RIrw.png"/></div></figure><p id="f259" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果别人第一次阅读我的代码，我的代码容易读懂吗？如果是，就让它保持原样。如果没有，尝试通过将代码提取到变量、方法和类中，使其更易于表达。如果没有帮助，写一条评论。</p><p id="bce2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另外，请注意:很难判断你的代码是否容易被其他人阅读。但随着时间的推移，你会有感觉的，我保证。</p><p id="53f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看一小段代码:</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ju jv l"/></div></figure><p id="cad4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于那些不熟悉的人来说，这是正则表达式。不知道是什么也不用担心，可以谷歌一下。长话短说:正则表达式是一种匹配文本的模式。关键是，这很难理解。</p><p id="08fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们看到我们试图匹配的文本，我们可以得到一个线索— <em class="jw"> user.getEmail </em>。这是一些匹配电子邮件的正则表达式。但是到底配什么呢？有效的电子邮件？还是无效邮件？谁知道呢。</p><p id="7bbd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了使它更易于表达，我们可以提取变量中的正则表达式，并使它更清楚，如下所示:</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ju jv l"/></div></figure><p id="2699" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是更好的，但仍然很难理解。好吧，电子邮件匹配模式经常被使用，但是想象一下这是一个定制的正则表达式。当你有一个正则表达式，尤其是一个长正则表达式时，写一个注释来描述它。因此:</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ju jv l"/></div></figure></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><p id="eaee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关于注释掉的代码:删除它。不要注释掉代码。大多数时候你会忘记它，它会腐烂。如果你需要它，你可能会重写它，因为你已经忘记了它的存在。如果代码如此重要，您可以从版本控制系统中恢复它。</p><p id="b5f6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">出发前—我们令人惊叹的</strong> <a class="ae jo" href="https://gist.github.com/devsmanship/536891e121dc55b87eb46268e81f48fe" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">清洁代码课程</strong> </a> <strong class="is hj">目前以87%的折扣提供</strong></p><p id="01bb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你喜欢这篇文章，你会喜欢我们的课程:</p><ul class=""><li id="4e36" class="jx jy hi is b it iu ix iy jb jz jf ka jj kb jn lx kd ke kf bi translated">46场讲座</li><li id="065b" class="jx jy hi is b it kg ix kh jb ki jf kj jj kk jn lx kd ke kf bi translated">3小时以上的内容</li><li id="1d36" class="jx jy hi is b it kg ix kh jb ki jf kj jj kk jn lx kd ke kf bi translated">做一个真实的项目来测试你的知识</li><li id="b69a" class="jx jy hi is b it kg ix kh jb ki jf kj jj kk jn lx kd ke kf bi translated">27个可下载资源</li><li id="a1be" class="jx jy hi is b it kg ix kh jb ki jf kj jj kk jn lx kd ke kf bi translated">30天退款保证</li></ul><p id="477b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在这里注册课程— <a class="ae jo" href="https://rebrand.ly/spcc-comments" rel="noopener ugc nofollow" target="_blank">干净的代码:在7天内让你的编程生涯扶摇直上</a></p><figure class="jq jr js jt fd ij er es paragraph-image"><a href="https://rebrand.ly/spcc-comments"><div class="er es jp"><img src="../Images/dc9c4358d48d8c1502f7fa18c29da201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*yDVe-HZhy4OdzzOSYdnP6A.png"/></div></a></figure></div></div>    
</body>
</html>