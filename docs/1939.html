<html>
<head>
<title>Nginx File Configuration and Logs (Part 3)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Nginx文件配置和日志(第3部分)</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/nginx-file-configuration-and-logs-part-3-62e71ad1c3a0?source=collection_archive---------2-----------------------#2022-02-09">https://medium.com/javarevisited/nginx-file-configuration-and-logs-part-3-62e71ad1c3a0?source=collection_archive---------2-----------------------#2022-02-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><a href="https://www.java67.com/2020/07/top-5-courses-to-learn-linux-in-depth.html"><div class="er es if"><img src="../Images/f2a8b7908b7fedec6d07c2a65a6c64f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*PTBCkH0TBSF8CmRVZsSNtg.png"/></div></a></figure><h1 id="b05d" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">简介:</h1><p id="843d" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">安装后，进入nginx目录/etc/nginx，我们可以看到Nginx文件，如nginx.config和网站可用文件和其他重要文件</p><p id="ed55" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">每个文件都有一个角色和任务来使Nginx正确工作。</p><p id="2cbb" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">在这篇文章中，我将解释重要的文件，使正确的Nginx和处理所有的请求没有任何问题。</p><p id="1ddc" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><strong class="jm hj">Nginx文章的所有部分:</strong></p><ul class=""><li id="6a8c" class="kn ko hi jm b jn ki jr kj jv kp jz kq kd kr kh ks kt ku kv bi translated"><a class="ae kw" rel="noopener" href="/javarevisited/intro-to-nginx-web-server-part-1-bb590fad7035">Nginx Web服务器介绍(第一部分)</a></li><li id="09b9" class="kn ko hi jm b jn kx jr ky jv kz jz la kd lb kh ks kt ku kv bi translated"><a class="ae kw" rel="noopener" href="/javarevisited/installing-nginx-and-managed-by-command-part-2-b6b32b90b62d">安装Nginx并由命令管理(第二部分)</a></li><li id="a02e" class="kn ko hi jm b jn kx jr ky jv kz jz la kd lb kh ks kt ku kv bi translated">这是Nginx系列的第三部分</li><li id="35c3" class="kn ko hi jm b jn kx jr ky jv kz jz la kd lb kh ks kt ku kv bi translated">使用Nginx(第4部分)对两个项目进行简单配置<strong class="jm hj">即将推出</strong></li></ul><h1 id="e905" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">Nginx文件:</h1><ul class=""><li id="cc50" class="kn ko hi jm b jn jo jr js jv lc jz ld kd le kh ks kt ku kv bi translated">如果我们通过terminal /etc/nginx转到这个路径，默认情况下我们可以看到以下文件</li></ul><blockquote class="lf lg lh"><p id="fde1" class="jk jl li jm b jn ki jp jq jr kj jt ju lj kk jx jy lk kl kb kc ll km kf kg kh hb bi translated"><em class="hi">访问nginx目录。在</em> <a class="ae kw" rel="noopener" href="/javarevisited/6-best-websites-to-learn-linux-4861ac21bfdf"> <em class="hi"> Linux操作系统</em> </a></p></blockquote><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="cc70" class="lv in hi lr b fi lw lx l ly lz">root@ubuntu-16gb-hel1-1:/etc/nginx# cd /etc/nginx/</span></pre><p id="cae8" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">要查看Nginx目录中的所有文件，可以使用以下命令</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="8409" class="lv in hi lr b fi lw lx l ly lz">root@ubuntu-16gb-hel1-1:/etc/nginx# ls</span></pre><p id="ee16" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">上述命令的输出:</p><blockquote class="lf lg lh"><p id="1c82" class="jk jl li jm b jn ki jp jq jr kj jt ju lj kk jx jy lk kl kb kc ll km kf kg kh hb bi translated"><em class="hi">你可以在这里看到所有的nginx文件。</em></p></blockquote><p id="5c66" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">添加替代文本</p><figure class="lm ln lo lp fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2021/06/5-websites-to-learn-linux-command-line.html"><div class="er es ma"><img src="../Images/3ac5f30c510c1cc4a24d106968e5c766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-Ji0EJ5_-mjV8Chg"/></div></a></figure><p id="52f4" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">我们将从nginx.config开始:</p><ul class=""><li id="ad0f" class="kn ko hi jm b jn ki jr kj jv kp jz kq kd kr kh ks kt ku kv bi translated">etc/nginx.config:</li></ul><p id="d11f" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">所有Nginx的主要配置都可以在这里找到，</p><p id="7313" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">我们可以在这个文件中编写自己的配置，并在这里设置Nginx。</p><p id="4904" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">我们可以在这里编写HTTP块来定义我们在所有Nginx系统中配置。</p><blockquote class="lf lg lh"><p id="5e4d" class="jk jl li jm b jn ki jp jq jr kj jt ju lj kk jx jy lk kl kb kc ll km kf kg kh hb bi translated"><em class="hi">在下一节将写我们的配置并谈论Nginx配置中的每个块</em></p></blockquote><ul class=""><li id="9625" class="kn ko hi jm b jn ki jr kj jv kp jz kq kd kr kh ks kt ku kv bi translated">/etc/nginx/sites-可用/</li></ul><p id="b75c" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">在这里，我们可以将站点域和服务器块的配置写入特定的应用程序，当重新加载Nginx时，nginx.config将读取etc/sites-available/ folder中的所有文件。</p><p id="cb6b" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">但是要启用这个特性，您必须在nginx.config中编写以下配置</p><p id="6c7b" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">nginx默认情况下会在启用了站点的站点中创建相同的文件名。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="c3c5" class="lv in hi lr b fi lw lx l ly lz">include /etc/nginx/sites-enabled/fileName;</span></pre><ul class=""><li id="1f69" class="kn ko hi jm b jn ki jr kj jv kp jz kq kd kr kh ks kt ku kv bi translated">etc/nginx/sites-启用/</li></ul><p id="23d2" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">创建新目录时，您必须通过站点启用与配置文件链接</p><p id="a55e" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">您必须链接站点可用/启用站点/因为/nginx.config需要链接/站点启用/来启用您的配置</p><ul class=""><li id="51fb" class="kn ko hi jm b jn ki jr kj jv kp jz kq kd kr kh ks kt ku kv bi translated">/etc/nginx/snippets</li></ul><p id="49e0" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">如果我们在服务之间有任何重复的配置，我们可以包含在这个文件中，并与其他配置文件共享。</p><p id="4774" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">好了，现在我们知道在哪里可以进行配置，但是在哪里可以看到我的日志</p><blockquote class="lf lg lh"><p id="26e0" class="jk jl li jm b jn ki jp jq jr kj jt ju lj kk jx jy lk kl kb kc ll km kf kg kh hb bi translated"><em class="hi">当安装nginx时会在/var/log/nginx中创建文件</em></p></blockquote><p id="3782" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">在这个目录中，我们可以找到Nginx服务的所有日志。</p><p id="f181" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">好的，让我们转到上面的目录，看看日志提供了什么服务</p><p id="9b4c" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">要转到上述目录，您可以使用以下命令:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="e1d2" class="lv in hi lr b fi lw lx l ly lz">cd /var/log/nginx/</span></pre><p id="7636" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">要查看/var/log/nginx中的所有文件，请编写以下命令:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="8372" class="lv in hi lr b fi lw lx l ly lz">ls</span></pre><p id="fb01" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">之后，您可以在输出中看到这个文件。</p><p id="0d39" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">添加替代文本</p><figure class="lm ln lo lp fd ij er es paragraph-image"><a href="https://www.java67.com/2018/02/5-free-linux-unix-courses-for-programmers-learn-online.html"><div class="er es mb"><img src="../Images/88fde3d57fa01a1b538dcf3e0ea747a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vupIYo6NUi2xDn91"/></div></a></figure><p id="67d6" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">我将在本文的日志部分解释两个重要的文件。</p><ul class=""><li id="1c02" class="kn ko hi jm b jn ki jr kj jv kp jz kq kd kr kh ks kt ku kv bi translated">/var/log/nginx/access.log</li></ul><p id="d834" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">收到的每个对Nginx的请求都会记录在这个文件中，如下图所示。</p><p id="8451" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">添加替代文本</p><figure class="lm ln lo lp fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2021/06/5-websites-to-learn-linux-command-line.html"><div class="er es mc"><img src="../Images/eaa3d751e7212934a36e9e42a06ce618.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Zwg6GR2vGIeBPmPA"/></div></a></figure><blockquote class="lf lg lh"><p id="259c" class="jk jl li jm b jn ki jp jq jr kj jt ju lj kk jx jy lk kl kb kc ll km kf kg kh hb bi translated">我们可以从配置文件中修改这个文件。</p></blockquote><ul class=""><li id="d9d5" class="kn ko hi jm b jn ki jr kj jv kp jz kq kd kr kh ks kt ku kv bi translated">/var/log/nginx/error.log</li></ul><p id="be31" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">每个Nginx错误都会记录在这里，如下图所示。</p><p id="4785" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">添加替代文本</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/0b0f892e541a71c5126771226152890d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sd-WsuRxsbO9EbnQ"/></div></div></figure><blockquote class="lf lg lh"><p id="feab" class="jk jl li jm b jn ki jp jq jr kj jt ju lj kk jx jy lk kl kb kc ll km kf kg kh hb bi translated"><em class="hi">我只有一个错误:)</em></p></blockquote><h1 id="9342" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">结论:</h1><p id="f4bf" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在这篇文章中，我们现在知道了Nginx中的文件作业是什么，以及在Nginx系统中我们需要每个文件的位置。</p><p id="7d56" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">现在我们知道在哪里可以找到系统中每个请求的日志，也知道在哪里可以定义我们的配置。</p><p id="0971" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">Nginx易于使用，我将在下一篇文章中解释配置</p><p id="e2f5" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><strong class="jm hj">Nginx文章的所有部分:</strong></p><ul class=""><li id="42b8" class="kn ko hi jm b jn ki jr kj jv kp jz kq kd kr kh ks kt ku kv bi translated"><a class="ae kw" rel="noopener" href="/javarevisited/intro-to-nginx-web-server-part-1-bb590fad7035">Nginx Web服务器介绍(第一部分)</a></li><li id="9e82" class="kn ko hi jm b jn kx jr ky jv kz jz la kd lb kh ks kt ku kv bi translated"><a class="ae kw" rel="noopener" href="/javarevisited/installing-nginx-and-managed-by-command-part-2-b6b32b90b62d">安装Nginx并通过命令进行管理(第二部分)</a></li><li id="268f" class="kn ko hi jm b jn kx jr ky jv kz jz la kd lb kh ks kt ku kv bi translated">这是Nginx系列的第三部分</li><li id="0156" class="kn ko hi jm b jn kx jr ky jv kz jz la kd lb kh ks kt ku kv bi translated">使用Nginx(第4部分)<strong class="jm hj">对两个项目进行简单配置</strong></li></ul><blockquote class="lf lg lh"><p id="3f2e" class="jk jl li jm b jn ki jp jq jr kj jt ju lj kk jx jy lk kl kb kc ll km kf kg kh hb bi translated"><strong class="jm hj">别忘了在文章上拍手，每篇文章可以拍手50次。</strong></p></blockquote><h1 id="3142" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">参考资料:</h1><ul class=""><li id="988e" class="kn ko hi jm b jn jo jr js jv lc jz ld kd le kh ks kt ku kv bi translated"><a class="ae kw" href="https://kinsta.com/knowledgebase/what-is-nginx/" rel="noopener ugc nofollow" target="_blank">https://kinsta.com/knowledgebase/what-is-nginx/</a></li><li id="64b1" class="kn ko hi jm b jn kx jr ky jv kz jz la kd lb kh ks kt ku kv bi translated"><a class="ae kw" rel="noopener" href="/devopscurry/what-is-nginx-understanding-the-basics-of-nginx-in-2021-f8ee0f3d3d54">https://medium . com/devopscorry/what-is nginx-understanding-the-basics-of-nginx-in-2021-f8e E0 F3 D3 d 54</a></li><li id="69a7" class="kn ko hi jm b jn kx jr ky jv kz jz la kd lb kh ks kt ku kv bi translated"><a class="ae kw" href="https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-20-04" rel="noopener ugc nofollow" target="_blank">https://www . digital ocean . com/community/tutorials/how-to-install-nginx-on-Ubuntu-20-04</a></li></ul></div></div>    
</body>
</html>