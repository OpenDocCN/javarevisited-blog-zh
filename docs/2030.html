<html>
<head>
<title>I ❤ VAVR</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一.❤</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/i-vavr-940c05d5dda4?source=collection_archive---------0-----------------------#2022-03-28">https://medium.com/javarevisited/i-vavr-940c05d5dda4?source=collection_archive---------0-----------------------#2022-03-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2018/05/top-5-java-courses-for-beginners-to-learn-online.html"><div class="er es if"><img src="../Images/aba0b015bb7039533e05e3ec477d8ed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*RtDJGoKll8XD_EYF.png"/></div></a></figure><p id="8f05" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在2012年我作为Java开发人员的第一份工作中，我有幸与一个在编码实践方面非常进步的团队一起工作。他们向我介绍了结对编程和测试驱动开发等。我记得那时我读了一本小书叫做<a class="ae jk" href="https://horstmann.com/java8/" rel="noopener ugc nofollow" target="_blank"><em class="jl">【Java 8】</em></a><em class="jl">。</em></p><p id="4d71" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我对Java 8和<a class="ae jk" rel="noopener" href="/javarevisited/7-best-java-tutorials-and-books-to-learn-lambda-expression-and-stream-api-and-other-features-3083e6038e14">函数式编程</a>非常感兴趣。<br/>如此之多，以至于下班回家后，我会尝试从一些git存储库中将大块代码从声明式Java风格重构为函数式Java 8风格。</p><p id="f890" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在办公室，我会和我的同事谈论，我们确实问过管理层是否有可能提前采用Java 8并升级我们的应用。不幸的是，如此快速地升级到java 8并不是企业的首要任务。但是失望并没有持续多久。另一个团队的一位同事告诉我们，在他们的团队中，他们收到了来自企业的相同回复，但他们开始使用<a class="ae jk" href="https://www.vavr.io/" rel="noopener ugc nofollow" target="_blank"> VAVR.io </a>而不是升级到Java 8。</p><p id="c8cb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是个好消息，因为对库没有任何限制，我们立即采用了VAVR库。随着时间一天天地过去，我学会了使用VAVR进行函数式编程。我真的很喜欢它，直到将近两年后，我才第一次专业地编写Java 8。</p><p id="02ac" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">VAVR几年前被称为JavaSlang，是一个Java api，它为您的代码带来了<a class="ae jk" rel="noopener" href="/javarevisited/5-best-java-functional-programming-books-for-beginners-and-experienced-programmers-4daecd159756">函数式编程</a>功能，并且还提供了一个伟大的不可变集合api。在这篇文章中，我不想谈论很多关于VAVR的理论，我只想展示Java 8中的代码和它的VAVR等价物，这样你就可以看到使用这个库有多好。我希望你喜欢它。</p><p id="8e5f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">Function N types<br/></strong>Java 8支持Function<em class="jl">by Function</em>但是Vavr支持<em class="jl"> Function </em> (N)类型，允许最多8个参数。</p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="265b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">组合函数<br/> </strong>使用VAVR我们可以进行函数的组合。非常好的特性，允许我们以可维护的方式扩展功能。</p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="c99d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">提升<br/> </strong>如果一个复合函数中的一个函数抛出了异常，我们可以阻止这个异常，而是<em class="jl">返回Option.none </em>。这在编写使用第三方库<a class="ae jk" rel="noopener" href="/javarevisited/20-essential-java-libraries-and-apis-every-programmer-should-learn-5ccd41812fc7">并能返回异常的函数时非常有用。</a></p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="064b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">部分应用<br/> </strong>我们可以通过传递比所需参数更少的参数来部分应用一个函数。</p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="af53" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">curry<br/></strong>curry允许我们将一个多参数的函数分解成一系列单参数的函数。</p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="b602" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">记忆/幂等<br/> </strong>如果用相同的参数调用一个函数，结果应该是相同的。<a class="ae jk" href="https://javarevisited.blogspot.com/2020/05/fibonacci-series-in-java-8-with.html" rel="noopener ugc nofollow" target="_blank">记忆化</a>允许我们在函数中轻松实现缓存。</p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="e799" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在我看来，VAVR的选项优于它的Java对应物Optional。<br/>这里只是一些原因:</p><ul class=""><li id="3ff7" class="js jt hi io b ip iq it iu ix ju jb jv jf jw jj jx jy jz ka bi translated">在VAVR中，选项是可序列化的，而在Java 8 中，选项是不可序列化的。</li><li id="f128" class="js jt hi io b ip kb it kc ix kd jb ke jf kf jj jx jy jz ka bi translated">VAVR中的选项支持peek，它允许我们在有事情发生时执行一个动作。</li><li id="3cd5" class="js jt hi io b ip kb it kc ix kd jb ke jf kf jj jx jy jz ka bi translated">选件可与<a class="ae jk" href="https://www.java67.com/2018/06/java-8-optional-example-ispresent-orElse-get.html" rel="noopener ugc nofollow" target="_blank"> java 8选件</a>互操作</li><li id="f48e" class="js jt hi io b ip kb it kc ix kd jb ke jf kf jj jx jy jz ka bi translated">在vavr中，对Option.map()的调用可能会导致一些(null)这可能会导致NullPointerException。有些人不喜欢这样，但它实际上迫使你注意可能出现的空，并相应地处理它们，而不是不知不觉地接受它们。处理null出现的正确方法是使用flatMap。</li></ul><p id="b9f8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">选项是值的包装器，如果使用正确，我们可以避免<a class="ae jk" href="https://javarevisited.blogspot.com/2016/01/how-to-check-if-string-is-not-null-and-empty-in-java-example.html" rel="noopener ugc nofollow" target="_blank">空检查</a>以及<a class="ae jk" href="https://www.java67.com/2021/05/how-to-solve-nullpointerexception-in-java.html" rel="noopener ugc nofollow" target="_blank"><em class="jl">NullPointerException</em></a><em class="jl">。</em></p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="d510" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这只是vavr选项的一个小例子。但是vavr选项的功能要大得多，我需要另一篇文章来讨论它。但是我想分享一个git回购协议的链接，我有更多的期权例子，这样你就可以看到它还能做什么。</p><p id="3106" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> Try <br/></strong></p><ul class=""><li id="8616" class="js jt hi io b ip iq it iu ix ju jb jv jf jw jj jx jy jz ka bi translated">我们可以从方法中返回Try来推迟执行，它的语法非常直观。</li><li id="4989" class="js jt hi io b ip kb it kc ix kd jb ke jf kf jj jx jy jz ka bi translated">在出现错误的情况下，我们可以优雅地提供替代的执行路径。</li><li id="1acc" class="js jt hi io b ip kb it kc ix kd jb ke jf kf jj jx jy jz ka bi translated">如果我们调用的方法返回了多个异常，但是我们只是想通过Try的方法<em class="jl"> recoverWith() </em>有选择地对其中一个做出反应</li><li id="33dc" class="js jt hi io b ip kb it kc ix kd jb ke jf kf jj jx jy jz ka bi translated">结合Try.sequence和flatmap，我们可以从Try列表中提取值。</li></ul><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="6752" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">惰性初始化值<br/> </strong>不管我们调用它多次，惰性初始化值只会计算一次。</p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="3beb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">集合<br/> </strong> Vavr引入了一个非常强大的不可变集合api。我将用一篇更广泛的文章来解释所有vavr集合功能的更多信息，但让我们来看一个vavr中一些有用的集合功能的小示例。</p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="6695" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">元组<br/> </strong>元组是元素的分组。Java 8支持对，但是vavr更进一步，允许元组。元组的值是使用values _1、_2等来访问的……我们必须承认，这可能不是最友好的名称。最大元组大小是8个元素。</p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="2630" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">无痛检查异常<br/> </strong>这是使用<a class="ae jk" rel="noopener" href="/javarevisited/8-best-lambdas-stream-and-functional-programming-courses-for-java-developers-3d1836a97a1d"> lambdas </a>和<a class="ae jk" href="https://javarevisited.blogspot.com/2011/12/checked-vs-unchecked-exception-in-java.html" rel="noopener ugc nofollow" target="_blank">检查异常</a>时的经典问题。我们必须以如此丑陋的方式嵌入catch块，或者我们可以重构，bla bla…但它看起来不太好。</p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="838f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在vavr中，我们可以做这样的事情，这样我们就可以无痛苦地检查异常。</p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="21b9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">模式匹配<br/> </strong>有了vavr，我们可以做模式匹配来替代switch语句</p><figure class="jm jn jo jp fd ij"><div class="bz dy l di"><div class="jq jr l"/></div></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="1136" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">感谢您花时间阅读我希望你喜欢这篇文章和/或发现它有用。如果你喜欢这种内容，我将非常感谢你给我一些掌声，关注并在你的社交媒体上分享。我的目标是每月发表一篇文章。</p></div></div>    
</body>
</html>