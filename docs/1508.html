<html>
<head>
<title>Back to the basics of Java — Part 1: Classpath</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">回到Java基础——第1部分:类路径</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/back-to-the-basics-of-java-part-1-classpath-47cf3f834ff?source=collection_archive---------0-----------------------#2021-08-30">https://medium.com/javarevisited/back-to-the-basics-of-java-part-1-classpath-47cf3f834ff?source=collection_archive---------0-----------------------#2021-08-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/9977aaf1f7269a97f89273f72c2f96b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*fz7Am6vX_nku9m5kdm0TNA.png"/></div></figure><p id="823c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我最喜欢的编程语言一直是Java，巧合的是这也是我用过的第一种语言。如果你和我一样，或者只是想了解更多关于令人敬畏的语言和技术Java的知识，那么这个由两部分组成的系列就是为你准备的。</p><p id="cac7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这些简短的系列中，您将了解以下内容。</p><ul class=""><li id="8f9e" class="jl jm hi io b ip iq it iu ix jn jb jo jf jp jj jq jr js jt bi translated">第1部分:类路径</li><li id="14b5" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">第二部分:罐子</li></ul><p id="7078" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">那么，我为什么决定写这些文章呢？嗯，Java有一些方面我没有完全理解(比如类路径)，我意识到这是因为我一直在使用<a class="ae jk" rel="noopener" href="/javarevisited/7-best-courses-to-learn-intellij-idea-for-beginners-and-experienced-java-programmers-2e9aa9bb0c05"> IDE </a>和<a class="ae jk" rel="noopener" href="/javarevisited/5-best-gradle-courses-and-books-to-learn-in-2021-93f49ce8ff8e">构建工具</a>。</p><p id="1dfe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">IDE的问题是它隐藏了很多东西，这阻碍了全面的理解。换句话说，我认为是时候更熟悉java cli工具并回归基础了。</p><figure class="ka kb kc kd fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/01fc0f5b9b6c15aba63e50f5bed6eeb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/1*YgRaUJRRUc7naIQOwmMccQ.jpeg"/></div></figure><p id="936e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们言归正传。在这一部分中，我将解释<a class="ae jk" href="http://www.java67.com/2012/08/what-is-path-and-classpath-in-java-difference.html" rel="noopener ugc nofollow" target="_blank">什么是<strong class="io hj">类路径</strong>以及如何正确(和不正确地)使用它。</a></p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><h1 id="c107" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">类路径</h1><p id="649f" class="pw-post-body-paragraph im in hi io b ip lj ir is it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj hb bi translated">类路径只是一个目录、JAR文件和ZIP存档的列表，用来搜索类文件[1]。运行时需要知道在哪里可以找到你编译的类，所以这就是你在这里提供的。</p><p id="3762" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">关于如何指定路径，您应该注意一些事情。为了解释这一点，我将创建一个虚拟项目，结构见下文。</p><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="a087" class="lt km hi lp b fi lu lv l lw lx">ClasspathProject/src/java/myprogram/<br/>    |<br/>    ---&gt; Main.java<br/>    |<br/>    ---&gt; utils/<br/>        |<br/>        ---&gt; Util.java</span></pre><p id="622d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是源文件，让你知道我们在处理什么。</p><p id="7dd8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">Main.java</strong></p><figure class="ka kb kc kd fd ij"><div class="bz dy l di"><div class="ly lz l"/></div></figure><p id="e54f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">Util.java</strong></p><figure class="ka kb kc kd fd ij"><div class="bz dy l di"><div class="ly lz l"/></div></figure><p id="5d21" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我将在接下来的部分使用这个结构，所以如果你想继续，我建议你在继续之前创建它。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><h2 id="534f" class="lt km hi bd kn ma mb mc kr md me mf kv ix mg mh kz jb mi mj ld jf mk ml lh mm bi translated">关于包装的简短说明。</h2><p id="c030" class="pw-post-body-paragraph im in hi io b ip lj ir is it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj hb bi translated">如果您是java新手，了解包通常被认为是文件结构的镜像会很有帮助。以Utils.java文件为例，它有myprogram.utils包，因为它在那个文件夹中。</p><p id="b839" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">编译器并不真正需要所提供的结构。但是，java命令要求它运行。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="1306" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们编译这个小项目。</p><p id="e5dd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先我们创建一个<em class="mn"> bin </em>文件夹来保存根项目文件夹中的编译内容，然后编译这两个文件[2]。</p><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="0a79" class="lt km hi lp b fi lu lv l lw lx">&gt; mkdir bin<br/>&gt; javac src/java/myprogram/Main.java src/java/myprogram/utils/Util.java -d bin/</span></pre><p id="20f6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您现在应该有以下文件结构。</p><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="4e16" class="lt km hi lp b fi lu lv l lw lx">ClasspathProject/<br/>    |<br/>    ---&gt; src/java/myprogram/<br/>        |<br/>        ---&gt; Main.java<br/>        |<br/>        ---&gt; utils/<br/>            |<br/>            ---&gt; Util.java<br/>    |    <br/>    ---&gt; bin/myprogram/<br/>        |<br/>        ---&gt; Main.class<br/>        |<br/>        ---&gt; utils/<br/>            |<br/>            ---&gt; Util.class</span></pre><p id="6cc2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果我们现在移动到<em class="mn"> bin </em>文件夹，我们可以运行主类。</p><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="8528" class="lt km hi lp b fi lu lv l lw lx">&gt; java myprogram.Main<br/>Here is 1337</span></pre><p id="813e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">太好了，那为什么会这样呢？因为类路径的<strong class="io hj">缺省值</strong>是<strong class="io hj">当前目录</strong>。它需要找到两个类文件；Main.class和Utils.class，看起来怎么样，在哪里？给定当前的类路径<em class="mn"> bin </em>和我们的主类myprogram。Main它将在这个目录中查找并尝试找到以下内容:</p><ul class=""><li id="e8ba" class="jl jm hi io b ip iq it iu ix jn jb jo jf jp jj jq jr js jt bi translated">myprogram/Main.class</li><li id="2afb" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">myprogram/utils/Util.class</li></ul><p id="0886" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们知道它存在，所以程序运行成功。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="b2c7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们稍微改变一下。让我们<strong class="io hj">添加</strong>一个新的文件夹<em class="mn"> lib </em>在与<em class="mn"> bin </em>相同的层次上，并移动Utils.class，使其看起来像这样。</p><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="4658" class="lt km hi lp b fi lu lv l lw lx">ClasspathProject/<br/>    |<br/>    ---&gt; src/java/myprogram/<br/>        |<br/>        ---&gt; Main.java<br/>        |<br/>        ---&gt; utils/<br/>            |<br/>            ---&gt; Util.java<br/>    |    <br/>    ---&gt; bin/myprogram/<br/>        |<br/>        ---&gt; Main.class<br/>    |<br/>    ---&gt; lib/myprogram/<br/>        |<br/>        ---&gt; utils/<br/>            |<br/>            ---&gt; Util.class</span></pre></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><h2 id="905c" class="lt km hi bd kn ma mb mc kr md me mf kv ix mg mh kz jb mi mj ld jf mk ml lh mm bi translated">错误1-未指定类路径</h2><p id="3299" class="pw-post-body-paragraph im in hi io b ip lj ir is it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj hb bi translated">如果我们现在移动到<em class="mn"> bin </em>文件夹并尝试运行相同的命令，我们将得到一个错误，因为它找不到Util.class文件。</p><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="b1bc" class="lt km hi lp b fi lu lv l lw lx">&gt; java myprogram.Main<br/>Exception in thread "main" java.lang.NoClassDefFoundError: myprogram/utils/Util<br/>    at myprogram.Main.main(Main.java:8)<br/>Caused by: java.lang.ClassNotFoundException: myprogram.utils.Util<br/>    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:602)<br/>    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)<br/>    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)<br/>    ... 1 more</span></pre><h2 id="2ebd" class="lt km hi bd kn ma mb mc kr md me mf kv ix mg mh kz jb mi mj ld jf mk ml lh mm bi translated">错误2-将类文件添加到类路径中</h2><p id="51c2" class="pw-post-body-paragraph im in hi io b ip lj ir is it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj hb bi translated">我们将尝试通过将类文件添加到<a class="ae jk" href="https://javarevisited.blogspot.com/2011/01/how-classpath-work-in-java.html#axzz6uq12fuKh" rel="noopener ugc nofollow" target="_blank">类路径</a>来解决这个问题(我们从<em class="mn"> bin </em>文件夹中运行所有这些命令)。</p><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="7935" class="lt km hi lp b fi lu lv l lw lx">&gt; java -classpath ../lib/myprogram/utils/Util.class myprogram.Main<br/>Error: Could not find or load main class myprogram.Main<br/>Caused by: java.lang.ClassNotFoundException: myprogram.Main</span></pre><p id="d094" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">哎哟，现在它找不到Main.class文件了？因为如前所述，它将尝试在类路径中提供的指定目录中查找文件。我们没有提供目录。所以让我们改做那个吧。</p><h2 id="c781" class="lt km hi bd kn ma mb mc kr md me mf kv ix mg mh kz jb mi mj ld jf mk ml lh mm bi translated">错误3-将一个目录添加到类路径中</h2><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="1e4f" class="lt km hi lp b fi lu lv l lw lx">&gt; java -classpath ../lib/myprogram/utils/ myprogram.Main<br/>Error: Could not find or load main class myprogram.Main<br/>Caused by: java.lang.ClassNotFoundException: myprogram.Main</span></pre><p id="6d2c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">好吧，同样的错误。这里发生了什么？因为我们提供了一个classpath参数，它覆盖了默认的class path参数(当前目录),所以它在任何地方都找不到我们的Main.class文件。我们来补充一下。<em class="mn">在Unix系统上用冒号(:)分隔，在Windows上用分号(；).</em></p><h2 id="2ebc" class="lt km hi bd kn ma mb mc kr md me mf kv ix mg mh kz jb mi mj ld jf mk ml lh mm bi translated">错误4-向类路径添加更多路径</h2><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="2449" class="lt km hi lp b fi lu lv l lw lx">&gt; java -classpath ../lib/myprogram/utils/:. myprogram.Main<br/>Exception in thread "main" java.lang.NoClassDefFoundError: myprogram/utils/Util<br/>    at myprogram.Main.main(Main.java:8)<br/>Caused by: java.lang.ClassNotFoundException: myprogram.utils.Util<br/>    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:602)<br/>    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)<br/>    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)<br/>    ... 1 more</span></pre><p id="3476" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">好了，现在它似乎可以找到Main.class文件了。但是它<strong class="io hj">还是找不到</strong>的Util.class文件。如前所述，它将尝试使用任何一个<a class="ae jk" href="https://javarevisited.blogspot.com/2012/10/5-ways-to-add-multiple-jar-to-classpath-java.html" rel="noopener ugc nofollow" target="_blank">类路径</a>来查找以下文件。</p><ul class=""><li id="5595" class="jl jm hi io b ip iq it iu ix jn jb jo jf jp jj jq jr js jt bi translated">myprogram/Main.class</li><li id="f5fc" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">myprogram/utils/Util.class</li></ul><p id="2506" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这种情况下，我们有两个类路径。</p><ul class=""><li id="0a18" class="jl jm hi io b ip iq it iu ix jn jb jo jf jp jj jq jr js jt bi translated">../lib/myprogram/utils/</li><li id="cb62" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi">.</li></ul><p id="ef69" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">简而言之，它会尝试将类路径添加到所需的文件中，看看它们是否存在，我想这个过程应该是这样的。</p><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="a692" class="lt km hi lp b fi lu lv l lw lx">Cp1 = ../lib/myprogram/utils/<br/>Cp2 = ./<br/>File1 = myprogram/Main.class<br/>File2 = myprogram/utils/Util.class</span><span id="8b87" class="lt km hi lp b fi mo lv l lw lx">Trying to find File1</span><span id="08b6" class="lt km hi lp b fi mo lv l lw lx">Cp1 + File1 = ../lib/myprogram/utils/myprogram/Main.class<br/>NOT FOUND<br/>Cp2 + File1 = ./myprogram/Main.class<br/>FOUND</span><span id="367e" class="lt km hi lp b fi mo lv l lw lx">Trying to find File2</span><span id="eb15" class="lt km hi lp b fi mo lv l lw lx">Cp1 + File2 = ../lib/myprogram/utils/myprogram/utils/Util.class<br/>NOT FOUND<br/>Cp2 + File2 = ./myprogram/utils/Util.class<br/>NOT FOUND</span><span id="e779" class="lt km hi lp b fi mo lv l lw lx">---&gt; ERROR</span></pre><h2 id="ac8e" class="lt km hi bd kn ma mb mc kr md me mf kv ix mg mh kz jb mi mj ld jf mk ml lh mm bi translated">最终解决</h2><p id="dc77" class="pw-post-body-paragraph im in hi io b ip lj ir is it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj hb bi translated">我们可以通过在<em class="mn"> lib </em>下添加这些子文件夹来解决这个问题吗？我们当然可以，这是可行的。但是，我们不添加这些文件夹，而是修改classpath参数，使其看起来像这样。</p><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="dd84" class="lt km hi lp b fi lu lv l lw lx">&gt; java -classpath ../lib/:. myprogram.Main<br/>Here is 1337</span></pre><p id="868a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这样做是因为它现在能够使用第一个路径找到Utils.class文件。</p><pre class="ka kb kc kd fd lo lp lq lr aw ls bi"><span id="b981" class="lt km hi lp b fi lu lv l lw lx">../lib/ + myprogram/utils/Util.class<br/>FOUND</span></pre></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="9be4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我希望这里的一些错误对你理解类路径有所帮助。似乎很多教程只给出了正确的做事方式，但我发现看到不正确的做事方式对我的学习有很大帮助。</p><div class="mp mq ez fb mr ms"><a href="https://ludvigwesterdahl.medium.com/back-to-the-basics-of-java-part-2-the-jar-6e923685d571" rel="noopener follow" target="_blank"><div class="mt ab dw"><div class="mu ab mv cl cj mw"><h2 class="bd hj fi z dy mx ea eb my ed ef hh bi translated">回到Java基础——第2部分:JAR</h2><div class="mz l"><h3 class="bd b fi z dy mx ea eb my ed ef dx translated">在第一部分中，我介绍了一个简单的例子，解释了如何正确使用类路径。我将用这个例子…</h3></div><div class="na l"><p class="bd b fp z dy mx ea eb my ed ef dx translated">ludvigwesterdahl.medium.com</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng ik ms"/></div></div></a></div><p id="821f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">参考文献</strong></p><p id="3733" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">[1] java选项<br/><a class="ae jk" href="https://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/javase/7/docs/technotes/tools/windows/Java . html</a></p><p id="2381" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">[2] javac — Java编程语言编译器<br/><a class="ae jk" href="https://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/javase/7/docs/technotes/tools/windows/javac . html</a></p></div></div>    
</body>
</html>