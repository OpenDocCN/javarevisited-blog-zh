<html>
<head>
<title>Convert a JAR to a Windows Executable (.EXE) inside a Maven Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将JAR转换为Windows可执行文件(。EXE)放在Maven项目中</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/converting-jar-to-executable-exe-in-a-maven-project-using-launch4j-plugin-7f2da1413086?source=collection_archive---------0-----------------------#2022-02-14">https://medium.com/javarevisited/converting-jar-to-executable-exe-in-a-maven-project-using-launch4j-plugin-7f2da1413086?source=collection_archive---------0-----------------------#2022-02-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="935c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用嵌入式Java运行时环境(JRE)将作为JAR分发的Java应用程序包装在本机Windows可执行文件中</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><a href="https://javarevisited.blogspot.com/2012/03/how-to-create-and-execute-jar-file-in.html"><div class="er es ix"><img src="../Images/5c53f37ebfb633a5723f20179ed581d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k0wnw8htlYE5_8eMV6ZZpw.png"/></div></a><p class="jf jg et er es jh ji bd b be z dx translated">用JRE在maven项目中执行jar。图片来源:<a class="ae jj" href="https://www.flaticon.com/free-icon/exe_2305870?term=exe&amp;related_id=2306085&amp;origin=tag" rel="noopener ugc nofollow" target="_blank"> EXE图标</a> | <a class="ae jj" href="https://www.flaticon.com/free-icon/jar_2305884?term=jar%20extension&amp;page=1&amp;position=22&amp;page=1&amp;position=22&amp;related_id=2305884&amp;origin=search" rel="noopener ugc nofollow" target="_blank"> JAR图标</a></p></figure><p id="ed39" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">如何向Windows客户分发基于Java的桌面应用程序？由应用程序构建创建的<code class="du kg kh ki kj b"><a class="ae jj" href="https://javarevisited.blogspot.com/2012/10/5-ways-to-add-multiple-jar-to-classpath-java.html" rel="noopener ugc nofollow" target="_blank">jar</a></code>,然后需要在客户端工作站上安装Java运行时环境(JRE ),或者作为带有JRE包的Windows可执行文件(<code class="du kg kh ki kj b">exe</code>),消除客户安装执行基于Java的应用程序所需的<a class="ae jj" href="https://javarevisited.blogspot.com/2011/12/jre-jvm-jdk-jit-in-java-programming.html" rel="noopener ugc nofollow" target="_blank"> JRE </a>的需求。</p><p id="a486" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">使用Launch4J和<a class="ae jj" rel="noopener" href="/javarevisited/6-best-maven-courses-for-beginners-in-2020-23ea3cba89"> Maven </a>，您可以准确地做到这一点:从JAR创建一个Windows可执行文件，并用<a class="ae jj" href="http://www.java67.com/2013/02/difference-between-jdk-and-jre-in-java.html" rel="noopener ugc nofollow" target="_blank"> JRE </a>将它打包成一个最终的zip文件，您可以将它提供给客户端。消费者只需简单地解压文件并双击可执行文件来运行应用程序。</p><h1 id="22aa" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">发射4J</h1><p id="4207" class="pw-post-body-paragraph jk jl hi jm b jn lc ij jp jq ld im js jt le jv jw jx lf jz ka kb lg kd ke kf hb bi translated">Launch4j将jar封装在本机Windows可执行文件中，允许它们像任何其他Windows应用程序一样执行。</p><p id="3b4a" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">使用Launch4J，您可以打包一个JRE，让它在计算机上查找已经安装的JRE，或者您也可以选择提供一个直接的URL来下载JRE。</p><p id="c268" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">本文中概述的方法需要一个基于Maven的项目，该项目将把您的应用程序编译成一个<code class="du kg kh ki kj b">jar</code>，并使用Launch4j的<a class="ae jj" href="https://javarevisited.blogspot.com/2016/08/top-10-maven-plugins-every-java-developer-know.html#axzz5YVjCcR8u" rel="noopener ugc nofollow" target="_blank"> Maven插件</a>将它包装成一个<code class="du kg kh ki kj b">exe</code>，然后将其与Java运行时环境捆绑在一起。</p><h1 id="b7f3" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">Launch4J的Maven插件</h1><p id="4f87" class="pw-post-body-paragraph jk jl hi jm b jn lc ij jp jq ld im js jt le jv jw jx lf jz ka kb lg kd ke kf hb bi translated">Launch4j的Maven插件生成一个可执行文件，作为Maven构建过程的一部分。它支持Maven <code class="du kg kh ki kj b">2.0.4</code>及以上版本。</p><p id="74d2" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">通过在项目的<code class="du kg kh ki kj b">pom.xml</code>文件中包含以下插件，您可以定义Launch4j运行时配置。默认情况下，Launch4j插件被绑定到包阶段，但是它是在应用程序的<a class="ae jj" href="https://javarevisited.blogspot.com/2012/03/how-to-create-and-execute-jar-file-in.html#axzz6sZlXGk9y" rel="noopener ugc nofollow" target="_blank"> JAR被创建</a>之后运行的。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div><p class="jf jg et er es jh ji bd b be z dx translated">使用launch4J插件将jar转换为exe</p></figure><p id="f974" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">当可执行文件启动时，它将在相对于可执行文件指定的目录中寻找JRE，我们将把它和下面部分的<code class="du kg kh ki kj b">exe</code>一起打包在一个zip文件中。</p><p id="38a7" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">如果您的应用程序需要管理员权限，请在上面插件中配置的清单文件(<code class="du kg kh ki kj b">src/main/resources/&lt;project-artifact-id&gt;.manifest.xml</code>)中包含以下内容。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div><p class="jf jg et er es jh ji bd b be z dx translated">用于执行的manifest.xml。具有管理员角色的exe</p></figure><h1 id="1d8d" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">用JRE打包可执行文件</h1><p id="3abe" class="pw-post-body-paragraph jk jl hi jm b jn lc ij jp jq ld im js jt le jv jw jx lf jz ka kb lg kd ke kf hb bi translated">在创建可执行文件之后，您希望<a class="ae jj" href="https://javarevisited.blogspot.com/2021/05/why-java-developer-should-learn-maven-or-gradle.html" rel="noopener ugc nofollow" target="_blank"> Maven </a>将所有东西捆绑在一起。这是使用<code class="du kg kh ki kj b">pom.xml</code>中的组装插件完成的。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div><p class="jf jg et er es jh ji bd b be z dx translated">创建exe和jre压缩文件的汇编插件</p></figure><p id="573d" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">以下是创建包含可执行文件和一个<a class="ae jj" href="http://www.java67.com/2013/02/difference-between-jdk-and-jre-in-java.html" rel="noopener ugc nofollow" target="_blank"> JRE </a>的zip文件的基本汇编规范(<code class="du kg kh ki kj b">src/main/resources/assembly.xml</code>)。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div><p class="jf jg et er es jh ji bd b be z dx translated">包括exe和jre文件和文件夹的程序集规范</p></figure><p id="3104" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">该示例在构建应用程序的机器上绑定了由<code class="du kg kh ki kj b"><a class="ae jj" href="https://javarevisited.blogspot.com/2012/02/how-to-set-javahome-environment-in.html#axzz5YQtfRK2a" rel="noopener ugc nofollow" target="_blank">JAVA_HOME</a></code> <a class="ae jj" href="https://javarevisited.blogspot.com/2012/02/how-to-set-javahome-environment-in.html#axzz5YQtfRK2a" rel="noopener ugc nofollow" target="_blank">环境变量</a>指定的JRE。</p><p id="1109" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">或者，一个更好的选择是从您组织的中央maven artifactory下载JRE，并在随后由汇编插件选择的地方将其解包。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div><p class="jf jg et er es jh ji bd b be z dx translated">不要使用系统jre，而是从可信任的工厂获取jre</p></figure><p id="0246" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">最后，执行maven命令将所有的东西组合在一起。</p><pre class="iy iz ja jb fd lj kj lk ll aw lm bi"><span id="6165" class="ln kl hi kj b fi lo lp l lq lr">mvn clean package</span></pre><p id="75f3" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">将在<code class="du kg kh ki kj b">target</code>文件夹中创建一个zip文件，其结构如下</p><pre class="iy iz ja jb fd lj kj lk ll aw lm bi"><span id="6af5" class="ln kl hi kj b fi lo lp l lq lr">&lt;artifactId-version&gt;.zip<br/>|- lib<br/>|  |- jre<br/>|- &lt;<!-- -->artifactId-<!-- -->version&gt;.exe</span></pre></div><div class="ab cl ls lt gp lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="hb hc hd he hf"><p id="558d" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">我的<a class="ae jj" href="https://github.com/nitishborade/explorations/tree/master/jar-to-exe" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>有一个示例maven项目，它将一个<code class="du kg kh ki kj b">jar</code>格式的Java应用程序转换成一个<code class="du kg kh ki kj b">exe</code>并将其打包到JRE中。</p><h1 id="be64" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">参考</h1><p id="dd68" class="pw-post-body-paragraph jk jl hi jm b jn lc ij jp jq ld im js jt le jv jw jx lf jz ka kb lg kd ke kf hb bi translated"><a class="ae jj" href="http://launch4j.sourceforge.net/" rel="noopener ugc nofollow" target="_blank"> Launch4J首页</a> <br/> <a class="ae jj" href="https://github.com/lukaszlenart/launch4j-maven-plugin" rel="noopener ugc nofollow" target="_blank"> Launch4J Maven插件在GitHub上</a> <br/> <a class="ae jj" href="https://stackoverflow.com/questions/38750826/launch4j-maven-plugin-configure-exe-to-require-administrator-role" rel="noopener ugc nofollow" target="_blank"> Launch4J Maven插件配置为需要管理员角色</a><br/><a class="ae jj" href="https://github.com/NetHome/ProtocolAnalyzer/blob/master/pom.xml#L239" rel="noopener ugc nofollow" target="_blank">launch 4j Maven插件的另一个例子</a> <br/> <a class="ae jj" href="https://github.com/TheBoegl/gradle-launch4j" rel="noopener ugc nofollow" target="_blank"> Launch4J插件用于Gradle项目</a></p><p id="225f" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">图片归属于icon xar创建的<br/> <a class="ae jj" href="https://www.flaticon.com/free-icon/jar_2305884?term=jar%20extension&amp;page=1&amp;position=22&amp;page=1&amp;position=22&amp;related_id=2305884&amp;origin=search" rel="noopener ugc nofollow" target="_blank"> Jar图标— Flaticon <br/> </a> <a class="ae jj" href="https://www.flaticon.com/free-icon/exe_2305870?term=exe&amp;related_id=2306085&amp;origin=tag" rel="noopener ugc nofollow" target="_blank"> Exe图标icon xar—flat icon</a></p></div></div>    
</body>
</html>