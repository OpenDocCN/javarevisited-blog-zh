<html>
<head>
<title>Var me a River</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">给我一条河</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/var-me-a-river-8dd742d7494?source=collection_archive---------1-----------------------#2020-05-14">https://medium.com/javarevisited/var-me-a-river-8dd742d7494?source=collection_archive---------1-----------------------#2020-05-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0f88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">仅仅因为你打字少，并不意味着它没有类型。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3a88c035666a621e6124390295243c33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cbde0nFdAUsXE7NKOq8qTA.jpeg"/></div></div></figure><h1 id="f394" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">局部变量类型推理</h1><p id="ede1" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">自从Java 10发布以来，我们就有了本地变量类型推断(LVTI ),在Java中也被称为<code class="du ks kt ku kv b">var</code>关键字。关于它的有用性，以及开发人员应该在何时何地使用它，已经有了很多讨论。</p><p id="162f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我的简单指南。当你可以将一条代码河简化为一个水坑或池塘，并且仍然理解你正在阅读的内容时，使用<code class="du ks kt ku kv b">var</code>。代码的河流是需要你横向阅读的代码。当你使用<code class="du ks kt ku kv b">var</code>时，你必须非常小心地命名你的变量，这样它们才是描述性的，并且可能包含关于它们引用的类型的信息。</p><p id="7780" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是使用<code class="du ks kt ku kv b">var</code>前后的一些对比示例。</p><h1 id="a109" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">基元</h1><p id="8f61" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">不要将<code class="du ks kt ku kv b">var</code>用于原语。永远不会。</p><h2 id="dbcf" class="kw jq hi bd jr kx ky kz jv la lb lc jz iq ld le kd iu lf lg kh iy lh li kl lj bi translated">示例:</h2><p id="59b1" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">之前:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lk"><img src="../Images/985360238755d57ca278014a91e8f005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W5QwQCemXwPlf4sYHyaLKg.png"/></div></div><p class="ll lm et er es ln lo bd b be z dx translated">之前:这里用int有意义。</p></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lp"><img src="../Images/2c0a2c55cc262cb6d1d96ff8b149ab72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vgUrCPuT0khcM411xc5H8g.png"/></div></div><p class="ll lm et er es ln lo bd b be z dx translated">后:在这里使用var没有增加任何价值，所以不要使用！</p></figure><h1 id="2315" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">目标</h1><p id="328f" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">如果你给变量起了一个有意义的名字，并且在代码的上下文中很清楚它的类型是什么，那么使用简单对象类型的<code class="du ks kt ku kv b">var</code>。如果您可以使用<code class="du ks kt ku kv b">var</code>提高代码的水平可读性，这将使阅读和浏览代码变得更加容易。</p><h2 id="c0e7" class="kw jq hi bd jr kx ky kz jv la lb lc jz iq ld le kd iu lf lg kh iy lh li kl lj bi translated">示例:</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lq"><img src="../Images/27899e4f8702079d18e4d90b9617d099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qIGtTI3uin47fb4_bRJmSg.png"/></div></div><p class="ll lm et er es ln lo bd b be z dx translated">Before:在这里使用IntSummaryStatistics类型会产生大量代码。</p></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lr"><img src="../Images/13dc4d383a589381d0c0c0b0e452a2cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sspiXXFdOK48LHtYv83f2g.png"/></div></div><p class="ll lm et er es ln lo bd b be z dx translated">使用var代替IntSummaryStatistics可以减少水平代码，而不会减少理解</p></figure><h1 id="1165" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">通用容器</h1><p id="331f" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">当你可以给类型一个有意义的名字，并且泛型类型很容易从变量名或上下文中确定时，使用<code class="du ks kt ku kv b">var</code>和泛型容器。</p><h2 id="690f" class="kw jq hi bd jr kx ky kz jv la lb lc jz iq ld le kd iu lf lg kh iy lh li kl lj bi translated">示例:</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ls"><img src="../Images/31c87550ec98f696ded8ee6910e69417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KL20JlzC59fnVdGF7YZcuQ.png"/></div></div><p class="ll lm et er es ln lo bd b be z dx translated">以前:泛型类型占据了大量的水平空间</p></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lt"><img src="../Images/93301d4fa6be9f281c43a70c46ef039d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zfw8pLd_l5OM8pCEJPNmYg.png"/></div></div><p class="ll lm et er es ln lo bd b be z dx translated">After:用var替换的泛型类型可以更快地公开变量名</p></figure><h1 id="9cf9" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">建议</h1><p id="03ef" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">局部变量类型推断(LVTI)或<code class="du ks kt ku kv b">var</code>为我们提供了选项，帮助我们提高代码的可读性。然而，这个特性并不是万灵药，如果删除显式类型信息会使代码难以理解，那么就不要使用它。编译器可以很容易地推断出类型信息，但读者并不总是很容易推断出类型信息。</p><p id="8965" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为读者写你的代码，而不是为了节省打字。如果你想节省输入，我推荐使用后缀完成和<a class="ae lu" href="https://itnext.io/top-5-intellijidea-and-android-studio-courses-for-java-and-android-programmers-afcc27309b60" rel="noopener ugc nofollow" target="_blank"> IntelliJIDEA </a>中的<code class="du ks kt ku kv b">.var</code>来自动生成左边的类型信息，然后用<code class="du ks kt ku kv b">var</code>替换类型，只要它有助于可读性而不降低可理解性。</p><p id="c315" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lv">我是</em><a class="ae lu" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank"><em class="lv">Eclipse Collections</em></a><em class="lv">OSS项目在</em><a class="ae lu" href="https://projects.eclipse.org/projects/technology.collections" rel="noopener ugc nofollow" target="_blank"><em class="lv">Eclipse Foundation</em></a><em class="lv">的项目负责人。</em> <a class="ae lu" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank"> <em class="lv">月食收藏</em> </a> <em class="lv">是开投</em> <a class="ae lu" href="https://github.com/eclipse/eclipse-collections/blob/master/CONTRIBUTING.md" rel="noopener ugc nofollow" target="_blank"> <em class="lv">投稿</em> </a> <em class="lv">。如果你喜欢这个库，你可以在GitHub上让我们知道。</em></p></div></div>    
</body>
</html>