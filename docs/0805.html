<html>
<head>
<title>Building native applications for all PC and mobile platforms from a single JavaFX project with Gluon Mobile and GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Gluon Mobile和GitHub操作，从一个JavaFX项目中为所有PC和移动平台构建本地应用程序</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/building-native-applications-for-all-pc-and-mobile-platforms-from-a-single-javafx-project-with-cf1c591fa10a?source=collection_archive---------3-----------------------#2020-11-25">https://medium.com/javarevisited/building-native-applications-for-all-pc-and-mobile-platforms-from-a-single-javafx-project-with-cf1c591fa10a?source=collection_archive---------3-----------------------#2020-11-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7f4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">帖子<a class="ae jd" href="https://webtechie.be/post/2020-11-17-starting-javafx-project-with-gluon-tools/" rel="noopener ugc nofollow" target="_blank">“用Gluon工具启动JavaFX项目”</a>向你展示了如何借助<a class="ae jd" href="https://plugins.jetbrains.com/plugin/7864-gluon" rel="noopener ugc nofollow" target="_blank">“Gluon插件”</a>在IntelliJ IDEA中点击几下就启动一个Gluon移动多视图项目。</p><p id="eef3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本帖中，我们将使用这样一个项目，并使用GitHub Actions从一个代码库将它构建为Windows、macOS、iOS、<a class="ae jd" rel="noopener" href="/javarevisited/top-10-courses-to-learn-linux-command-line-in-2020-best-and-free-f3ee4a78d0c0?source=collection_home---4------0-----------------------"> <em class="je"> Linux </em> </a>和<a class="ae jd" rel="noopener" href="/javarevisited/top-5-courses-to-learn-android-for-java-programmers-667e03d995b4"> Android </a>的原生应用程序！</p><blockquote class="jf jg jh"><p id="d8d9" class="if ig je ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">对，没错！<br/>真“写一次，到处跑”！！！</p></blockquote><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/3ac3352a4520176b5dbee587939cac32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wE7P5AWIiB4y9UOpZ2V9gg.jpeg"/></div></div></figure><h1 id="7b6b" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">应用程序</h1><p id="147f" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">这个应用程序是基于我去年为我的书<a class="ae jd" href="https://webtechie.be/books/" rel="noopener ugc nofollow" target="_blank">“Raspberry Pi上的Java入门”</a>创建的Java库而构建的，它可以帮助你从色环计算电阻的值。该库在<a class="ae jd" href="https://webtechie.be/post/2019-11-25-resistor-color-codes-and-calculations-a-java-maven-library/" rel="noopener ugc nofollow" target="_blank">“作为Java Maven库的电阻颜色代码和计算”</a>中有进一步描述。</p><div class="jm jn jo jp fd ab cb"><figure class="la jq lb lc ld le lf paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/556a5f22e7145c548eea27d84c93efcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*f5ZKJ5Vstv8oZ2TwDpIV5Q.png"/></div></figure><figure class="la jq lg lc ld le lf paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/522725a22873513eada1b345d905c8b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*8NxBBpcX8BcavO7ADTg17w.png"/></div></figure><figure class="la jq lh lc ld le lf paragraph-image"><img src="../Images/ce1f29d3df9a6e0d36711653756908be.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*32miG64rhww8m4TrTGB2wg.jpeg"/></figure></div><h1 id="c348" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">基于“胶子移动多视角”</h1><p id="7554" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">基于一个“Gluon Mobile Multiview”项目，创建一个具有两个计算视图和一个“关于”视图的工作应用程序只需要几个小时。非常感谢Gluon的José Pereda，他非常友好地通过一些巧妙的调整和CSS改进，将我丑陋的概念证明改进为一个更好看的布局。</p><div class="jm jn jo jp fd ab cb"><figure class="la jq li lc ld le lf paragraph-image"><img src="../Images/3fcbfbd1c611623a30cbba43b910e97b.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*TeiEBpGw9tl6JdRLSGbh5w.png"/></figure><figure class="la jq lj lc ld le lf paragraph-image"><img src="../Images/f6414b206e01f500e5f4aca155d9a0e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*R-l5ymRPG6CeFXw9bvm9rA.png"/></figure><figure class="la jq lk lc ld le lf paragraph-image"><img src="../Images/ed032235363e3f18b493d2647d54ba48.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*JbZg-LQBfL2BCBRcjbQHnA.png"/></figure></div><div class="ab cb"><figure class="la jq ll lc ld le lf paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/031cf439d0c24811c10857b4be0c22b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:394/format:webp/1*ShiE9ejE2iPolJGImZm8cg.png"/></div></figure><figure class="la jq lm lc ld le lf paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/ab5115d4065bc0ec013d01515b7abf81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*Swe-yWBZeJog11Rccr0Wpg.png"/></div></figure><figure class="la jq ln lc ld le lf paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/877f5f2414e2f4193d5191589dd0487c.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*RjZnVBe29uJHxyhOv_f39Q.png"/></div></figure></div><h1 id="fa76" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">还没完成…</h1><p id="22fa" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">由于第一个版本的创建是为了从<a class="ae jd" rel="noopener" href="/javarevisited/6-free-courses-to-learn-servlet-jsp-and-java-fx-in-2020-best-of-lot-720201c84f63"> JavaFX </a>应用程序到本地应用程序和应用程序商店出版物的概念验证流程，因此代码还没有微调…</p><p id="7409" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有一些事情要做:</p><ul class=""><li id="66ea" class="lo lp hi ih b ii ij im in iq lq iu lr iy ls jc lt lu lv lw bi translated">在“关于”屏幕上打开网址的按钮，使用仅支持iOS和Android的<code class="du lx ly lz ma b">com.gluonhq.attach.browser.BrowserService</code>。所以要么需要扩展Gluon-library，要么这个应用程序需要检查环境并运行适当的命令。</li><li id="0844" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated">颜色计算器屏幕的布局不适合横向布局，因此需要重新设计。</li><li id="ee6a" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated">电阻图应根据可用空间进行缩放。</li><li id="1212" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated">在所有设备上实现像素完美布局的一般工作。</li></ul><p id="6938" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">GitHub项目欢迎任何帮助和请求；-)</p><h1 id="1e4a" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">GitHub操作</h1><p id="4ffb" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> GitHub Actions </a>通过GitHub的持续集成和持续部署，您可以自动化您的软件工作流程。</p><p id="5c7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过添加。yml-文件到目录”。github/workflows”在您的项目中，这些将按照配置运行。在<a class="ae jd" href="https://docs.github.com/en/free-pro-team@latest/actions/learn-github-actions/introduction-to-github-actions" rel="noopener ugc nofollow" target="_blank">“GitHub操作简介”</a>中提供了一个简单的例子，它检查推送的代码，安装软件依赖项，并运行<code class="du lx ly lz ma b">bats -v</code>:</p><pre class="jm jn jo jp fd mg ma mh mi aw mj bi"><span id="f567" class="mk jy hi ma b fi ml mm l mn mo">name: learn-github-actions<br/>on: [push]<br/>jobs: <br/>   check-bats-version:<br/>   runs-on: ubuntu-latest<br/>   steps:<br/>      - uses: actions/checkout@v2<br/>      - uses: actions/setup-node@v1<br/>      - run: npm install -g bats<br/>      - run: bats -v</span></pre><h1 id="5c86" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">胶子</h1><p id="15b4" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">Gluon提供了一种简单而现代的方法来开发Java客户端应用程序。这些应用程序可以在JVM上运行，也可以转换成特定于平台的本机映像，这种映像启动速度极快，只占用很少的空间。此外，除了所有桌面环境之外，应用程序还可以面向Android、iOS和嵌入式。</p><h1 id="5abe" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">Gluon客户端插件</h1><p id="d7db" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">Gluon客户端插件通过将Java客户端应用程序及其所有必需的依赖项编译成本地代码，利用GraalVM、OpenJDK和<a class="ae jd" href="https://javarevisited.blogspot.com/2020/06/top-5-courses-to-learn-java-fx-in-2020.html#axzz6ehrUZiIN" rel="noopener ugc nofollow" target="_blank"> JavaFX </a>，以便它可以作为目标平台上的本地应用程序直接执行。</p><p id="203b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">优势之一是启动时间更快，因为不再需要启动JVM。生成的应用程序将完全集成到本机操作系统中。</p><p id="8c4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更多信息可在Gluon网站的<a class="ae jd" href="https://docs.gluonhq.com/" rel="noopener ugc nofollow" target="_blank">文档页面获得。</a></p><h1 id="18fb" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">Gluon GitHub构建许可操作</h1><p id="c99b" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">GitHub Actions系统允许“插入”第三方提供的构建步骤。这些都是GitHub项目，它们允许你简化你的。yml-文件。</p><p id="165c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">gluon创建了这样一个构建动作，您可以将它集成到您的JavaFX本地应用程序的构建过程中:<a class="ae jd" href="https://github.com/gluonhq/gluon-build-license" rel="noopener ugc nofollow" target="_blank">“Gluon-build-license”</a>以便在构建过程中正确使用您的Gluon许可证密钥。您需要将此许可证添加到您的GitHub项目库机密中。</p><p id="f66f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个许可步骤是可选的！如果你没有，应用程序启动时会显示一个弹出窗口。如果你正在做一个学生或开源项目，你可以申请一个免费的许可给glon，如<a class="ae jd" href="https://gluonhq.com/programs/free-gluon-licenses/" rel="noopener ugc nofollow" target="_blank">“免费glon许可”</a>所述。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mp"><img src="../Images/d82a9383b99acf9d5851d85b3b16d759.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wMGoth2MZrYOoiNq.png"/></div></div></figure><h1 id="eaba" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">使用GraalVM构建为本机应用程序</h1><p id="426b" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">胶子衬底消除了使用GraalVM原生映像的大部分复杂性。你可以用Java创建一个应用程序，在你的桌面上测试它，然后通过在<a class="ae jd" rel="noopener" href="/javarevisited/6-best-maven-courses-for-beginners-in-2020-23ea3cba89"> Maven </a>中定义一个配置文件来编译Java字节码并将其链接到特定平台的本机映像。生成的二进制文件可以部署到AppStore或Google Play。</p><h1 id="de9a" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">GitHub操作的构建过程</h1><p id="5d3a" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">在这篇文章中，所有不同的构建过程都被分成不同的部分。yml-files，但是GitHub Actions允许您将不同的“作业”合并到一个这样的文件中。</p><h1 id="3108" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">总体描述</h1><p id="0bf9" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">的。yml-structure对于所有构建类型都非常相似，其结构如下:</p><ul class=""><li id="8fae" class="lo lp hi ih b ii ij im in iq lq iu lr iy ls jc lt lu lv lw bi translated">为构建文件命名</li><li id="935f" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated">定义您希望构建从哪个分支提交和/或提取请求开始</li><li id="359c" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated">定义要运行的操作系统</li><li id="9783" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated">下载GraalVM</li><li id="0cb1" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated">对于桌面:创建一个将复制构建结果的临时目录</li><li id="91e1" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated">用<a class="ae jd" rel="noopener" href="/javarevisited/top-10-free-courses-to-learn-maven-jenkins-and-docker-for-java-developers-51fa7a1e66f6?source=collection_home---4------3-----------------------"> Maven </a>、GraalVM和Gluon客户端插件构建应用程序</li><li id="e2fe" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated">桌面:将应用程序复制到桌面的登台目录，并将登台上载到构建过程的结果包中</li><li id="d15f" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated">应用程序:上传到Apple TestFlight或Google Play</li></ul><p id="c2e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据操作系统的不同，需要进行一些额外的设置步骤，如下所述。</p><h1 id="5f17" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">桌面应用程序</h1><h2 id="dc3e" class="mk jy hi bd jz mq mr ms kd mt mu mv kh iq mw mx kl iu my mz kp iy na nb kt nc bi translated">Linux JAR +本地应用程序</h2><p id="a3f3" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">动作文件:<a class="ae jd" href="https://github.com/FDelporte/ResistorCalculatorApp/blob/master/.github/workflows/maven-ubuntu-linux.yml" rel="noopener ugc nofollow" target="_blank"> maven-ubuntu-linux.yml </a></p><p id="f1f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于Linux，需要一个额外库的列表，这是在下载GraalVM之后通过一个额外的步骤完成的。</p><pre class="jm jn jo jp fd mg ma mh mi aw mj bi"><span id="fe56" class="mk jy hi ma b fi ml mm l mn mo">- name: Install libraries<br/>  run: sudo apt install libasound2-dev libavcodec-dev libavformat-dev libavutil-dev libgl-dev libgtk-3-dev libpango1.0-dev libxtst-dev</span></pre><p id="f9ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个构建过程会生成一个JAR和一个Linux本地应用程序。对于第一个，我们运行一个Maven包:</p><pre class="jm jn jo jp fd mg ma mh mi aw mj bi"><span id="2879" class="mk jy hi ma b fi ml mm l mn mo">- name: Build JAR with Maven<br/>  run: mvn -B package</span></pre><p id="15d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为构建过程是在Linux机器上运行的，所以我们可以将目标定义为desktop来构建一个带有Gluon Maven客户端插件的原生Linux应用程序，并且需要提供GraalVM位置:</p><pre class="jm jn jo jp fd mg ma mh mi aw mj bi"><span id="f410" class="mk jy hi ma b fi ml mm l mn mo">- name: Gluon Build<br/>  run: mvn -Pdesktop client:build client:package<br/>  env:<br/>     GRAALVM_HOME: ${{ env.JAVA_HOME }}</span></pre><h2 id="dad4" class="mk jy hi bd jz mq mr ms kd mt mu mv kh iq mw mx kl iu my mz kp iy na nb kt nc bi translated">Windows本机应用程序</h2><p id="3672" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">动作文件:<a class="ae jd" href="https://github.com/FDelporte/ResistorCalculatorApp/blob/master/.github/workflows/maven-windows.yml" rel="noopener ugc nofollow" target="_blank"> maven-windows.yml </a></p><p id="aa1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要构建应用程序的Windows版本，需要Visual Studio，这可以通过两个额外的步骤来完成:</p><ul class=""><li id="8744" class="lo lp hi ih b ii ij im in iq lq iu lr iy ls jc lt lu lv lw bi translated"><a class="ae jd" href="https://github.com/microsoft/setup-msbuild" rel="noopener ugc nofollow" target="_blank">Microsoft/setup-msbuild</a>:GitHub动作，方便在构建的工作流路径中配置MSBuild。NET框架应用程序。</li><li id="6157" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated"><a class="ae jd" href="https://github.com/egor-tensin/vs-shell" rel="noopener ugc nofollow" target="_blank"> egor-tensin/vs-shell </a>:设置Visual Studio shell环境的GitHub动作。</li></ul><pre class="jm jn jo jp fd mg ma mh mi aw mj bi"><span id="0013" class="mk jy hi ma b fi ml mm l mn mo">- name: Add msbuild to PATH<br/>  uses: microsoft/setup-msbuild@v1.0.2<br/>- name: Visual Studio shell<br/>  uses: egor-tensin/vs-shell@v1</span></pre><p id="4143" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">脚本的其余部分类似于Linux，最后，我们只将exe文件复制到包中。</p><h2 id="20a1" class="mk jy hi bd jz mq mr ms kd mt mu mv kh iq mw mx kl iu my mz kp iy na nb kt nc bi translated">MacOS本机应用程序</h2><p id="fd28" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">动作文件:<a class="ae jd" href="https://github.com/FDelporte/ResistorCalculatorApp/blob/master/.github/workflows/maven-macos.yml" rel="noopener ugc nofollow" target="_blank"> maven-macos.yml </a></p><p id="8923" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">构建Apple应用程序需要Xcode。同样，我们可以通过使用现有操作将它添加到我们的步骤中:</p><ul class=""><li id="ea81" class="lo lp hi ih b ii ij im in iq lq iu lr iy ls jc lt lu lv lw bi translated"><a class="ae jd" href="https://github.com/maxim-lobanov/setup-xcode" rel="noopener ugc nofollow" target="_blank">maxim-loba nov/setup-xcode</a>:GitHub动作，用特定版本的Xcode设置你的工作流程。</li></ul><pre class="jm jn jo jp fd mg ma mh mi aw mj bi"><span id="dcdb" class="mk jy hi ma b fi ml mm l mn mo">- uses: maxim-lobanov/setup-xcode@v1<br/>  with:<br/>    xcode-version: '11.7.0'</span></pre><p id="2917" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并将结果文件“target/client/x86 _ 64-Darwin/Resistor Calculator”复制到包中。</p><h1 id="d530" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">智能手机应用</h1><p id="14a9" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">当我开始从事这篇文章和这个项目时，我只是想在所有平台上实现成功的本地构建。但是后来胶子介入并进一步推动了这件事，你猜怎么着？由于Erwin Morrhey 的努力，这款应用程序现在已经同时出现在了Google Play<a class="ae jd" href="https://play.google.com/store/apps/details?id=be.webtechie.resistorcalculatorapp" rel="noopener ugc nofollow" target="_blank">和苹果应用商店</a><a class="ae jd" href="https://apps.apple.com/us/app/gluon-resistor-calculator/id1540638756" rel="noopener ugc nofollow" target="_blank">上。</a></p><div class="jm jn jo jp fd ab cb"><figure class="la jq nd lc ld le lf paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/c3a8204fe546b6fdf31571a8132bdd34.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/format:webp/1*zlt-fv35gwvgUiEhXdhhtw.png"/></div></figure><figure class="la jq ne lc ld le lf paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/9a494de31a00c7bec706ed539b8e3a86.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*2PlkItm7iKmYvXCka_HzbQ.png"/></div></figure><figure class="la jq nf lc ld le lf paragraph-image"><img src="../Images/f3cc24f7f4ef6251197036a26f14502c.png" data-original-src="https://miro.medium.com/v2/resize:fit:248/format:webp/1*GA-Gef8ySw7LqnUzkheZaA.png"/></figure></div><p id="8196" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">GitHub动作中包含了构建和上传到这两个商店所需的所有步骤！！！</p><p id="856d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您将需要一个开发人员帐户，用于存储和所需的密钥。由于我还没有它们，Gluon已经做了一个分支，这些步骤只有在提供了所需的密钥的情况下才能完全运行，正如你在GluonHQ GitHub库中的<a class="ae jd" href="https://github.com/gluonhq/ResistorCalculatorApp" rel="noopener ugc nofollow" target="_blank">分支上看到的那样。</a></p><h2 id="ce7d" class="mk jy hi bd jz mq mr ms kd mt mu mv kh iq mw mx kl iu my mz kp iy na nb kt nc bi translated">iOS应用程序(MacOS版本)</h2><p id="9176" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">动作文件:<a class="ae jd" href="https://github.com/FDelporte/ResistorCalculatorApp/blob/master/.github/workflows/maven-ios.yml" rel="noopener ugc nofollow" target="_blank"> maven-ios.yml </a></p><p id="9807" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需要额外的设置，你可以通过在GitHub项目的secrets-section中定义它们来隐藏它们，就像我们已经对Gluon许可证密钥所做的那样。</p><div class="jm jn jo jp fd ab cb"><figure class="la jq ng lc ld le lf paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/e75d4504ff84042b44ece927d8f8535c.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*5CS7Vrv02h8Vmy15Q1veOQ.png"/></div></figure><figure class="la jq nh lc ld le lf paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/7f308534c7da1839d2392f111bb49cfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*wW5A82Ve8yEj6K7fpgHy2A.png"/></div></figure><figure class="la jq ni lc ld le lf paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/e9c3d4d44f982f242eb7cb86a91cf11d.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*fmzJup3VD1CNXYe7jxb7Tg.png"/></div></figure></div><p id="ce3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，我们可以使用现有的GitHub操作来扩展我们之前的“MacOS native”构建文件:</p><ul class=""><li id="b5e9" class="lo lp hi ih b ii ij im in iq lq iu lr iy ls jc lt lu lv lw bi translated"><a class="ae jd" href="https://github.com/Apple-Actions/import-codesign-certs" rel="noopener ugc nofollow" target="_blank">Apple-Actions/import-Code sign-cert</a>:用于将代码签名证书导入到钥匙串中的GitHub操作。</li><li id="3377" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated"><a class="ae jd" href="https://github.com/Apple-Actions/download-provisioning-profiles" rel="noopener ugc nofollow" target="_blank">Apple-Actions/download-provisioning-profiles</a>:从Apple AppStore Connect下载预置描述文件的Github动作。</li><li id="fa19" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated"><a class="ae jd" href="https://github.com/Apple-Actions/upload-testflight-build" rel="noopener ugc nofollow" target="_blank">Apple-Actions/upload-test flight-build</a>:将构建上传到Apple TestFlight的GitHub动作。</li></ul><p id="24ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过使用这些密钥，所有需要的步骤都可以在一个GitHub动作中运行。例如，将应用程序上传到TestFlight的最后一步:</p><pre class="jm jn jo jp fd mg ma mh mi aw mj bi"><span id="5345" class="mk jy hi ma b fi ml mm l mn mo">- uses: Apple-Actions/upload-testflight-build@master<br/>  if: ${{ github.repository_owner == 'gluonhq' }}<br/>  with:<br/>    app-path: target/client/arm64-ios/Resistor Calculator.ipa <br/>    issuer-id: ${{ secrets.APPSTORE_ISSUER_ID }}<br/>    api-key-id: ${{ secrets.APPSTORE_KEY_ID }}<br/>    api-private-key: ${{ secrets.APPSTORE_PRIVATE_KEY }}</span></pre><h2 id="c177" class="mk jy hi bd jz mq mr ms kd mt mu mv kh iq mw mx kl iu my mz kp iy na nb kt nc bi translated">Android应用程序(Linux版本)</h2><p id="cb32" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">动作文件:<a class="ae jd" href="https://github.com/FDelporte/ResistorCalculatorApp/blob/master/.github/workflows/maven-ubuntu-android.yml" rel="noopener ugc nofollow" target="_blank"> maven-ubuntu-android.yml </a></p><p id="1c99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该文件中使用的操作(基于之前的“Linux本地”文件):</p><ul class=""><li id="fe2c" class="lo lp hi ih b ii ij im in iq lq iu lr iy ls jc lt lu lv lw bi translated"><a class="ae jd" href="https://github.com/timheuer/base64-to-file" rel="noopener ugc nofollow" target="_blank"> timheuer/base64-to-file </a>:一个GitHub动作，它接受一个base64字符串并解码成一个文件，以便在后面的动作中用作参数。</li><li id="7525" class="lo lp hi ih b ii mb im mc iq md iu me iy mf jc lt lu lv lw bi translated"><a class="ae jd" href="https://github.com/r0adkll/upload-google-play" rel="noopener ugc nofollow" target="_blank">r0adkll/upload-Google-play</a>:上传一个Android的GitHub动作。apk或者。aab文件到Google Play控制台。</li></ul><p id="70fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Google Play的其他步骤包括初始化Android密钥库:</p><pre class="jm jn jo jp fd mg ma mh mi aw mj bi"><span id="5d90" class="mk jy hi ma b fi ml mm l mn mo">- name: Setup Android Keystore<br/>  if: ${{ github.repository_owner == 'gluonhq' }}<br/>  id: android_keystore_file<br/>  uses: timheuer/base64-to-file@v1<br/>  with:<br/>    fileName: 'my.keystore'<br/>    encodedString: ${{ secrets.GLUON_ANDROID_KEYSTORE_BASE64 }}</span></pre><p id="bd45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，上传通过以下方式完成:</p><pre class="jm jn jo jp fd mg ma mh mi aw mj bi"><span id="0291" class="mk jy hi ma b fi ml mm l mn mo">- name: Upoad to Google Play<br/>  if: ${{ github.repository_owner == 'gluonhq' }}<br/>  uses: r0adkll/upload-google-play@v1<br/>  with:<br/>   serviceAccountJsonPlainText: ${{ secrets.ANDROID_SERVICE_ACCOUNT_JSON }}<br/>   packageName: be.webtechie.resistorcalculatorapp<br/>   releaseFiles: target/client/aarch64-android/gvm/Resistor Calculator.apk<br/>   track: beta</span></pre><h1 id="a4cb" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">结论</h1><p id="bc75" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">JavaFX与Gluon工具和GitHub动作相结合的力量是惊人的。构建和分发真正的跨平台应用程序从未如此简单！要在不同的平台上运行，真的不需要任何代码更改。正如您从已处理的构建中看到的，完全相同的代码用于创建Windows、Linux、MacOS、<a class="ae jd" rel="noopener" href="/javarevisited/my-favorite-free-courses-to-learn-ios-app-development-f172e7d3ba5d"> iOS </a>和<a class="ae jd" rel="noopener" href="/javarevisited/5-free-courses-to-become-an-android-developer-d4d207f53675"> Android </a>的原生应用程序！</p><p id="8f0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">胶子也在使用这个工作流程制作一个样品，这个样品可以在<a class="ae jd" href="https://github.com/gluonhq/hello-gluon-ci" rel="noopener ugc nofollow" target="_blank">github.com/gluonhq/hello-gluon-ci</a>上获得。</p></div><div class="ab cl nj nk gp nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="hb hc hd he hf"><p id="3061" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="je">原载于</em><a class="ae jd" href="https://webtechie.be/post/2020-11-24-javafx-gluon-mobile-github-actions/" rel="noopener ugc nofollow" target="_blank"><em class="je">https://webtechie . be</em></a><em class="je">。</em></p></div></div>    
</body>
</html>