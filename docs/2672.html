<html>
<head>
<title>What Does String Pool Mean in Java?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">字符串池在Java中是什么意思？</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/what-does-string-pool-mean-in-java-996f0554e1dc?source=collection_archive---------1-----------------------#2022-12-31">https://medium.com/javarevisited/what-does-string-pool-mean-in-java-996f0554e1dc?source=collection_archive---------1-----------------------#2022-12-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="0516" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">字符串-面试-问题</h2><div class=""/><div class=""><h2 id="bb84" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">了解Java中的字符串池，以及如何在字符串池中存储和检索对象。</h2></div></div><div class="ab cl jg jh gp ji" role="separator"><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl"/></div><div class="hb hc hd he hf"><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es jn"><img src="../Images/9e316d56fc30281e522f92962ed26ff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DKwgqd9QzoS0WVaK7Qxbgg.png"/></div></div><p class="jz ka et er es kb kc bd b be z dx translated">使用intern()方法的字符串池示例</p></figure></div><div class="ab cl jg jh gp ji" role="separator"><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl"/></div><div class="hb hc hd he hf"><h1 id="a5dc" class="kd ke hi bd kf kg kh ki kj kk kl km kn ix ko iy kp ja kq jb kr jd ks je kt ku bi translated">Java中的字符串池是什么？</h1><p id="4da1" class="pw-post-body-paragraph kv kw hi kx b ky kz is la lb lc iv ld le lf lg lh li lj lk ll lm ln lo lp lq hb bi translated"><em class="lr">它是一个</em> <strong class="kx hs"> <em class="lr">池中的字符串</em> </strong> <em class="lr">存放在</em> <strong class="kx hs"> <em class="lr">堆中的内存</em> </strong> <em class="lr">。如果池中不存在创建的所有字符串，则它们都存储在该池中。</em></p><blockquote class="ls lt lu"><p id="babd" class="kv kw lr kx b ky lv is la lb lw iv ld lx ly lg lh lz ma lk ll mb mc lo lp lq hb bi translated">String类是不可变的类，因此所有使用文字或new运算符创建的string对象都不能被更改/修改。</p></blockquote></div><div class="ab cl jg jh gp ji" role="separator"><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl"/></div><div class="hb hc hd he hf"><h1 id="4bb0" class="kd ke hi bd kf kg kh ki kj kk kl km kn ix ko iy kp ja kq jb kr jd ks je kt ku bi translated">创建字符串对象有两种方式:</h1><h2 id="3a31" class="md ke hi bd kf me mf mg kj mh mi mj kn le mk ml kp li mm mn kr lm mo mp kt ho bi translated">1.使用双引号(" ")[当使用字符串时]</h2><pre class="jo jp jq jr fd mq mr ms bn mt mu bi"><span id="0a46" class="mv ke hi mr b be mw mx l my mz">String name1 = “Java”;</span></pre><p id="682f" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated">上面的语句创建了一个string对象，如果它还没有出现在字符串池中，就把它放在字符串池中，并给name1分配了一个引用。</p><p id="086c" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated">在这种情况下，<strong class="kx hs">只创建一个对象。</strong></p><h2 id="20cf" class="md ke hi bd kf me mf mg kj mh mi mj kn le mk ml kp li mm mn kr lm mo mp kt ho bi translated">2.使用“新”关键字:</h2><pre class="jo jp jq jr fd mq mr ms bn mt mu bi"><span id="6186" class="mv ke hi mr b be mw mx l my mz">String name2 = new String(“newJava”);</span></pre><p id="af25" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated">上面的语句在堆内存中创建一个字符串对象，并检查它是否存在于字符串池中。如果"<strong class="kx hs"> newjava" </strong>不在字符串池中，那么它将把这个字符串放在字符串池中，否则它将跳过它。</p><p id="ec75" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated">在这种情况下，创建了两个对象，一个在堆内存中，另一个在字符串池中。</p><p id="75f6" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated">让我们再举一个例子，用编程和图解的方式来理解它。</p><figure class="jo jp jq jr fd js"><div class="bz dy l di"><div class="na nb l"/></div><p class="jz ka et er es kb kc bd b be z dx translated"><strong class="ak"> Java字符串池示例</strong></p></figure><h2 id="222b" class="md ke hi bd kf me mf mg kj mh mi mj kn le mk ml kp li mm mn kr lm mo mp kt ho bi translated">输出:</h2><pre class="jo jp jq jr fd mq mr ms bn mt mu bi"><span id="3e11" class="mv ke hi mr b be mw mx l my mz">true<br/>true<br/>true<br/>false<br/>false<br/>false</span></pre><h2 id="3470" class="md ke hi bd kf me mf mg kj mh mi mj kn le mk ml kp li mm mn kr lm mo mp kt ho bi translated">用图解法将上述代码翻译成:</h2><figure class="jo jp jq jr fd js er es paragraph-image"><a href="https://javarevisited.blogspot.com/2022/03/3-examples-to-parse-json-in-java-using.html"><div class="er es nc"><img src="../Images/91d2704565f19d388bf1747c4aacea10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uBvrcwuX3Pp4XlaZbuymMw.png"/></div></a><p class="jz ka et er es kb kc bd b be z dx translated">字符串池和堆对象创建内存示例</p></figure><h2 id="30bc" class="md ke hi bd kf me mf mg kj mh mi mj kn le mk ml kp li mm mn kr lm mo mp kt ho bi translated">注意:</h2><blockquote class="ls lt lu"><p id="b46c" class="kv kw lr kx b ky lv is la lb lw iv ld lx ly lg lh lz ma lk ll mb mc lo lp lq hb bi translated">字符串文字存储在字符串常量池中。具有相同内容的字符串共享这个公共内存区域以减少内存使用。用<code class="du nd ne nf mr b"><strong class="kx hs">new </strong></code>操作符创建的字符串对象存储在堆内存区，不同字符串对象的相同内容不共享存储。</p></blockquote></div><div class="ab cl jg jh gp ji" role="separator"><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl"/></div><div class="hb hc hd he hf"><h1 id="d25a" class="kd ke hi bd kf kg kh ki kj kk kl km kn ix ko iy kp ja kq jb kr jd ks je kt ku bi translated">在上面的程序中创建了多少个对象？</h1><blockquote class="ls lt lu"><p id="7bfa" class="kv kw lr kx b ky lv is la lb lw iv ld lx ly lg lh lz ma lk ll mb mc lo lp lq hb bi translated"><em class="hi">这个问题的答案会是</em> <strong class="kx hs"> <em class="hi"> 3 </em> </strong> <em class="hi">。</em></p></blockquote><p id="745a" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated">如你所见，当我们对<strong class="kx hs"> name1 </strong>使用字符串文字时，在字符串常量池中创建了一个对象，因为那时字符串常量池中没有这个<code class="du nd ne nf mr b">“Java”</code>字符串。</p><p id="d142" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated">对于下一个字符串<strong class="kx hs"> name2 </strong>，相同的字符串已经存在，因此没有创建新的字符串对象，而是为该字符串返回相同的引用。</p><p id="c9c0" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated">类似地，对于<strong class="kx hs">名称3 </strong>，将分配与<strong class="kx hs">名称1 </strong>相同的参考。</p><p id="eaca" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated"><em class="lr">对于每个新操作符，堆内存中都有两个对象，并且不会在字符串常量池中创建任何对象，因为"</em> <strong class="kx hs"> <em class="lr"> Java" </em> </strong> <em class="lr">字符串已经存在于字符串常量池中。</em></p><p id="fd98" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated"><strong class="kx hs"> <em class="lr">因此你会看到总共3个物体。</em> </strong></p></div><div class="ab cl jg jh gp ji" role="separator"><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl"/></div><div class="hb hc hd he hf"><h1 id="ffa7" class="kd ke hi bd kf kg kh ki kj kk kl km kn ix ko iy kp ja kq jb kr jd ks je kt ku bi translated">我们如何检查字符串内容是否相同，以及两个字符串是否指向同一个对象？</h1><p id="c7e8" class="pw-post-body-paragraph kv kw hi kx b ky kz is la lb lc iv ld le lf lg lh li lj lk ll lm ln lo lp lq hb bi translated">字符串函数<code class="du nd ne nf mr b"><strong class="kx hs">equals(Object obj)</strong></code>可用于比较两个字符串的内容，运算符<code class="du nd ne nf mr b"><strong class="kx hs"><em class="lr">==</em></strong></code>可用于比较两个字符串引用是否相同。</p><h2 id="fce1" class="md ke hi bd kf me mf mg kj mh mi mj kn le mk ml kp li mm mn kr lm mo mp kt ho bi translated">示例:</h2><pre class="jo jp jq jr fd mq mr ms bn mt mu bi"><span id="2fe4" class="mv ke hi mr b be mw mx l my mz">String string1 = new String(“Hey Java”);<br/>String string2 = “Hey Java”;<br/>System.out.println(string1.equals(string2));//prints true<br/>System.out.println(string1 == string2);//prints false</span></pre><p id="813b" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated">string1.equals(string2)检查了两个string对象的内容，因此返回true，因为它们具有相同的值“嘿Java ”,而string1 <code class="du nd ne nf mr b">==</code> string2返回false，因为string1引用的是<a class="ae ng" href="https://javarevisited.blogspot.com/2013/04/what-is-maximum-heap-size-for-32-bit-64-JVM-Java-memory.html" rel="noopener ugc nofollow" target="_blank">堆</a>中的对象，string2引用的是字符串常量池中的对象。</p><blockquote class="ls lt lu"><p id="9e28" class="kv kw lr kx b ky lv is la lb lw iv ld lx ly lg lh lz ma lk ll mb mc lo lp lq hb bi translated">在使用equals()函数进行对象的内容比较时，请确保调用equals()方法的引用不为空，否则将得到<strong class="kx hs"> NullPointerException </strong>。</p></blockquote></div><div class="ab cl jg jh gp ji" role="separator"><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl"/></div><div class="hb hc hd he hf"><h1 id="c88e" class="kd ke hi bd kf kg kh ki kj kk kl km kn ix ko iy kp ja kq jb kr jd ks je kt ku bi translated">Intern()方法是做什么的？</h1><p id="c68b" class="pw-post-body-paragraph kv kw hi kx b ky kz is la lb lc iv ld le lf lg lh li lj lk ll lm ln lo lp lq hb bi translated"><code class="du nd ne nf mr b"><a class="ae ng" href="https://javarevisited.blogspot.com/2015/12/when-to-use-intern-method-of-string-in-java.html" rel="noopener ugc nofollow" target="_blank"><strong class="kx hs">intern()</strong></a></code>返回字符串对象的规范表示。<br/>当调用intern方法时，如果字符串池已经包含一个等于这个字符串对象的字符串(<code class="du nd ne nf mr b">this</code>基本上是指调用<code class="du nd ne nf mr b"><strong class="kx hs">intern()</strong></code>方法的对象)，如equals(Object)方法所确定的，则返回池中的字符串。否则，该字符串对象将被添加到池中，并返回对该字符串对象的引用。</p><h2 id="5807" class="md ke hi bd kf me mf mg kj mh mi mj kn le mk ml kp li mm mn kr lm mo mp kt ho bi translated">示例:</h2><figure class="jo jp jq jr fd js"><div class="bz dy l di"><div class="na nb l"/></div><p class="jz ka et er es kb kc bd b be z dx translated">intern()示例</p></figure><p id="d9d4" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated"><strong class="kx hs">输出:</strong></p><pre class="jo jp jq jr fd mq mr ms bn mt mu bi"><span id="b082" class="mv ke hi mr b be mw mx l my mz">true</span></pre><p id="6dec" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated">在上面的例子中，行号为<strong class="kx hs"> 6 </strong> <strong class="kx hs"> " <em class="lr"> Java </em> " </strong>的对象没有出现在字符串池中，因此在字符串池中创建了字符串对象，并将该对象的引用返回给<strong class="kx hs"> string1 </strong>变量。在第7行，当调用<strong class="kx hs"> string1.intern() </strong>时，它查看字符串池，并且已经存在一个字符串，因此该字符串对象的引用被返回到<strong class="kx hs"> string2 </strong>。因此，程序的输出为<strong class="kx hs">真</strong>。</p><figure class="jo jp jq jr fd js er es paragraph-image"><a href="https://javarevisited.blogspot.com/2013/07/java-string-tutorial-and-examples-beginners-programming.html"><div class="er es jn"><img src="../Images/9e316d56fc30281e522f92962ed26ff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DKwgqd9QzoS0WVaK7Qxbgg.png"/></div></a><p class="jz ka et er es kb kc bd b be z dx translated">使用intern()方法的字符串池示例</p></figure></div><div class="ab cl jg jh gp ji" role="separator"><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl jm"/><span class="jj bw bk jk jl"/></div><div class="hb hc hd he hf"><p id="0639" class="pw-post-body-paragraph kv kw hi kx b ky lv is la lb lw iv ld le ly lg lh li ma lk ll lm mc lo lp lq hb bi translated"><em class="lr">本文到此为止。我希望你已经理解了</em> <strong class="kx hs"> <em class="lr">字符串池</em> </strong> <em class="lr">以及如何使用字符串和新操作符创建对象。</em></p><h1 id="7c31" class="kd ke hi bd kf kg nh ki kj kk ni km kn ix nj iy kp ja nk jb kr jd nl je kt ku bi translated">类似内容可以关注<a class="nm nn ge" href="https://medium.com/u/2c3b611409dc?source=post_page-----996f0554e1dc--------------------------------" rel="noopener" target="_blank">维克拉姆古普塔</a>。</h1><p id="4623" class="pw-post-body-paragraph kv kw hi kx b ky kz is la lb lc iv ld le lf lg lh li lj lk ll lm ln lo lp lq hb bi translated"><strong class="kx hs"> <em class="lr">你可能喜欢看下面的面试问题:</em> </strong></p><div class="no np ez fb nq nr"><a rel="noopener follow" target="_blank" href="/@basecs101/do-you-know-immutable-class-in-java-why-string-is-immutable-dc18b0cec4b9"><div class="ns ab dw"><div class="nt ab nu cl cj nv"><h2 class="bd hs fi z dy nw ea eb nx ed ef hr bi translated">你知道Java中的不可变类吗？为什么字符串是不可变的？</h2><div class="ny l"><h3 class="bd b fi z dy nw ea eb nx ed ef dx translated">关于不变性的一切——什么、如何以及何时。</h3></div><div class="nz l"><p class="bd b fp z dy nw ea eb nx ed ef dx translated">medium.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of jx nr"/></div></div></a></div><div class="no np ez fb nq nr"><a rel="noopener follow" target="_blank" href="/@basecs101/what-does-string-pool-mean-in-java-996f0554e1dc"><div class="ns ab dw"><div class="nt ab nu cl cj nv"><h2 class="bd hs fi z dy nw ea eb nx ed ef hr bi translated">字符串池在Java中是什么意思？</h2><div class="ny l"><h3 class="bd b fi z dy nw ea eb nx ed ef dx translated">了解Java中的字符串池，以及如何在字符串池中存储和检索对象。</h3></div><div class="nz l"><p class="bd b fp z dy nw ea eb nx ed ef dx translated">medium.com</p></div></div><div class="oa l"><div class="og l oc od oe oa of jx nr"/></div></div></a></div><div class="no np ez fb nq nr"><a href="https://levelup.gitconnected.com/string-stringbuilder-and-stringbuffer-a-complete-guide-5ddd083a2ad5" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab dw"><div class="nt ab nu cl cj nv"><h2 class="bd hs fi z dy nw ea eb nx ed ef hr bi translated">String、StringBuilder和StringBuffer:完整指南</h2><div class="ny l"><h3 class="bd b fi z dy nw ea eb nx ed ef dx translated">了解java中的文本/字符串操作类，如何以及何时使用它们。</h3></div><div class="nz l"><p class="bd b fp z dy nw ea eb nx ed ef dx translated">levelup.gitconnected.com</p></div></div><div class="oa l"><div class="oh l oc od oe oa of jx nr"/></div></div></a></div></div></div>    
</body>
</html>