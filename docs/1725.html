<html>
<head>
<title>How to get notified on Microsoft Teams if a build breaks!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在构建中断时通知微软团队！</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/never-overlook-a-broken-build-again-get-notified-in-microsoft-teams-d020a24292cd?source=collection_archive---------1-----------------------#2021-11-12">https://medium.com/javarevisited/never-overlook-a-broken-build-again-get-notified-in-microsoft-teams-d020a24292cd?source=collection_archive---------1-----------------------#2021-11-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3e83" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">不要成为那个在工作结束前破坏构建的人。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/a9796de11f5c3954247c9aaf9c159183.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*70R0u4pnHg7SKNsGcFR1qg.jpeg"/></div></div><p class="jj jk et er es jl jm bd b be z dx translated">迪米特里·卡拉斯泰列夫在<a class="ae jn" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="1603" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi kk translated">今天是星期五，下午四点半。你完成了那个重要的特写。您提交和推送，CI服务器会将其部署到测试系统。太棒了。周一，你可以向客户展示你的作品。</p><p id="3789" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">但这是什么？为什么管道是红色的？几秒钟前一切正常！你看看建造历史。该死的。杰克几小时前就破坏了这个版本，却没有修复它！干得好，杰克…</p><p id="0533" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在怎么办？当杰克享受他的周末时，你修理他的愚蠢代码。否则，客户周一会生你的气。</p><p id="6f0c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">不要像杰克一样。如果构建中断，让CI服务器通知您。<strong class="jq hj">收到一条团队关于不完整构建的消息。</strong></p><div class="kt ku ez fb kv kw"><a href="https://verbosemode.dev/membership" rel="noopener  ugc nofollow" target="_blank"><div class="kx ab dw"><div class="ky ab kz cl cj la"><h2 class="bd hj fi z dy lb ea eb lc ed ef hh bi translated">通过我的推荐链接- Mirco加入媒体</h2><div class="ld l"><h3 class="bd b fi z dy lb ea eb lc ed ef dx translated">对技术感兴趣吗？订阅Medium！你的会员费直接支持我和其他作家你…</h3></div><div class="le l"><p class="bd b fp z dy lb ea eb lc ed ef dx translated">verbosemode.dev</p></div></div><div class="lf l"><div class="lg l lh li lj lf lk jh kw"/></div></div></a></div></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h2 id="7c8b" class="ls lt hi bd lu lv lw lx ly lz ma mb mc jx md me mf kb mg mh mi kf mj mk ml mm bi translated">配置Microsoft团队</h2><p id="ae98" class="pw-post-body-paragraph jo jp hi jq b jr mn ij jt ju mo im jw jx mp jz ka kb mq kd ke kf mr kh ki kj hb bi translated">如果您没有频道，请为接收通知的团队添加一个频道。点击团队名称旁边的圆点，然后选择<code class="du ms mt mu mv b">Add Channel</code>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mw"><img src="../Images/8dcf69c1ce22dd8110475d0edbb792c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:476/format:webp/1*6UCXhmzF_xWmDD5ks9dQow.png"/></div><p class="jj jk et er es jl jm bd b be z dx translated">在团队中添加新频道</p></figure><p id="fc89" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要添加网页挂钩，请点击频道旁边的圆点，然后点击<code class="du ms mt mu mv b">Connectors</code>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mx"><img src="../Images/3d0e093d40c338aad591ce396f46728d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tPlvvbOhxYeStQn8UUtRtQ.png"/></div></div><p class="jj jk et er es jl jm bd b be z dx translated">添加网页挂钩</p></figure><p id="5d4d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">配置一个<code class="du ms mt mu mv b">Incoming Webhook</code>。点击<code class="du ms mt mu mv b">Create</code>后，Teams会显示Webhook URL。在下一步中复制此URL。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es my"><img src="../Images/34d457908de2fc02cc874a957ba917d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qezH6S6c1mgzAgUg6CView.png"/></div></div><p class="jj jk et er es jl jm bd b be z dx translated">配置网页挂钩</p></figure><h2 id="8dd6" class="ls lt hi bd lu lv lw lx ly lz ma mb mc jx md me mf kb mg mh mi kf mj mk ml mm bi translated">连接GitHub动作和团队</h2><p id="bf45" class="pw-post-body-paragraph jo jp hi jq b jr mn ij jt ju mo im jw jx mp jz ka kb mq kd ke kf mr kh ki kj hb bi translated">打开存储库，它会在构建失败时通知您。前往<code class="du ms mt mu mv b">Settings</code>，然后前往<code class="du ms mt mu mv b">Secrets</code>。为<code class="du ms mt mu mv b">Actions</code>添加一个名为<code class="du ms mt mu mv b">TEAMS_WEBHOOK</code>的秘密。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mz"><img src="../Images/6eb8f35cf62db5d958caf3da0c0cf500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vR1JT9xuJQPr5iSNaouCnQ.png"/></div></div></figure><h2 id="e5f7" class="ls lt hi bd lu lv lw lx ly lz ma mb mc jx md me mf kb mg mh mi kf mj mk ml mm bi translated">将通知步骤添加到工作流中</h2><p id="2626" class="pw-post-body-paragraph jo jp hi jq b jr mn ij jt ju mo im jw jx mp jz ka kb mq kd ke kf mr kh ki kj hb bi translated">打开您的<code class="du ms mt mu mv b">workflow.yml</code>并添加以下步骤:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="na nb l"/></div></figure><p id="d0ff" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">此步骤仅在管道之前出现故障时运行。它为Teams Webhook创建有效负载，并执行POST请求。</p><p id="2bbd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于下一个中断的构建，您将在团队中收到通知:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/48582552cccdadad6b56f6c722a1fb30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0jxPfhiUqs0xKJ1OmWMHeA.png"/></div></div><p class="jj jk et er es jl jm bd b be z dx translated">失败生成的通知。</p></figure><p id="d8e5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可以点击按钮打开GitHub，看到破损的管道。<strong class="jq hj">就是这样！现在，您可以更快地对破裂的管道做出反应！</strong></p><h2 id="1c84" class="ls lt hi bd lu lv lw lx ly lz ma mb mc jx md me mf kb mg mh mi kf mj mk ml mm bi translated">额外收获:详细的团队有效载荷</h2><p id="f17b" class="pw-post-body-paragraph jo jp hi jq b jr mn ij jt ju mo im jw jx mp jz ka kb mq kd ke kf mr kh ki kj hb bi translated">让我们检查一下有效载荷:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="na nb l"/></div></figure><p id="fc12" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注意，我们使用了<em class="nd"> GitHub Actions环境变量</em>来给消息添加有用的内容。你可以在<a class="ae jn" href="https://docs.github.com/en/actions/learn-github-actions/environment-variables#default-environment-variables" rel="noopener ugc nofollow" target="_blank">官方文档</a>中看到所有可用的变量。</p><p id="da33" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du ms mt mu mv b">themeColor</code>字段处理通知中的红色条。更多字段和示例见<a class="ae jn" href="https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/connectors-using?tabs=cURL" rel="noopener ugc nofollow" target="_blank"> Webhook文档</a>。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><p id="1d91" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">想要从团队中获得更多？查看以下文章:</p><div class="kt ku ez fb kv kw"><a rel="noopener follow" target="_blank" href="/javarevisited/react-faster-alertmanager-to-teams-fa888bcd7c01"><div class="kx ab dw"><div class="ky ab kz cl cj la"><h2 class="bd hj fi z dy lb ea eb lc ed ef hh bi translated">Alertmanager和团队如何主动轻松缩短事件响应时间</h2><div class="ld l"><h3 class="bd b fi z dy lb ea eb lc ed ef dx translated">从警报管理器向Microsoft团队发送通知</h3></div><div class="le l"><p class="bd b fp z dy lb ea eb lc ed ef dx translated">medium.com</p></div></div><div class="lf l"><div class="ne l lh li lj lf lk jh kw"/></div></div></a></div></div></div>    
</body>
</html>