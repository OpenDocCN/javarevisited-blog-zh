<html>
<head>
<title>Spring Security OAuth2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Spring安全OAuth2</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/spring-security-oauth2-9e47921766fa?source=collection_archive---------2-----------------------#2021-08-21">https://medium.com/javarevisited/spring-security-oauth2-9e47921766fa?source=collection_archive---------2-----------------------#2021-08-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2e22208aa097624c8ac2dac99ae824e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mXKjlYz85nXXK_r0.jpeg"/></div></div></figure><ul class=""><li id="c9fe" class="iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh bi translated">在本文中，我的目标是通过使用spring OAuth2来解释OAuth2的基础。</li><li id="7c71" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd je jf jg jh bi translated">如今，在构建web应用程序时，授权和认证是必须做的事情。当然是出于安全考虑。但是想象一下这个任务是多么的乏味、混乱和昂贵，幸运的是，我们得到了像<a class="ae jn" rel="noopener" href="/javarevisited/top-10-courses-to-learn-spring-security-and-oauth2-with-spring-boot-for-java-developers-8f0222d6066d?source=---------5-----------------------"> spring security </a>和<a class="ae jn" rel="noopener" href="/javarevisited/10-advanced-spring-boot-courses-for-experienced-java-developers-5e57606816bd?source=collection_home---4------0-----------------------"> spring boot </a>这样的服务，在它们的帮助下，我们可以用OAuth2实现我们的web应用。不要忘记，所有这些功能都很容易实现。</li><li id="8c89" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd je jf jg jh bi translated">假设您是一名为多个客户端开发REST apis的Spring开发人员。所谓客户端，我们指的是前端web应用、移动应用，基本上就是任何一个有互联网，能消耗你资源的人。</li><li id="a8ad" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd je jf jg jh bi translated">现在，您应该保护这些端点。记录谁在使用它们，并检查它是否得到授权。一个例子是“我的帐户页面”，我们如何知道为哪个用户发送什么信息？我们如何限制恶意用户访问这些端点？我们如何将整个世界与我们希望用数据养活的人们隔离开来？</li><li id="c16b" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd je jf jg jh bi translated">虽然我们不会在这个例子中保护端点，但是从一开始就理解整个流程是很重要的。</li></ul><p id="3e34" class="pw-post-body-paragraph jo jp hi is b it iu jq jr iv iw js jt ix ju jv jw iz jx jy jz jb ka kb kc jd hb bi translated"><strong class="is hj">申请流程如下:</strong></p><ol class=""><li id="771e" class="iq ir hi is b it iu iv iw ix iy iz ja jb jc jd kd jf jg jh bi translated">一个用户进来注册它的客户端</li><li id="40b0" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd kd jf jg jh bi translated">客户端注册后，用户可以在数据库中注册为属于该客户端的用户。</li><li id="b6a6" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd kd jf jg jh bi translated">在post请求中加入两对凭证:client-id &amp; secret和username &amp; password，就生成了一个刷新和访问令牌。</li><li id="0c77" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd kd jf jg jh bi translated">access_token可以用作授权当前会话中所有其他请求的手段。如果用户选择“记住我”而不是一直进行身份验证，refresh_token可以存储为cookie或会话中的某个位置。为这些令牌留出的时间将在客户注册时指定。</li></ol><p id="d965" class="pw-post-body-paragraph jo jp hi is b it iu jq jr iv iw js jt ix ju jv jw iz jx jy jz jb ka kb kc jd hb bi translated"><strong class="is hj">项目结构</strong></p><ol class=""><li id="a874" class="iq ir hi is b it iu iv iw ix iy iz ja jb jc jd kd jf jg jh bi translated">api:包含相关的操作。它公开了两个rest控制器以及一些映射到Http rest代码的异常。在我们的例子中，一个端点用于注册客户端，另一个端点用于注册用户</li><li id="7182" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd kd jf jg jh bi translated">config: OAuth2自定义配置，从其他库(如模型映射器)创建bean，一个swagger配置和一个用于<a class="ae jn" href="https://javarevisited.blogspot.com/2018/01/how-http-basic-authentication-works-in.html#axzz6hhgr3Uqg" rel="noopener ugc nofollow" target="_blank">基本认证的last spring安全配置。</a></li><li id="a210" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd kd jf jg jh bi translated">dto:包含传输对象和验证器。我正在尝试过滤这个级别的所有无效数据，目的是在服务级别不出现无效数据。</li><li id="3f34" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd kd jf jg jh bi translated">实体:更像是<a class="ae jn" rel="noopener" href="/javarevisited/7-best-free-postgresql-courses-for-beginners-to-learn-in-2021-3bf369d73794"> Postgres数据库</a>的传输对象。在这种情况下，我们只有用户；spring OAuth2实现很好地完成了客户端管理。</li><li id="5d9b" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd kd jf jg jh bi translated">存储库:编写时考虑了扩展，它有两个<a class="ae jn" href="https://javarevisited.blogspot.com/2021/08/top-5-spring-data-jpa-courses-for-java.html" rel="noopener ugc nofollow" target="_blank"> spring数据</a>接口，一个不是spring bean，但为另一个提供基本操作。</li><li id="5bb5" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd kd jf jg jh bi translated">服务:大部分数据操作和转换发生的层次。</li></ol><figure class="kf kg kh ki fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2021/02/spring-security-interview-questions-answers-java.html"><div class="er es ke"><img src="../Images/ebc5a8808d52066ec8cccf83a2f0acb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ZP5uIkERivX2kj9Z71ZRw.png"/></div></a></figure><p id="f27e" class="pw-post-body-paragraph jo jp hi is b it iu jq jr iv iw js jt ix ju jv jw iz jx jy jz jb ka kb kc jd hb bi translated"><strong class="is hj">这是关于AOuth2的第一部分。应用程序演示部分将在下一篇文章中写。</strong></p><p id="a951" class="pw-post-body-paragraph jo jp hi is b it iu jq jr iv iw js jt ix ju jv jw iz jx jy jz jb ka kb kc jd hb bi translated"><strong class="is hj">编码愉快，保持安全……</strong></p></div></div>    
</body>
</html>