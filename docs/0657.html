<html>
<head>
<title>Trigger the alert message to MS-Team using AWS SNS and Lambda function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AWS SNS和Lambda功能向MS-Team触发警报消息</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/trigger-the-alert-message-to-ms-team-using-aws-sns-and-lambda-function-1c7769012eff?source=collection_archive---------0-----------------------#2020-09-01">https://medium.com/javarevisited/trigger-the-alert-message-to-ms-team-using-aws-sns-and-lambda-function-1c7769012eff?source=collection_archive---------0-----------------------#2020-09-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/f844ec648d691962bcd66f2dfabeb500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*1NGEBotAy2GAUV11IS9qYA.png"/></div></figure><p id="45e2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">AWS提供许多服务来管理您的基础设施，并监控服务发生的情况。您可以通过电子邮件、短信或其他服务提醒错误消息。</p><p id="e3a1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇文章中，我想分享如何通过SNS将消息从AWS Cloudwatch alert发送到Microsoft-Team并推送到Lambda函数。所以让我们开始吧。我们将:</p><ul class=""><li id="2673" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj jp jq jr js bi translated">创建Cloudwatch警报向SNS发送消息</li><li id="1982" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">用<a class="ae jy" rel="noopener" href="/swlh/5-free-python-courses-for-beginners-to-learn-online-e1ca90687caf"> Python编程语言</a>创建一个lambda函数</li><li id="b643" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">配置由SNS主题触发的lambda</li><li id="f5c1" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">将“Incoming Webhook”连接器添加到我们的团队频道</li><li id="1eb9" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">将webhook URL作为环境变量添加到<a class="ae jy" href="https://javarevisited.blogspot.com/2020/07/top-6-courses-to-learn-aws-lambda-and-serverless.html" rel="noopener ugc nofollow" target="_blank">λ</a>中</li><li id="bef6" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">测试lambda</li></ul><h1 id="a6b9" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">创建社交网络</h1><ul class=""><li id="c558" class="jk jl hi io b ip kx it ky ix kz jb la jf lb jj jp jq jr js bi translated">亚马逊社交网络</li><li id="9080" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">主题→创建主题</li></ul><figure class="ld le lf lg fd ij er es paragraph-image"><a href="https://medium.com/javarevisited/top-5-online-courses-to-become-aws-certified-developer-associate-in-2020-best-of-lot-9b22baf84ca8"><div class="er es lc"><img src="../Images/bfd266301c25d339775a183bdbe5a907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OMZx83Qgj4vjtGtNiP83Hg.png"/></div></a><p class="lh li et er es lj lk bd b be z dx translated">使用LAMBDA的社交网络订阅</p></figure><h1 id="a1a8" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">创建Lambda函数</h1><p id="39c5" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix ll iz ja jb lm jd je jf ln jh ji jj hb bi translated">用<a class="ae jy" rel="noopener" href="/better-programming/top-5-courses-to-learn-python-in-2018-best-of-lot-26644a99e7ec">Python 3.8</a>:<strong class="io hj">alert _ ms _ team</strong>创建lambda函数</p><ul class=""><li id="008d" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj jp jq jr js bi translated">转到服务</li><li id="7a66" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">点击Lambda</li><li id="cd59" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">点击创建功能</li><li id="6c2e" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">从头开始选择作者</li></ul><p id="78c5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在窗口中输入以下信息:</p><p id="6dbe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">名称:<strong class="io hj"> alert_ms_team </strong> <br/>运行时:Python 3.8 <br/>角色:选择一个已有的角色<br/>角色名称:<strong class="io hj"> alert_ms_team </strong> <br/>点击创建函数</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lo"><img src="../Images/f0c4a937423c7f3f3867ff162c0abf2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IvkvIPQEm5sZ23ZXBvuDkg.png"/></div></div></figure><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lt"><img src="../Images/f2a821e431a22ad5b72c38e7ec1c291f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9aHXyB-msa90qggA9a5Vbg.png"/></div></div><p class="lh li et er es lj lk bd b be z dx translated">环境Webhook URL</p></figure><figure class="ld le lf lg fd ij"><div class="bz dy l di"><div class="lu lv l"/></div><p class="lh li et er es lj lk bd b be z dx translated">python lambda</p></figure><h1 id="0b0b" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">MS-团队频道</h1><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es ca"><img src="../Images/bdd3850d1aeaec9a468c67f7b4035066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z2JJOXGARp-w-XTMFT8f4g.png"/></div></div><p class="lh li et er es lj lk bd b be z dx translated">团队频道-添加连接器webhook</p></figure><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lw"><img src="../Images/41649b5ff8bf8f063f31ea8f5bd1b212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZBJ7u4wpvcbTH-pLwoOFlA.png"/></div></div><p class="lh li et er es lj lk bd b be z dx translated">复制webhook url</p></figure><h1 id="8448" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">测试有效负载</h1><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lx"><img src="../Images/1a0dca9b60a93004ecb30ccca0e5877c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tx4DzUMzHCuUPotNZbEnXA.png"/></div></div></figure><p id="87ef" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">测试json有效负载</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="2ead" class="md ka hi lz b fi me mf l mg mh">{<br/>  "Records": [<br/>    {<br/>      "Sns": {<br/>        "Message": "{\"AlarmName\": \"my-alarm-TestService\", \"OldStateValue\": \"ALARM\", \"NewStateValue\": \"OK\", \"NewStateReason\": \"service is back\"}"<br/>      }<br/>    }<br/>  ]<br/>}</span></pre><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es mi"><img src="../Images/8411f7e41a04ebb650af94349998a3e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xp3kcL-TcaTQiO88kzTUzw.png"/></div></div></figure><h1 id="2efd" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">最后</h1><p id="5d9c" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix ll iz ja jb lm jd je jf ln jh ji jj hb bi translated">您可以使用Lambda函数将来自<a class="ae jy" rel="noopener" href="/javarevisited/top-5-aws-training-courses-to-crack-amazon-web-service-solutions-architect-associate-certification-3f4affa8f660?source=collection_home---4------0-----------------------"> AWS CloudWatch </a>的消息通过SNS提醒给MS-Team。</p><p id="f1dd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果这篇文章有帮助，请支持按下<strong class="io hj">按钮</strong>👏按钮，并帮助与其他读者分享这个故事。</p></div></div>    
</body>
</html>