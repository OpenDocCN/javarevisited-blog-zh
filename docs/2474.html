<html>
<head>
<title>Make or append me a String</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为我制作或追加一个字符串</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/make-or-append-me-a-string-c654f247373a?source=collection_archive---------1-----------------------#2022-11-14">https://medium.com/javarevisited/make-or-append-me-a-string-c654f247373a?source=collection_archive---------1-----------------------#2022-11-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9f81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解如何在Eclipse集合中使用makeString和appendString</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/12e02e9606b7e73e009110ed02fd9bca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0f2EszZxSwFup0Zv"/></div></div><p class="jp jq et er es jr js bd b be z dx translated">照片由<a class="ae jt" href="https://unsplash.com/@thatsherbusiness?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄那是她的事</a>在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><h1 id="4869" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">学习形和形来学习</h1><p id="86be" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">三年前，我为《每个Java程序员都应该知道的97件事》<strong class="ih hj"><em class="kx"/></strong>这本书写了一篇文章，题目是《学会形和形要学会》。</p><div class="ky kz ez fb la lb"><a rel="noopener follow" target="_blank" href="/97-things/learn-to-kata-and-kata-to-learn-73c98a69e44c"><div class="lc ab dw"><div class="ld ab le cl cj lf"><h2 class="bd hj fi z dy lg ea eb lh ed ef hh bi translated">学习形和形来学习</h2><div class="li l"><h3 class="bd b fi z dy lg ea eb lh ed ef dx translated">随着Java生态系统的不断发展，每个Java开发人员都需要不断学习新技能。Java……</h3></div><div class="lj l"><p class="bd b fp z dy lg ea eb lh ed ef dx translated">medium.com</p></div></div></div></a></div><p id="b376" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我演示了如何用Java创建一个加入<code class="du lk ll lm ln b">Strings</code>的形练习。在本文中，我遍历了几个解决方案，并在此过程中进行了重构。我最终删除了我所有的解决方案，只留下了形，可以在以后解决。</p><p id="6a8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天就是那个日子。我现在将使用<a class="ae jt" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank"> Eclipse集合</a>来解形。我会稍微修改一下这个形，让它在美国东部的秋天更有节日气氛。</p><h1 id="a97a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">受秋天启发的合奏式</h1><p id="3692" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">这是我将解决的形的修改测试。我用过一些让我想起秋天的表情符号。</p><pre class="je jf jg jh fd lo ln lp bn lq lr bi"><span id="4ace" class="ls jv hi ln b be lt lu l lv lw">public void joinStrings()<br/>{<br/>    List&lt;String&gt; fall = Arrays.asList("🎃", "🍎", "🍁", "🌽");<br/>    // Join the names and separate them by ", "<br/>    String joined = null;<br/>    Assertions.assertEquals("🎃, 🍎, 🍁, 🌽", joined);<br/>}</span></pre><p id="a7db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该测试目前失败。我已经使用了文章中描述的<code class="du lk ll lm ln b">StringJoiner</code>、Java Stream和<code class="du lk ll lm ln b">String.join</code>解决方案来解决这个问题，但是我没有展示如何使用Eclipse集合<code class="du lk ll lm ln b">makeString</code>或<code class="du lk ll lm ln b">appendString</code>方法来解决这个问题。</p><h1 id="a32f" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">带makeString的形解</h1><p id="c2fe" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">下面是使用<code class="du lk ll lm ln b">makeString</code>进行形练习的解决方案。</p><pre class="je jf jg jh fd lo ln lp bn lq lr bi"><span id="de7d" class="ls jv hi ln b be lt lu l lv lw">public void joinStrings()<br/>{<br/>    ImmutableList&lt;?&gt; fall = Lists.immutable.of("🎃", "🍎", "🍁", "🌽");<br/>    // Join the names and separate them by ", "<br/>    String joined = fall.makeString();<br/>    Assertions.assertEquals("🎃, 🍎, 🍁, 🌽", joined);<br/>}</span></pre><p id="0d8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lk ll lm ln b">makeString</code>有四种重载形式。最简单的形式没有参数，并将使用<code class="du lk ll lm ln b">“, “</code>作为默认分隔符。这就是我在上面所使用的，因为这是用例所需要的。第二种形式将分隔符作为参数，我将在下面演示。</p><pre class="je jf jg jh fd lo ln lp bn lq lr bi"><span id="16f6" class="ls jv hi ln b be lt lu l lv lw">public void joinStrings()<br/>{<br/>    ImmutableList&lt;?&gt; fall = Lists.immutable.of("🎃", "🍎", "🍁", "🌽");<br/>    // Join the names and separate them by ", "<br/>    String joined = fall.makeString(", ");<br/>    Assertions.assertEquals("🎃, 🍎, 🍁, 🌽", joined);<br/>}</span></pre><p id="090c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三种形式的<code class="du lk ll lm ln b">makeString</code>以三个<code class="du lk ll lm ln b">Strings</code>为参数。第一个是开始<code class="du lk ll lm ln b">String</code>，第二个是分隔符，第三个是结束<code class="du lk ll lm ln b">String</code>。我将稍微修改测试以显示开始和结束<code class="du lk ll lm ln b">Strings</code>。</p><pre class="je jf jg jh fd lo ln lp bn lq lr bi"><span id="9006" class="ls jv hi ln b be lt lu l lv lw">public void joinStrings()<br/>{<br/>    ImmutableList&lt;?&gt; fall = Lists.immutable.of("🎃", "🍎", "🍁", "🌽");<br/>    // Join the names and separate them by ", "<br/>    // Starting with an "[" and end with a "]"<br/>    String joined = fall.makeString("[", ", ", "]");<br/>    Assertions.assertEquals("[🎃, 🍎, 🍁, 🌽]", joined);<br/>}</span></pre><p id="5754" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用<code class="du lk ll lm ln b">makeString</code>有三种可能的解决方案。</p><h2 id="5ea2" class="lx jv hi bd jw ly lz ma ka mb mc md ke iq me mf ki iu mg mh km iy mi mj kq mk bi translated">秋季融合</h2><p id="c171" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">第四种重载形式的<code class="du lk ll lm ln b">makeString</code>实际上是将<code class="du lk ll lm ln b">collect</code>和<code class="du lk ll lm ln b">makeString</code>融合在一起。这种形式的<code class="du lk ll lm ln b">makeString</code>将一个<code class="du lk ll lm ln b">Function</code>作为第一个参数，它将应用于集合中的每个元素。剩下的三个参数是开始、分隔符和结束字符串。下面是第四种形式<code class="du lk ll lm ln b">makeString</code>的例子。</p><pre class="je jf jg jh fd lo ln lp bn lq lr bi"><span id="8d6b" class="ls jv hi ln b be lt lu l lv lw">public void zipMakeString()<br/>{<br/>    var fall1 = Lists.mutable.with("🎃", "🍎", "🍁", "🌽");<br/>    var fall2 = Lists.mutable.with("🥧", "🥧", "🍂", "🍞");<br/>    var zipped = fall1.zip(fall2);<br/>    String fusion = zipped.makeString(<br/>            pair -&gt; pair.getOne() + pair.getTwo(),<br/>            "[",<br/>            " + ",<br/>            "] = Fall Fusion");<br/>    Assertions.assertEquals(<br/>            "[🎃🥧 + 🍎🥧 + 🍁🍂 + 🌽🍞] = Fall Fusion", <br/>            fusion);<br/>}</span></pre><p id="687b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个例子中，我将两个列表放在一起，然后使用指定为lambda ( <code class="du lk ll lm ln b">pair -&gt; pair.getOne() + pair.getTwo()</code>)的函数一起打印出元素对。</p><h1 id="816e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">带appendString的Kata解决方案</h1><p id="f89b" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">下面是使用<code class="du lk ll lm ln b">appendString</code>进行形练习的解决方案。</p><pre class="je jf jg jh fd lo ln lp bn lq lr bi"><span id="64b2" class="ls jv hi ln b be lt lu l lv lw">public void joinStrings()<br/>{<br/>    ImmutableList&lt;?&gt; fall = Lists.immutable.of("🎃", "🍎", "🍁", "🌽");<br/>    // Join the names and separate them by ", "<br/>    StringBuilder builder = new StringBuilder();<br/>    fall.appendString(builder);<br/>    Assertions.assertEquals("🎃, 🍎, 🍁, 🌽", builder.toString());<br/>}</span></pre><p id="bce8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与<code class="du lk ll lm ln b">makeString</code>不同，<code class="du lk ll lm ln b">appendString</code>只有三种重载形式。它们与<code class="du lk ll lm ln b">makeString</code>的前三种形式相匹配，带有一个<code class="du lk ll lm ln b">Appendable</code>的额外必需参数。<code class="du lk ll lm ln b">Appendable</code>是JDK中的一个接口，有几个实现，包括<code class="du lk ll lm ln b">StringBuilder</code>。</p><p id="6273" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我写了一篇关于Eclipse集合中异常处理的博客，其中包括一些使用<code class="du lk ll lm ln b">Appendable</code>接口的代码示例。</p><div class="ky kz ez fb la lb"><a rel="noopener follow" target="_blank" href="/javarevisited/exception-handling-in-eclipse-collections-9e37a68fc6a9"><div class="lc ab dw"><div class="ld ab le cl cj lf"><h2 class="bd hj fi z dy lg ea eb lh ed ef hh bi translated">Eclipse集合中的异常处理</h2><div class="li l"><h3 class="bd b fi z dy lg ea eb lh ed ef dx translated">Java 8之前和之后处理Eclipse集合异常的一些策略</h3></div><div class="lj l"><p class="bd b fp z dy lg ea eb lh ed ef dx translated">medium.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq jn lb"/></div></div></a></div><h1 id="0dc8" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">为什么用？而不是字符串</h1><p id="87f0" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">如果您注意到在Eclipse集合示例中，我使用了<code class="du lk ll lm ln b">ImmutableList&lt;?&gt;</code>而不是<code class="du lk ll lm ln b">ImmutableList&lt;String&gt;</code>。这是故意的。<code class="du lk ll lm ln b">makeString</code>和<code class="du lk ll lm ln b">appendString</code>都适用于任何类型，而不仅仅是<code class="du lk ll lm ln b">String</code>。您不必先将类型转换成<code class="du lk ll lm ln b">String</code>。对于我在原始文章中使用的Java流、<code class="du lk ll lm ln b">StringJoiner</code>和<code class="du lk ll lm ln b">String.join</code>，情况并非如此。比如我用<code class="du lk ll lm ln b">?</code>作为带<code class="du lk ll lm ln b">String.join</code>的类型，代码就不会编译。</p><pre class="je jf jg jh fd lo ln lp bn lq lr bi"><span id="583a" class="ls jv hi ln b be lt lu l lv lw">public void joinStrings()<br/>{<br/>    List&lt;?&gt; fall = Arrays.asList("🎃", "🍎", "🍁", "🌽");<br/>    // Join the names and separate them by ", "<br/>    String joined = String.join(", ", fall);<br/>    Assertions.assertEquals("🎃, 🍎, 🍁, 🌽", joined);<br/>}</span></pre><p id="331e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该代码将导致以下编译错误。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mr"><img src="../Images/b4963f9dcc164272d1d4b5113982b9f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RXD976mpBivasLdebuUFLA.png"/></div></div></figure><p id="e29d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Eclipse集合中,<code class="du lk ll lm ln b">makeString</code>和<code class="du lk ll lm ln b">appendString</code>都在集合中的每个对象上调用<code class="du lk ll lm ln b">toString</code>,所以如果<code class="du lk ll lm ln b">toString</code>是一个足够好的方法，你不必先转换它们。在Java中对<code class="du lk ll lm ln b">String</code>调用<code class="du lk ll lm ln b">toString</code>是一个no op，简单地返回<code class="du lk ll lm ln b">this</code>。</p><h1 id="80e8" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">秋天快乐！</h1><p id="8e65" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我希望你喜欢这个博客，并对<code class="du lk ll lm ln b">makeString</code>和<code class="du lk ll lm ln b">appendString</code>有所了解。这两种方法在Eclipse集合中的<code class="du lk ll lm ln b">RichIterable</code>和<code class="du lk ll lm ln b">PrimitiveIterable</code>接口上都可用。这意味着Eclipse集合中包含的大多数类型都支持这些方法。</p><p id="1b86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读！享受余下的秋季吧！</p><p id="edd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kx">我是</em><a class="ae jt" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank"><em class="kx">Eclipse Collections</em></a><em class="kx">OSS项目的创建者和提交者，该项目由</em><a class="ae jt" href="https://projects.eclipse.org/projects/technology.collections" rel="noopener ugc nofollow" target="_blank"><em class="kx">Eclipse Foundation</em></a><em class="kx">管理。Eclipse Collections为</em> <a class="ae jt" href="https://github.com/eclipse/eclipse-collections/blob/master/CONTRIBUTING.md" rel="noopener ugc nofollow" target="_blank"> <em class="kx">投稿</em> </a> <em class="kx">打开。</em></p></div></div>    
</body>
</html>