<html>
<head>
<title>How to make your code reads like a poem? Beautiful boolean variables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何让你的代码读起来像一首诗？漂亮的布尔变量</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/how-to-make-your-code-reads-like-a-poem-beautiful-boolean-variables-3842bb037f1f?source=collection_archive---------2-----------------------#2021-06-10">https://medium.com/javarevisited/how-to-make-your-code-reads-like-a-poem-beautiful-boolean-variables-3842bb037f1f?source=collection_archive---------2-----------------------#2021-06-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b9253b5885d4009f5454c92470dfb568.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CEmEY4wR8vfZGHZKs5EsLg.jpeg"/></div></div></figure><p id="34ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">代码读起来应该像写得很好的散文。这就是为什么你应该小心布尔值。</p><p id="32a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇文章是名为<a class="ae jo" href="https://rebrand.ly/sppc-m-booleans" rel="noopener ugc nofollow" target="_blank"> clean code:在7天内提升你的编程生涯</a>的Clean Code深度课程的一部分，你可以去看看。它目前以87%的折扣出售。</p><figure class="jq jr js jt fd ij er es paragraph-image"><a href="https://rebrand.ly/sppc-m-booleans"><div class="er es jp"><img src="../Images/dc9c4358d48d8c1502f7fa18c29da201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*yDVe-HZhy4OdzzOSYdnP6A.png"/></div></a></figure><p id="e8c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为你经常在if语句中使用它们，所以你有机会让代码读起来非常非常好，或者让代码看起来非常糟糕，难以阅读。让我们看一个例子:</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="2705" class="jz ka hi jv b fi kb kc l kd ke">if(person.hunger &lt; 6.8 &amp;&amp; person.money &gt;= getClosestOpenResurant(person.location).dinnerPrice &amp;&amp; day() &lt; 6){<br/>   // make an order<br/>}</span></pre><p id="2a46" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你是第一次看到这个代码，你明白吗？还是你需要一些时间考虑一下？我相信你最终会明白的，但是你需要时间。现在让我们提取布尔值并给它们命名。让我们看看这是否能让代码读起来更好:</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="a13f" class="jz ka hi jv b fi kb kc l kd ke">boolean personIsHungry = person.hunger &lt; 6.8;<br/>boolean personCanAffortDinner = person.money &gt;= getClosestOpenResurant(person.location).dinnerPrice;<br/>boolean isWeekDay = day() &lt; 6;<br/>if(personIsHungry &amp;&amp; personCanAffortDinner &amp;&amp; isWeekDay) {<br/>   // make an order<br/>}</span></pre><p id="4e90" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在想象一下第一次看到这段代码。让我们来读一下<em class="kf"> if </em>语句。<em class="kf">如果一个人饿了，而且他能负担得起晚餐，而且是工作日，那么就点餐。我认为这样更好，你不觉得吗？但是我还是不喜欢。看，前两个布尔值是和Person对象一起工作的。这个逻辑可以封装在对象内部。此外，我们可以为工作日逻辑创建一个对象:</em></p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="f594" class="jz ka hi jv b fi kb kc l kd ke">class Person {<br/>   // fields here<br/>	<br/>   pubic boolean isHungry() {<br/>      return hunger &lt; 6.8<br/>  }<br/>	<br/>   public boolean canAffortDinner() {<br/>      return person.money &gt;= ResturantUtils.getClosestOpenResurant(person.location).dinnerPrice<br/>   }<br/>}</span><span id="c798" class="jz ka hi jv b fi kg kc l kd ke">class TimeOperations {<br/>   public static boolean isWeekday() {<br/>      return day() &lt; 6;<br/>   }<br/>}</span><span id="7364" class="jz ka hi jv b fi kg kc l kd ke">if(person.isHungry &amp;&amp; person.canAffortDinner &amp;&amp; TimeOperations.isWeekDay) {<br/>   // make an order<br/>}</span></pre><p id="a01c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们有了一个包含布尔方法的Person类。我们有一个TimeOperations类，它有一个<em class="kf"> isWeekday </em>方法。现在我们来看看if语句。这是一行可读的代码。如果你第一次看到这个，你就不会有理解发生了什么的问题。这是因为我们将细节隐藏在命名的代码块中。您不仅应该对布尔值这样做，还应该对您正在编写的所有代码这样做。</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/82e538ed14c65a6214e74f33fb6e9e60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I5HOPKzFmE9HeXhD91w7rQ.jpeg"/></div></div></figure><p id="244f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我看到很多人这样写代码:</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="55b2" class="jz ka hi jv b fi kb kc l kd ke">public void deleteUser(int id) {<br/>   if (loggedUser != null) {<br/>      if(loggedUser.sessionExpired()) {<br/>         // log erorr and throw<br/>      }<br/>      if(loggedUser.isNotAdmin()) {<br/>         // log erorr and throw<br/>      }<br/>      userRepository.delete(id);<br/>   } else {<br/>      // throw<br/>   }<br/>}</span></pre><p id="a233" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有很多巢。嵌套代码很难阅读。尽量避免。你看到我们在哪里删除用户了吗？这是我们的主要逻辑。剩下的就是细节了。看看main方法逻辑是如何包装检查和细节的。如果我需要理解这个逻辑，我将需要浏览围绕它的所有其他代码，然后我将转到我想看的那一行。我们可能不关心其他代码。在这种情况下，我们可以独立于业务逻辑进行验证。为此，我们只需翻转第一个<em class="kf"> if </em>，然后复制其后的其他检查，如下所示:</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="7b35" class="jz ka hi jv b fi kb kc l kd ke">public void deleteUser(int id) {<br/>   if (loggedUser == null) {<br/>      // throw<br/>   }<br/>   if(loggedUser.sessionExpired()) {<br/>       // log erorr and throw<br/>   }<br/>   if(loggedUser.isNotAdmin()) {<br/>      // log erorr and throw<br/>   }</span><span id="7336" class="jz ka hi jv b fi kg kc l kd ke">   userRepository.delete(id);	<br/>}</span></pre><p id="8e46" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当然，这对于这个例子是有效的。你可能有不同的情况。试着把检查和细节从主逻辑中分离出来。</p><p id="50ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">看看我们是如何解开业务逻辑的。好多了。我想让你看两件事:</p><ol class=""><li id="75a7" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated">首先——看到两种方法之间的区别并思考它们。</li><li id="99f6" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">第二，想办法让deleteUser方法更干净。我们能做什么来使业务逻辑成为视图的中心。</li></ol><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/8a431b0ed34c31c21ce30618c9e1dfe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S-AOrktlF2Y9112vkEGUsQ.png"/></div></figure><p id="8e15" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们能做的是…没错，伙计们，在单独的方法中提取验证，如下所示:</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="892b" class="jz ka hi jv b fi kb kc l kd ke">public void deleteUser(int id) {<br/>   validatePermissions();<br/>   userRepository.delete(id);<br/>}</span><span id="7e4c" class="jz ka hi jv b fi kg kc l kd ke">private void validatePermissions() {<br/>   if (loggedUser == null) {<br/>      // throw<br/>   }<br/>   if(loggedUser.sessionExpired()) {<br/>      // log erorr and throw<br/>   }<br/>   if(loggedUser.isNotAdmin()) {<br/>      // log erorr and throw<br/>   }<br/>}</span></pre><p id="4992" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在来看看deleteUser方法，这样更好。我们有一行用于验证，一行用于实际的方法逻辑。如果我们想看到验证，我们进入<code class="du ld le lf jv b">validatePermissions </code>方法。同样，我们不需要用细节来污染方法。看看这两种方法的区别。你可以清楚地看到哪个更好。</p><p id="3b46" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">出发前—我们令人惊叹的干净代码课程目前以87%的折扣提供</strong></p><p id="01bb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你喜欢这篇文章，你会喜欢我们的课程:</p><ul class=""><li id="4e36" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn lg ku kv kw bi translated">46场讲座</li><li id="065b" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn lg ku kv kw bi translated">3小时以上的内容</li><li id="1d36" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn lg ku kv kw bi translated">做一个真实的项目来测试你的知识</li><li id="b69a" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn lg ku kv kw bi translated">27个可下载资源</li><li id="a1be" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn lg ku kv kw bi translated">30天退款保证</li></ul><p id="477b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在这里报名参加课程— <a class="ae jo" href="https://rebrand.ly/sppc-m-booleans" rel="noopener ugc nofollow" target="_blank">干净代码:7天暴涨你的编程生涯</a></p><figure class="jq jr js jt fd ij er es paragraph-image"><a href="https://rebrand.ly/sppc-m-booleans"><div class="er es jp"><img src="../Images/dc9c4358d48d8c1502f7fa18c29da201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*yDVe-HZhy4OdzzOSYdnP6A.png"/></div></a></figure></div></div>    
</body>
</html>