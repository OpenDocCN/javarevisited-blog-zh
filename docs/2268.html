<html>
<head>
<title>Understanding logging in Spring Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Spring Boot的伐木业</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/understanding-logging-in-spring-boot-ac0fd79177b4?source=collection_archive---------0-----------------------#2022-07-25">https://medium.com/javarevisited/understanding-logging-in-spring-boot-ac0fd79177b4?source=collection_archive---------0-----------------------#2022-07-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7e23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Spring Boot SLF4J、记录器、日志级别和格式化日志简介</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2022/07/free-courses-to-learn-spring-framework.html"><div class="er es jd"><img src="../Images/c21f6fa62cb9872d630507306aa911f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a_2llGzVdLq_VXq4AaF1_Q.jpeg"/></div></a></figure><p id="2129" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为一名软件开发人员，你会花大部分时间调试你的代码吗？浏览了整个代码库，仍然不能找出你的代码哪里出错了？这就是伐木业的用武之地！</p><p id="920f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">日志记录是跟踪一段代码运行后发生的所有事件的过程。这是软件开发的一个非常重要的方面，因为它有助于跟踪代码崩溃的确切位置，从而简化调试。</p><p id="c0d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来了解一下<a class="ae jl" href="https://www.java67.com/2021/10/how-to-set-logging-level-in-spring-boot-.html" rel="noopener ugc nofollow" target="_blank">在春开机</a>中是如何进行日志记录的！</p><p id="5f6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了让程序员更容易记录日志，Java提供了各种日志框架，如:<a class="ae jl" href="https://javarevisited.blogspot.com/2021/12/what-is-log4j-2-issue-how-to-solve-log.html" rel="noopener ugc nofollow" target="_blank">、log4J </a>、java.util.logging (JUL)、tiny log、logback等。</p><p id="ad05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">日志框架可用于执行所有任务，如设置日志文件目的地、定制日志消息等。</p><p id="6c64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Spring Boot内置了SLF4J，这是所有这些日志框架的抽象。<a class="ae jl" href="https://javarevisited.blogspot.com/2013/08/why-use-sl4j-over-log4j-for-logging-in.html" rel="noopener ugc nofollow" target="_blank"> SLF4J </a>代表Java的简单日志外观。它允许用户使用任何具有单一依赖关系的日志框架。</p><p id="2027" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个日志框架都有三个元素。</p><ol class=""><li id="51ca" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc jr js jt ju bi translated">记录器—捕获消息</li><li id="0da0" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated">格式化程序—格式化记录器捕获的消息</li><li id="02c9" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated">处理程序—通过将消息打印在控制台上、存储在文件中、发送电子邮件等方式来分发消息。</li></ol><p id="2e75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们一步一步地了解这些元素。</p><h2 id="c4cc" class="ka kb hi bd kc kd ke kf kg kh ki kj kk iq kl km kn iu ko kp kq iy kr ks kt ku bi translated">记录器</h2><p id="14e3" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">为了生成记录器，我们使用org.slf4j的LoggerFactory类，Logger接口是slf4j API的入口点。getLogger是Logger工厂类的一个方法，它将一个字符串值作为名称，并提供指定名称的Logger对象。</p><pre class="je jf jg jh fd la lb lc ld aw le bi"><span id="3d63" class="ka kb hi lb b fi lf lg l lh li"><em class="lj">Logger</em> logger = LoggerFactory.getLogger(Controller.class);</span></pre><p id="cc08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">记录器具有为各种日志级别打印日志消息的方法</p><p id="53f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">示例:</p><pre class="je jf jg jh fd la lb lc ld aw le bi"><span id="12ca" class="ka kb hi lb b fi lf lg l lh li">logger.info("INFO MESSAGE")</span></pre><h1 id="7bb2" class="lk kb hi bd kc ll lm ln kg lo lp lq kk lr ls lt kn lu lv lw kq lx ly lz kt ma bi translated">什么是日志级别:</h1><p id="dcb8" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">记录的消息可以具有不同的安全级别。<a class="ae jl" rel="noopener" href="/javarevisited/10-advanced-spring-boot-courses-for-experienced-java-developers-5e57606816bd"> Spring Boot </a>支持五种日志级别，分别是</p><ol class=""><li id="07bf" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc jr js jt ju bi translated">错误—运行时错误</li><li id="8b8c" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated">调试—关于系统流程的信息</li><li id="aad6" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated">跟踪—关于系统流程的更详细信息</li><li id="3fc9" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated">警告—警告由于使用不推荐使用的API而导致的错误。</li><li id="871d" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated">信息—运行时发生的事件</li></ol><p id="1cf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们编写一些代码来创建一个日志记录器。用spring web依赖的Spring初始化器初始化一个Spring项目，并创建一个基本的<a class="ae jl" rel="noopener" href="/javarevisited/top-10-rest-interview-questions-for-java-and-spring-developers-1611e3b78029"> rest控制器</a></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mb mc l"/></div><p class="md me et er es mf mg bd b be z dx translated">Controller.java</p></figure><p id="f441" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，<a class="ae jl" href="https://www.java67.com/2021/10/how-to-set-logging-level-in-spring-boot-.html" rel="noopener ugc nofollow" target="_blank">日志级别在Spring Boot </a>中设置为INFO。我们可以根据我们在applications.properties文件中的要求设置日志级别</p><p id="ac4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置日志级别配置的格式是<code class="du mh mi mj lb b">logging.level.[classpath] = [level]</code>。</p><pre class="je jf jg jh fd la lb lc ld aw le bi"><span id="8e67" class="ka kb hi lb b fi lf lg l lh li">logging.level.com.logging = TRACE</span></pre><p id="9c1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以为不同的类设置不同的日志级别。</p><pre class="je jf jg jh fd la lb lc ld aw le bi"><span id="9a91" class="ka kb hi lb b fi lf lg l lh li">logging.level.root=INFO <br/>logging.level.com.logging =DEBUG</span></pre><p id="1920" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个配置中，除了日志类路径之外的每个类都将它们的日志级别设置为<code class="du mh mi mj lb b">INFO</code></p><p id="9c7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据上面的讨论，这应该是我们更新的代码:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mb mc l"/></div><p class="md me et er es mf mg bd b be z dx translated">应用程序.属性</p></figure><p id="335d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样，我们可以在控制台中实现日志。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2022/05/50-free-spring-professional-certification-questions.html"><div class="er es mk"><img src="../Images/d95d3b1e883d0e9f9456be4b549b9ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OpStxTYYja6jPM1A_HDT3w.png"/></div></a><p class="md me et er es mf mg bd b be z dx translated">控制台输出</p></figure><h1 id="ff7e" class="lk kb hi bd kc ll lm ln kg lo lp lq kk lr ls lt kn lu lv lw kq lx ly lz kt ma bi translated">日志格式</h1><p id="4f06" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">让我们分解日志消息并理解每个术语的含义，</p><ul class=""><li id="0b47" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc ml js jt ju bi translated">2022–07–16 13:16:51.810-日期和时间</li><li id="8567" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc ml js jt ju bi translated">信息—日志级别</li><li id="1dd2" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc ml js jt ju bi translated">12620 —流程ID</li><li id="ff4e" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc ml js jt ju bi translated">[nio-8080-exec-1] —线程名称</li><li id="0794" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc ml js jt ju bi translated">com.logging.Controller —记录器名称</li><li id="39bf" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc ml js jt ju bi translated">正在初始化Spring embedded WebApplicationContext—日志消息</li></ul><p id="f1eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">格式化程序</strong></p><p id="e426" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过设置颜色、消息格式等，可以根据我们的要求对日志消息进行格式化和定制。</p><h1 id="8c68" class="lk kb hi bd kc ll lm ln kg lo lp lq kk lr ls lt kn lu lv lw kq lx ly lz kt ma bi translated">控制台日志输出</h1><p id="d68c" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">为了定制<a class="ae jl" href="https://javarevisited.blogspot.com/2012/10/java-program-to-get-input-from-user.html" rel="noopener ugc nofollow" target="_blank">控制台</a>中的消息，我们可以在application.properties文件中添加几行代码</p><p id="3aa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要启用颜色，</p><pre class="je jf jg jh fd la lb lc ld aw le bi"><span id="0a51" class="ka kb hi lb b fi lf lg l lh li">spring.output.ansi.enabled=always</span></pre><p id="fd67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要自定义消息，</p><pre class="je jf jg jh fd la lb lc ld aw le bi"><span id="5581" class="ka kb hi lb b fi lf lg l lh li">logging.pattern.console= %d [%level] %c{1.} [%t] %m%n</span></pre><p id="71a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在哪里，</p><p id="6ae4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">%d —日期</p><p id="8030" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">% level —日志级别</p><p id="c347" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">% c-类路径</p><p id="7adc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">%t —线程正在执行</p><p id="53a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">%m —消息</p><p id="adc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">%n —新行</p><p id="8656" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过书写颜色和日期格式来添加更多的定制，</p><pre class="je jf jg jh fd la lb lc ld aw le bi"><span id="ca41" class="ka kb hi lb b fi lf lg l lh li">logging.pattern.console=%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){green} %clr([%level]){magenta}  %c{1.} [%t] %m%n</span></pre><p id="9878" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在哪里，</p><p id="2cf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">%clr —颜色</p><p id="474a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们得到定制的输出，我们的控制台看起来像这样，</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2012/10/java-program-to-get-input-from-user.html"><div class="er es mm"><img src="../Images/2da195da434c59abc4151ce8941c1cfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EFxrBYptOPJpof4-bSxPEQ.png"/></div></a><p class="md me et er es mf mg bd b be z dx translated">控制台日志输出</p></figure><p id="4c6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">处理器</strong></p><p id="e8dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过在如上所示的控制台中显示日志消息来分派日志，也可以将日志消息存储在一个文件中。</p><h1 id="dec0" class="lk kb hi bd kc ll lm ln kg lo lp lq kk lr ls lt kn lu lv lw kq lx ly lz kt ma bi translated">文件日志输出:</h1><p id="3abf" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">我们可以在application.properties文件中设置文件路径和模式。</p><pre class="je jf jg jh fd la lb lc ld aw le bi"><span id="44b0" class="ka kb hi lb b fi lf lg l lh li">logging.file.name = error.log</span><span id="13da" class="ka kb hi lb b fi mn lg l lh li">logging.pattern.file= %clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){green} [%level] %c{1.} [%t] %m%n</span></pre><p id="417d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">日志存储在“error.log”文件中(如果存在),否则会创建一个新文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://javarevisited.blogspot.com/2017/04/log4j-tips-use-mdc-or-mapped-dignostic-context-to-log-per-client-or-request.html"><div class="er es mo"><img src="../Images/9b153d5dcc442c51dac46237dfbe45f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iR-jmRzqDju_QyvDg253gw.png"/></div></a><p class="md me et er es mf mg bd b be z dx translated">错误日志</p></figure><p id="0f9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">日志一直存储在文件中，并在每次执行代码时自我更新。</p><h1 id="d02b" class="lk kb hi bd kc ll lm ln kg lo lp lq kk lr ls lt kn lu lv lw kq lx ly lz kt ma bi translated">摘要</h1><ul class=""><li id="002f" class="jm jn hi ih b ii kv im kw iq mp iu mq iy mr jc ml js jt ju bi translated">每个日志框架都有三个元素— <a class="ae jl" href="https://javarevisited.blogspot.com/2013/12/how-to-configure-log4j-in-java-program.html" rel="noopener ugc nofollow" target="_blank"> Logger </a>，formatter，Handler</li><li id="96ad" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc ml js jt ju bi translated">使用logger方法，我们可以记录Spring Boot支持的所有五个日志级别的消息——错误、调试、跟踪、信息、警告</li><li id="2ed7" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc ml js jt ju bi translated">使用Logger工厂类，我们可以生成Logger并在控制台上打印它们，或者根据我们的要求将它们保存在带有格式的文件中。</li></ul><p id="3515" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码:<a class="ae jl" href="https://github.com/dsrao711/LogginginSpringBoot" rel="noopener ugc nofollow" target="_blank">dsrao 711/loggininspringboot:了解SpringBoot中的日志记录(github.com)</a></p><p id="1646" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在LinkedIn上联系我:<a class="ae jl" href="https://www.linkedin.com/in/divya-rao-739a8b143/" rel="noopener ugc nofollow" target="_blank"> Divya Rao | LinkedIn </a></p></div></div>    
</body>
</html>