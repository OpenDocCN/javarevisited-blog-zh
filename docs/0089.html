<html>
<head>
<title>The curious case of Island of Isolation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">孤岛的奇特案例</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/curious-case-of-island-of-isolation-6243f3a6698d?source=collection_archive---------1-----------------------#2019-06-25">https://medium.com/javarevisited/curious-case-of-island-of-isolation-6243f3a6698d?source=collection_archive---------1-----------------------#2019-06-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ea75ce8031f70c271de73717306e0670.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*feISTLs_idTRNB1_.jpg"/></div></div><p class="iq ir et er es is it bd b be z dx translated">孤岛</p></figure><p id="3b4d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">垃圾收集器是JAVA世界中的主要原语之一。从内存中清除未使用/不可访问对象的工具。如果一个对象没有引用，那么它就有资格进行<a class="ae js" href="https://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html#axzz4zt6jlTWS" rel="noopener ugc nofollow" target="_blank">垃圾收集</a>。与这种说法相反，有一种情况是，即使对象持有引用，它们也可以被垃圾收集。这样的场景被称为<strong class="iw hj">孤岛。</strong></p><p id="eae4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">通俗地说，孤岛是一种场景，其中一些对象持有彼此的引用，但由于这些对象没有外部的<a class="ae js" href="https://javarevisited.blogspot.com/2014/03/difference-between-weakreference-vs-softreference-phantom-strong-reference-java.html" rel="noopener ugc nofollow" target="_blank">强引用</a>，所以它们都不能通过活动的应用程序访问。</p><blockquote class="jt"><p id="eca6" class="ju jv hi bd jw jx jy jz ka kb kc jr dx translated">术语“孤岛”的出现是因为对象被隔离以仅保存内部引用。</p></blockquote><p id="863c" class="pw-post-body-paragraph iu iv hi iw b ix kd iz ja jb ke jd je jf kf jh ji jj kg jl jm jn kh jp jq jr hb bi translated">让我们通过深入一个例子来更好地了解情况。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="1ffd" class="kr ks hi kn b fi kt ku l kv kw">class  Demo{<br/><br/>    String objName;<br/>    Demo demo;<br/><br/>    public Demo(String objName){<br/>        this.objName=objName;<br/>    }<br/><br/>    public static void main(String... args){<br/><br/>        Demo obj1 = new Demo("Object 1");<br/>        Demo obj2 = new Demo("Object 2");<br/><br/>        // Object obj1 gets a copy of obj2<br/>        obj1.demo = obj2;<br/><br/>        // Object obj2 gets a copy of obj1<br/>        obj2.demo= obj1;<br/><br/>        /* Both the objects holds the internal references of each <br/>           other at this point*/<br/><br/>        // Make the Objects GC eligible by Nullifying the references<br/>        obj1 = null;<br/><br/>        /* Change the name of the object obj1 via obj2, So that it <br/>           is easy to identify when finalize method is invoked*/<br/>        obj2.demo.objName = "Object 1 referenced via Object 2";<br/><br/>        obj2 = null;<br/><br/>       // Request GC to garbage collect the objects<br/>        System.<em class="kx">gc</em>();<br/>    }<br/><br/>    @Override<br/>    /* Overriding finalize method to check which object is garbage  <br/>       collected */<br/>    protected void finalize() throws Throwable<br/>    {<br/>        System.<em class="kx">out</em>.println(this.objName + " garbage collected  <br/>                           successfully");<br/>    }<br/>}</span></pre><p id="196f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了演示，我们有一个<code class="du ky kz la kn b">Demo </code>类。正如您所观察到的，Demo类有两个实例变量，一个保存对象的名称，另一个保存<code class="du ky kz la kn b">Demo </code>类实例。创建了两个新的Demo实例，每个实例都分配有另一个Demo类实例的副本。即obj1维护obj2的内部参考，<code class="du ky kz la kn b">obj2 </code>维护<code class="du ky kz la kn b">obj1</code>的内部参考。我们还覆盖了finalize方法，这样就很容易找到垃圾回收对象的名称。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2019/04/top-5-courses-to-learn-jvm-internals.html#axzz5rs7Y34VR"><div class="er es lb"><img src="../Images/990dc405a8b442b57dc55484dcca3829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cHOSh--VTk5ytwgyv_iXmg.png"/></div></a></figure><p id="284f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来Obj1被取消，如果你想知道obj1是否有资格进行垃圾收集，请重新评估它，因为obj2持有obj1的内部引用，obj1仍然可以通过obj2访问。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><a href="https://javarevisited.blogspot.com/2018/07/top-5-java-performance-tuning-books-for.html#axzz5QyVrOCeJ"><div class="er es lb"><img src="../Images/7093fc2dec8937734e35fff9c0cb4880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fqNrX_O1ol_ADwABj3ktsw.png"/></div></a></figure><p id="5e84" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">最后，obj2也被取消了，因为不再有外部引用，所以无法在应用程序中访问这些对象。这两个对象都是垃圾回收的，通过注意finalize方法及其对应的对象名被调用了两次，这一点很明显。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/9d3b2cea3d42c2760d5a6787c57bb73a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DgM8W1y7Y1H9hR86mvypnQ.png"/></div></div></figure><p id="7541" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这种垃圾收集对象的现象，即使存在现有的引用，也被称为“<strong class="iw hj">孤岛”。</strong></p><p id="b384" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">结论:</strong></p><p id="f776" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">正如文章所传达的，GC不仅会清理无引用的对象，还会清理有内部引用但没有外部引用的对象。如果您有任何疑问，请随时通过推特<a class="ae js" href="https://twitter.com/ArunJijo36" rel="noopener ugc nofollow" target="_blank">联系我。</a></p><p id="6040" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">其他<strong class="iw hj"> Java文章</strong>你可能喜欢<br/> <a class="ae js" href="https://click.linksynergy.com/deeplink?id=JVFxdTr9V80&amp;mid=39197&amp;murl=https%3A%2F%2Fwww.udemy.com%2Fjava-memory-management%2F" rel="noopener ugc nofollow" target="_blank"> Java内存管理</a><br/><a class="ae js" href="https://click.linksynergy.com/deeplink?id=JVFxdTr9V80&amp;mid=39197&amp;murl=https%3A%2F%2Fwww.udemy.com%2Fa-comprehensive-introduction-to-java-virtual-machine-jvm%2F" rel="noopener ugc nofollow" target="_blank">Java虚拟机(JVM)全面介绍 </a> <br/> <a class="ae js" href="https://pluralsight.pxf.io/c/1193463/424552/7490?u=https%3A%2F%2Fwww.pluralsight.com%2Fcourses%2Funderstanding-java-vm-memory-management" rel="noopener ugc nofollow" target="_blank">了解Java虚拟机:内存管理</a> <br/> <a class="ae js" href="http://javarevisited.blogspot.sg/2014/05/10-articles-every-programmer-must-read.html" rel="noopener ugc nofollow" target="_blank">每个程序员都应该看的10篇文章</a> <br/> <a class="ae js" href="http://javarevisited.blogspot.sg/2018/01/10-tools-every-software-developer-know.html" rel="noopener ugc nofollow" target="_blank">每个软件开发人员都应该知道的10个工具</a> <br/> <a class="ae js" href="https://hackernoon.com/10-data-structure-algorithms-and-programming-courses-to-crack-any-coding-interview-e1c50b30b927" rel="noopener ugc nofollow" target="_blank"> 10个面向程序员的数据结构和算法课程</a> <br/> <a class="ae js" href="https://javarevisited.blogspot.com/2018/04/top-5-java-frameworks-to-learn-in-2018_27.html" rel="noopener ugc nofollow" target="_blank"> 5个Java和Web开发框架程序员都应该学习的</a> <br/> <a class="ae js" href="https://javarevisited.blogspot.com/2018/01/10-unit-testing-and-integration-tools-for-java-programmers.html" rel="noopener ugc nofollow" target="_blank"> 10个面向Java devs的单元测试和集成测试工具</a> <br/> <a class="ae js" href="https://javarevisited.blogspot.com/2019/04/top-5-courses-to-learn-jvm-internals.html" rel="noopener ugc nofollow" target="_blank"> 5个课程学习j</a></p><p id="1b2d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">感谢您阅读本文。如果你喜欢这些工具，请与你在脸书的朋友和同事分享。如果您有任何问题或反馈，请留言。</p></div></div>    
</body>
</html>