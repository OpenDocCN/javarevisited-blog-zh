<html>
<head>
<title>Microservices with Spring Boot and Java — Part 3 — Example 2 — Creating Currency Conversion Microservice</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Spring Boot 和 Java 的微服务—第 3 部分—示例 2 —创建货币兑换微服务</h1>
<blockquote>原文：<a href="https://medium.com/javarevisited/microservices-with-spring-boot-and-java-part-3-example-2-creating-currency-conversion-55c008814201?source=collection_archive---------2-----------------------#2020-01-11">https://medium.com/javarevisited/microservices-with-spring-boot-and-java-part-3-example-2-creating-currency-conversion-55c008814201?source=collection_archive---------2-----------------------#2020-01-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a704" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们来学习一下微服务和微服务架构的基础知识。我们还将开始研究 Spring Boot 微服务的基本实现。我们将创建几个微服务，并让它们使用 Eureka 命名服务器和 Ribbon 进行客户端负载平衡。</p><p id="1965" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是微服务系列大纲:Spring Boot 微服务</p><ul class=""><li id="17fa" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">第 1 部分— <a class="ae jm" href="https://www.springboottutorial.com/creating-microservices-with-spring-boot-part-1-getting-started" rel="noopener ugc nofollow" target="_blank">微服务架构入门</a></li><li id="cdaf" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">第二部分— <a class="ae jm" href="https://www.springboottutorial.com/creating-microservices-with-spring-boot-part-2-forex-microservice" rel="noopener ugc nofollow" target="_blank">打造外汇微服务</a></li><li id="7d0a" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">当前部分—第 3 部分—创建货币兑换微服务</li><li id="a5e2" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">第 4 部分— <a class="ae jm" href="https://www.springboottutorial.com/microservices-with-spring-boot-part-4-ribbon-for-load-balancing" rel="noopener ugc nofollow" target="_blank">使用 Ribbon 进行负载平衡</a></li><li id="4fb4" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">第 5 部分— <a class="ae jm" href="https://www.springboottutorial.com/microservices-with-spring-boot-part-5-eureka-naming-server" rel="noopener ugc nofollow" target="_blank">使用 Eureka 命名服务器</a></li></ul><p id="49ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是本系列的第 3 部分。在这一部分，我们将重点创建货币转换微服务。</p><h1 id="ac95" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">你会学到的</h1><ul class=""><li id="36de" class="jd je hi ih b ii kq im kr iq ks iu kt iy ku jc ji jj jk jl bi translated">如何用 Spring Boot 创建微服务？</li><li id="6db1" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">如何使用 RestTemplate 执行一个 REST 服务？</li><li id="94cf" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">如何使用 Feign 来执行 REST 服务？</li><li id="aad1" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">相比 RestTemplate，Feign 有什么优势？</li></ul><h1 id="ea39" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">免费课程—10 步学会</h1><ul class=""><li id="2d0c" class="jd je hi ih b ii kq im kr iq ks iu kt iy ku jc ji jj jk jl bi translated"><a class="ae jm" href="https://links.in28minutes.com/SBT-Page-Top-LearningChallenge-SpringBoot" rel="noopener ugc nofollow" target="_blank">免费 5 天挑战——学习春天和 Spring Boot </a></li><li id="cfe4" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><a class="ae jm" href="https://links.in28minutes.com/in28minutes-10steps-springboot" rel="noopener ugc nofollow" target="_blank">用 10 个步骤学习 Spring Boot</a></li><li id="cd40" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><a class="ae jm" href="https://links.in28minutes.com/in28minutes-10steps-docker" rel="noopener ugc nofollow" target="_blank">10 步学会 Docker</a></li><li id="7424" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><a class="ae jm" href="https://links.in28minutes.com/in28minutes-10steps-k8s" rel="noopener ugc nofollow" target="_blank">十步学会 Kubernetes</a></li><li id="b4ff" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><a class="ae jm" href="https://links.in28minutes.com/in28minutes-10steps-aws-beanstalk" rel="noopener ugc nofollow" target="_blank">用 10 个步骤学习 AWS</a></li></ul><p id="00a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你需要更多的选择，你可以查看这些<a class="ae jm" href="https://www.java67.com/2017/11/top-5-free-core-spring-mvc-courses-learn-online.html" rel="noopener ugc nofollow" target="_blank">免费的春季和 Spring Boot 课程</a>:</p><div class="kv kw ez fb kx ky"><a href="https://www.java67.com/2017/11/top-5-free-core-spring-mvc-courses-learn-online.html" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">供初学者在线学习的 5 大免费核心 Spring、Spring MVC 和 Spring Boot 课程</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">我最近分享了很多资源，例如书籍和课程，当我将我的 5 大课程列表发布给…</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">www.java67.com</p></div></div><div class="lh l"><div class="li l lj lk ll lh lm ln ky"/></div></div></a></div><h1 id="2044" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">资源概述</h1><p id="2aa2" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">货币转换服务(CCS)可以将一批货币转换成另一种货币。它使用外汇服务来获取当前的货币兑换值。CCS 是服务消费者。</p><p id="cdf5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请求和响应的示例如下所示:</p><p id="b9ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">转到<a class="ae jm" href="http://localhost:8100/currency-converter/from/EUR/to/INR/quantity/10000" rel="noopener ugc nofollow" target="_blank">http://localhost:8100/currency-converter/from/EUR/to/INR/quantity/10000</a></p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="b30c" class="ma jt hi lw b fi mb mc l md me">{<br/>  id: 10002,<br/>  from: "EUR",<br/>  to: "INR",<br/>  conversionMultiple: 75,<br/>  quantity: 10000,<br/>  totalCalculatedAmount: 750000,<br/>  port: 8000,<br/>}</span></pre><p id="a698" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的请求是找出 10000 欧元的印度卢比值。总计算金额为 750000 印度卢比。</p><p id="7439" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图显示了 CCS 和 FS 之间的通信。</p><figure class="lr ls lt lu fd mg er es paragraph-image"><div class="er es mf"><img src="../Images/3af6427b35e4a404c1e5b48428b84325.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/0*6hbSOv8ED7gplULH.png"/></div></figure><h1 id="88f1" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">项目代码结构</h1><p id="58de" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">下面的屏幕截图显示了我们将要创建的项目的结构。</p><figure class="lr ls lt lu fd mg er es paragraph-image"><div class="er es mi"><img src="../Images/63cc678e8cce9294cf78c0c5662f784c.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/0*S3iAXzKPZ9-XbfWP.png"/></div></figure><p id="d316" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一些细节:</p><ul class=""><li id="c868" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">用 Spring 初始化器生成的 Spring Boot 应用程序类。这个类充当应用程序的启动点。</li><li id="2985" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><code class="du mj mk ml lw b">pom.xml</code> -它包含了构建这个项目所需的所有依赖项。我们将使用 Spring Boot 入门网站。</li><li id="f6bf" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><code class="du mj mk ml lw b">CurrencyConversionBean.java</code>——比恩按住我们想要发出的回应。</li><li id="5f2d" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><code class="du mj mk ml lw b">CurrencyExchangeServiceProxy.java</code> -这将是调用外汇服务的虚拟代理。</li><li id="0d41" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><code class="du mj mk ml lw b">CurrencyConversionController.java</code> - Spring Rest 控制器公开货币兑换服务。这将使用<code class="du mj mk ml lw b">CurrencyExchangeServiceProxy</code>调用外汇服务。</li></ul><h1 id="21b1" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">您将需要的工具</h1><ul class=""><li id="9be1" class="jd je hi ih b ii kq im kr iq ks iu kt iy ku jc ji jj jk jl bi translated">Maven 3.0+是您的构建工具</li><li id="35ee" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">你最喜欢的 IDE。我们使用 Eclipse。</li><li id="ca5a" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">JDK 1.8 以上</li></ul><p id="ea98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你需要了解更多关于 Java 开发人员必备工具的信息，你可以点击这里:</p><div class="kv kw ez fb kx ky"><a href="https://www.java67.com/2018/04/10-tools-java-developers-should-learn.html" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">2020 年 Java 开发人员应该学习的 10 种工具-(更新)</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">我们离 2020 年只有一两个星期了，许多程序员已经开始为他们的目标制定一个好的过程…</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">www.java67.com</p></div></div><div class="lh l"><div class="mm l lj lk ll lh lm ln ky"/></div></div></a></div><h1 id="925c" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">用代码示例完成 Maven 项目</h1><blockquote class="mn mo mp"><p id="198c" class="if ig mq ih b ii ij ik il im in io ip mr ir is it ms iv iw ix mt iz ja jb jc hb bi translated">我们的 Github 存储库中有所有的代码示例—<a class="ae jm" href="https://github.com/in28minutes/spring-boot-examples/tree/master/spring-boot-basic-microservice" rel="noopener ugc nofollow" target="_blank">https://Github . com/in 28 minutes/spring-boot-examples/tree/master/spring-boot-basic-microservice</a></p></blockquote><h1 id="9a1b" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">使用 Spring Initializr 引导</h1><p id="788e" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">用 Spring Initializr 创建微服务是小菜一碟。</p><p id="b512" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">spring Initializr<a class="ae jm" href="https://start.spring.io/" rel="noopener ugc nofollow" target="_blank">http://start.spring.io/</a>是启动你的 Spring Boot 项目的伟大工具。</p><p id="451b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以使用 Spring Initializr 创建各种各样的项目。</p><figure class="lr ls lt lu fd mg er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es mu"><img src="../Images/e18a7c6d0900e2ffb61b1b2d97e856d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ivzRKJjNODlLbFoD.png"/></div></div></figure><p id="4990" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于 Web 服务项目，必须完成以下步骤</p><ul class=""><li id="34e6" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">启动 Spring Initializr 并选择以下选项</li><li id="30b5" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">选择<code class="du mj mk ml lw b">com.in28minutes.springboot.microservice.example.currencyconversion</code>作为群组</li><li id="35f4" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">选择<code class="du mj mk ml lw b">spring-boot-microservice-currency-conversion</code>作为神器</li><li id="676b" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">选择以下依赖项</li><li id="726d" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">网</li><li id="81f5" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">开发工具</li><li id="2c2d" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">假装</li><li id="f33e" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">单击生成项目。</li><li id="d9e4" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">将项目导入 Eclipse。文件-&gt;导入-&gt;现有 Maven 项目。</li></ul><blockquote class="mn mo mp"><p id="e3db" class="if ig mq ih b ii ij ik il im in io ip mr ir is it ms iv iw ix mt iz ja jb jc hb bi translated">不要忘记在依赖项中选择 Feign</p></blockquote><h1 id="a91e" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">正在创建 CurrencyConversionBean</h1><p id="f41a" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">这是一个用于创建响应的简单 bean。</p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="d953" class="ma jt hi lw b fi mb mc l md me">public class CurrencyConversionBean {<br/>  private Long id;<br/>  private String from;<br/>  private String to;<br/>  private BigDecimal conversionMultiple;<br/>  private BigDecimal quantity;<br/>  private BigDecimal totalCalculatedAmount;<br/>  private int port;</span><span id="6a25" class="ma jt hi lw b fi mz mc l md me">  public CurrencyConversionBean() {</span><span id="b9a2" class="ma jt hi lw b fi mz mc l md me">  }</span><span id="dd09" class="ma jt hi lw b fi mz mc l md me">  public CurrencyConversionBean(Long id, String from, String to, BigDecimal conversionMultiple, BigDecimal quantity,<br/>      BigDecimal totalCalculatedAmount, int port) {<br/>    super();<br/>    this.id = id;<br/>    this.from = from;<br/>    this.to = to;<br/>    this.conversionMultiple = conversionMultiple;<br/>    this.quantity = quantity;<br/>    this.totalCalculatedAmount = totalCalculatedAmount;<br/>    this.port = port;<br/>  }</span></pre><h1 id="75e8" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">用 RestTemplate 实现 REST 客户端</h1><p id="737d" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">下面的代码展示了 REST 客户端调用 forex 服务并处理响应的实现。如您所见，需要编写大量代码来进行简单的服务调用。</p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="b196" class="ma jt hi lw b fi mb mc l md me">@RestController<br/>public class CurrencyConversionController {</span><span id="a3de" class="ma jt hi lw b fi mz mc l md me">  private Logger logger = LoggerFactory.getLogger(this.getClass());</span><span id="b19f" class="ma jt hi lw b fi mz mc l md me">  @GetMapping("/currency-converter/from/{from}/to/{to}/quantity/{quantity}")<br/>  public CurrencyConversionBean convertCurrency(@PathVariable String from, @PathVariable String to,<br/>      @PathVariable BigDecimal quantity) {</span><span id="aed6" class="ma jt hi lw b fi mz mc l md me">    Map&lt;String, String&gt; uriVariables = new HashMap&lt;&gt;();<br/>    uriVariables.put("from", from);<br/>    uriVariables.put("to", to);</span><span id="4766" class="ma jt hi lw b fi mz mc l md me">    ResponseEntity&lt;CurrencyConversionBean&gt; responseEntity = new RestTemplate().getForEntity(<br/>        "http://localhost:8000/currency-exchange/from/{from}/to/{to}", CurrencyConversionBean.class,<br/>        uriVariables);</span><span id="260f" class="ma jt hi lw b fi mz mc l md me">    CurrencyConversionBean response = responseEntity.getBody();</span><span id="8ab4" class="ma jt hi lw b fi mz mc l md me">    return new CurrencyConversionBean(response.getId(), from, to, response.getConversionMultiple(), quantity,<br/>        quantity.multiply(response.getConversionMultiple()), response.getPort());<br/>  }</span></pre><h1 id="0297" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">配置应用程序名称和端口</h1><p id="920a" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">/spring-boot-微服务-货币-转换-服务/src/main/resources/application . properties</p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="ffea" class="ma jt hi lw b fi mb mc l md me">spring.application.name=currency-conversion-service<br/>server.port=8100</span></pre><p id="0653" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们正在分配一个应用程序名和一个默认端口<code class="du mj mk ml lw b">8100</code>。</p><h1 id="0e32" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">测试微服务</h1><p id="26bc" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">通过启动 SpringBootMicroserviceCurrencyConversionApplication.java 来启动 Spring Boot 应用程序</p><p id="876c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到达<code class="du mj mk ml lw b"><a class="ae jm" href="http://localhost:8100/currency-converter/from/EUR/to/INR/quantity/10000" rel="noopener ugc nofollow" target="_blank">http://localhost:8100/currency-converter/from/EUR/to/INR/quantity/10000</a></code></p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="6e46" class="ma jt hi lw b fi mb mc l md me">{<br/>  id: 10002,<br/>  from: "EUR",<br/>  to: "INR",<br/>  conversionMultiple: 75,<br/>  quantity: 10000,<br/>  totalCalculatedAmount: 750000,<br/>  port: 8000,<br/>}</span></pre><p id="ad10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您运行在 Linux 上，您还可以使用<a class="ae jm" href="http://javarevisited.blogspot.sg/2017/03/10-examples-of-curl-command-in-unix-and-Linux.html" rel="noopener ugc nofollow" target="_blank"> cURL 命令</a>来测试 REST web 服务和微服务，如本文所示:</p><div class="kv kw ez fb kx ky"><a href="https://www.java67.com/2017/10/how-to-test-restful-web-services-using.html" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">从命令行测试 RESTful Web 服务的 7 个 Linux cURL 命令示例</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">Linux 的 curl 或 command 是一个非常强大和通用的命令，它允许您发送复杂的 HTTP…</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">www.java67.com</p></div></div><div class="lh l"><div class="na l lj lk ll lh lm ln ky"/></div></div></a></div><h1 id="474a" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">创建虚拟代理</h1><p id="beb9" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">Feign 为 RestTemplate 提供了一个更好的替代方法来调用 REST API。</p><p id="a01b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">/spring-boot-microservice-currency-conversion-service/src/main/Java/com/in 28 minutes/spring boot/microservice/example/currency conversion/currencyexchangeserviceproxy . Java</p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="41ec" class="ma jt hi lw b fi mb mc l md me">package com.in28minutes.springboot.microservice.example.currencyconversion;</span><span id="463f" class="ma jt hi lw b fi mz mc l md me">import org.springframework.cloud.openfeign.FeignClient;<br/>import org.springframework.cloud.netflix.ribbon.RibbonClient;<br/>import org.springframework.web.bind.annotation.GetMapping;<br/>import org.springframework.web.bind.annotation.PathVariable;</span><span id="63ac" class="ma jt hi lw b fi mz mc l md me">@FeignClient(name="forex-service" url="localhost:8000")<br/>public interface CurrencyExchangeServiceProxy {<br/>  @GetMapping("/currency-exchange/from/{from}/to/{to}")<br/>  public CurrencyConversionBean retrieveExchangeValue<br/>    (@PathVariable("from") String from, @PathVariable("to") String to);<br/>}</span></pre><p id="2387" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们首先定义一个简单的代理。</p><ul class=""><li id="a592" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><code class="du mj mk ml lw b">@FeignClient(name="forex-service" url="localhost:8100")</code> -声明这是一个虚假的客户端，外汇服务所在的 url 是<code class="du mj mk ml lw b">localhost:8100</code></li><li id="da1b" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><code class="du mj mk ml lw b">@GetMapping("/currency-exchange/from/{from}/to/{to}")</code> -我们想要消费的服务的 URI</li></ul><h1 id="fe57" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">从微服务控制器使用假装代理</h1><p id="8310" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">使用代理进行调用非常简单。您可以在下面的代码中看到它的作用。我们所要做的就是自动连接代理并使用来调用方法。</p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="cf73" class="ma jt hi lw b fi mb mc l md me">@Autowired<br/>  private CurrencyExchangeServiceProxy proxy;</span><span id="b347" class="ma jt hi lw b fi mz mc l md me">  @GetMapping("/currency-converter-feign/from/{from}/to/{to}/quantity/{quantity}")<br/>  public CurrencyConversionBean convertCurrencyFeign(@PathVariable String from, @PathVariable String to,<br/>      @PathVariable BigDecimal quantity) {</span><span id="8ef4" class="ma jt hi lw b fi mz mc l md me">    CurrencyConversionBean response = proxy.retrieveExchangeValue(from, to);</span><span id="a764" class="ma jt hi lw b fi mz mc l md me">    logger.info("{}", response);</span><span id="c09e" class="ma jt hi lw b fi mz mc l md me">    return new CurrencyConversionBean(response.getId(), from, to, response.getConversionMultiple(), quantity,<br/>        quantity.multiply(response.getConversionMultiple()), response.getPort());<br/>  }</span></pre><h1 id="b16d" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">启用伪装客户端</h1><p id="06f1" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">在我们能够使用 Feign 之前，我们需要在定义客户端代理的适当包中使用<code class="du mj mk ml lw b">@EnableFeignClients</code>注释来启用它。</p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="c49c" class="ma jt hi lw b fi mb mc l md me">@SpringBootApplication<br/>@EnableFeignClients("com.in28minutes.springboot.microservice.example.currencyconversion")<br/>@EnableDiscoveryClient<br/>public class SpringBootMicroserviceCurrencyConversionApplication {</span><span id="4e79" class="ma jt hi lw b fi mz mc l md me">  public static void main(String[] args) {<br/>    SpringApplication.run(SpringBootMicroserviceCurrencyConversionApplication.class, args);<br/>  }<br/>}</span></pre><h1 id="30b1" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">使用 Feign 测试微服务</h1><p id="f47d" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">进入<a class="ae jm" href="http://localhost:8100/currency-converter-feign/from/EUR/to/INR/quantity/10000" rel="noopener ugc nofollow" target="_blank">http://localhost:8100/currency-converter-feign/from/EUR/to/INR/quantity/10000</a></p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="0266" class="ma jt hi lw b fi mb mc l md me">{<br/>  id: 10002,<br/>  from: "EUR",<br/>  to: "INR",<br/>  conversionMultiple: 75,<br/>  quantity: 10000,<br/>  totalCalculatedAmount: 750000,<br/>  port: 8000,<br/>}</span></pre><h1 id="db9a" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">摘要</h1><p id="feab" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">我们现在已经创建了两个微服务，并在它们之间建立了通信。</p><figure class="lr ls lt lu fd mg er es paragraph-image"><div class="er es mf"><img src="../Images/8c77306fb4c4f4cf69f7c9be682d1035.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/0*LgiI6PaGzoh-59Nm.png"/></div></figure><p id="c699" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，我们在 CCS 中硬编码 FS 的 url。这意味着当启动新的 FS 实例时，我们无法在它们之间分配负载。</p><h1 id="eea8" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">后续步骤</h1><p id="93e1" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">在下一部分中，我们将使用 Ribbon 启用客户端负载分布。</p><p id="73ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Spring Boot 的微服务</p><ul class=""><li id="b8e1" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">第 1 部分— <a class="ae jm" href="https://www.springboottutorial.com/creating-microservices-with-spring-boot-part-1-getting-started" rel="noopener ugc nofollow" target="_blank">微服务架构入门</a></li><li id="66af" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">第二部分— <a class="ae jm" href="https://www.springboottutorial.com/creating-microservices-with-spring-boot-part-2-forex-microservice" rel="noopener ugc nofollow" target="_blank">打造外汇微服务</a></li><li id="c1fa" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">当前部分—第 3 部分—创建货币兑换微服务</li><li id="995a" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">第 4 部分— <a class="ae jm" href="https://www.springboottutorial.com/microservices-with-spring-boot-part-4-ribbon-for-load-balancing" rel="noopener ugc nofollow" target="_blank">使用 Ribbon 实现负载平衡</a></li><li id="5aa3" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">第 5 部分— <a class="ae jm" href="https://www.springboottutorial.com/microservices-with-spring-boot-part-5-eureka-naming-server" rel="noopener ugc nofollow" target="_blank">使用 Eureka 命名服务器</a></li></ul><p id="de39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你等不及了，想了解更多关于微服务的知识，可以看看这个<a class="ae jm" href="https://dev.to/javinpaul/top-10-courses-to-learn-spring-boot-and-microservices-for-java-programmers-3hjg" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">用 Spring </strong> </a>学习微服务的最佳课程列表:</p><div class="kv kw ez fb kx ky"><a href="https://dev.to/javinpaul/top-10-courses-to-learn-spring-boot-and-microservices-for-java-programmers-3hjg" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">Java 程序员学习 Spring Boot 和微服务的 10 大课程</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">披露:这个帖子包括附属链接；如果您从…购买产品或服务，我可能会收到报酬</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">开发到</p></div></div><div class="lh l"><div class="nb l lj lk ll lh lm ln ky"/></div></div></a></div><h1 id="7da9" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">完整的代码示例</h1><h1 id="f53b" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">/spring-boot-microservice-currency-conversion-service/POM . XML</h1><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="d5d1" class="ma jt hi lw b fi mb mc l md me"><em class="mq">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</em><br/>&lt;project  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br/>  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;<br/>  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><span id="2e99" class="ma jt hi lw b fi mz mc l md me">  &lt;groupId&gt;com.in28minutes.springboot.microservice.example.currency-conversion&lt;/groupId&gt;<br/>  &lt;artifactId&gt;spring-boot-microservice-currency-conversion&lt;/artifactId&gt;<br/>  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;<br/>  &lt;packaging&gt;jar&lt;/packaging&gt;</span><span id="6122" class="ma jt hi lw b fi mz mc l md me">  &lt;name&gt;spring-boot-microservice-currency-conversion&lt;/name&gt;<br/>  &lt;description&gt;Microservices with Spring Boot and Spring Cloud - Currency Conversion Service&lt;/description&gt;</span><span id="03f3" class="ma jt hi lw b fi mz mc l md me">  &lt;parent&gt;<br/>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;<br/>    &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;<br/>    &lt;relativePath /&gt; <em class="mq">&lt;!-- lookup parent from repository --&gt;</em><br/>  &lt;/parent&gt;</span><span id="2c71" class="ma jt hi lw b fi mz mc l md me">  &lt;properties&gt;<br/>    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;<br/>    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;<br/>    &lt;java.version&gt;1.8&lt;/java.version&gt;<br/>    &lt;spring-cloud.version&gt;Finchley.M8&lt;/spring-cloud.version&gt;<br/>  &lt;/properties&gt;</span><span id="5630" class="ma jt hi lw b fi mz mc l md me">  &lt;dependencies&gt;</span><span id="666b" class="ma jt hi lw b fi mz mc l md me">    &lt;dependency&gt;<br/>      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;<br/>    &lt;/dependency&gt;</span><span id="c48f" class="ma jt hi lw b fi mz mc l md me">    &lt;dependency&gt;<br/>      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;<br/>      &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;<br/>    &lt;/dependency&gt;</span><span id="3b4c" class="ma jt hi lw b fi mz mc l md me">    &lt;dependency&gt;<br/>      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>      &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br/>      &lt;scope&gt;runtime&lt;/scope&gt;<br/>    &lt;/dependency&gt;<br/>    &lt;dependency&gt;<br/>      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;<br/>      &lt;scope&gt;test&lt;/scope&gt;<br/>    &lt;/dependency&gt;<br/>  &lt;/dependencies&gt;</span><span id="2369" class="ma jt hi lw b fi mz mc l md me">  &lt;dependencyManagement&gt;<br/>    &lt;dependencies&gt;<br/>      &lt;dependency&gt;<br/>        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;<br/>        &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;<br/>        &lt;version&gt;${spring-cloud.version}&lt;/version&gt;<br/>        &lt;type&gt;pom&lt;/type&gt;<br/>        &lt;scope&gt;import&lt;/scope&gt;<br/>      &lt;/dependency&gt;<br/>    &lt;/dependencies&gt;<br/>  &lt;/dependencyManagement&gt;</span><span id="356a" class="ma jt hi lw b fi mz mc l md me">  &lt;build&gt;<br/>    &lt;plugins&gt;<br/>      &lt;plugin&gt;<br/>        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;<br/>      &lt;/plugin&gt;<br/>    &lt;/plugins&gt;<br/>  &lt;/build&gt;</span><span id="278f" class="ma jt hi lw b fi mz mc l md me">  &lt;repositories&gt;<br/>    &lt;repository&gt;<br/>      &lt;id&gt;spring-snapshots&lt;/id&gt;<br/>      &lt;name&gt;Spring Snapshots&lt;/name&gt;<br/>      &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;<br/>      &lt;snapshots&gt;<br/>        &lt;enabled&gt;true&lt;/enabled&gt;<br/>      &lt;/snapshots&gt;<br/>    &lt;/repository&gt;<br/>    &lt;repository&gt;<br/>      &lt;id&gt;spring-milestones&lt;/id&gt;<br/>      &lt;name&gt;Spring Milestones&lt;/name&gt;<br/>      &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;<br/>      &lt;snapshots&gt;<br/>        &lt;enabled&gt;false&lt;/enabled&gt;<br/>      &lt;/snapshots&gt;<br/>    &lt;/repository&gt;<br/>  &lt;/repositories&gt;</span><span id="72e0" class="ma jt hi lw b fi mz mc l md me">  &lt;pluginRepositories&gt;<br/>    &lt;pluginRepository&gt;<br/>      &lt;id&gt;spring-snapshots&lt;/id&gt;<br/>      &lt;name&gt;Spring Snapshots&lt;/name&gt;<br/>      &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;<br/>      &lt;snapshots&gt;<br/>        &lt;enabled&gt;true&lt;/enabled&gt;<br/>      &lt;/snapshots&gt;<br/>    &lt;/pluginRepository&gt;<br/>    &lt;pluginRepository&gt;<br/>      &lt;id&gt;spring-milestones&lt;/id&gt;<br/>      &lt;name&gt;Spring Milestones&lt;/name&gt;<br/>      &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;<br/>      &lt;snapshots&gt;<br/>        &lt;enabled&gt;false&lt;/enabled&gt;<br/>      &lt;/snapshots&gt;<br/>    &lt;/pluginRepository&gt;<br/>  &lt;/pluginRepositories&gt;<br/></span><span id="868c" class="ma jt hi lw b fi mz mc l md me">&lt;/project&gt;</span></pre></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><h1 id="ff2c" class="js jt hi bd ju jv nj jx jy jz nk kb kc kd nl kf kg kh nm kj kk kl nn kn ko kp bi translated">/spring-boot-microservice-currency-conversion-service/src/main/Java/com/in 28 minutes/spring boot/microservice/example/currency conversion/currencyconversionbean . Java</h1><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="b681" class="ma jt hi lw b fi mb mc l md me">package com.in28minutes.springboot.microservice.example.currencyconversion;<br/>import java.math.BigDecimal;</span><span id="2489" class="ma jt hi lw b fi mz mc l md me">public class CurrencyConversionBean {<br/>  private Long id;<br/>  private String from;<br/>  private String to;<br/>  private BigDecimal conversionMultiple;<br/>  private BigDecimal quantity;<br/>  private BigDecimal totalCalculatedAmount;<br/>  private int port;</span><span id="ea47" class="ma jt hi lw b fi mz mc l md me">  public CurrencyConversionBean() {</span><span id="e0a8" class="ma jt hi lw b fi mz mc l md me">  }</span><span id="6cc7" class="ma jt hi lw b fi mz mc l md me">  public CurrencyConversionBean(Long id, String from, String to, BigDecimal conversionMultiple, BigDecimal quantity,<br/>      BigDecimal totalCalculatedAmount, int port) {<br/>    super();<br/>    this.id = id;<br/>    this.from = from;<br/>    this.to = to;<br/>    this.conversionMultiple = conversionMultiple;<br/>    this.quantity = quantity;<br/>    this.totalCalculatedAmount = totalCalculatedAmount;<br/>    this.port = port;<br/>  }</span><span id="cc0d" class="ma jt hi lw b fi mz mc l md me">  public Long getId() {<br/>    return id;<br/>  }</span><span id="1fc8" class="ma jt hi lw b fi mz mc l md me">  public void setId(Long id) {<br/>    this.id = id;<br/>  }</span><span id="2751" class="ma jt hi lw b fi mz mc l md me">  public String getFrom() {<br/>    return from;<br/>  }</span><span id="5af6" class="ma jt hi lw b fi mz mc l md me">  public void setFrom(String from) {<br/>    this.from = from;<br/>  }</span><span id="2f7d" class="ma jt hi lw b fi mz mc l md me">  public String getTo() {<br/>    return to;<br/>  }</span><span id="43d8" class="ma jt hi lw b fi mz mc l md me">  public void setTo(String to) {<br/>    this.to = to;<br/>  }</span><span id="b61c" class="ma jt hi lw b fi mz mc l md me">  public BigDecimal getConversionMultiple() {<br/>    return conversionMultiple;<br/>  }</span><span id="0535" class="ma jt hi lw b fi mz mc l md me">  public void setConversionMultiple(BigDecimal conversionMultiple) {<br/>    this.conversionMultiple = conversionMultiple;<br/>  }</span><span id="1a86" class="ma jt hi lw b fi mz mc l md me">  public BigDecimal getQuantity() {<br/>    return quantity;<br/>  }</span><span id="77d4" class="ma jt hi lw b fi mz mc l md me">  public void setQuantity(BigDecimal quantity) {<br/>    this.quantity = quantity;<br/>  }</span><span id="8a7d" class="ma jt hi lw b fi mz mc l md me">  public BigDecimal getTotalCalculatedAmount() {<br/>    return totalCalculatedAmount;<br/>  }</span><span id="cb2f" class="ma jt hi lw b fi mz mc l md me">  public void setTotalCalculatedAmount(BigDecimal totalCalculatedAmount) {<br/>    this.totalCalculatedAmount = totalCalculatedAmount;<br/>  }</span><span id="f274" class="ma jt hi lw b fi mz mc l md me">  public int getPort() {<br/>    return port;<br/>  }</span><span id="9954" class="ma jt hi lw b fi mz mc l md me">  public void setPort(int port) {<br/>    this.port = port;<br/>  }</span><span id="bd2b" class="ma jt hi lw b fi mz mc l md me">}</span></pre></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><h1 id="b4d1" class="js jt hi bd ju jv nj jx jy jz nk kb kc kd nl kf kg kh nm kj kk kl nn kn ko kp bi translated">/spring-boot-microservice-currency-conversion-service/src/main/Java/com/in 28 minutes/spring boot/microservice/example/currency conversion/currencyconversioncontroller . Java</h1><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="fa4f" class="ma jt hi lw b fi mb mc l md me">package com.in28minutes.springboot.microservice.example.currencyconversion;</span><span id="4e75" class="ma jt hi lw b fi mz mc l md me">import java.math.BigDecimal;<br/>import java.util.HashMap;<br/>import java.util.Map;</span><span id="2850" class="ma jt hi lw b fi mz mc l md me">import org.slf4j.Logger;<br/>import org.slf4j.LoggerFactory;<br/>import org.springframework.beans.factory.annotation.Autowired;<br/>import org.springframework.http.ResponseEntity;<br/>import org.springframework.web.bind.annotation.GetMapping;<br/>import org.springframework.web.bind.annotation.PathVariable;<br/>import org.springframework.web.bind.annotation.RestController;<br/>import org.springframework.web.client.RestTemplate;</span><span id="9d87" class="ma jt hi lw b fi mz mc l md me">@RestController<br/>public class CurrencyConversionController {</span><span id="f847" class="ma jt hi lw b fi mz mc l md me">  private Logger logger = LoggerFactory.getLogger(this.getClass());</span><span id="432f" class="ma jt hi lw b fi mz mc l md me">  @Autowired<br/>  private CurrencyExchangeServiceProxy proxy;</span><span id="3e41" class="ma jt hi lw b fi mz mc l md me">  @GetMapping("/currency-converter/from/{from}/to/{to}/quantity/{quantity}")<br/>  public CurrencyConversionBean convertCurrency(@PathVariable String from, @PathVariable String to,<br/>      @PathVariable BigDecimal quantity) {</span><span id="fcd5" class="ma jt hi lw b fi mz mc l md me">    Map&lt;String, String&gt; uriVariables = new HashMap&lt;&gt;();<br/>    uriVariables.put("from", from);<br/>    uriVariables.put("to", to);</span><span id="4547" class="ma jt hi lw b fi mz mc l md me">    ResponseEntity&lt;CurrencyConversionBean&gt; responseEntity = new RestTemplate().getForEntity(<br/>        "http://localhost:8000/currency-exchange/from/{from}/to/{to}", CurrencyConversionBean.class,<br/>        uriVariables);</span><span id="9496" class="ma jt hi lw b fi mz mc l md me">    CurrencyConversionBean response = responseEntity.getBody();</span><span id="57f6" class="ma jt hi lw b fi mz mc l md me">    return new CurrencyConversionBean(response.getId(), from, to, response.getConversionMultiple(), quantity,<br/>        quantity.multiply(response.getConversionMultiple()), response.getPort());<br/>  }</span><span id="ec7f" class="ma jt hi lw b fi mz mc l md me">  @GetMapping("/currency-converter-feign/from/{from}/to/{to}/quantity/{quantity}")<br/>  public CurrencyConversionBean convertCurrencyFeign(@PathVariable String from, @PathVariable String to,<br/>      @PathVariable BigDecimal quantity) {</span><span id="1ac2" class="ma jt hi lw b fi mz mc l md me">    CurrencyConversionBean response = proxy.retrieveExchangeValue(from, to);</span><span id="82bb" class="ma jt hi lw b fi mz mc l md me">    logger.info("{}", response);</span><span id="f009" class="ma jt hi lw b fi mz mc l md me">    return new CurrencyConversionBean(response.getId(), from, to, response.getConversionMultiple(), quantity,<br/>        quantity.multiply(response.getConversionMultiple()), response.getPort());<br/>  }</span><span id="5e6a" class="ma jt hi lw b fi mz mc l md me">}</span></pre></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><h1 id="6330" class="js jt hi bd ju jv nj jx jy jz nk kb kc kd nl kf kg kh nm kj kk kl nn kn ko kp bi translated">/spring-boot-microservice-currency-conversion-service/src/main/Java/com/in 28 minutes/spring boot/microservice/example/currency conversion/currencyexchangeserviceproxy . Java</h1><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="6bbf" class="ma jt hi lw b fi mb mc l md me">package com.in28minutes.springboot.microservice.example.currencyconversion;</span><span id="2d73" class="ma jt hi lw b fi mz mc l md me">import org.springframework.cloud.openfeign.FeignClient;<br/>import org.springframework.cloud.netflix.ribbon.RibbonClient;<br/>import org.springframework.web.bind.annotation.GetMapping;<br/>import org.springframework.web.bind.annotation.PathVariable;</span><span id="37d1" class="ma jt hi lw b fi mz mc l md me">@FeignClient(name="forex-service" url="localhost:8000")<br/>public interface CurrencyExchangeServiceProxy {<br/>  @GetMapping("/currency-exchange/from/{from}/to/{to}")<br/>  public CurrencyConversionBean retrieveExchangeValue<br/>    (@PathVariable("from") String from, @PathVariable("to") String to);<br/>}</span></pre></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><h1 id="f380" class="js jt hi bd ju jv nj jx jy jz nk kb kc kd nl kf kg kh nm kj kk kl nn kn ko kp bi translated">/spring-boot-microservice-currency-conversion-service/src/main/Java/com/in 28 minutes/spring boot/microservice/example/currency conversion/spring boot microservice currencyconversionapplication . Java</h1><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="2a7d" class="ma jt hi lw b fi mb mc l md me">package com.in28minutes.springboot.microservice.example.currencyconversion;</span><span id="ff9b" class="ma jt hi lw b fi mz mc l md me">import org.springframework.boot.SpringApplication;<br/>import org.springframework.boot.autoconfigure.SpringBootApplication;<br/>import org.springframework.cloud.client.discovery.EnableDiscoveryClient;<br/>import org.springframework.cloud.netflix.feign.EnableFeignClients;</span><span id="8439" class="ma jt hi lw b fi mz mc l md me">@SpringBootApplication<br/>@EnableFeignClients("com.in28minutes.springboot.microservice.example.currencyconversion")<br/>public class SpringBootMicroserviceCurrencyConversionApplication {</span><span id="6dcc" class="ma jt hi lw b fi mz mc l md me">  public static void main(String[] args) {<br/>    SpringApplication.run(SpringBootMicroserviceCurrencyConversionApplication.class, args);<br/>  }<br/>}</span></pre></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><h1 id="f2e7" class="js jt hi bd ju jv nj jx jy jz nk kb kc kd nl kf kg kh nm kj kk kl nn kn ko kp bi translated">/spring-boot-微服务-货币-转换-服务/src/main/resources/application . properties</h1><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="a890" class="ma jt hi lw b fi mb mc l md me">spring.application.name=currency-conversion-service<br/>server.port=8100</span></pre></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><h1 id="5023" class="js jt hi bd ju jv nj jx jy jz nk kb kc kd nl kf kg kh nm kj kk kl nn kn ko kp bi translated">/spring-boot-microservice-currency-conversion-service/src/test/Java/com/in 28 minutes/spring boot/microservice/example/currency conversion/spring boot microservice currencyconversionapplicationtests . Java</h1><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="ca1a" class="ma jt hi lw b fi mb mc l md me">package com.in28minutes.springboot.microservice.example.currencyconversion;</span><span id="f24c" class="ma jt hi lw b fi mz mc l md me">import org.junit.Test;<br/>import org.junit.runner.RunWith;<br/>import org.springframework.boot.test.context.SpringBootTest;<br/>import org.springframework.test.context.junit4.SpringRunner;</span><span id="9d8e" class="ma jt hi lw b fi mz mc l md me">@RunWith(SpringRunner.class)<br/>@SpringBootTest<br/>public class SpringBootMicroserviceCurrencyConversionApplicationTests {</span><span id="2497" class="ma jt hi lw b fi mz mc l md me">  @Test<br/>  public void contextLoads() {<br/>  }</span><span id="2162" class="ma jt hi lw b fi mz mc l md me">}</span></pre><p id="863a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可能喜欢的其他<strong class="ih hj"> Java 和 Spring 文章</strong></p><ul class=""><li id="9ab9" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">每个 Java 开发者都应该知道的 5 个 Spring Boot 特性(<a class="ae jm" href="https://javarevisited.blogspot.com/2018/11/top-5-spring-boot-features-java.html#axzz5YFjHrt5j" rel="noopener ugc nofollow" target="_blank">特性</a>)</li><li id="f63b" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">2020 年在线掌握 Spring Boot 5 门课程(<a class="ae jm" href="https://javarevisited.blogspot.com/2018/05/top-5-courses-to-learn-spring-boot-in.html" rel="noopener ugc nofollow" target="_blank">课程</a>)</li><li id="9b55" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">Java 开发人员在 2020 年应该学会的 10 件事(<a class="ae jm" href="https://javarevisited.blogspot.com/2017/12/10-things-java-programmers-should-learn.html#axzz5atl0BngO" rel="noopener ugc nofollow" target="_blank">目标</a>)</li><li id="9bfd" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">Java 开发人员在日常生活中使用的 10 个工具(<a class="ae jm" href="http://javarevisited.blogspot.sg/2017/03/10-tools-used-by-java-programming-Developers.html#axzz55lrMRnNC" rel="noopener ugc nofollow" target="_blank">工具</a>)</li><li id="cd2c" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">2020 年成为更好的 Java 开发人员的 10 个技巧</li><li id="d068" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">Java 程序员可以从 Spring 学习的 3 个最佳实践(<a class="ae jm" href="https://javarevisited.blogspot.com/2018/06/3-best-practices-java-programmers-can-learn-from-spring-framework.html#axzz5K0PIOpHD" rel="noopener ugc nofollow" target="_blank">最佳实践</a>)</li><li id="1b33" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">2020 年学习 Spring Boot 和春云的 5 门课程(<a class="ae jm" href="https://javarevisited.blogspot.com/2018/07/top-5-books-to-learn-spring-boot-and-spring-cloud-java.html" rel="noopener ugc nofollow" target="_blank">门课程</a>)</li><li id="3c7a" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">改变 Spring Boot Tomcat 端口的 3 种方法(<a class="ae jm" href="https://www.java67.com/2019/07/spring-boot-3-ways-to-change-port-of-tomcat.html" rel="noopener ugc nofollow" target="_blank">教程</a>)</li><li id="1f2b" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">Java 开发者应该学习的 10 个 Spring MVC 注解(<a class="ae jm" href="https://www.java67.com/2019/04/top-10-spring-mvc-and-rest-annotations-examples-java.html" rel="noopener ugc nofollow" target="_blank">注解</a>)</li><li id="9133" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">15 Spring Boot Java 程序员面试问题(<a class="ae jm" href="https://www.java67.com/2018/06/top-15-spring-boot-interview-questions-answers-java-jee-programmers.html" rel="noopener ugc nofollow" target="_blank">问题</a>)</li></ul><div class="kv kw ez fb kx ky"><a href="https://javarevisited.blogspot.com/2019/10/the-java-developer-roadmap.html#123" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">2020 年 Java 开发者路线图</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">大家好，首先祝大家 2020 新年快乐。我已经分享了很多成为网络的路线图…</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">javarevisited.blogspot.com</p></div></div><div class="lh l"><div class="no l lj lk ll lh lm ln ky"/></div></div></a></div><div class="kv kw ez fb kx ky"><a rel="noopener follow" target="_blank" href="/javarevisited/10-advanced-spring-boot-courses-for-experienced-java-developers-5e57606816bd"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">面向有经验的 Java 开发人员的 10 门高级 Spring Boot 课程</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">高级 Spring Boot 课程为有经验的 Java 开发人员学习 Spring Boot 测试，云和容器…</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">medium.com</p></div></div><div class="lh l"><div class="np l lj lk ll lh lm ln ky"/></div></div></a></div></div></div>    
</body>
</html>